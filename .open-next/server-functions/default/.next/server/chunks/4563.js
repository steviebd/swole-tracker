"use strict";exports.id=4563,exports.ids=[4563],exports.modules={91850:(a,b,c)=>{c.d(b,{z:()=>f});var d=c(77196);let e=(a,b)=>{try{if("undefined"==typeof navigator||!0!==navigator.onLine)return;d.Ay.capture(a,b??{})}catch{}},f={pageView:(a,b)=>{try{e("$pageview",{$current_url:void 0,page:a,...b})}catch{}},workoutStarted:(a,b)=>{e("workout_started",{templateId:a,templateName:b,timestamp:new Date().toISOString()})},workoutCompleted:(a,b,c)=>{e("workout_completed",{sessionId:a,duration:b,exerciseCount:c,timestamp:new Date().toISOString()})},exerciseLogged:(a,b,c,d)=>{e("exercise_logged",{exerciseId:a,exerciseName:b,sets:c,weight:d,timestamp:new Date().toISOString()})},templateCreated:(a,b)=>{e("template_created",{templateId:a,exerciseCount:b,timestamp:new Date().toISOString()})},templateDeleted:a=>{e("template_deleted",{templateId:a,timestamp:new Date().toISOString()})},templateEdited:(a,b)=>{e("template_edited",{templateId:a,exerciseCount:b,timestamp:new Date().toISOString()})},templateDuplicated:a=>{e("template_duplicated",{templateId:a,timestamp:new Date().toISOString()})},weightUnitChanged:a=>{e("weight_unit_changed",{unit:a,timestamp:new Date().toISOString()})},error:(a,b)=>{e("error",{error:a.message,stack:a.stack,context:b,timestamp:new Date().toISOString()})},featureUsed:(a,b)=>{e("feature_used",{feature:a,...b,timestamp:new Date().toISOString()})},aiDebriefViewed:(a,b,c)=>{e("ai_debrief.viewed",{sessionId:a,version:b,streakLength:c,timestamp:new Date().toISOString()})},aiDebriefRegenerated:(a,b,c)=>{e("ai_debrief.regenerated",{sessionId:a,version:b,reason:c,timestamp:new Date().toISOString()})},aiDebriefDismissed:(a,b,c)=>{e("ai_debrief.dismissed",{sessionId:a,version:b,pinned:c,timestamp:new Date().toISOString()})}}},94563:(a,b,c)=>{c.r(b),c.d(b,{RecentWorkouts:()=>H});var d=c(21124),e=c(38301),f=c(3991),g=c.n(f),h=c(42378),i=c(75094),j=c(85607),k=c(23339);let l=(0,k.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m=(0,k.A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var n=c(72567),o=c(15303),p=c(14263),q=c(47434),r=c(91850),s=c(44943);let t=a=>{if("number"==typeof a)return Number.isFinite(a)?a:0;if("string"==typeof a){let b=parseFloat(a);return Number.isFinite(b)?b:0}return 0},u=(a,b,c)=>Number.isFinite(a)?b===c?a:"lbs"===b&&"kg"===c?a/2.2046226218:"kg"===b&&"lbs"===c?2.2046226218*a:a:0,v=a=>{if(!a)return null;if(a instanceof Date)return new Date(a);let b=new Date(a);return Number.isNaN(b.getTime())?null:b},w=a=>{let b=(a=>{if(!a.exercises?.length)return"kg";let b=0,c=0;for(let d of a.exercises)d?.unit==="lbs"?c+=1:d?.unit==="kg"&&(b+=1);return c>b?"lbs":"kg"})(a),c=0,d=0;for(let e of a.exercises??[]){let a=e?.sets??1,f=e?.reps??0,g=u(t(e?.weight??e?.one_rm_estimate),e?.unit,b),h=e?.volume_load?u(t(e.volume_load),e?.unit,b):null;Number.isFinite(a)&&Number.isFinite(f)&&a>0&&f>0?(Number.isFinite(g)&&g>0&&(d+=h??g*f*a),c+=a):Number.isFinite(a)&&a>0&&(c+=a)}let e=(a=>{if("number"==typeof a.duration){let b=a.duration;return Number.isFinite(b)?b:null}if("number"==typeof a.durationMinutes){let b=a.durationMinutes;return Number.isFinite(b)?b:null}let b=a.perf_metrics;if(b&&"object"==typeof b){let a=b.durationMinutes;if("number"==typeof a&&Number.isFinite(a))return a}return null})(a),f=e??(c>0?3.5*c:null),g=(a=>{if("number"==typeof a.exerciseCount)return Math.max(0,a.exerciseCount);if(!a.exercises?.length)return 0;let b=new Set;for(let c of a.exercises)c?.exerciseName&&b.add(c.exerciseName);return b.size})(a),h=[];for(null!==e?h.push({label:"Duration",value:`${Math.max(1,Math.round(e))} min`}):null!==f&&h.push({label:"Duration",value:`~${Math.max(1,Math.round(f))} min`}),d>0?h.push({label:"Volume",value:((a,b)=>a<=0?`0 ${b}`:a>=1e4?`${Math.round(a/1e3)}k ${b}`:a>=1e3?`${(a/1e3).toFixed(1)}k ${b}`:`${Math.round(a).toLocaleString()} ${b}`)(d,b)}):c>0&&h.push({label:"Sets",value:c.toString()}),g>0&&h.push({label:"Exercises",value:g.toString()});h.length<3;)h.push({label:"—",value:"—"});return{exerciseCount:g,totalSets:c,totalVolume:d,volumeUnit:b,durationMinutes:e,estimatedDurationMinutes:f,metrics:h.slice(0,3)}};var x=c(62186),y=c(35284),z=c(99187),A=c(75234);let B=(0,k.A)("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),C=(0,k.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var D=c(86228);let E=e.forwardRef(({workoutName:a,date:b,metrics:c,onRepeat:e,onViewDetails:f,isRecent:g=!1,className:h,...j},k)=>(0,d.jsx)(i.P.div,{ref:k,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.01,y:-2},transition:{duration:.2,ease:[.4,0,.2,1]},className:(0,s.cn)("group relative",h),...j,children:(0,d.jsxs)(D.o,{className:"p-6",children:[(0,d.jsxs)("div",{className:"relative z-10 space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-foreground leading-tight truncate",children:a}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:(a=>{try{let b=new Date(a),c=new Date,d=c.getTime()-b.getTime(),e=Math.floor(d/864e5);if(0===e)return"Today";if(1===e)return"Yesterday";if(e<7)return`${e} days ago`;else return b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:b.getFullYear()!==c.getFullYear()?"numeric":void 0})}catch{return a}})(b)})]}),g&&(0,d.jsxs)(i.P.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:300,damping:20,delay:.1},className:"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold",style:{background:"var(--gradient-universal-action-primary)",color:"white"},children:[(0,d.jsx)(A.A,{className:"w-3 h-3"}),"New!"]})]}),(0,d.jsx)("div",{className:"grid grid-cols-3 gap-4",children:c.map((a,b)=>(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(i.P.div,{className:"text-xl font-bold text-foreground",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1+.05*b},children:a.value}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground font-medium mt-1",children:a.label})]},`${a.label}-${b}`))}),(0,d.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,d.jsxs)(i.P.button,{onClick:e,className:(0,s.cn)("flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg","text-sm font-medium transition-all duration-200","border border-default bg-surface-secondary text-content-primary","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 focus-visible:ring-offset-2 focus-visible:ring-offset-background","min-h-[44px]"),"data-state-layer":"surface",whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.1},"aria-label":`Repeat ${a} workout`,children:[(0,d.jsx)(B,{className:"w-4 h-4"}),"Repeat"]}),(0,d.jsxs)(i.P.button,{onClick:f,className:(0,s.cn)("flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg","text-sm font-medium transition-all duration-200","border border-[color:color-mix(in srgb, var(--md-sys-color-primary) 28%, transparent 72%)]","bg-[color:color-mix(in srgb, var(--md-sys-color-primary) 16%, transparent 84%)] text-interactive-primary","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background","min-h-[44px]"),"data-state-layer":"primary",whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},transition:{duration:.1},"aria-label":`View details for ${a} workout`,children:[(0,d.jsx)(C,{className:"w-4 h-4"}),"Details"]})]})]}),(0,d.jsx)("div",{className:"absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10",style:{boxShadow:"0 10px 25px -5px rgba(255, 138, 76, 0.1)"},"aria-hidden":"true"})]})}));E.displayName="WorkoutCard";let F={card:3,dashboard:5},G=(a,b)=>{let c=a.template;if(c&&"object"==typeof c&&!Array.isArray(c)&&"string"==typeof c.name){let a=c.name.trim();if(a.length>0)return a}return b},H=e.forwardRef(({className:a,limit:b,variant:c="card"},f)=>{let g=(0,h.useRouter)(),i=q.F.useUtils(),j=b??F[c],{data:k,isLoading:l,error:m}=q.F.workouts.getRecent.useQuery({limit:j}),n=q.F.workouts.start.useMutation(),[o,p]=e.useState(null),s=e.useCallback(async a=>{if(!a?.templateId)return void console.error("Cannot repeat workout without templateId",a);if(!n.isPending){p(a.id);try{let b=await n.mutateAsync({templateId:a.templateId,workoutDate:new Date});r.z.workoutStarted(a.templateId.toString(),G(a,"Repeated Workout")),r.z.featureUsed("repeat_workout",{templateId:a.templateId,workoutId:a.id}),i.workouts.getRecent.invalidate(),g.push(`/workout/session/${b.sessionId}`)}catch(a){console.error("Failed to repeat workout",a),alert("Couldn't start that workout. Please try again.")}finally{p(null)}}},[n,g,i]),t=e.useCallback(a=>{g.push(`/workouts/${a}`)},[g]),u=e.useCallback(()=>{g.push("/workout/start")},[g]);return"dashboard"===c?(0,d.jsx)(I,{className:a,error:m,forwardedRef:f,isLoading:l,limit:j,onRepeat:s,onStartNewWorkout:u,onViewDetails:t,repeatPending:n.isPending,repeatingWorkoutId:o,workouts:k}):(0,d.jsx)(J,{className:a,error:m,forwardedRef:f,isLoading:l,limit:j,onRepeat:s,repeatPending:n.isPending,repeatingWorkoutId:o,workouts:k})});H.displayName="RecentWorkouts";let I=({className:a,error:b,forwardedRef:c,isLoading:e,limit:f,onStartNewWorkout:h,onRepeat:k,onViewDetails:n,repeatPending:o,repeatingWorkoutId:p,workouts:q})=>b?(0,d.jsxs)("div",{ref:c,className:(0,s.cn)("space-y-4",a),children:[(0,d.jsx)("h2",{className:"text-foreground mb-4 text-xl font-semibold",children:"Recent Workouts"}),(0,d.jsxs)("div",{className:"border-border text-muted-foreground rounded-lg border border-dashed p-6 text-center",children:[(0,d.jsx)("p",{children:"Unable to load recent workouts"}),(0,d.jsx)("p",{className:"mt-2 text-sm",children:"Please try again later."})]})]}):e?(0,d.jsxs)("div",{ref:c,className:(0,s.cn)("space-y-4 sm:space-y-6",a),children:[(0,d.jsx)(i.P.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"font-display text-foreground mb-4 text-xl font-bold sm:mb-6 sm:text-2xl",children:"Recent Workouts"}),(0,d.jsx)("div",{className:"space-y-3 sm:space-y-4",children:[void 0,void 0,void 0].map((a,b)=>(0,d.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.2,delay:.05*b},className:"animate-pulse",children:(0,d.jsx)("div",{className:"glass-surface bg-muted h-[180px] rounded-xl sm:h-[200px]"})},b))})]}):q?.length?(0,d.jsxs)("div",{ref:c,className:(0,s.cn)("space-y-4 sm:space-y-6",a),children:[(0,d.jsxs)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[(0,d.jsx)("h2",{className:"font-display text-foreground text-xl font-bold sm:text-2xl",children:"Recent Workouts"}),q.length>=f&&(0,d.jsx)(i.P.div,{whileHover:{x:2},whileTap:{scale:.95},children:(0,d.jsxs)(g(),{href:"/workouts",className:(0,s.cn)("inline-flex items-center gap-2 rounded-lg px-3 py-2","text-primary text-sm font-medium transition-all duration-200","hover:bg-primary/5 hover:text-primary/80","focus:ring-primary/20 focus:ring-2 focus:outline-none"),children:["View All",(0,d.jsx)(m,{className:"h-4 w-4"})]})})]}),(0,d.jsx)(j.N,{mode:"popLayout",children:(0,d.jsx)("div",{className:"space-y-3 sm:space-y-4",children:q.map((a,b)=>{let c=w(a),e=(a=>{if(!a)return new Date().toISOString();if(a instanceof Date)return a.toISOString();let b=new Date(a);return Number.isNaN(b.getTime())?new Date().toISOString():b.toISOString()})(a.workoutDate??a.createdAt),f=((a,b=24)=>{let c=v(a);return!!c&&(new Date().getTime()-c.getTime())/36e5<=b})(a.createdAt??a.workoutDate),g=o&&p===a.id;return(0,d.jsx)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:.05*b,ease:[.4,0,.2,1]},children:(0,d.jsx)(E,{workoutName:G(a,"Unnamed Workout"),date:e,metrics:c.metrics,isRecent:f,onRepeat:()=>{g||k(a)},onViewDetails:()=>n(a.id)})},a.id)})})})]}):(0,d.jsxs)("div",{ref:c,className:(0,s.cn)("space-y-4 sm:space-y-6",a),children:[(0,d.jsx)(i.P.h2,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"font-display text-foreground mb-4 text-xl font-bold sm:mb-6 sm:text-2xl",children:"Recent Workouts"}),(0,d.jsxs)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},className:"glass-surface relative overflow-hidden rounded-xl p-8 text-center sm:p-12",children:[(0,d.jsx)("div",{className:"absolute inset-0 opacity-5",style:{background:"var(--gradient-universal-action-primary)"},"aria-hidden":"true"}),(0,d.jsxs)("div",{className:"relative z-10",children:[(0,d.jsx)(i.P.div,{className:"mb-6 text-5xl sm:text-6xl",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,damping:20,delay:.2},children:"\uD83D\uDCAA"}),(0,d.jsx)("h3",{className:"font-display text-foreground mb-2 text-lg font-bold sm:text-xl",children:"No workouts yet"}),(0,d.jsx)("p",{className:"text-muted-foreground mx-auto mb-6 max-w-sm text-sm",children:"Start your first workout to see it appear here and begin tracking your fitness journey."}),(0,d.jsxs)(i.P.button,{onClick:h,className:(0,s.cn)("inline-flex items-center gap-2 rounded-xl px-6 py-3 text-white","font-medium transition-all duration-200 hover:scale-105 active:scale-95","focus:ring-primary focus:ring-2 focus:ring-offset-2 focus:outline-none","shadow-lg hover:shadow-xl"),style:{background:"var(--gradient-universal-action-primary)"},whileHover:{y:-2},whileTap:{scale:.95},children:[(0,d.jsx)(l,{className:"h-5 w-5"}),"Start Your First Workout"]})]})]})]}),J=({className:a,error:b,forwardedRef:c,isLoading:e,onRepeat:f,repeatPending:h,repeatingWorkoutId:i,workouts:j})=>e?(0,d.jsx)("div",{ref:c,className:(0,s.cn)(a),children:(0,d.jsxs)(x.Zp,{className:"border-0 shadow-lg",children:[(0,d.jsx)(x.aR,{className:"pb-4",children:(0,d.jsx)(x.ZB,{className:"font-serif text-2xl font-black",children:"Recent Workouts"})}),(0,d.jsx)(x.Wu,{className:"space-y-4",children:[void 0,void 0,void 0].map((a,b)=>(0,d.jsx)("div",{className:"bg-muted/30 rounded-xl p-4",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{className:"skeleton skeleton-text h-6 w-32"}),(0,d.jsx)("div",{className:"skeleton skeleton-text h-4 w-48"}),(0,d.jsx)("div",{className:"skeleton skeleton-text h-4 w-56"})]})},b))})]})}):b||!j?.length?(0,d.jsx)("div",{ref:c,className:(0,s.cn)(a),children:(0,d.jsxs)(x.Zp,{className:"border-0 shadow-lg",children:[(0,d.jsx)(x.aR,{className:"pb-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(x.ZB,{className:"font-serif text-2xl font-black",children:"Recent Workouts"}),(0,d.jsx)(g(),{href:"/workouts",children:(0,d.jsx)(y.Button,{variant:"outline",size:"sm",children:"View All"})})]})}),(0,d.jsxs)(x.Wu,{className:"py-8 text-center",children:[(0,d.jsx)("p",{className:"text-muted-foreground",children:"No recent workouts found."}),(0,d.jsx)(g(),{href:"/templates",children:(0,d.jsx)(y.Button,{className:"mt-4",variant:"outline",children:"Start Your First Workout"})})]})]})}):(0,d.jsx)("div",{ref:c,className:(0,s.cn)(a),children:(0,d.jsxs)(x.Zp,{className:"border-0 shadow-lg",children:[(0,d.jsx)(x.aR,{className:"pb-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(x.ZB,{className:"font-serif text-2xl font-black",children:"Recent Workouts"}),(0,d.jsx)(g(),{href:"/workouts",children:(0,d.jsx)(y.Button,{variant:"outline",size:"sm",children:"View All"})})]})}),(0,d.jsx)(x.Wu,{className:"space-y-4",children:j.map(a=>{let b=w(a),c=((a,b=new Date)=>{let c=v(a);if(!c)return"Unknown";let d=Math.floor((b.getTime()-c.getTime())/864e5);return 0===d?"Today":1===d?"Yesterday":d<7?`${d} days ago`:c.toLocaleDateString("en-US",{month:"short",day:"numeric",year:c.getFullYear()!==b.getFullYear()?"numeric":void 0})})(a.workoutDate??a.createdAt),e=((a,b)=>null!==a?`${Math.max(1,Math.round(a))} min`:null!==b?`~${Math.max(1,Math.round(b))} min`:"-- min")(b.durationMinutes,b.estimatedDurationMinutes),j=[`${b.exerciseCount} exercise${1===b.exerciseCount?"":"s"}`,`${b.totalSets} set${1===b.totalSets?"":"s"}`],k=b.metrics.find(a=>"Volume"===a.label);k&&j.push(k.value);let l=h&&i===a.id;return(0,d.jsxs)("div",{className:"bg-muted/30 hover:bg-muted/50 flex items-center justify-between rounded-xl p-4 transition-colors",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("h4",{className:"text-foreground font-semibold",children:G(a,"Workout")}),(0,d.jsx)(z.E,{variant:"secondary",className:"from-chart-1 to-chart-3 text-primary-foreground bg-gradient-to-r",children:"completed"})]}),(0,d.jsxs)("div",{className:"text-muted-foreground flex items-center gap-4 text-sm",children:[(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(n.A,{className:"h-4 w-4"}),c]}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(o.A,{className:"h-4 w-4"}),e]})]}),(0,d.jsx)("div",{className:"text-muted-foreground text-sm",children:j.join(" • ")})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(g(),{href:`/workout/session/${a.id}`,children:(0,d.jsx)(y.Button,{variant:"ghost",size:"sm",children:"View"})}),(0,d.jsx)(y.Button,{variant:"outline",size:"sm",onClick:()=>{l||f(a)},disabled:l,children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Repeating"]}):"Repeat"})]})]},a.id)})})]})})}};