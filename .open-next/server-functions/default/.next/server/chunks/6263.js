exports.id=6263,exports.ids=[6263],exports.modules={1002:(a,b,c)=>{"use strict";c.d(b,{G:()=>g,s:()=>f});var d=c(21124),e=c(38301);function f({children:a,onEscape:b,initialFocusRef:c,preventScroll:f}){let g=(0,e.useRef)(null);return(0,d.jsx)("div",{ref:g,tabIndex:-1,children:a})}function g(){let a=(0,e.useRef)(null);return{triggerRef:a,restoreFocus:()=>{try{let b=a.current;b&&"function"==typeof b.focus&&b.focus()}catch{}}}}},4106:(a,b,c)=>{Promise.resolve().then(c.bind(c,22673)),Promise.resolve().then(c.bind(c,61706)),Promise.resolve().then(c.bind(c,9822)),Promise.resolve().then(c.bind(c,50588)),Promise.resolve().then(c.bind(c,23775)),Promise.resolve().then(c.bind(c,91591))},8172:(a,b,c)=>{"use strict";c.d(b,{Ib:()=>e});var d=c(38301);function e(){let[a,b]=(0,d.useState)(!1);return a}},9822:(a,b,c)=>{"use strict";c.d(b,{AuthProvider:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/providers/AuthProvider.tsx","AuthProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/providers/AuthProvider.tsx","useAuth")},15345:(a,b,c)=>{"use strict";let d;c.d(b,{Ik:()=>j,clearAllOfflineData:()=>l,vp:()=>k,wM:()=>i}),c(46497);var e=c(34245),f=(c(40170),c(58197));let g={MAX_CACHE_SIZE:5242880};class h{getCacheSize(){return 0}getAvailableSpace(){return g.MAX_CACHE_SIZE-this.getCacheSize()}performCacheCleanup(a=!1){}handleQuotaExceeded(){this.isMemoryOnlyMode=!0;try{localStorage.removeItem("swole-tracker-cache-v3"),this.trackCacheEvent("quota_exceeded_fallback",{previousSize:this.getCacheSize()});let a=(0,f.getCacheAnalytics)();a&&a.recordQuotaExceeded({previousSize:this.getCacheSize()})}catch(a){console.warn("Failed to clear cache after quota exceeded:",a)}}performCacheHealthCheck(){return!0}async trackCacheEvent(a,b){}isMemoryOnly(){return this.isMemoryOnlyMode}getStats(){return{size:this.getCacheSize(),availableSpace:this.getAvailableSpace(),memoryOnly:this.isMemoryOnlyMode}}constructor(){this.isMemoryOnlyMode=!1}}function i(a){}async function j(){d&&await d.processPendingOperations()}function k(a){return d?d.onSyncStatusChange(a):()=>{}}async function l(){}new h,(0,e.s)({storage:void 0,key:"swole-tracker-cache",serialize:JSON.stringify,deserialize:JSON.parse})},15580:(a,b,c)=>{"use strict";c.d(b,{PostHogProvider:()=>m});var d=c(21124),e=c(77196),f=c(97854),g=c(38301),h=c(35956),i=c(90095),j=c(96203);let k=(0,h.w)({server:{CLOUDFLARE_ACCOUNT_ID:i.Yj().optional(),CLOUDFLARE_API_TOKEN:i.Yj().optional(),DB:i.bz().optional(),WORKOS_API_KEY:i.Yj().optional(),WORKOS_CLIENT_ID:i.Yj().optional(),WORKOS_REDIRECT_URI:i.Yj().url().optional(),WORKER_SESSION_SECRET:i.Yj().min(32).optional(),DATABASE_URL:i.Yj().url().optional(),NODE_ENV:i.k5(["development","test","production"]).default("development"),VERCEL_AI_GATEWAY_API_KEY:i.Yj().optional(),AI_GATEWAY_API_KEY:i.Yj().optional(),AI_GATEWAY_MODEL:i.Yj().default("xai/grok-3-mini"),AI_GATEWAY_PROMPT:i.Yj().default("Tell me a short, funny programming or tech joke. Keep it clean and under 100 words."),AI_GATEWAY_JOKE_MEMORY_NUMBER:j.ai().default(3),AI_GATEWAY_MODEL_HEALTH:i.Yj().default("xai/grok-3-mini"),AI_DEBRIEF_MODEL:i.Yj().default("xai/grok-3-mini"),AI_DEBRIEF_TEMPERATURE:j.ai().min(0).max(2).default(.7),WHOOP_CLIENT_ID:i.Yj().optional(),WHOOP_CLIENT_SECRET:i.Yj().optional(),WHOOP_REDIRECT_URI:i.Yj().url().optional(),WHOOP_SYNC_RATE_LIMIT_PER_HOUR:j.ai().default(10),WHOOP_WEBHOOK_SECRET:i.Yj().optional(),RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR:j.ai().default(100),RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR:j.ai().default(200),RATE_LIMIT_API_CALLS_PER_MINUTE:j.ai().default(60),RATE_LIMIT_ENABLED:j.zM().default(!0),ENCRYPTION_MASTER_KEY:i.Yj().min(32).optional()},client:{NEXT_PUBLIC_SITE_URL:i.Yj().url().default("http://localhost:3000"),NEXT_PUBLIC_POSTHOG_KEY:i.Yj().default("phc_test_dummy"),NEXT_PUBLIC_POSTHOG_HOST:i.Yj().url().default("https://us.i.posthog.com")},runtimeEnv:{CLOUDFLARE_ACCOUNT_ID:process.env.CLOUDFLARE_ACCOUNT_ID,CLOUDFLARE_API_TOKEN:process.env.CLOUDFLARE_API_TOKEN,DB:process.env.DB,WORKOS_API_KEY:process.env.WORKOS_API_KEY,WORKOS_CLIENT_ID:process.env.WORKOS_CLIENT_ID,WORKOS_REDIRECT_URI:process.env.WORKOS_REDIRECT_URI,WORKER_SESSION_SECRET:process.env.WORKER_SESSION_SECRET,NEXT_PUBLIC_SITE_URL:"http://localhost:8787",NEXT_PUBLIC_POSTHOG_KEY:"phc_22bpojwvy9Gh9xx6cfDD0utukztzX6mbpkmQAN4tzQ2",NEXT_PUBLIC_POSTHOG_HOST:"https://us.i.posthog.com",DATABASE_URL:process.env.DATABASE_URL,NODE_ENV:"production",VERCEL_AI_GATEWAY_API_KEY:process.env.VERCEL_AI_GATEWAY_API_KEY,AI_GATEWAY_API_KEY:process.env.AI_GATEWAY_API_KEY,AI_GATEWAY_MODEL:process.env.AI_GATEWAY_MODEL,AI_GATEWAY_PROMPT:process.env.AI_GATEWAY_PROMPT,AI_GATEWAY_JOKE_MEMORY_NUMBER:process.env.AI_GATEWAY_JOKE_MEMORY_NUMBER,AI_GATEWAY_MODEL_HEALTH:process.env.AI_GATEWAY_MODEL_HEALTH,AI_DEBRIEF_MODEL:process.env.AI_DEBRIEF_MODEL,AI_DEBRIEF_TEMPERATURE:process.env.AI_DEBRIEF_TEMPERATURE,WHOOP_CLIENT_ID:process.env.WHOOP_CLIENT_ID,WHOOP_CLIENT_SECRET:process.env.WHOOP_CLIENT_SECRET,WHOOP_REDIRECT_URI:process.env.WHOOP_REDIRECT_URI,WHOOP_SYNC_RATE_LIMIT_PER_HOUR:process.env.WHOOP_SYNC_RATE_LIMIT_PER_HOUR,WHOOP_WEBHOOK_SECRET:process.env.WHOOP_WEBHOOK_SECRET,RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR:process.env.RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR,RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR:process.env.RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR,RATE_LIMIT_API_CALLS_PER_MINUTE:process.env.RATE_LIMIT_API_CALLS_PER_MINUTE,RATE_LIMIT_ENABLED:process.env.RATE_LIMIT_ENABLED,ENCRYPTION_MASTER_KEY:process.env.ENCRYPTION_MASTER_KEY},skipValidation:"preview"===process.env.VERCEL_ENV,emptyStringAsUndefined:!0});var l=c(42280);function m({children:a}){let{user:b}=(0,l.A)();return(0,g.useRef)(null),(0,g.useMemo)(()=>{let a=k.NEXT_PUBLIC_POSTHOG_KEY,b=k.NEXT_PUBLIC_POSTHOG_HOST;if(!a||"phc_test_dummy"===a)return null;let c=b.replace(".i.posthog.com",".posthog.com");return{key:a,options:{api_host:b,ui_host:c,defaults:"2025-05-24",capture_exceptions:!0,debug:!1,capture_pageview:!1}}},[]),(0,d.jsx)(f.so,{client:e.Ay,children:a})}},17996:(a,b,c)=>{"use strict";c.d(b,{ErrorBoundary:()=>h});var d=c(21124),e=c(38301),f=c.n(e);let g=({error:a,retry:b})=>(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8 text-center",children:[(0,d.jsx)("div",{className:"text-xl font-semibold text-foreground mb-2",children:"Something went wrong"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:a?.message||"An unexpected error occurred"}),(0,d.jsx)("button",{onClick:b,className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:opacity-90 transition-opacity",children:"Try again"})]});class h extends f().Component{constructor(a){super(a),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,b){console.error("ErrorBoundary caught an error:",a,b)}render(){if(this.state.hasError){let a=this.props.fallback||g;return(0,d.jsx)(a,{error:this.state.error,retry:this.handleRetry})}return this.props.children}}},22673:(a,b,c)=>{"use strict";c.d(b,{DashboardHeader:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call DashboardHeader() from the server but DashboardHeader is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/components/dashboard-header.tsx","DashboardHeader")},23775:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>e});var d=c(97954);(0,d.registerClientReference)(function(){throw Error("Attempted to call ThemeContext() from the server but ThemeContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/providers/ThemeProvider.tsx","ThemeContext");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/providers/ThemeProvider.tsx","ThemeProvider");(0,d.registerClientReference)(function(){throw Error("Attempted to call useTheme() from the server but useTheme is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/providers/ThemeProvider.tsx","useTheme")},27081:(a,b,c)=>{"use strict";c.d(b,{EA:()=>l});var d=c(21124),e=c(38301),f=c(75094),g=c(26691),h=c(8172),i=c(72320),j=c(44943);let k=(0,g.F)("relative rounded-md overflow-hidden",{variants:{variant:{default:"bg-[color:color-mix(in srgb, var(--md-sys-color-surface-container-high) 92%, transparent 8%)]",card:"bg-[color:color-mix(in srgb, var(--md-sys-color-surface-container) 88%, transparent 12%)] border border-[color:color-mix(in srgb, var(--md-sys-color-outline-variant) 60%, transparent 40%)]",text:"bg-[color:color-mix(in srgb, var(--md-sys-color-surface-container-high) 85%, transparent 15%)]",avatar:"rounded-full bg-[color:color-mix(in srgb, var(--md-sys-color-surface-container-high) 90%, transparent 10%)]",button:"border border-[color:color-mix(in srgb, var(--md-sys-color-primary) 35%, transparent 65%)] bg-[color:color-mix(in srgb, var(--md-sys-color-primary) 18%, transparent 82%)]"},size:{sm:"h-3",default:"h-4",lg:"h-6",xl:"h-8","2xl":"h-12",auto:"h-auto"},shimmer:{true:"overflow-hidden",false:""}},defaultVariants:{variant:"default",size:"default",shimmer:!0}}),l=e.forwardRef(({className:a,variant:b,size:c,shimmer:e,width:g,height:l,style:m,...n},o)=>{let p=(0,h.Ib)(),q={...m,...g&&{width:"number"==typeof g?`${g}px`:g},...l&&{height:"number"==typeof l?`${l}px`:l}};return(0,d.jsxs)("div",{ref:o,"data-slot":"skeleton",className:(0,j.cn)(k({variant:b,size:c,shimmer:e}),a),style:q,role:"status","aria-label":"Loading...",...n,children:[e&&!p&&(0,d.jsx)(f.P.div,{className:"absolute inset-0 pointer-events-none",style:{backgroundSize:"200% 100%",backgroundImage:"linear-gradient(90deg, transparent, color-mix(in srgb, var(--md-sys-color-surface-tint) 24%, transparent 76%), transparent)"},variants:i.V5,animate:"animate"}),e&&p&&(0,d.jsx)("div",{className:"absolute inset-0 animate-pulse",style:{backgroundColor:"color-mix(in srgb, var(--md-sys-color-surface-tint) 18%, transparent 82%)"}})]})});l.displayName="Skeleton"},29987:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},32190:(a,b,c)=>{"use strict";function d(a){return null==a||Number.isNaN(a)?{label:"Awaiting data",tone:"warning",message:"Complete a workout or sync Whoop to unlock readiness insights."}:a>=.8?{label:"High readiness",tone:"success",message:"Prime to push volume or intensity today."}:a>=.6?{label:"Ready to train",tone:"info",message:"Solid recovery. Maintain planned progression."}:a>=.4?{label:"Monitor fatigue",tone:"warning",message:"Keep sets quality high and taper accessories if you need it."}:{label:"Recover & recharge",tone:"danger",message:"Dial back intensity and prioritise mobility or recovery work."}}c.d(b,{L:()=>d})},35284:(a,b,c)=>{"use strict";c.d(b,{Button:()=>n,r:()=>l});var d=c(21124),e=c(38301),f=c(96425),g=c(26691),h=c(75094),i=c(8172),j=c(72320),k=c(44943);let l=(0,g.F)("inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 ease-out disabled:pointer-events-none disabled:opacity-60 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-interactive-primary text-primary-foreground shadow-xs hover:-translate-y-0.5 hover:shadow-md active:translate-y-0 active:shadow-xs",destructive:"bg-destructive text-destructive-foreground shadow-xs hover:-translate-y-0.5 hover:shadow-md active:translate-y-0 active:shadow-xs dark:bg-destructive/80",outline:"border border-interactive-primary bg-surface-base text-interactive-primary shadow-none hover:-translate-y-0.5 active:translate-y-0",secondary:"bg-interactive-secondary text-secondary-foreground shadow-xs hover:-translate-y-0.5 hover:shadow-md active:translate-y-0 active:shadow-xs",ghost:"bg-transparent text-interactive-primary hover:scale-105 active:scale-95",link:"bg-transparent text-interactive-primary underline-offset-4 hover:underline hover:scale-105 active:scale-95 px-0 py-0 h-auto"},size:{default:"h-11 px-4 py-2 has-[>svg]:px-3 touch-target",sm:"h-10 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 touch-target",lg:"h-12 rounded-md px-6 has-[>svg]:px-4 touch-target-large",xl:"h-14 rounded-lg px-8 has-[>svg]:px-6 touch-target-xl text-base font-semibold",icon:"size-11 touch-target"},interactive:{true:"cursor-pointer select-none",false:"cursor-default"}},defaultVariants:{variant:"default",size:"default",interactive:!0}}),m={default:"primary",destructive:"error",outline:"surface",secondary:"secondary",ghost:"surface",link:"primary"},n=e.forwardRef(({className:a,variant:b,size:c,interactive:g,asChild:n=!1,haptic:o=!1,ripple:p=!1,onPointerDown:q,children:r,style:s,disabled:t,...u},v)=>{let w=(0,i.Ib)(),x=m[b??"default"]??"surface",[y,z]=e.useState(null),A=e.useCallback(a=>{if(o&&!w&&(0,j.b)("light"),p&&!w&&!n){let b=a.currentTarget.getBoundingClientRect();z({x:a.clientX-b.left,y:a.clientY-b.top}),setTimeout(()=>z(null),400)}q?.(a)},[o,p,w,n,q]),B=l({variant:b,size:c,interactive:g??!t});if(n)return(0,d.jsx)(f.DX,{ref:v,"data-slot":"button","data-state-layer":x,"data-disabled":t?"true":void 0,"aria-disabled":t,className:(0,k.cn)(B,a),onPointerDown:t?void 0:A,style:s,...u,children:r});let C=w?{}:{variants:j.mz,initial:"initial",whileHover:"hover",whileTap:"tap",layout:!0};return(0,d.jsxs)(h.P.button,{ref:v,"data-slot":"button","data-state-layer":x,"data-disabled":t?"true":void 0,disabled:t,className:(0,k.cn)(B,a),onPointerDown:t?void 0:A,style:s,...C,...u,children:[r,p&&y&&!w&&(0,d.jsx)(h.P.span,{className:"pointer-events-none absolute rounded-full",style:{left:y.x-10,top:y.y-10,width:20,height:20,backgroundColor:"color-mix(in srgb, var(--state-layer-color, currentColor) 24%, transparent 76%)"},initial:{scale:0,opacity:1},animate:{scale:4,opacity:0},transition:{duration:.4,ease:"easeOut"}})]})});n.displayName="Button"},35692:()=>{},36221:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>h,W:()=>i});var d=c(21124),e=c(38301),f=c.n(e);let g=(0,e.createContext)(void 0);function h({children:a}){let[b,c]=(0,e.useState)("system"),[f,h]=(0,e.useState)(()=>!1),i=(0,e.useMemo)(()=>"dark",[b,f]),j=(0,e.useCallback)(a=>{c(a);try{localStorage.setItem("theme",a)}catch{}let b=document.documentElement,d="system"===a?f?"dark":"light":a;b.dataset.theme=d,b.dataset.themeMode=a,b.classList.toggle("dark","dark"===d)},[f]),k=(0,e.useCallback)(()=>{j("dark"===b?"light":"dark")},[b,j]),l=(0,e.useMemo)(()=>({theme:b,resolvedTheme:i,setTheme:j,toggle:k}),[b,i,j,k]);return(0,d.jsx)(g.Provider,{value:l,children:a})}function i(){let a=f().useContext(g);if(!a)throw Error("useTheme must be used within ThemeProvider");return a}},40170:(a,b,c)=>{"use strict";c.d(b,{Hi:()=>j,Nv:()=>i,eu:()=>k});let d={QUEUE:"swole-tracker-offline-queue-v2",SESSIONS:"swole-tracker-offline-sessions-v1",SYNC_STATUS:"swole-tracker-sync-status-v1"};class e{static getStorage(){return{getItem:()=>Promise.resolve(null),setItem:()=>Promise.resolve(),removeItem:()=>Promise.resolve()}}static async getItem(a){try{let b=this.getStorage();if("getItem"in b&&"function"==typeof b.getItem){let c=b.getItem(a);return Promise.resolve(c)}return null}catch{return null}}static async setItem(a,b){try{let c=this.getStorage();"setItem"in c&&"function"==typeof c.setItem&&c.setItem(a,b)}catch{}}static async removeItem(a){try{let b=this.getStorage();"removeItem"in b&&"function"==typeof b.removeItem&&b.removeItem(a)}catch{}}}class f{static getInstance(){return this.instance||(this.instance=new f),this.instance}async readQueue(){try{let a=await e.getItem(d.QUEUE);if(!a)return[];let b=JSON.parse(a);if(!Array.isArray(b))return[];return b}catch{return[]}}async writeQueue(a){await e.setItem(d.QUEUE,JSON.stringify(a))}generateId(){return`q_${Math.random().toString(36).slice(2)}_${Date.now().toString(36)}`}calculateRetryDelay(a){return Math.min(1e3*Math.pow(2,a),3e4)+1e3*Math.random()}async enqueue(a,b,c="medium"){let d=await this.readQueue(),e={id:this.generateId(),type:a,payload:b,attempts:0,createdAt:Date.now(),updatedAt:Date.now(),priority:c};return"high"===c?d.unshift(e):d.push(e),await this.writeQueue(d),e.id}async dequeue(){let a=await this.readQueue(),b=Date.now(),c=a.findIndex(a=>!a.retryAfter||a.retryAfter<=b);if(-1===c)return;let d=a.splice(c,1)[0];return d&&await this.writeQueue(a),d}async updateItem(a,b){let c=await this.readQueue(),d=c.findIndex(b=>b.id===a);-1!==d&&(c[d]={...c[d],...b,updatedAt:Date.now()},await this.writeQueue(c))}async requeueWithBackoff(a,b){let c=await this.readQueue(),d={...a,attempts:a.attempts+1,lastError:b,retryAfter:Date.now()+this.calculateRetryDelay(a.attempts),updatedAt:Date.now()};if(d.attempts>=5)return void console.warn("Queue item exhausted retries:",d);c.unshift(d),await this.writeQueue(c)}async getQueueStatus(){let a=await this.readQueue(),b=Date.now(),c=a.filter(a=>a.attempts<5&&(!a.retryAfter||a.retryAfter<=b)).length,d=a.filter(a=>a.attempts>=5).length,e=a.filter(a=>a.retryAfter&&a.retryAfter>b).sort((a,b)=>(a.retryAfter??0)-(b.retryAfter??0))[0];return{pending:c,failed:d,nextRetry:e?.retryAfter}}async clearQueue(){await e.removeItem(d.QUEUE)}async pruneExhausted(){let a=(await this.readQueue()).filter(a=>a.attempts<5);await this.writeQueue(a)}}class g{static getInstance(){return this.instance||(this.instance=new g),this.instance}async readSessions(){try{let a=await e.getItem(d.SESSIONS);if(!a)return{};return JSON.parse(a)}catch{return{}}}async writeSessions(a){await e.setItem(d.SESSIONS,JSON.stringify(a))}async createSession(a){let b=await this.readSessions(),c=`session_${Date.now()}_${Math.random().toString(36).slice(2)}`,d={id:c,templateId:a,startTime:Date.now(),lastSaved:Date.now(),exercises:[],isCompleted:!1};return b[c]=d,await this.writeSessions(b),c}async getSession(a){return(await this.readSessions())[a]??null}async updateSession(a,b){let c=await this.readSessions();c[a]&&(c[a]={...c[a],...b,lastSaved:Date.now()},await this.writeSessions(c))}async completeSession(a){let b=await this.getSession(a);if(!b)return;await this.updateSession(a,{isCompleted:!0});let c=f.getInstance();await c.enqueue("workout_save",{sessionId:parseInt(a.split("_")[1]??"0"),exercises:b.exercises.map(a=>({templateExerciseId:a.templateExerciseId,exerciseName:a.exerciseName,sets:a.sets.filter(a=>a.completed).map(a=>({id:a.id,weight:a.weight,reps:a.reps,sets:a.sets,unit:a.unit})),unit:a.unit}))},"high")}async deleteSession(a){let b=await this.readSessions();delete b[a],await this.writeSessions(b)}async getActiveSessions(){return Object.values(await this.readSessions()).filter(a=>!a.isCompleted)}async getCompletedSessions(){return Object.values(await this.readSessions()).filter(a=>a.isCompleted)}}class h{static getInstance(){return this.instance||(this.instance=new h),this.instance}async getSyncStatus(){try{let a=await e.getItem(d.SYNC_STATUS),b=a?JSON.parse(a):{},c=await f.getInstance().getQueueStatus();return{lastSync:b.lastSync??0,isOnline:b.isOnline??!0,pendingOperations:c.pending,failedOperations:c.failed,nextRetry:c.nextRetry}}catch{return{lastSync:0,isOnline:!0,pendingOperations:0,failedOperations:0}}}async updateSyncStatus(a){let b={...await this.getSyncStatus(),...a};await e.setItem(d.SYNC_STATUS,JSON.stringify(b))}async markSyncCompleted(){await this.updateSyncStatus({lastSync:Date.now()})}}let i=f.getInstance(),j=g.getInstance(),k=h.getInstance()},42280:(a,b,c)=>{"use strict";c.d(b,{A:()=>j,AuthProvider:()=>i});var d=c(21124),e=c(38301),f=c(42378),g=c(90088);let h=(0,e.createContext)(void 0);function i({children:a}){let[b,i]=(0,e.useState)(null),[j,k]=(0,e.useState)(!0),l=(0,f.useRouter)(),m=(0,e.useCallback)(async()=>{try{let{clearAllOfflineData:a}=await Promise.resolve().then(c.bind(c,15345));await a(),await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),i(null),g.vF.info("User signed out and cache cleared")}catch(a){g.vF.error("Error during sign out",a)}finally{l.push("/")}},[l]),n=(0,e.useMemo)(()=>({user:b,isLoading:j,signOut:m}),[b,j,m]);return(0,d.jsx)(h.Provider,{value:n,children:a})}function j(){let a=(0,e.useContext)(h);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}},43858:(a,b,c)=>{Promise.resolve().then(c.bind(c,54024)),Promise.resolve().then(c.bind(c,17996)),Promise.resolve().then(c.bind(c,42280)),Promise.resolve().then(c.bind(c,15580)),Promise.resolve().then(c.bind(c,36221)),Promise.resolve().then(c.bind(c,47434))},44943:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},47434:(a,b,c)=>{"use strict";c.d(b,{TRPCReactProvider:()=>n,F:()=>m});var d=c(21124),e=c(96610),f=c(47239),g=c(28792),h=c(38301),i=c(86768),j=c(83279),k=c(88098),l=c(81793);c(15345);let m=(0,g.pY)();function n(a){let b=(()=>{let a=new j.E({defaultOptions:{queries:{staleTime:6e5,gcTime:36e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchInterval:!1,retry:(a,b)=>{if(b&&"object"==typeof b&&"data"in b){let a=b.data;if(a?.code==="UNAUTHORIZED"||a?.code==="FORBIDDEN")return!1}return a<1},retryDelay:a=>Math.min(2e3*2**a,1e4),refetchOnMount:!1,networkMode:"offlineFirst"},mutations:{retry:(a,b)=>(!b||!("status"in b)||"number"!=typeof b.status||!(b.status>=400)||!(b.status<500))&&a<1,retryDelay:a=>Math.min(3e3*2**a,1e4),networkMode:"offlineFirst"},dehydrate:{serializeData:i.Ay.serialize,shouldDehydrateQuery:a=>(0,k.XS)(a)||"pending"===a.state.status},hydrate:{deserializeData:i.Ay.deserialize}}});return(0,l.pI)(a),a})(),[c]=(0,h.useState)(()=>m.createClient({links:[(0,f.$H)({enabled:a=>"down"===a.direction&&a.result instanceof Error}),(0,f.N9)({transformer:i.Ay,url:(process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:`http://localhost:${process.env.PORT??3e3}`)+"/api/trpc",headers:()=>{let a=new Headers;return a.set("x-trpc-source","nextjs-react"),a},fetch:(a,b)=>fetch(a,{...b,signal:AbortSignal.timeout(3e4)}).catch(a=>{if(a&&"object"==typeof a&&"name"in a){let b=a.name;if("AbortError"===b||"TimeoutError"===b)throw Error("NETWORK_ERROR")}throw a})})]}));return(0,d.jsx)(e.QueryClientProvider,{client:b,children:(0,d.jsx)(m.Provider,{client:c,queryClient:b,children:a.children})})}},50588:(a,b,c)=>{"use strict";c.d(b,{PostHogProvider:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call PostHogProvider() from the server but PostHogProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/providers/PostHogProvider.tsx","PostHogProvider")},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>n,metadata:()=>k,runtime:()=>l,viewport:()=>m});var d=c(75338);c(35692);var e=c(91591),f=c(50588),g=c(23775),h=c(9822),i=c(22673),j=c(61706);let k={title:"Swole Tracker",description:"Simple workout tracking application",icons:[{rel:"icon",url:"/favicon.ico"}]},l="nodejs",m={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,viewportFit:"cover"};function n({children:a}){let b=`
    (function() {
      try {
        var key = 'theme';
        var stored = localStorage.getItem(key) || 'system';
        var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        // Determine effective theme
        var effectiveTheme = stored === 'system' ? (prefersDark ? 'dark' : 'light') : stored;
        
        var root = document.documentElement;
        var dark = effectiveTheme === 'dark';
        if (dark) root.classList.add('dark'); else root.classList.remove('dark');

        // Align data attributes so CSS variables match the active palette
        root.setAttribute('data-theme', effectiveTheme);
        root.setAttribute('data-theme-mode', stored);
      } catch (_) {}
    })();
  `;return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,className:"antialiased",children:(0,d.jsxs)("body",{children:[(0,d.jsx)("script",{dangerouslySetInnerHTML:{__html:b}}),(0,d.jsx)(h.AuthProvider,{children:(0,d.jsx)(f.PostHogProvider,{children:(0,d.jsx)(g.ThemeProvider,{children:(0,d.jsx)(e.TRPCReactProvider,{children:(0,d.jsxs)(j.ErrorBoundary,{children:[(0,d.jsx)(i.DashboardHeader,{}),a]})})})})})]})})}},53963:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},54024:(a,b,c)=>{"use strict";c.d(b,{DashboardHeader:()=>aD});var d=c(21124),e=c(38301),f=c.n(e),g=c(3991),h=c.n(g),i=c(42378),j=c(77850),k=c(43872),l=c(7632),m=c(65783),n=c(18004),o=c(70175),p=c(60988),q=c(6130),r=c(94684),s=c(47268),t=c(85607),u=c(75094),v=c(47434),w=c(1002),x=c(36221),y=c(35284),z=c(86228),A=c(8172),B=c(44943);let C=JSON.parse('{"generatedAt":"2025-10-01T01:20:01.779Z","tones":[0,10,20,30,40,50,60,70,80,90,95,99,100],"themes":{"light":{"palettes":{"primary":{"0":"#000000","10":"#3c1902","20":"#632a03","30":"#9f4404","40":"#c05005","50":"#f96a06","60":"#fa8838","70":"#fbab74","80":"#fdc9a6","90":"#f4e3d7","95":"#fbf4ef","99":"#fdfbf9","100":"#ffffff"},"secondary":{"0":"#000000","10":"#051538","20":"#09235d","30":"#0e3895","40":"#124ac4","50":"#1558ea","60":"#4479ee","70":"#7ca1f3","80":"#abc3f7","90":"#d9e1f2","95":"#f0f3fa","99":"#f9fafd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#093419","20":"#0f572a","30":"#188b42","40":"#177a36","50":"#26d968","60":"#51e186","70":"#85eaaa","80":"#b1f1c9","90":"#dbf0e3","95":"#f0f9f4","99":"#fafdfb","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1c1e21","20":"#2f3237","30":"#4b4f58","40":"#636874","50":"#757c8a","60":"#9196a1","70":"#b2b6bd","80":"#cdd0d5","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#221e1b","20":"#39322d","30":"#5b4f48","40":"#78685e","50":"#8f7c70","60":"#a5968d","70":"#c0b6af","80":"#d7d0cc","90":"#e7e5e4","95":"#f6f5f4","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#350808","20":"#580e0e","30":"#8d1717","40":"#b81e1e","50":"#dc2323","60":"#e34f4f","70":"#eb8484","80":"#f2b0b0","90":"#f1dada","95":"#f9f0f0","99":"#fdfafa","100":"#ffffff"}},"schemes":{"light":{"primary":"#c05005","onPrimary":"#ffffff","primaryContainer":"#f4e3d7","onPrimaryContainer":"#3c1902","secondary":"#124ac4","onSecondary":"#ffffff","secondaryContainer":"#d9e1f2","onSecondaryContainer":"#051538","tertiary":"#177a36","onTertiary":"#ffffff","tertiaryContainer":"#dbf0e3","onTertiaryContainer":"#093419","error":"#b81e1e","onError":"#ffffff","errorContainer":"#f1dada","onErrorContainer":"#350808","background":"#fbfbfb","onBackground":"#1c1e21","surface":"#fbfbfb","onSurface":"#1c1e21","surfaceVariant":"#e7e5e4","onSurfaceVariant":"#5b4f48","outline":"#8f7c70","outlineVariant":"#d7d0cc","shadow":"#000000","scrim":"#000000","inverseSurface":"#2f3237","inverseOnSurface":"#f4f5f5","inversePrimary":"#fdc9a6","surfaceTint":"#c05005"},"dark":{"primary":"#fdc9a6","onPrimary":"#632a03","primaryContainer":"#9f4404","onPrimaryContainer":"#f4e3d7","secondary":"#abc3f7","onSecondary":"#09235d","secondaryContainer":"#0e3895","onSecondaryContainer":"#d9e1f2","tertiary":"#b1f1c9","onTertiary":"#0f572a","tertiaryContainer":"#188b42","onTertiaryContainer":"#dbf0e3","error":"#f2b0b0","onError":"#580e0e","errorContainer":"#8d1717","onErrorContainer":"#f1dada","background":"#1c1e21","onBackground":"#e4e5e7","surface":"#1c1e21","onSurface":"#e4e5e7","surfaceVariant":"#5b4f48","onSurfaceVariant":"#d7d0cc","outline":"#a5968d","outlineVariant":"#5b4f48","shadow":"#000000","scrim":"#000000","inverseSurface":"#e4e5e7","inverseOnSurface":"#1c1e21","inversePrimary":"#d15905","surfaceTint":"#fdc9a6"}},"base":{"primary":{"color":"#f97316"},"secondary":{"color":"#2563eb"},"tertiary":{"color":"#22c55e"},"neutral":{"color":"#6b7280","saturation":0.08},"neutralVariant":{"color":"#7f5b45","saturation":0.12},"error":{"color":"#dc2626"}}},"dark":{"palettes":{"primary":{"0":"#000000","10":"#3d1500","20":"#662300","30":"#a33900","40":"#d64a00","50":"#ff5800","60":"#ff7a33","70":"#ffa270","80":"#ffc3a3","90":"#f5e1d6","95":"#fbf3ef","99":"#fdfaf9","100":"#ffffff"},"secondary":{"0":"#000000","10":"#043239","20":"#07535f","30":"#0a6c79","40":"#0fafc7","50":"#12d0ed","60":"#42d9f0","70":"#7ae5f5","80":"#aaeef8","90":"#d8eff3","95":"#f0f9fa","99":"#f9fdfd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#1f033a","20":"#340561","30":"#53079c","40":"#6e0acd","50":"#820bf4","60":"#9b3cf6","70":"#b977f9","80":"#d2a7fb","90":"#e6d8f3","95":"#f5effa","99":"#fbf9fd","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1d1e20","20":"#303236","30":"#4d5156","40":"#656a72","50":"#787e87","60":"#93989f","70":"#b3b7bc","80":"#ced1d4","90":"#e5e5e6","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#1c1e22","20":"#2e3338","30":"#49515a","40":"#606a76","50":"#737f8c","60":"#8f98a3","70":"#b0b7bf","80":"#cdd1d6","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#3a0303","20":"#610505","30":"#9c0808","40":"#cc0a0a","50":"#f30c0c","60":"#f53d3d","70":"#f87777","80":"#fba8a8","90":"#f3d8d8","95":"#faefef","99":"#fdf9f9","100":"#ffffff"}},"schemes":{"light":{"primary":"#d64a00","onPrimary":"#ffffff","primaryContainer":"#f5e1d6","onPrimaryContainer":"#3d1500","secondary":"#0fafc7","onSecondary":"#ffffff","secondaryContainer":"#d8eff3","onSecondaryContainer":"#043239","tertiary":"#6e0acd","onTertiary":"#ffffff","tertiaryContainer":"#e6d8f3","onTertiaryContainer":"#1f033a","error":"#cc0a0a","onError":"#ffffff","errorContainer":"#f3d8d8","onErrorContainer":"#3a0303","background":"#fbfbfb","onBackground":"#1d1e20","surface":"#fbfbfb","onSurface":"#1d1e20","surfaceVariant":"#e4e5e7","onSurfaceVariant":"#49515a","outline":"#737f8c","outlineVariant":"#cdd1d6","shadow":"#000000","scrim":"#000000","inverseSurface":"#303236","inverseOnSurface":"#f4f5f5","inversePrimary":"#ffc3a3","surfaceTint":"#d64a00"},"dark":{"primary":"#ffc3a3","onPrimary":"#662300","primaryContainer":"#a33900","onPrimaryContainer":"#f5e1d6","secondary":"#aaeef8","onSecondary":"#07535f","secondaryContainer":"#0a6c79","onSecondaryContainer":"#d8eff3","tertiary":"#d2a7fb","onTertiary":"#340561","tertiaryContainer":"#53079c","onTertiaryContainer":"#e6d8f3","error":"#fba8a8","onError":"#610505","errorContainer":"#9c0808","onErrorContainer":"#f3d8d8","background":"#1d1e20","onBackground":"#e5e5e6","surface":"#1d1e20","onSurface":"#e5e5e6","surfaceVariant":"#49515a","onSurfaceVariant":"#cdd1d6","outline":"#8f98a3","outlineVariant":"#49515a","shadow":"#000000","scrim":"#000000","inverseSurface":"#e5e5e6","inverseOnSurface":"#1d1e20","inversePrimary":"#d64a00","surfaceTint":"#ffc3a3"}},"base":{"primary":{"color":"#ff8a4c"},"secondary":{"color":"#22d3ee"},"tertiary":{"color":"#a855f7"},"neutral":{"color":"#1f2937","saturation":0.06},"neutralVariant":{"color":"#324152","saturation":0.1},"error":{"color":"#f87171"}}},"cool":{"palettes":{"primary":{"0":"#000000","10":"#3d1000","20":"#661a00","30":"#a32a00","40":"#d63700","50":"#ff4200","60":"#ff6733","70":"#ff9570","80":"#ffbba3","90":"#f5ded6","95":"#fbf2ef","99":"#fdfaf9","100":"#ffffff"},"secondary":{"0":"#000000","10":"#022a3b","20":"#034563","30":"#066f9e","40":"#0792cf","50":"#09adf6","60":"#3abef8","70":"#75d1fa","80":"#a6e2fc","90":"#d7ebf4","95":"#eff7fb","99":"#f9fcfd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#021c3b","20":"#032e63","30":"#054a9e","40":"#0761d0","50":"#0873f7","60":"#398ff9","70":"#75b1fb","80":"#a6cdfc","90":"#d7e4f4","95":"#eff4fb","99":"#f9fbfd","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1c1d21","20":"#2f3137","30":"#4b4e58","40":"#636674","50":"#757a8a","60":"#9194a1","70":"#b2b4bd","80":"#cdcfd5","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#1b1d22","20":"#2d3039","30":"#484c5b","40":"#5e6478","50":"#70778f","60":"#8d93a5","70":"#afb3c0","80":"#ccced7","90":"#e4e5e7","95":"#f4f4f6","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#3a0303","20":"#610505","30":"#9c0808","40":"#cc0a0a","50":"#f30c0c","60":"#f53d3d","70":"#f87777","80":"#fba8a8","90":"#f3d8d8","95":"#faefef","99":"#fdf9f9","100":"#ffffff"}},"schemes":{"light":{"primary":"#d63700","onPrimary":"#ffffff","primaryContainer":"#f5ded6","onPrimaryContainer":"#3d1000","secondary":"#0792cf","onSecondary":"#ffffff","secondaryContainer":"#d7ebf4","onSecondaryContainer":"#022a3b","tertiary":"#0761d0","onTertiary":"#ffffff","tertiaryContainer":"#d7e4f4","onTertiaryContainer":"#021c3b","error":"#cc0a0a","onError":"#ffffff","errorContainer":"#f3d8d8","onErrorContainer":"#3a0303","background":"#fbfbfb","onBackground":"#1c1d21","surface":"#fbfbfb","onSurface":"#1c1d21","surfaceVariant":"#e4e5e7","onSurfaceVariant":"#484c5b","outline":"#70778f","outlineVariant":"#ccced7","shadow":"#000000","scrim":"#000000","inverseSurface":"#2f3137","inverseOnSurface":"#f4f5f5","inversePrimary":"#ffbba3","surfaceTint":"#d63700"},"dark":{"primary":"#ffbba3","onPrimary":"#661a00","primaryContainer":"#a32a00","onPrimaryContainer":"#f5ded6","secondary":"#a6e2fc","onSecondary":"#034563","secondaryContainer":"#066f9e","onSecondaryContainer":"#d7ebf4","tertiary":"#a6cdfc","onTertiary":"#032e63","tertiaryContainer":"#054a9e","onTertiaryContainer":"#d7e4f4","error":"#fba8a8","onError":"#610505","errorContainer":"#9c0808","onErrorContainer":"#f3d8d8","background":"#1c1d21","onBackground":"#e4e5e7","surface":"#1c1d21","onSurface":"#e4e5e7","surfaceVariant":"#484c5b","onSurfaceVariant":"#ccced7","outline":"#8d93a5","outlineVariant":"#484c5b","shadow":"#000000","scrim":"#000000","inverseSurface":"#e4e5e7","inverseOnSurface":"#1c1d21","inversePrimary":"#d63700","surfaceTint":"#ffbba3"}},"base":{"primary":{"color":"#ff7d50"},"secondary":{"color":"#38bdf8"},"tertiary":{"color":"#60a5fa"},"neutral":{"color":"#1c1f2a","saturation":0.08},"neutralVariant":{"color":"#2f3340","saturation":0.12},"error":{"color":"#f87171"}}},"warm":{"palettes":{"primary":{"0":"#000000","10":"#331d0a","20":"#553011","30":"#884c1b","40":"#a8581d","50":"#d4772b","60":"#dd9255","70":"#e7b388","80":"#f0ceb3","90":"#f0e5db","95":"#f9f4f1","99":"#fdfbfa","100":"#ffffff"},"secondary":{"0":"#000000","10":"#210a33","20":"#371056","30":"#571a89","40":"#7323b4","50":"#8929d6","60":"#a054de","70":"#bd87e8","80":"#d4b2f0","90":"#e7dbf0","95":"#f5f1f9","99":"#fbfafd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#3c2102","20":"#633603","30":"#9f5704","40":"#a45708","50":"#f88807","60":"#faa038","70":"#fbbc74","80":"#fdd4a6","90":"#f4e7d7","95":"#fbf5ef","99":"#fdfbf9","100":"#ffffff"},"neutral":{"0":"#000000","10":"#221e1b","20":"#39322d","30":"#5b4f48","40":"#78685e","50":"#8f7c70","60":"#a5968d","70":"#c0b6af","80":"#d7d0cc","90":"#e7e5e4","95":"#f6f5f4","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#231d1a","20":"#3b312b","30":"#5f4e45","40":"#7c665a","50":"#94796b","60":"#a99489","70":"#c3b4ac","80":"#d8cfca","90":"#e8e5e3","95":"#f6f5f4","99":"#fcfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#350c08","20":"#59140d","30":"#8e2015","40":"#ba291c","50":"#de3121","60":"#e45a4e","70":"#ec8c83","80":"#f3b5af","90":"#f1dcda","95":"#f9f1f0","99":"#fdfaf9","100":"#ffffff"}},"schemes":{"light":{"primary":"#a8581d","onPrimary":"#ffffff","primaryContainer":"#f0e5db","onPrimaryContainer":"#331d0a","secondary":"#7323b4","onSecondary":"#ffffff","secondaryContainer":"#e7dbf0","onSecondaryContainer":"#210a33","tertiary":"#a45708","onTertiary":"#ffffff","tertiaryContainer":"#f4e7d7","onTertiaryContainer":"#3c2102","error":"#ba291c","onError":"#ffffff","errorContainer":"#f1dcda","onErrorContainer":"#350c08","background":"#fbfbfb","onBackground":"#221e1b","surface":"#fbfbfb","onSurface":"#221e1b","surfaceVariant":"#e8e5e3","onSurfaceVariant":"#5f4e45","outline":"#94796b","outlineVariant":"#d8cfca","shadow":"#000000","scrim":"#000000","inverseSurface":"#39322d","inverseOnSurface":"#f6f5f4","inversePrimary":"#f0ceb3","surfaceTint":"#a8581d"},"dark":{"primary":"#f0ceb3","onPrimary":"#553011","primaryContainer":"#884c1b","onPrimaryContainer":"#f0e5db","secondary":"#d4b2f0","onSecondary":"#371056","secondaryContainer":"#571a89","onSecondaryContainer":"#e7dbf0","tertiary":"#fdd4a6","onTertiary":"#633603","tertiaryContainer":"#9f5704","onTertiaryContainer":"#f4e7d7","error":"#f3b5af","onError":"#59140d","errorContainer":"#8e2015","onErrorContainer":"#f1dcda","background":"#221e1b","onBackground":"#e7e5e4","surface":"#221e1b","onSurface":"#e7e5e4","surfaceVariant":"#5f4e45","onSurfaceVariant":"#d8cfca","outline":"#a99489","outlineVariant":"#5f4e45","shadow":"#000000","scrim":"#000000","inverseSurface":"#e7e5e4","inverseOnSurface":"#221e1b","inversePrimary":"#b26424","surfaceTint":"#f0ceb3"}},"base":{"primary":{"color":"#c26d27"},"secondary":{"color":"#9d4edd"},"tertiary":{"color":"#d97706"},"neutral":{"color":"#594437","saturation":0.12},"neutralVariant":{"color":"#6e5243","saturation":0.16},"error":{"color":"#e4584b"}}},"neutral":{"palettes":{"primary":{"0":"#000000","10":"#1a1e23","20":"#2c323a","30":"#46505d","40":"#5c697a","50":"#6e7d91","60":"#8b97a7","70":"#aeb6c1","80":"#cbd0d7","90":"#e3e5e8","95":"#f4f5f6","99":"#fbfbfb","100":"#ffffff"},"secondary":{"0":"#000000","10":"#050638","20":"#080a5e","30":"#0d1096","40":"#1215c5","50":"#1519ea","60":"#4447ee","70":"#7c7ef3","80":"#abacf7","90":"#d9d9f2","95":"#f0f0fa","99":"#f9f9fd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#063732","20":"#0a5c53","30":"#109385","40":"#108071","50":"#19e6cf","60":"#47ebd9","70":"#7ef1e4","80":"#acf6ee","90":"#d9f2ef","95":"#f0faf9","99":"#f9fdfd","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1d1e20","20":"#303336","30":"#4e5156","40":"#666a70","50":"#797e86","60":"#94989e","70":"#b4b7bb","80":"#cfd1d3","90":"#e5e5e6","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#1c1e21","20":"#2f3337","30":"#4b5158","40":"#636b74","50":"#757f8a","60":"#9199a1","70":"#b2b7bd","80":"#cdd1d5","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#330b0b","20":"#541212","30":"#871c1c","40":"#b12525","50":"#d22d2d","60":"#db5757","70":"#e68989","80":"#efb3b3","90":"#efdcdc","95":"#f9f1f1","99":"#fdfafa","100":"#ffffff"}},"schemes":{"light":{"primary":"#5c697a","onPrimary":"#ffffff","primaryContainer":"#e3e5e8","onPrimaryContainer":"#1a1e23","secondary":"#1215c5","onSecondary":"#ffffff","secondaryContainer":"#d9d9f2","onSecondaryContainer":"#050638","tertiary":"#108071","onTertiary":"#ffffff","tertiaryContainer":"#d9f2ef","onTertiaryContainer":"#063732","error":"#b12525","onError":"#ffffff","errorContainer":"#efdcdc","onErrorContainer":"#330b0b","background":"#fbfbfb","onBackground":"#1d1e20","surface":"#fbfbfb","onSurface":"#1d1e20","surfaceVariant":"#e4e5e7","onSurfaceVariant":"#4b5158","outline":"#757f8a","outlineVariant":"#cdd1d5","shadow":"#000000","scrim":"#000000","inverseSurface":"#303336","inverseOnSurface":"#f4f5f5","inversePrimary":"#cbd0d7","surfaceTint":"#5c697a"},"dark":{"primary":"#cbd0d7","onPrimary":"#2c323a","primaryContainer":"#46505d","onPrimaryContainer":"#e3e5e8","secondary":"#abacf7","onSecondary":"#080a5e","secondaryContainer":"#0d1096","onSecondaryContainer":"#d9d9f2","tertiary":"#acf6ee","onTertiary":"#0a5c53","tertiaryContainer":"#109385","onTertiaryContainer":"#d9f2ef","error":"#efb3b3","onError":"#541212","errorContainer":"#871c1c","onErrorContainer":"#efdcdc","background":"#1d1e20","onBackground":"#e5e5e6","surface":"#1d1e20","onSurface":"#e5e5e6","surfaceVariant":"#4b5158","onSurfaceVariant":"#cdd1d5","outline":"#9199a1","outlineVariant":"#4b5158","shadow":"#000000","scrim":"#000000","inverseSurface":"#e5e5e6","inverseOnSurface":"#1d1e20","inversePrimary":"#5c697a","surfaceTint":"#cbd0d7"}},"base":{"primary":{"color":"#4b5563"},"secondary":{"color":"#6366f1"},"tertiary":{"color":"#14b8a6"},"neutral":{"color":"#4b5563","saturation":0.05},"neutralVariant":{"color":"#4f5964","saturation":0.08},"error":{"color":"#d32f2f"}}}}}'),D={light:"light",dark:"dark",cool:"dark",warm:"light",neutral:"light"},E={50:"99",100:"95",200:"90",300:"80",400:"70",500:"60",600:"50",700:"40",800:"30",900:"20",950:"10"};function F(a){let b=parseInt(a.replace("#",""),16);return{r:b>>16&255,g:b>>8&255,b:255&b}}function G(a,b,c){let d=F(a),e=F(b),f=(a,b)=>a+(b-a)*c;return function({r:a,g:b,b:c}){let d=a=>Math.round(a).toString(16).padStart(2,"0");return`#${d(Math.min(Math.max(a,0),255))}${d(Math.min(Math.max(b,0),255))}${d(Math.min(Math.max(c,0),255))}`}({r:f(d.r,e.r),g:f(d.g,e.g),b:f(d.b,e.b)})}function H(a){return Object.fromEntries(Object.entries(E).map(([b,c])=>[Number(b),a[c]??a["60"]]))}function I(a,b){let c=a.palettes.neutral,d=a.schemes[b],e=a=>c[String(a)]??d.surface;if("light"===b){let a=e(99),b=e(95)??G(a,e(90),.35),f=e(90)??G(b,e(80),.35);return{surface:a,surfaceDim:G(f,a,.2),surfaceBright:G(a,c["100"],.25),surfaceContainerLowest:e(100)??c["100"],surfaceContainerLow:G(b,e(100),.35),surfaceContainer:G(b,f,.5),surfaceContainerHigh:G(f,b,.25),surfaceContainerHighest:G(f,b,.1),surfaceVariant:d.surfaceVariant,surfaceInverse:d.inverseSurface,outline:d.outline,outlineVariant:d.outlineVariant??G(d.surfaceVariant,a,.35),surfaceTint:d.surfaceTint}}let f=e(10)??d.surface,g=e(20)??G(f,e(30),.35),h=G(f,c["0"],.65);return{surface:f,surfaceDim:G(f,g,.3),surfaceBright:G(f,c["100"],.12),surfaceContainerLowest:h,surfaceContainerLow:G(f,g,.55),surfaceContainer:G(f,g,.7),surfaceContainerHigh:G(f,g,.85),surfaceContainerHighest:G(g,d.surface,.4),surfaceVariant:d.surfaceVariant,surfaceInverse:d.inverseSurface,outline:d.outline,outlineVariant:d.outlineVariant??G(d.surfaceVariant,f,.4),surfaceTint:d.surfaceTint}}let J=C.themes,K=Object.fromEntries(Object.entries(J).map(([a,b])=>[a,b.schemes])),L=Object.fromEntries(Object.entries(J).map(([a,b])=>[a,{light:I(b,"light"),dark:I(b,"dark")}])),M=J.light;H(M.palettes.primary),H(M.palettes.secondary),H(M.palettes.tertiary),H(M.palettes.neutralVariant),H(M.palettes.neutral),M.schemes.light.tertiary,G(M.schemes.light.tertiary,M.schemes.light.surface,.3),M.schemes.light.secondary,G(M.schemes.light.secondary,M.schemes.light.primary,.35),M.schemes.light.error,G(M.schemes.light.error,"#8b1a1a",.35),K.dark.dark.error,C.tones;let N=Array.from(["light","dark","cool","warm","neutral"]).reduce((a,b)=>{let c=function(a,b){let c=J[a],d=(void 0)??D[a];return{scheme:c.schemes[d],surfaces:L[a][d]}}(b);return a[b]={surface:c.surfaces.surface,surfaceContainer:c.surfaces.surfaceContainer,outline:c.surfaces.outline,primary:c.scheme.primary,secondary:c.scheme.secondary,tertiary:c.scheme.tertiary,onSurface:c.scheme.onSurface},a},{}),O=[{value:"system",label:"System",description:"Follows your device settings",preview:"\uD83D\uDDA5️"},{value:"light",label:"Light",description:"Classic bright theme",preview:"☀️"},{value:"dark",label:"Dark",description:"Easy on the eyes",preview:"\uD83C\uDF19"},{value:"cool",label:"Cool",description:"Warm coffee-inspired dark",preview:"☕"},{value:"warm",label:"Warm",description:"Earth tones and beiges",preview:"\uD83C\uDF3E"},{value:"neutral",label:"Neutral",description:"Clean and minimal grays",preview:"⚪"}];function P({className:a,variant:b="grid",showDescription:c=!0}){let{theme:e,resolvedTheme:g,setTheme:h}=(0,x.W)(),i=(0,A.Ib)(),[j,k]=f().useState(null),l=f().useCallback(a=>"system"===a?N[g??"light"]??N.light:N[a]??N.light,[g]),m=f().useCallback(a=>{h(a.value);let b=Date.now(),c=(()=>{let a=g??"light";return a.charAt(0).toUpperCase()+a.slice(1)})();k({id:b,message:"system"===a.value?`System theme selected; currently following ${c} mode`:`${a.label} theme selected`})},[g,h]);return(0,d.jsxs)("div",{className:(0,B.cn)("space-y-3",a),role:"radiogroup","aria-labelledby":"theme-selector-label",children:[j?(0,d.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:j.message},j.id):null,(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{id:"theme-selector-label",className:"text-foreground leading-none font-medium",children:"Appearance"}),c&&(0,d.jsx)("div",{className:"text-muted-foreground text-sm leading-relaxed",children:"Choose your preferred color theme for the app"})]}),(0,d.jsx)("div",{className:(0,B.cn)("grid gap-2","grid"===b?"grid-cols-2 sm:grid-cols-3":"grid-cols-1"),children:O.map(a=>{let f=e===a.value,h="system"===e&&"system"===a.value,j=l(a.value);return(0,d.jsx)(u.P.div,{whileTap:{scale:i?1:.98},whileHover:{scale:i?1:1.02},transition:{duration:.15},children:(0,d.jsxs)(y.Button,{variant:f?"default":"outline",size:"sm",onClick:()=>m(a),className:(0,B.cn)("flex h-auto w-full flex-col gap-3 py-3 text-xs font-medium transition-all","relative overflow-hidden hover:shadow-md active:scale-95","border-2",f?"border-primary/50 ring-primary/20 shadow-lg ring-1":"border-border/50 hover:border-border"),role:"radio","aria-checked":f,haptic:!0,children:[(0,d.jsxs)("div",{className:"relative z-10 flex w-full flex-col items-center gap-2",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-lg leading-none","aria-hidden":"true",children:a.preview}),(0,d.jsx)("div",{className:"border-border/30 h-3 w-3 rounded-full border",style:{backgroundColor:j.primary},"aria-hidden":"true"})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("span",{className:"leading-none font-medium",children:a.label}),h&&(0,d.jsxs)("span",{className:"mt-0.5 block text-xs capitalize opacity-70",children:["(",g,")"]}),c&&"list"===b&&(0,d.jsx)("span",{className:"mt-1 block text-xs opacity-70",children:a.description})]})]}),j&&(0,d.jsxs)("div",{className:"relative z-10 flex w-full flex-col gap-2 rounded-md border px-2 py-2 text-left",style:{backgroundColor:j.surfaceContainer,borderColor:j.outline,color:j.onSurface},"aria-hidden":"true",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,d.jsx)("div",{className:"h-2 flex-1 rounded-full",style:{background:`linear-gradient(135deg, ${j.primary} 0%, ${j.secondary} 100%)`}}),(0,d.jsx)("div",{className:"flex items-center gap-1",children:[j.primary,j.secondary,j.tertiary].map(a=>(0,d.jsx)("span",{className:"block h-3 w-3 rounded-sm shadow-sm",style:{backgroundColor:a,boxShadow:`0 0 0 1px ${function(a,b){if(!a.startsWith("#")||!b.startsWith("#"))return a;let c=parseInt(a.replace("#",""),16),d=parseInt(b.replace("#",""),16),e=Math.round((c>>16&255)*.8+(d>>16&255)*.2),f=Math.round((c>>8&255)*.8+(d>>8&255)*.2),g=Math.round((255&c)*.8+(255&d)*.2);return`rgba(${e}, ${f}, ${g}, 0.65)`}(a,j.onSurface)}`}},a))})]}),(0,d.jsx)("div",{className:"h-1 w-full rounded-full",style:{background:`linear-gradient(90deg, ${j.primary} 0%, ${j.tertiary} 100%)`}})]}),f&&(0,d.jsx)(u.P.div,{className:"bg-primary absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2*!i,ease:[.4,0,.2,1]},children:(0,d.jsx)("div",{className:"bg-primary-foreground h-1.5 w-1.5 rounded-full"})})]})},a.value)})})]})}function Q({open:a,onClose:b}){let c=v.F.useUtils(),{data:f,isLoading:g}=v.F.preferences.get.useQuery(void 0,{enabled:a});(0,x.W)();let h=(0,A.Ib)(),[i,j]=(0,e.useState)(!1),[k,l]=(0,e.useState)("collapse_expand"),[m,n]=(0,e.useState)("kg"),[o,p]=(0,e.useState)("120"),[q,r]=(0,e.useState)("120"),[s,C]=(0,e.useState)(!1),D=v.F.preferences.update.useMutation({onSuccess:async()=>{await c.preferences.get.invalidate(),b()},onError:a=>{console.error("Failed to save preferences",a),alert("Failed to save preferences. Please try again.")},onSettled:()=>{C(!1)}}),E=(0,e.useMemo)(()=>{if(s)return!0;if(!f)return!1;let a="predictive_defaults_enabled"in f&&!!f.predictive_defaults_enabled,b="right_swipe_action"in f?f.right_swipe_action??"collapse_expand":"collapse_expand",c="defaultWeightUnit"in f?f.defaultWeightUnit??"kg":"kg",d="leftSwipeThreshold"in f?String(f.leftSwipeThreshold??120):"120",e="rightSwipeThreshold"in f?String(f.rightSwipeThreshold??120):"120";return a===i&&b===k&&c===m&&d===o&&e===q},[f,i,k,m,o,q,s]),{restoreFocus:F}=(0,w.G)(),G=(0,e.useRef)(null);return a?(0,d.jsx)(t.N,{children:(0,d.jsx)(u.P.div,{role:"dialog","aria-modal":"true","aria-labelledby":"preferences-title","aria-describedby":"preferences-description",className:(0,B.cn)("fixed inset-0 z-[50000] flex min-h-screen items-center justify-center","bg-background/95 backdrop-blur-md backdrop-saturate-150","p-4 md:p-6"),onClick:()=>{F(),b()},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2*!h,ease:"easeOut"},children:(0,d.jsx)(w.s,{onEscape:()=>{F(),b()},initialFocusRef:G,preventScroll:!0,children:(0,d.jsx)(u.P.div,{className:"w-full max-w-md max-h-[90vh] overflow-hidden",onClick:a=>a.stopPropagation(),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3*!h,ease:[.4,0,.2,1]},children:(0,d.jsx)(z.o,{className:(0,B.cn)("glass-hero shadow-2xl rounded-xl border","bg-card/95 backdrop-blur-xl backdrop-saturate-150","border-border/50 overflow-hidden"),as:"div",children:(0,d.jsxs)("div",{className:"max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-border/30",children:[(0,d.jsx)("div",{className:"border-b border-border/50 px-6 py-5 bg-gradient-to-r from-card/50 to-card/80",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,d.jsx)("div",{className:"w-4 h-4 rounded-sm bg-primary/60"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{id:"preferences-title",className:"text-xl font-bold text-foreground leading-none",children:"Preferences"}),(0,d.jsx)("p",{id:"preferences-description",className:"text-sm text-muted-foreground mt-1",children:"Customise your workout tracking experience"})]})]})}),(0,d.jsxs)("div",{className:"space-y-8 px-6 py-6",children:[(0,d.jsxs)("section",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,d.jsx)("div",{className:"font-medium text-foreground leading-none",children:"Predictive defaults"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Prefill new sets with your most recent values for each exercise"})]}),(0,d.jsxs)(u.P.button,{type:"button",role:"switch","aria-checked":i,"aria-describedby":"predictive-description",onClick:()=>j(a=>!a),className:(0,B.cn)("relative inline-flex h-8 w-14 items-center rounded-full transition-all duration-200","focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2","hover:shadow-md touch-target",i?"bg-primary":"bg-muted"),whileTap:{scale:h?1:.95},children:[(0,d.jsx)(u.P.span,{className:"inline-block h-6 w-6 transform rounded-full bg-background shadow-sm",animate:{x:i?28:4},transition:{type:"spring",stiffness:500,damping:30,duration:h?0:void 0}}),(0,d.jsxs)("span",{className:"sr-only",children:[i?"Disable":"Enable"," predictive defaults"]})]})]}),(0,d.jsx)("div",{id:"predictive-description",className:"sr-only",children:"When enabled, new exercise sets will be pre-filled with your most recent weight, reps, and other values for that exercise"})]}),(0,d.jsx)(P,{variant:"grid",showDescription:!0}),(0,d.jsxs)("section",{className:"space-y-3",role:"radiogroup","aria-labelledby":"weight-unit-label",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{id:"weight-unit-label",className:"font-medium text-foreground leading-none",children:"Default Weight Unit"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Choose your preferred unit for displaying exercise weights"})]}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"kg",label:"Kilograms",short:"kg",icon:"⚖️"},{value:"lbs",label:"Pounds",short:"lbs",icon:"\uD83C\uDFCB️"}].map(({value:a,label:b,short:c,icon:e})=>(0,d.jsxs)(y.Button,{variant:m===a?"default":"outline",size:"sm",onClick:()=>n(a),className:(0,B.cn)("flex flex-col gap-1 h-auto py-3 text-sm transition-all","hover:shadow-md active:scale-95"),role:"radio","aria-checked":m===a,haptic:!0,children:[(0,d.jsx)("span",{className:"text-lg leading-none",children:e}),(0,d.jsx)("span",{className:"font-medium leading-none",children:b}),(0,d.jsxs)("span",{className:"text-xs opacity-70 leading-none",children:["(",c,")"]})]},a))})]}),(0,d.jsxs)("section",{className:"space-y-3",role:"radiogroup","aria-labelledby":"swipe-action-label",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{id:"swipe-action-label",className:"font-medium text-foreground leading-none",children:"Right-swipe Action"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Choose what happens when you right-swipe an exercise card"})]}),(0,d.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"collapse_expand",label:"Collapse/Expand",icon:"\uD83D\uDCCB",description:"Toggle exercise details"},{value:"none",label:"None",icon:"\uD83D\uDEAB",description:"No action"}].map(({value:a,label:b,icon:c,description:e})=>(0,d.jsxs)(y.Button,{variant:k===a?"default":"outline",size:"sm",onClick:()=>l(a),className:(0,B.cn)("flex flex-col gap-1 h-auto py-3 text-sm transition-all","hover:shadow-md active:scale-95"),role:"radio","aria-checked":k===a,haptic:!0,children:[(0,d.jsx)("span",{className:"text-lg leading-none",children:c}),(0,d.jsx)("span",{className:"font-medium leading-none",children:b}),(0,d.jsx)("span",{className:"text-xs opacity-70 leading-none text-center",children:e})]},a))})]}),(0,d.jsxs)("section",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("div",{className:"font-medium text-foreground leading-none",children:"Swipe Sensitivity"}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Configure swipe distance thresholds for triggering actions"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{htmlFor:"left-swipe-threshold",className:"block text-sm font-medium text-foreground leading-none",children:"Left swipe (px)"}),(0,d.jsx)("input",{id:"left-swipe-threshold",type:"number",min:"50",max:"300",step:"10",value:o,onChange:a=>p(a.target.value),className:(0,B.cn)("w-full px-3 py-2.5 rounded-md border transition-all","bg-input text-foreground border-border","focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2","hover:border-border/80 focus-visible:border-ring","touch-target"),"aria-describedby":"swipe-threshold-help"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("label",{htmlFor:"right-swipe-threshold",className:"block text-sm font-medium text-foreground leading-none",children:"Right swipe (px)"}),(0,d.jsx)("input",{id:"right-swipe-threshold",type:"number",min:"50",max:"300",step:"10",value:q,onChange:a=>r(a.target.value),className:(0,B.cn)("w-full px-3 py-2.5 rounded-md border transition-all","bg-input text-foreground border-border","focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2","hover:border-border/80 focus-visible:border-ring","touch-target"),"aria-describedby":"swipe-threshold-help"})]})]}),(0,d.jsx)("div",{id:"swipe-threshold-help",className:"text-xs text-muted-foreground leading-relaxed bg-muted/30 rounded-lg px-3 py-2",children:"\uD83D\uDCA1 Default: 120px. Higher values require longer swipes to trigger actions."})]}),(0,d.jsxs)("section",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"font-medium text-foreground leading-none flex items-center gap-2",children:[(0,d.jsx)("span",{className:"w-6 h-6 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"W"}),"WHOOP Integration"]}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Connect your WHOOP device to sync recovery and strain data"})]}),(0,d.jsx)(y.Button,{variant:"outline",size:"sm",asChild:!0,className:"w-full justify-start hover:shadow-md transition-all",haptic:!0,children:(0,d.jsxs)("a",{href:"/connect-whoop",className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"text-lg",children:"\uD83D\uDD17"}),"Connect WHOOP"]})})]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 border-t border-border/50 px-6 py-5 bg-gradient-to-r from-card/30 to-card/50",children:[(0,d.jsx)(y.Button,{ref:G,variant:"outline",size:"default",onClick:()=>{F(),b()},disabled:s,className:"sm:w-auto hover:shadow-md transition-all",children:"Cancel"}),(0,d.jsx)(y.Button,{variant:"default",size:"default",onClick:()=>void(()=>{if(E&&!s)return b();C(!0);let a={predictive_defaults_enabled:i,right_swipe_action:k,defaultWeightUnit:m,leftSwipeThreshold:parseInt(o,10),rightSwipeThreshold:parseInt(q,10)};D.mutate(a)})(),disabled:s||E,"aria-busy":s?"true":"false",className:"sm:w-auto hover:shadow-md transition-all",haptic:!0,children:s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.P.div,{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Saving…"]}):(0,d.jsx)(d.Fragment,{children:"Save Preferences"})})]})]})})})})})}):null}var R=c(16636),S=c(14996),T=c(14263),U=c(81296),V=c(16945),W=c(40170);function X(){let[a,b]=(0,e.useState)(!0),[c,d]=(0,e.useState)(!1);return!c||a}function Y(){let[a,b]=(0,e.useState)([]),[c,f]=(0,e.useState)([]),[g,h]=(0,e.useState)(!0),i=X(),j=async()=>{try{let[a,c]=await Promise.all([W.Hi.getActiveSessions(),W.Hi.getCompletedSessions()]);b(a),f(c)}catch(a){console.error("Failed to load offline sessions:",a)}finally{h(!1)}},k=async a=>{try{await W.Hi.completeSession(a),await j()}catch(a){console.error("Failed to complete session:",a)}},l=async a=>{try{await W.Hi.deleteSession(a),await j()}catch(a){console.error("Failed to delete session:",a)}},m=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return g?(0,d.jsxs)("div",{className:"p-4 text-center",children:[(0,d.jsx)("div",{className:"animate-spin h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-content-secondary",children:"Loading offline sessions..."})]}):a.length>0||c.length>0?(0,d.jsxs)("div",{className:"space-y-4",children:[a.length>0&&(0,d.jsxs)("div",{className:"bg-[var(--color-info-muted)] border border-[var(--color-info)]/30 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsx)("h3",{className:"font-medium text-[var(--color-info)]",children:"Active Workout Sessions"}),(0,d.jsxs)("span",{className:"text-xs bg-[var(--color-info)]/20 text-[var(--color-info)] px-2 py-1 rounded",children:[a.length," active"]})]}),(0,d.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,d.jsxs)("div",{className:"bg-surface-primary rounded p-3 border border-interactive-primary",children:[(0,d.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-sm",children:"Workout Session"}),(0,d.jsxs)("p",{className:"text-xs text-content-secondary",children:["Started: ",m(a.startTime)," • Duration: ",(a=>{let b=Math.floor((Date.now()-a)/6e4);if(b<60)return`${b}m`;let c=Math.floor(b/60);return`${c}h ${b%60}m`})(a.startTime)]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:()=>k(a.id),className:"text-xs bg-[var(--color-success)] text-white px-2 py-1 rounded hover:bg-[var(--color-success)]/80",children:"Complete"}),(0,d.jsx)("button",{onClick:()=>l(a.id),className:"text-xs bg-[var(--color-danger)] text-white px-2 py-1 rounded hover:bg-[var(--color-danger)]/80",children:"Delete"})]})]}),a.exercises.length>0&&(0,d.jsxs)("div",{className:"text-xs text-content-secondary",children:[(0,d.jsxs)("p",{children:[a.exercises.length," exercises"]}),(0,d.jsxs)("p",{children:[a.exercises.reduce((a,b)=>a+b.sets.filter(a=>a.completed).length,0)," sets completed"]})]})]},a.id))})]}),c.length>0&&(0,d.jsxs)("div",{className:"bg-[var(--color-warning-muted)] border border-[var(--color-warning)]/30 rounded-lg p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,d.jsx)("h3",{className:"font-medium text-yellow-900",children:"Pending Sync"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:[c.length," pending"]}),!i&&(0,d.jsx)("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:"Offline"})]})]}),(0,d.jsx)("div",{className:"space-y-2",children:c.map(a=>(0,d.jsx)("div",{className:"bg-surface-primary rounded p-3 border border-status-warning",children:(0,d.jsxs)("div",{className:"flex justify-between items-start",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-sm",children:"Completed Workout"}),(0,d.jsxs)("p",{className:"text-xs text-content-secondary",children:["Completed: ",m(a.lastSaved)]}),(0,d.jsxs)("p",{className:"text-xs text-content-secondary",children:[a.exercises.length," exercises, ",a.exercises.reduce((a,b)=>a+b.sets.filter(a=>a.completed).length,0)," sets"]})]}),(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("div",{className:"text-xs text-yellow-600",children:i?"Syncing...":"Will sync when online"}),(0,d.jsx)("button",{onClick:()=>l(a.id),className:"mt-1 text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Delete"})]})]})},a.id))}),!i&&(0,d.jsx)("div",{className:"mt-3 text-xs text-yellow-700 bg-yellow-100 p-2 rounded",children:"These workouts will automatically sync when you're back online."})]})]}):null}var Z=c(99187),$=c(27081),_=c(24328),aa=c(26691),ab=c(47089);let ac=_.bL,ad=_.l9;_.bm;let ae=_.ZL,af=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(_.hJ,{className:(0,B.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));af.displayName=_.hJ.displayName;let ag=(0,aa.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ah=e.forwardRef(({side:a="right",className:b,children:c,...e},f)=>(0,d.jsxs)(ae,{children:[(0,d.jsx)(af,{}),(0,d.jsxs)(_.UC,{ref:f,className:(0,B.cn)(ag({side:a}),b),...e,children:[c,(0,d.jsxs)(_.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,d.jsx)(ab.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));ah.displayName=_.UC.displayName;let ai=({className:a,...b})=>(0,d.jsx)("div",{className:(0,B.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});ai.displayName="SheetHeader";let aj=({className:a,...b})=>(0,d.jsx)("div",{className:(0,B.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});aj.displayName="SheetFooter";let ak=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(_.hE,{ref:c,className:(0,B.cn)("text-lg font-semibold text-foreground",a),...b}));ak.displayName=_.hE.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(_.VY,{ref:c,className:(0,B.cn)("text-sm text-muted-foreground",a),...b})).displayName=_.VY.displayName,e.forwardRef(({isOpen:a,onClose:b,title:c,footer:e,children:f,className:g},h)=>(0,d.jsx)(ac,{open:a,onOpenChange:a=>!a&&b(),children:(0,d.jsxs)(ah,{className:(0,B.cn)("sm:max-w-lg",g),ref:h,children:[c&&(0,d.jsx)(ai,{children:(0,d.jsx)(ak,{children:c})}),(0,d.jsx)("div",{className:"mt-6",children:f}),e&&(0,d.jsx)(aj,{className:"mt-6",children:e})]})})).displayName="LegacySheet";var al=c(49787),am=c(99043),an=c(15345);let ao={pendingOperations:0,failedOperations:0,lastSync:void 0,nextRetry:void 0},ap={idle:"success",syncing:"info",saving:"info",offline:"warning",error:"danger"},aq={idle:"All changes are synced and ready.",syncing:"Syncing queued updates with the server.",saving:"Saving updates locally before syncing.",offline:"You're offline. We'll queue updates until you're back online.",error:"Some updates need attention. Retry sync when you're ready."};var ar=c(32190),as=c(42280);let at={success:"bg-emerald-500/10 text-emerald-100 hover:bg-emerald-500/20 border border-emerald-400/40",info:"bg-sky-500/10 text-sky-100 hover:bg-sky-500/20 border border-sky-400/40",warning:"bg-amber-500/10 text-amber-100 hover:bg-amber-500/20 border border-amber-400/40",danger:"bg-rose-500/10 text-rose-100 hover:bg-rose-500/20 border border-rose-400/40"},au={idle:R.A,syncing:S.A,saving:T.A,offline:U.A,error:V.A},av={success:"text-emerald-300",info:"text-sky-300",warning:"text-amber-300",danger:"text-rose-300"};function aw(a){if(!a)return"never";let b=a instanceof Date?a.getTime():new Date(a).getTime();if(Number.isNaN(b))return"unknown";let c=Math.max(0,Math.floor((Date.now()-b)/1e3));return c<60?"just now":c<3600?`${Math.floor(c/60)}m ago`:c<86400?`${Math.floor(c/3600)}h ago`:`${Math.floor(c/86400)}d ago`}function ax(){let{user:a}=(0,as.A)(),b=function(){let[a,b]=(0,e.useState)(ao),c=(0,al.useIsFetching)(),d=(0,am.useIsMutating)(),f=X(),g=(0,e.useMemo)(()=>{let b="idle",e=!1;return f?d>0?(b="saving",e=!0):c>0||a.pendingOperations>0?(b="syncing",e=!0):a.failedOperations>0&&(b="error",e=!0):(b="offline",e=!0),{status:b,isActive:e}},[f,d,c,a.pendingOperations,a.failedOperations]),h=(0,e.useMemo)(()=>{let{status:b}=g;switch(b){case"offline":return a.pendingOperations>0?`Offline (${a.pendingOperations})`:"Offline";case"error":return a.failedOperations>0?`${a.failedOperations} to retry`:"Needs attention";case"saving":return"Saving...";case"syncing":return a.pendingOperations>0?`Syncing (${a.pendingOperations})`:"Syncing...";default:return"All synced"}},[g,a.pendingOperations,a.failedOperations]),i=(0,e.useCallback)(async()=>{f&&await (0,an.Ik)()},[f]),j=(0,e.useMemo)(()=>!!f&&!["syncing","saving"].includes(g.status),[g.status,f]);return{...{status:g.status,isActive:g.isActive,tone:ap[g.status],badgeText:h,description:aq[g.status],pendingOperations:a.pendingOperations,failedOperations:a.failedOperations,lastSync:a.lastSync,nextRetry:a.nextRetry,isOnline:f,isBusy:["syncing","saving"].includes(g.status)},manualSync:i,canManualSync:j}}(),{data:c,isLoading:f}=v.F.healthAdvice.getHistory.useQuery({limit:1},{enabled:!!a}),g=c?.[0],h=g?.readiness_rho?Number(g.readiness_rho):null,i=(0,e.useMemo)(()=>(0,ar.L)(Number.isFinite(h)?h:null),[h]),j=null!=h&&h>=.6?n.A:V.A,k=au[b.status];return a?(0,d.jsxs)(ac,{children:[(0,d.jsx)(ad,{asChild:!0,children:(0,d.jsxs)(y.Button,{variant:"ghost",className:(0,B.cn)("flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-medium transition-all",at[b.tone]),"aria-label":"Open sync and readiness status",children:[(0,d.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,d.jsx)("span",{className:(0,B.cn)("absolute inline-flex h-full w-full rounded-full opacity-75","danger"===b.tone?"bg-rose-400 animate-ping":"warning"===b.tone?"bg-amber-400 animate-pulse":"bg-sky-400 animate-ping",b.isBusy?"":"animate-none")}),(0,d.jsx)("span",{className:(0,B.cn)("relative inline-flex h-2 w-2 rounded-full","danger"===b.tone?"bg-rose-300":"warning"===b.tone?"bg-amber-300":"info"===b.tone?"bg-sky-300":"bg-emerald-300")})]}),(0,d.jsx)(k,{className:(0,B.cn)("h-3.5 w-3.5","saving"===b.status&&"animate-spin"),"aria-hidden":!0}),(0,d.jsx)("span",{children:b.badgeText})]})}),(0,d.jsx)(ah,{side:"bottom",className:"h-[80vh] overflow-y-auto rounded-t-3xl bg-gradient-to-b from-background/80 via-background to-background/95 px-5 pb-10 pt-6 sm:left-1/2 sm:top-auto sm:max-w-md sm:-translate-x-1/2","aria-label":"Sync and readiness status drawer",children:(0,d.jsxs)("div",{className:"mx-auto flex h-full max-w-xl flex-col gap-6",children:[(0,d.jsxs)("header",{className:"space-y-1",children:[(0,d.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground/80",children:"Session health"}),(0,d.jsx)("h2",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-xl font-semibold text-transparent",children:"Sync & Readiness"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:b.description})]}),(0,d.jsxs)("section",{className:"rounded-2xl border border-border/60 bg-card/80 p-4 backdrop-blur",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,d.jsx)(Z.E,{variant:"outline",className:"border-border/50 text-xs uppercase tracking-wide",children:b.isOnline?"Online":"Offline"}),b.pendingOperations>0&&(0,d.jsxs)(Z.E,{className:"bg-sky-500/10 text-sky-200",children:[b.pendingOperations," pending"]}),b.failedOperations>0&&(0,d.jsxs)(Z.E,{className:"bg-rose-500/15 text-rose-200",children:[b.failedOperations," retry"]}),(0,d.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Last sync ",aw(b.lastSync)]})]}),(0,d.jsxs)("div",{className:"mt-4 flex flex-col gap-3 sm:flex-row",children:[(0,d.jsx)(y.Button,{onClick:()=>void b.manualSync(),disabled:!b.canManualSync,className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",children:b.isBusy?(0,d.jsxs)("span",{className:"flex items-center justify-center gap-2 text-sm",children:[(0,d.jsx)(T.A,{className:"h-4 w-4 animate-spin"}),"Syncing"]}):(0,d.jsx)("span",{className:"text-sm",children:"Sync now"})}),(0,d.jsx)(y.Button,{variant:"outline",className:"flex-1 border-dashed border-border/60 text-sm",onClick:()=>void b.manualSync(),disabled:!b.isOnline||b.isBusy,children:"Refresh status"})]})]}),(0,d.jsxs)("section",{className:"rounded-2xl border border-border/60 bg-card/70 p-4 backdrop-blur",children:[(0,d.jsxs)("header",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground/70",children:"Readiness snapshot"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(j,{className:(0,B.cn)("h-4 w-4",av[i.tone]),"aria-hidden":!0}),(0,d.jsx)("h3",{className:(0,B.cn)("text-base font-semibold",av[i.tone]),children:i.label})]})]}),null!=h&&(0,d.jsxs)("div",{className:"text-right",children:[(0,d.jsx)("span",{className:"text-2xl font-semibold text-foreground",children:(100*h).toFixed(0)}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:" /100"})]})]}),(0,d.jsx)("div",{className:"mt-3 text-sm text-muted-foreground",children:f?(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)($.EA,{className:"h-4 w-40"}),(0,d.jsx)($.EA,{className:"h-3 w-24"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:i.message}),(0,d.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground/80",children:["Updated ",aw(g?.createdAt)]})]})})]}),(0,d.jsxs)("section",{className:"rounded-2xl border border-border/60 bg-card/70 p-4 backdrop-blur",children:[(0,d.jsxs)("header",{className:"mb-3 flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground/70",children:"Offline queue"}),(0,d.jsx)("h3",{className:"text-base font-semibold text-foreground",children:"Pending sessions"})]}),!b.isOnline&&(0,d.jsx)(Z.E,{className:"bg-amber-500/20 text-amber-200",children:"Offline"})]}),(0,d.jsx)(Y,{})]})]})})]}):null}var ay=c(71507);let az=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(ay.bL,{ref:c,className:(0,B.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));az.displayName=ay.bL.displayName;let aA=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(ay._V,{ref:c,className:(0,B.cn)("aspect-square h-full w-full",a),...b}));aA.displayName=ay._V.displayName;let aB=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(ay.H4,{ref:c,className:(0,B.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));aB.displayName=ay.H4.displayName;let aC=[{label:"Dashboard",href:"/",icon:j.A,requiresAuth:!0},{label:"Workouts",href:"/workouts",icon:k.A,requiresAuth:!0},{label:"Progress",href:"/progress",icon:l.A,requiresAuth:!0},{label:"Templates",href:"/templates",icon:m.A,requiresAuth:!0},{label:"Whoop",href:"/connect-whoop",icon:n.A,requiresAuth:!0}];function aD(){let a=(0,i.usePathname)(),{toggle:b,resolvedTheme:c}=(0,x.W)(),{user:f,isLoading:g,signOut:j}=(0,as.A)(),[k,l]=(0,e.useState)(!1),[m,n]=(0,e.useState)(!1),[t,u]=(0,e.useState)(!1),[v,w]=(0,e.useState)(!1),z=(0,e.useMemo)(()=>f?aC.filter(a=>!a.requiresAuth||!!f):[],[f]),A=z.length>0,C=(0,e.useMemo)(()=>{if(!f)return"";let a=f.user_metadata?.first_name;if("string"==typeof a&&a.trim().length>0)return a.trim();let b=f.user_metadata?.display_name;if("string"==typeof b&&b.trim().length>0)return b.trim();let c=f.email?.split("@")[0];return c&&c.length>0?c:"Athlete"},[f]),D=(0,e.useMemo)(()=>f?((C||f.email||"").match(/\b\w/g)??[]).slice(0,2).join("").toUpperCase()||"S":"",[C,f]),E=b=>!!a&&("/"===b?"/"===a:a.startsWith(b)),F=k?"dark"===c?(0,d.jsx)(o.A,{className:"h-5 w-5"}):(0,d.jsx)(p.A,{className:"h-5 w-5"}):(0,d.jsx)(p.A,{className:"h-5 w-5 opacity-0"}),G=async()=>{await j(),u(!1)},H=(0,d.jsxs)(h(),{href:"/",className:"flex items-center gap-2","aria-label":"Swole Tracker home",children:[(0,d.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-gradient-to-br from-primary via-primary/60 to-accent text-lg font-black text-primary-foreground shadow-sm",children:"S"}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-lg font-semibold text-transparent",children:"Swole Tracker"}),f&&(0,d.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Welcome back, ",C]})]})]});return(0,d.jsxs)("header",{className:"sticky top-0 z-50 border-b border-border/60 bg-background/75 backdrop-blur-xl",children:[(0,d.jsxs)("div",{className:"mx-auto flex h-16 w-full max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[A?(0,d.jsxs)(ac,{open:v,onOpenChange:w,children:[(0,d.jsx)(ad,{asChild:!0,children:(0,d.jsx)(y.Button,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Open navigation menu",children:(0,d.jsx)(q.A,{className:"h-5 w-5"})})}),(0,d.jsx)(ah,{side:"left",className:"w-full max-w-xs border-r border-border/40 bg-background/95 px-5 py-6",children:(0,d.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,d.jsx)("div",{children:H}),(0,d.jsx)("nav",{className:"space-y-1","aria-label":"Primary",children:z.map(a=>(0,d.jsxs)(h(),{href:a.href,onClick:()=>w(!1),className:(0,B.cn)("flex items-center justify-between rounded-xl border border-transparent px-3 py-3 text-sm font-medium transition-colors",E(a.href)?"border-primary/40 bg-primary/10 text-foreground":"text-muted-foreground hover:border-border/50 hover:bg-muted/50 hover:text-foreground"),children:[(0,d.jsxs)("span",{className:"flex items-center gap-3",children:[(0,d.jsx)(a.icon,{className:"h-4 w-4","aria-hidden":!0}),a.label]}),E(a.href)&&(0,d.jsx)("span",{className:"text-xs text-primary",children:"Active"})]},a.href))}),(0,d.jsxs)("div",{className:"space-y-3 border-t border-border/40 pt-4",children:[(0,d.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground/80",children:"Quick controls"}),(0,d.jsx)("div",{onClick:()=>w(!1),children:(0,d.jsx)(ax,{})}),(0,d.jsxs)(y.Button,{variant:"outline",className:"justify-start gap-3",onClick:()=>{b(),w(!1)},children:[k&&"dark"===c?(0,d.jsx)(o.A,{className:"h-4 w-4","aria-hidden":!0}):(0,d.jsx)(p.A,{className:"h-4 w-4","aria-hidden":!0}),"Toggle theme"]}),(0,d.jsxs)(y.Button,{variant:"outline",className:"justify-start gap-3",onClick:()=>{n(!0),w(!1)},children:[(0,d.jsx)(r.A,{className:"h-4 w-4","aria-hidden":!0})," Preferences"]})]})]})})]}):null,(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[H,A&&(0,d.jsx)("nav",{className:"hidden md:flex items-center gap-1","aria-label":"Primary",children:z.map(a=>{let b=a.icon,c=E(a.href);return(0,d.jsxs)(h(),{href:a.href,className:(0,B.cn)("group flex items-center gap-2 rounded-full px-3 py-2 text-sm transition-all",c?"bg-gradient-to-r from-primary/20 to-accent/20 text-foreground shadow-sm":"text-muted-foreground hover:bg-muted/60 hover:text-foreground"),children:[(0,d.jsx)(b,{className:(0,B.cn)("h-4 w-4",c&&"text-primary"),"aria-hidden":!0}),(0,d.jsx)("span",{className:"hidden lg:inline",children:a.label}),(0,d.jsx)("span",{className:"lg:hidden",children:a.label})]},a.href)})})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,d.jsx)(ax,{}),(0,d.jsx)(y.Button,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:b,className:"hidden sm:inline-flex",children:F}),(0,d.jsx)(y.Button,{variant:"ghost",size:"icon","aria-label":"Notifications",className:"hidden sm:inline-flex",children:(0,d.jsx)(s.A,{className:"h-5 w-5"})}),(0,d.jsx)(y.Button,{variant:"ghost",size:"icon","aria-label":"Open preferences",onClick:()=>n(!0),className:"hidden sm:inline-flex",children:(0,d.jsx)(r.A,{className:"h-5 w-5"})}),f?(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("button",{type:"button",onClick:()=>u(a=>!a),className:"flex h-9 w-9 items-center justify-center rounded-full border border-border/60 bg-card/80 transition-colors hover:border-primary/40","aria-label":"Account menu","aria-haspopup":"menu","aria-expanded":t,children:(0,d.jsxs)(az,{className:"h-8 w-8",children:[(0,d.jsx)(aA,{src:"/fitness-user-avatar.png",alt:`${C}'s avatar`}),(0,d.jsx)(aB,{className:"bg-primary/20 text-sm font-semibold text-primary",children:D})]})}),t&&(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-52 overflow-hidden rounded-2xl border border-border/60 bg-card/95 shadow-xl backdrop-blur",children:[(0,d.jsx)("div",{className:"border-b border-border/50 px-4 py-3 text-sm text-muted-foreground",children:f.email}),(0,d.jsxs)("button",{type:"button",onClick:G,className:"flex w-full items-center justify-between px-4 py-3 text-sm font-medium text-foreground transition-colors hover:bg-muted/60",children:["Sign out",(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:"↩"})]})]})]}):!g&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(h(),{href:"/auth/login",className:"rounded-full border border-border/60 px-4 py-2 text-sm font-medium text-foreground transition hover:border-primary/50 hover:bg-primary/10",children:"Sign in"}),(0,d.jsx)(y.Button,{className:"rounded-full bg-gradient-to-r from-primary to-accent px-4 py-2 text-sm font-semibold text-primary-foreground shadow-sm hover:opacity-90",asChild:!0,children:(0,d.jsx)(h(),{href:"/auth/register",children:"Create account"})})]})]})]}),(0,d.jsx)(Q,{open:m,onClose:()=>n(!1)})]})}},58146:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,65169,23))},58197:(a,b,c)=>{"use strict";c.r(b),c.d(b,{CacheAnalytics:()=>d,destroyCacheAnalytics:()=>h,getCacheAnalytics:()=>g,initializeCacheAnalytics:()=>f});class d{constructor(a){this.queryClient=a,this.metrics={hits:0,misses:0,backgroundFetches:0,cacheSize:0,queryCount:0,oldestCacheEntry:Date.now(),newestCacheEntry:Date.now(),memoryOnlyMode:!1},this.events=[],this.maxEvents=1e3,this.setupQueryClientMonitoring(),this.startPeriodicReporting()}setupQueryClientMonitoring(){}recordEvent(a){this.events.push(a),this.events.length>this.maxEvents&&(this.events=this.events.slice(-this.maxEvents))}updateMetrics(){}getMetrics(){let a=this.metrics.hits+this.metrics.misses,b=a>0?this.metrics.hits/a*100:0,c=this.metrics.queryCount>0?(Date.now()-this.metrics.oldestCacheEntry)/this.metrics.queryCount:0;return{...this.metrics,hitRate:b,totalRequests:a,averageCacheAge:c}}getRecentEvents(a=50){return this.events.slice(-a)}recordCacheHealth(a){this.metrics.memoryOnlyMode=a.memoryOnlyMode,this.recordEvent({type:"cache_health",queryKey:"system",timestamp:Date.now(),size:a.cacheSize}),(a.memoryOnlyMode||a.cleanupPerformed)&&this.sendToPostHog("cache_health_critical",a)}recordQuotaExceeded(a){this.recordEvent({type:"quota_exceeded",queryKey:"system",timestamp:Date.now(),size:a.previousSize}),this.sendToPostHog("cache_quota_exceeded",a)}recordCacheCleared(a){this.recordEvent({type:"cache_cleared",queryKey:"system",timestamp:Date.now()}),this.sendToPostHog("cache_cleared",{trigger:a}),this.metrics={hits:0,misses:0,backgroundFetches:0,cacheSize:0,queryCount:0,oldestCacheEntry:Date.now(),newestCacheEntry:Date.now(),memoryOnlyMode:!1}}async sendToPostHog(a,b){}startPeriodicReporting(){}destroy(){this.reportingInterval&&(clearInterval(this.reportingInterval),this.reportingInterval=void 0)}async measureQueryPerformance(a,b){let c=Date.now();try{let d=await b(),e=Date.now();return this.sendToPostHog("query_performance",{query_key:a,load_time_ms:e-c,success:!0}),d}catch(d){let b=Date.now();throw this.sendToPostHog("query_performance",{query_key:a,load_time_ms:b-c,success:!1,error:String(d)}),d}}getCacheReport(){let a=this.getMetrics(),b=this.getRecentEvents(20),c=[];return a.hitRate<50&&c.push("Low cache hit rate - consider increasing staleTime for frequently accessed data"),a.memoryOnlyMode&&c.push("Running in memory-only mode - consider clearing old data or reducing cache size"),a.cacheSize>4194304&&c.push("Cache size is large - consider implementing more aggressive cleanup policies"),a.queryCount>500&&c.push("High number of cached queries - some queries might not be getting evicted properly"),{summary:`Cache Hit Rate: ${a.hitRate.toFixed(1)}%, Size: ${(a.cacheSize/1048576).toFixed(2)}MB, Queries: ${a.queryCount}`,metrics:a,recentEvents:b,recommendations:c}}}let e=null;function f(a){return e&&e.destroy(),e=new d(a)}function g(){return e}function h(){e&&(e.destroy(),e=null)}},59732:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(75338),e=c(65169),f=c.n(e);function g(){return(0,d.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"404 - Page Not Found"}),(0,d.jsx)("p",{className:"text-muted-foreground mb-6",children:"The page you're looking for doesn't exist."}),(0,d.jsx)(f(),{href:"/",className:"btn-primary px-6 py-2 rounded-lg",children:"Go Home"})]})})}},61706:(a,b,c)=>{"use strict";c.d(b,{ErrorBoundary:()=>e});var d=c(97954);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call ErrorBoundary() from the server but ErrorBoundary is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/components/error-boundary.tsx","ErrorBoundary");(0,d.registerClientReference)(function(){throw Error("Attempted to call withErrorBoundary() from the server but withErrorBoundary is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/components/error-boundary.tsx","withErrorBoundary")},72320:(a,b,c)=>{"use strict";c.d(b,{mz:()=>g,V5:()=>h,b:()=>i});let d={fast:160,base:200,slow:240,celebration:500},e={ease:[.4,0,.2,1],spring:[.2,.8,.2,1.2],bounce:[.68,-.55,.265,1.55]},f={duration:d.base/1e3,ease:e.ease};d.fast,d.fast,d.fast,d.slow,d.slow,e.bounce,d.celebration,e.spring;let g={initial:{scale:1,y:0},hover:{scale:1.02,y:-2,transition:{duration:d.fast/1e3,ease:e.ease}},tap:{scale:.95,y:0,transition:{duration:.1,ease:e.bounce}}};d.fast,e.ease,d.base,e.ease,d.fast,e.ease,d.base,e.bounce,d.base,e.ease,d.celebration,e.spring,d.base,e.ease,d.fast,e.ease;let h={animate:{x:["-100%","100%"],transition:{repeat:1/0,duration:1.5,ease:"easeInOut"}}};d.fast,e.ease,d.base,e.ease,d.base,e.ease,d.base,e.ease,d.slow,e.ease,d.slow,e.bounce;let i=(a="light")=>{}},81793:(a,b,c)=>{"use strict";c.d(b,{WG:()=>f,pI:()=>e});let d={STATIC:{staleTime:12096e5,gcTime:2592e6},WHOOP_HISTORICAL:{staleTime:6048e5,gcTime:12096e5},WHOOP_CURRENT:{staleTime:36e5,gcTime:216e5},MEDIUM:{staleTime:0,gcTime:864e5},DYNAMIC:{staleTime:0,gcTime:72e5}};function e(a){a.setQueryDefaults(["templates"],{staleTime:d.STATIC.staleTime,gcTime:d.STATIC.gcTime,refetchOnWindowFocus:!1,refetchInterval:!1}),a.setQueryDefaults(["preferences"],{staleTime:d.STATIC.staleTime,gcTime:d.STATIC.gcTime,refetchOnWindowFocus:!1,refetchInterval:!1}),a.setQueryDefaults(["workouts","getRecent"],{staleTime:d.MEDIUM.staleTime,gcTime:d.MEDIUM.gcTime,refetchOnWindowFocus:!0,refetchInterval:!1}),a.setQueryDefaults(["workouts","getById"],{staleTime:d.MEDIUM.staleTime,gcTime:d.MEDIUM.gcTime,refetchOnWindowFocus:!1}),a.setQueryDefaults(["workouts","getLastExerciseData"],{staleTime:d.MEDIUM.staleTime,gcTime:d.MEDIUM.gcTime,refetchOnWindowFocus:!0}),a.setQueryDefaults(["progress","getWorkoutDates"],{staleTime:3e5,gcTime:36e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),a.setQueryDefaults(["progress","getVolumeProgression"],{staleTime:6e5,gcTime:72e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),a.setQueryDefaults(["progress","getConsistencyStats"],{staleTime:9e5,gcTime:108e5,refetchOnWindowFocus:!1,refetchOnMount:!1}),a.setQueryDefaults(["jokes"],{staleTime:d.DYNAMIC.staleTime,gcTime:d.DYNAMIC.gcTime,refetchOnWindowFocus:!0}),a.setQueryDefaults(["whoop","getIntegrationStatus"],{staleTime:d.WHOOP_CURRENT.staleTime,gcTime:d.WHOOP_CURRENT.gcTime,refetchOnWindowFocus:!1,refetchInterval:!1,retry:(a,b)=>{if(b&&"object"==typeof b&&"data"in b){let a=b.data;if(a?.code==="UNAUTHORIZED"||a?.code==="NOT_FOUND")return!1}return a<2},retryDelay:5e3}),a.setQueryDefaults(["whoop","getWorkouts"],{staleTime:d.WHOOP_HISTORICAL.staleTime,gcTime:d.WHOOP_HISTORICAL.gcTime,refetchOnWindowFocus:!1,refetchInterval:!1,retry:(a,b)=>{if(b&&"object"==typeof b&&"data"in b){let a=b.data;if(a?.code==="UNAUTHORIZED"||a?.code==="NOT_FOUND")return!1}return a<2},retryDelay:5e3}),["getLatestRecoveryData"].forEach(b=>{a.setQueryDefaults(["whoop",b],{staleTime:d.WHOOP_CURRENT.staleTime,gcTime:d.WHOOP_CURRENT.gcTime,refetchOnWindowFocus:!1,refetchInterval:!1,retry:(a,b)=>{if(b&&"object"==typeof b&&"data"in b){let a=b.data;if(a?.code==="UNAUTHORIZED"||a?.code==="NOT_FOUND")return!1}return a<2},retryDelay:5e3})}),["getRecovery","getCycles","getSleep","getProfile","getBodyMeasurements"].forEach(b=>{a.setQueryDefaults(["whoop",b],{staleTime:d.WHOOP_HISTORICAL.staleTime,gcTime:d.WHOOP_HISTORICAL.gcTime,refetchOnWindowFocus:!1,refetchInterval:!1,retry:(a,b)=>{if(b&&"object"==typeof b&&"data"in b){let a=b.data;if(a?.code==="UNAUTHORIZED"||a?.code==="NOT_FOUND")return!1}return a<2},retryDelay:5e3})})}let f={workouts:a=>{a.invalidateQueries({queryKey:["workouts"]})},templates:a=>{a.invalidateQueries({queryKey:["templates"]})},preferences:a=>{a.invalidateQueries({queryKey:["preferences"]})},jokes:a=>{a.invalidateQueries({queryKey:["jokes"]})},whoop:a=>{a.invalidateQueries({queryKey:["whoop"]})},all:a=>{a.invalidateQueries()}}},86228:(a,b,c)=>{"use strict";c.d(b,{o:()=>g});var d=c(21124),e=c(38301),f=c(44943);let g=e.forwardRef(({children:a,className:b,as:c="div",...e},g)=>(0,d.jsxs)(c,{ref:g,className:(0,f.cn)("glass-surface","backdrop-blur-sm","relative overflow-hidden","border border-glass-border","shadow-sm","rounded-lg","relative",b),...e,children:[(0,d.jsx)("div",{className:"absolute inset-0 opacity-10",style:{background:`
              radial-gradient(600px 300px at 10% -10%, var(--color-glass-highlight) 0%, transparent 50%),
              radial-gradient(400px 200px at 90% 0%, var(--color-glass-accent) 0%, transparent 50%)
            `},"aria-hidden":"true"}),(0,d.jsx)("div",{className:"relative z-10",children:a})]}));g.displayName="GlassSurface"},90088:(a,b,c)=>{"use strict";c.d(b,{vF:()=>e});class d{shouldLog(a){return!this.isTest&&(!!this.isDevelopment||"warn"===a||"error"===a)}sanitizeContext(a){let b={...a};return delete b.accessToken,delete b.refreshToken,delete b.password,delete b.secret,this.isDevelopment||Object.keys(b).forEach(a=>{let c=b[a];"string"==typeof c&&c.length>100&&(b[a]=c.substring(0,97)+"...")}),b}debug(a,b){this.shouldLog("debug")&&console.log(`[DEBUG] ${a}`,b?this.sanitizeContext(b):{})}info(a,b){this.shouldLog("info")&&console.log(`[INFO] ${a}`,b?this.sanitizeContext(b):{})}warn(a,b){this.shouldLog("warn")&&console.warn(`[WARN] ${a}`,b?this.sanitizeContext(b):{})}error(a,b,c){if(!this.shouldLog("error"))return;let d=c?this.sanitizeContext(c):{};b instanceof Error?console.error(`[ERROR] ${a}`,{error:b.message,stack:this.isDevelopment?b.stack:void 0,...d}):console.error(`[ERROR] ${a}`,{error:b,...d})}webhook(a,b,c){if(this.isDevelopment){let d={...c,payload:b};this.debug(`Webhook: ${a}`,d)}else this.info(`Webhook: ${a}`,c)}timing(a,b,c){this.isDevelopment&&this.debug(`${a} took ${b}ms`,c)}security(a,b){(console.warn??console.log)(`[SECURITY] ${a}`,b?this.sanitizeContext(b):{})}constructor(){this.isDevelopment=!1,this.isTest=!1}}let e=new d},91591:(a,b,c)=>{"use strict";c.d(b,{TRPCReactProvider:()=>e});var d=c(97954);(0,d.registerClientReference)(function(){throw Error("Attempted to call api() from the server but api is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/trpc/react.tsx","api");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call TRPCReactProvider() from the server but TRPCReactProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/steven/swole-tracker/src/trpc/react.tsx","TRPCReactProvider")},92650:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,3991,23))},99187:(a,b,c)=>{"use strict";c.d(b,{E:()=>j});var d=c(21124);c(38301);var e=c(96425),f=c(26691),g=c(44943);let h=(0,f.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 gap-1 [&>svg]:size-3 [&>svg]:pointer-events-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background transition-all duration-150 ease-out overflow-hidden",{variants:{variant:{default:"border-transparent bg-interactive-primary text-primary-foreground",secondary:"border-transparent bg-interactive-secondary text-secondary-foreground",destructive:"border-transparent bg-status-danger text-white focus-visible:ring-destructive/40",outline:"border-interactive-primary bg-surface-base text-interactive-primary"}},defaultVariants:{variant:"default"}}),i={default:"primary",secondary:"secondary",destructive:"error",outline:"surface"};function j({className:a,variant:b,asChild:c=!1,style:f,...j}){let k=c?e.DX:"span",l=i[b??"default"]??"surface";return(0,d.jsx)(k,{"data-slot":"badge","data-state-layer":l,className:(0,g.cn)(h({variant:b}),a),style:f,...j})}}};