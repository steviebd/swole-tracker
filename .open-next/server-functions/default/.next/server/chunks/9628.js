"use strict";exports.id=9628,exports.ids=[9628],exports.modules={39628:(a,b,c)=>{let d;c.d(b,{generateText:()=>eZ});var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S="vercel.ai.error",T=Symbol.for(S),U=class a extends Error{constructor({name:a,message:b,cause:c}){super(b),this[e]=!0,this.name=a,this.cause=c}static isInstance(b){return a.hasMarker(b,S)}static hasMarker(a,b){let c=Symbol.for(b);return null!=a&&"object"==typeof a&&c in a&&"boolean"==typeof a[c]&&!0===a[c]}};e=T;var V=U,W="AI_APICallError",X=`vercel.ai.error.${W}`,Y=Symbol.for(X),Z=class extends V{constructor({message:a,url:b,requestBodyValues:c,statusCode:d,responseHeaders:e,responseBody:g,cause:h,isRetryable:i=null!=d&&(408===d||409===d||429===d||d>=500),data:j}){super({name:W,message:a,cause:h}),this[f]=!0,this.url=b,this.requestBodyValues=c,this.statusCode=d,this.responseHeaders=e,this.responseBody=g,this.isRetryable=i,this.data=j}static isInstance(a){return V.hasMarker(a,X)}};function $(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}f=Y,Symbol.for("vercel.ai.error.AI_EmptyResponseBodyError");var _="AI_InvalidArgumentError",aa=`vercel.ai.error.${_}`,ab=Symbol.for(aa),ac=class extends V{constructor({message:a,cause:b,argument:c}){super({name:_,message:a,cause:b}),this[g]=!0,this.argument=c}static isInstance(a){return V.hasMarker(a,aa)}};g=ab;var ad="AI_InvalidPromptError",ae=`vercel.ai.error.${ad}`,af=Symbol.for(ae),ag=class extends V{constructor({prompt:a,message:b,cause:c}){super({name:ad,message:`Invalid prompt: ${b}`,cause:c}),this[h]=!0,this.prompt=a}static isInstance(a){return V.hasMarker(a,ae)}};h=af,Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var ah="AI_JSONParseError",ai=`vercel.ai.error.${ah}`,aj=Symbol.for(ai),ak=class extends V{constructor({text:a,cause:b}){super({name:ah,message:`JSON parsing failed: Text: ${a}.
Error message: ${$(b)}`,cause:b}),this[i]=!0,this.text=a}static isInstance(a){return V.hasMarker(a,ai)}};i=aj,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError"),Symbol.for("vercel.ai.error.AI_NoSuchModelError"),Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var al="AI_TypeValidationError",am=`vercel.ai.error.${al}`,an=Symbol.for(am),ao=class a extends V{constructor({value:a,cause:b}){super({name:al,message:`Type validation failed: Value: ${JSON.stringify(a)}.
Error message: ${$(b)}`,cause:b}),this[j]=!0,this.value=a}static isInstance(a){return V.hasMarker(a,am)}static wrap({value:b,cause:c}){return a.isInstance(c)&&c.value===b?c:new a({value:b,cause:c})}};j=an;Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError");class ap extends Error{constructor(a,b){super(a),this.name="ParseError",this.type=b.type,this.field=b.field,this.value=b.value,this.line=b.line}}function aq(a){}class ar extends TransformStream{constructor({onError:a,onRetry:b,onComment:c}={}){let d;super({start(e){d=function(a){if("function"==typeof a)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:b=aq,onError:c=aq,onRetry:d=aq,onComment:e}=a,f="",g=!0,h,i="",j="";function k(a){if(""===a)return void(i.length>0&&b({id:h,event:j||void 0,data:i.endsWith(`
`)?i.slice(0,-1):i}),h=void 0,i="",j="");if(a.startsWith(":")){e&&e(a.slice(a.startsWith(": ")?2:1));return}let c=a.indexOf(":");if(-1!==c){let b=a.slice(0,c),d=" "===a[c+1]?2:1;l(b,a.slice(c+d),a);return}l(a,"",a)}function l(a,b,e){switch(a){case"event":j=b;break;case"data":i=`${i}${b}
`;break;case"id":h=b.includes("\0")?void 0:b;break;case"retry":/^\d+$/.test(b)?d(parseInt(b,10)):c(new ap(`Invalid \`retry\` value: "${b}"`,{type:"invalid-retry",value:b,line:e}));break;default:c(new ap(`Unknown field "${a.length>20?`${a.slice(0,20)}\u2026`:a}"`,{type:"unknown-field",field:a,value:b,line:e}))}}return{feed:function(a){let b=g?a.replace(/^\xEF\xBB\xBF/,""):a,[c,d]=function(a){let b=[],c="",d=0;for(;d<a.length;){let e=a.indexOf("\r",d),f=a.indexOf(`
`,d),g=-1;if(-1!==e&&-1!==f?g=Math.min(e,f):-1!==e?g=e===a.length-1?-1:e:-1!==f&&(g=f),-1===g){c=a.slice(d);break}{let c=a.slice(d,g);b.push(c),"\r"===a[(d=g+1)-1]&&a[d]===`
`&&d++}}return[b,c]}(`${f}${b}`);for(let a of c)k(a);f=d,g=!1},reset:function(a={}){f&&a.consume&&k(f),g=!0,h=void 0,i="",j="",f=""}}}({onEvent:a=>{e.enqueue(a)},onError(b){"terminate"===a?e.error(b):"function"==typeof a&&a(b)},onRetry:b,onComment:c})},transform(a){d.feed(a)}})}}var as=c(55145),at=c(98925);class au{constructor(a){this.counter=0,this.metadataRegistry=a?.metadata??as.fd,this.target=a?.target??"draft-2020-12",this.unrepresentable=a?.unrepresentable??"throw",this.override=a?.override??(()=>{}),this.io=a?.io??"output",this.seen=new Map}process(a,b={path:[],schemaPath:[]}){var c;let d=a._zod.def,e=this.seen.get(a);if(e)return e.count++,b.schemaPath.includes(a)&&(e.cycle=b.path),e.schema;let f={schema:{},count:1,cycle:void 0,path:b.path};this.seen.set(a,f);let g=a._zod.toJSONSchema?.();if(g)f.schema=g;else{let c={...b,schemaPath:[...b.schemaPath,a],path:b.path},e=a._zod.parent;if(e)f.ref=e,this.process(e,c),this.seen.get(e).isParent=!0;else{let b=f.schema;switch(d.type){case"string":{b.type="string";let{minimum:c,maximum:d,format:e,patterns:g,contentEncoding:h}=a._zod.bag;if("number"==typeof c&&(b.minLength=c),"number"==typeof d&&(b.maxLength=d),e&&(b.format=({guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""})[e]??e,""===b.format&&delete b.format),h&&(b.contentEncoding=h),g&&g.size>0){let a=[...g];1===a.length?b.pattern=a[0].source:a.length>1&&(f.schema.allOf=[...a.map(a=>({..."draft-7"===this.target||"draft-4"===this.target||"openapi-3.0"===this.target?{type:"string"}:{},pattern:a.source}))])}break}case"number":{let{minimum:c,maximum:d,format:e,multipleOf:f,exclusiveMaximum:g,exclusiveMinimum:h}=a._zod.bag;"string"==typeof e&&e.includes("int")?b.type="integer":b.type="number","number"==typeof h&&("draft-4"===this.target||"openapi-3.0"===this.target?(b.minimum=h,b.exclusiveMinimum=!0):b.exclusiveMinimum=h),"number"==typeof c&&(b.minimum=c,"number"==typeof h&&"draft-4"!==this.target&&(h>=c?delete b.minimum:delete b.exclusiveMinimum)),"number"==typeof g&&("draft-4"===this.target||"openapi-3.0"===this.target?(b.maximum=g,b.exclusiveMaximum=!0):b.exclusiveMaximum=g),"number"==typeof d&&(b.maximum=d,"number"==typeof g&&"draft-4"!==this.target&&(g<=d?delete b.maximum:delete b.exclusiveMaximum)),"number"==typeof f&&(b.multipleOf=f);break}case"boolean":case"success":b.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw Error("Symbols cannot be represented in JSON Schema");break;case"null":"openapi-3.0"===this.target?(b.type="string",b.nullable=!0,b.enum=[null]):b.type="null";break;case"any":case"unknown":break;case"undefined":if("throw"===this.unrepresentable)throw Error("Undefined cannot be represented in JSON Schema");break;case"void":if("throw"===this.unrepresentable)throw Error("Void cannot be represented in JSON Schema");break;case"never":b.not={};break;case"date":if("throw"===this.unrepresentable)throw Error("Date cannot be represented in JSON Schema");break;case"array":{let{minimum:e,maximum:f}=a._zod.bag;"number"==typeof e&&(b.minItems=e),"number"==typeof f&&(b.maxItems=f),b.type="array",b.items=this.process(d.element,{...c,path:[...c.path,"items"]});break}case"object":{b.type="object",b.properties={};let a=d.shape;for(let d in a)b.properties[d]=this.process(a[d],{...c,path:[...c.path,"properties",d]});let e=new Set([...new Set(Object.keys(a))].filter(a=>{let b=d.shape[a]._zod;return"input"===this.io?void 0===b.optin:void 0===b.optout}));e.size>0&&(b.required=Array.from(e)),d.catchall?._zod.def.type==="never"?b.additionalProperties=!1:d.catchall?d.catchall&&(b.additionalProperties=this.process(d.catchall,{...c,path:[...c.path,"additionalProperties"]})):"output"===this.io&&(b.additionalProperties=!1);break}case"union":b.anyOf=d.options.map((a,b)=>this.process(a,{...c,path:[...c.path,"anyOf",b]}));break;case"intersection":{let a=this.process(d.left,{...c,path:[...c.path,"allOf",0]}),e=this.process(d.right,{...c,path:[...c.path,"allOf",1]}),f=a=>"allOf"in a&&1===Object.keys(a).length;b.allOf=[...f(a)?a.allOf:[a],...f(e)?e.allOf:[e]];break}case"tuple":{b.type="array";let e="draft-2020-12"===this.target?"prefixItems":"items",f="draft-2020-12"===this.target||"openapi-3.0"===this.target?"items":"additionalItems",g=d.items.map((a,b)=>this.process(a,{...c,path:[...c.path,e,b]})),h=d.rest?this.process(d.rest,{...c,path:[...c.path,f,..."openapi-3.0"===this.target?[d.items.length]:[]]}):null;"draft-2020-12"===this.target?(b.prefixItems=g,h&&(b.items=h)):"openapi-3.0"===this.target?(b.items={anyOf:g},h&&b.items.anyOf.push(h),b.minItems=g.length,h||(b.maxItems=g.length)):(b.items=g,h&&(b.additionalItems=h));let{minimum:i,maximum:j}=a._zod.bag;"number"==typeof i&&(b.minItems=i),"number"==typeof j&&(b.maxItems=j);break}case"record":b.type="object",("draft-7"===this.target||"draft-2020-12"===this.target)&&(b.propertyNames=this.process(d.keyType,{...c,path:[...c.path,"propertyNames"]})),b.additionalProperties=this.process(d.valueType,{...c,path:[...c.path,"additionalProperties"]});break;case"map":if("throw"===this.unrepresentable)throw Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw Error("Set cannot be represented in JSON Schema");break;case"enum":{let a=(0,at.w5)(d.entries);a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),b.enum=a;break}case"literal":{let a=[];for(let b of d.values)if(void 0===b){if("throw"===this.unrepresentable)throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof b)if("throw"===this.unrepresentable)throw Error("BigInt literals cannot be represented in JSON Schema");else a.push(Number(b));else a.push(b);if(0===a.length);else if(1===a.length){let c=a[0];b.type=null===c?"null":typeof c,"draft-4"===this.target||"openapi-3.0"===this.target?b.enum=[c]:b.const=c}else a.every(a=>"number"==typeof a)&&(b.type="number"),a.every(a=>"string"==typeof a)&&(b.type="string"),a.every(a=>"boolean"==typeof a)&&(b.type="string"),a.every(a=>null===a)&&(b.type="null"),b.enum=a;break}case"file":{let c={type:"string",format:"binary",contentEncoding:"binary"},{minimum:d,maximum:e,mime:f}=a._zod.bag;void 0!==d&&(c.minLength=d),void 0!==e&&(c.maxLength=e),f?1===f.length?(c.contentMediaType=f[0],Object.assign(b,c)):b.anyOf=f.map(a=>({...c,contentMediaType:a})):Object.assign(b,c);break}case"transform":if("throw"===this.unrepresentable)throw Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{let a=this.process(d.innerType,c);"openapi-3.0"===this.target?(f.ref=d.innerType,b.nullable=!0):b.anyOf=[a,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(d.innerType,c),f.ref=d.innerType;break;case"default":this.process(d.innerType,c),f.ref=d.innerType,b.default=JSON.parse(JSON.stringify(d.defaultValue));break;case"prefault":this.process(d.innerType,c),f.ref=d.innerType,"input"===this.io&&(b._prefault=JSON.parse(JSON.stringify(d.defaultValue)));break;case"catch":{let a;this.process(d.innerType,c),f.ref=d.innerType;try{a=d.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}b.default=a;break}case"nan":if("throw"===this.unrepresentable)throw Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{let c=a._zod.pattern;if(!c)throw Error("Pattern not found in template literal");b.type="string",b.pattern=c.source;break}case"pipe":{let a="input"===this.io?"transform"===d.in._zod.def.type?d.out:d.in:d.out;this.process(a,c),f.ref=a;break}case"readonly":this.process(d.innerType,c),f.ref=d.innerType,b.readOnly=!0;break;case"lazy":{let b=a._zod.innerType;this.process(b,c),f.ref=b;break}case"custom":if("throw"===this.unrepresentable)throw Error("Custom types cannot be represented in JSON Schema");break;case"function":if("throw"===this.unrepresentable)throw Error("Function types cannot be represented in JSON Schema")}}}let h=this.metadataRegistry.get(a);return h&&Object.assign(f.schema,h),"input"===this.io&&function a(b,c){let d=c??{seen:new Set};if(d.seen.has(b))return!1;d.seen.add(b);let e=b._zod.def;switch(e.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":case"function":return!1;case"array":return a(e.element,d);case"object":for(let b in e.shape)if(a(e.shape[b],d))return!0;return!1;case"union":for(let b of e.options)if(a(b,d))return!0;return!1;case"intersection":return a(e.left,d)||a(e.right,d);case"tuple":for(let b of e.items)if(a(b,d))return!0;if(e.rest&&a(e.rest,d))return!0;return!1;case"record":case"map":return a(e.keyType,d)||a(e.valueType,d);case"set":return a(e.valueType,d);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return a(e.innerType,d);case"lazy":return a(e.getter(),d);case"transform":return!0;case"pipe":return a(e.in,d)||a(e.out,d)}throw Error(`Unknown schema type: ${e.type}`)}(a)&&(delete f.schema.examples,delete f.schema.default),"input"===this.io&&f.schema._prefault&&((c=f.schema).default??(c.default=f.schema._prefault)),delete f.schema._prefault,this.seen.get(a).schema}emit(a,b){let c={cycles:b?.cycles??"ref",reused:b?.reused??"inline",external:b?.external??void 0},d=this.seen.get(a);if(!d)throw Error("Unprocessed schema. This is a bug in Zod.");let e=a=>{let b="draft-2020-12"===this.target?"$defs":"definitions";if(c.external){let d=c.external.registry.get(a[0])?.id,e=c.external.uri??(a=>a);if(d)return{ref:e(d)};let f=a[1].defId??a[1].schema.id??`schema${this.counter++}`;return a[1].defId=f,{defId:f,ref:`${e("__shared")}#/${b}/${f}`}}if(a[1]===d)return{ref:"#"};let e=`#/${b}/`,f=a[1].schema.id??`__schema${this.counter++}`;return{defId:f,ref:e+f}},f=a=>{if(a[1].schema.$ref)return;let b=a[1],{ref:c,defId:d}=e(a);b.def={...b.schema},d&&(b.defId=d);let f=b.schema;for(let a in f)delete f[a];f.$ref=c};if("throw"===c.cycles)for(let a of this.seen.entries()){let b=a[1];if(b.cycle)throw Error(`Cycle detected: #/${b.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let b of this.seen.entries()){let d=b[1];if(a===b[0]){f(b);continue}if(c.external){let d=c.external.registry.get(b[0])?.id;if(a!==b[0]&&d){f(b);continue}}if(this.metadataRegistry.get(b[0])?.id||d.cycle||d.count>1&&"ref"===c.reused){f(b);continue}}let g=(a,b)=>{let c=this.seen.get(a),d=c.def??c.schema,e={...d};if(null===c.ref)return;let f=c.ref;if(c.ref=null,f){g(f,b);let a=this.seen.get(f).schema;a.$ref&&("draft-7"===b.target||"draft-4"===b.target||"openapi-3.0"===b.target)?(d.allOf=d.allOf??[],d.allOf.push(a)):(Object.assign(d,a),Object.assign(d,e))}c.isParent||this.override({zodSchema:a,jsonSchema:d,path:c.path??[]})};for(let a of[...this.seen.entries()].reverse())g(a[0],{target:this.target});let h={};if("draft-2020-12"===this.target?h.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?h.$schema="http://json-schema.org/draft-07/schema#":"draft-4"===this.target?h.$schema="http://json-schema.org/draft-04/schema#":"openapi-3.0"===this.target||console.warn(`Invalid target: ${this.target}`),c.external?.uri){let b=c.external.registry.get(a)?.id;if(!b)throw Error("Schema is missing an `id` property");h.$id=c.external.uri(b)}Object.assign(h,d.def);let i=c.external?.defs??{};for(let a of this.seen.entries()){let b=a[1];b.def&&b.defId&&(i[b.defId]=b.def)}c.external||Object.keys(i).length>0&&("draft-2020-12"===this.target?h.$defs=i:h.definitions=i);try{return JSON.parse(JSON.stringify(h))}catch(a){throw Error("Error converting schema to JSON.")}}}var av=c(60617);!function(a){a.assertEqual=a=>{},a.assertIs=function(a){},a.assertNever=function(a){throw Error()},a.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},a.getValidEnumValues=b=>{let c=a.objectKeys(b).filter(a=>"number"!=typeof b[b[a]]),d={};for(let a of c)d[a]=b[a];return a.objectValues(d)},a.objectValues=b=>a.objectKeys(b).map(function(a){return b[a]}),a.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},a.find=(a,b)=>{for(let c of a)if(b(c))return c},a.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,a.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},a.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b}(k||(k={})),(l||(l={})).mergeShapes=(a,b)=>({...a,...b});let aw=k.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ax=a=>{switch(typeof a){case"undefined":return aw.undefined;case"string":return aw.string;case"number":return Number.isNaN(a)?aw.nan:aw.number;case"boolean":return aw.boolean;case"function":return aw.function;case"bigint":return aw.bigint;case"symbol":return aw.symbol;case"object":if(Array.isArray(a))return aw.array;if(null===a)return aw.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return aw.promise;if("undefined"!=typeof Map&&a instanceof Map)return aw.map;if("undefined"!=typeof Set&&a instanceof Set)return aw.set;if("undefined"!=typeof Date&&a instanceof Date)return aw.date;return aw.object;default:return aw.unknown}},ay=k.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class az extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};let b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof az))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,k.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}az.create=a=>new az(a);let aA=(a,b)=>{let c;switch(a.code){case ay.invalid_type:c=a.received===aw.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case ay.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,k.jsonStringifyReplacer)}`;break;case ay.unrecognized_keys:c=`Unrecognized key(s) in object: ${k.joinValues(a.keys,", ")}`;break;case ay.invalid_union:c="Invalid input";break;case ay.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${k.joinValues(a.options)}`;break;case ay.invalid_enum_value:c=`Invalid enum value. Expected ${k.joinValues(a.options)}, received '${a.received}'`;break;case ay.invalid_arguments:c="Invalid function arguments";break;case ay.invalid_return_type:c="Invalid function return type";break;case ay.invalid_date:c="Invalid date";break;case ay.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:k.assertNever(a.validation):c="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case ay.too_small:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case ay.too_big:c="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case ay.custom:c="Invalid input";break;case ay.invalid_intersection_types:c="Intersection results could not be merged";break;case ay.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case ay.not_finite:c="Number must be finite";break;default:c=b.defaultError,k.assertNever(a)}return{message:c}};!function(a){a.errToObj=a=>"string"==typeof a?{message:a}:a||{},a.toString=a=>"string"==typeof a?a:a?.message}(m||(m={}));let aB=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}};function aC(a,b){let c=aB({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,aA,void 0].filter(a=>!!a)});a.common.issues.push(c)}class aD{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return aE;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return aD.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return aE;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let aE=Object.freeze({status:"aborted"}),aF=a=>({status:"dirty",value:a}),aG=a=>({status:"valid",value:a}),aH=a=>"undefined"!=typeof Promise&&a instanceof Promise;class aI{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let aJ=(a,b)=>{if("valid"===b.status)return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new az(a.common.issues);return this._error=b,this._error}}};function aK(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class aL{get description(){return this._def.description}_getType(a){return ax(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:ax(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new aD,ctx:{common:a.parent.common,data:a.data,parsedType:ax(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(aH(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:ax(a)},d=this._parseSync({data:a,path:c.path,parent:c});return aJ(c,d)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:ax(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return"valid"===c.status?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>"valid"===a.status?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:ax(a)},d=this._parse({data:a,path:c.path,parent:c});return aJ(c,await (aH(d)?d:Promise.resolve(d)))}refine(a,b){return this._refinement((c,d)=>{let e=a(c),f=()=>d.addIssue({code:ay.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&e instanceof Promise?e.then(a=>!!a||(f(),!1)):!!e||(f(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new bu({schema:this,typeName:n.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return bv.create(this,this._def)}nullable(){return bw.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bd.create(this)}promise(){return bt.create(this,this._def)}or(a){return bf.create([this,a],this._def)}and(a){return bi.create(this,a,this._def)}transform(a){return new bu({...aK(this._def),schema:this,typeName:n.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new bx({...aK(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:n.ZodDefault})}brand(){return new bA({typeName:n.ZodBranded,type:this,...aK(this._def)})}catch(a){return new by({...aK(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:n.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return bB.create(this,a)}readonly(){return bC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let aM=/^c[^\s-]{8,}$/i,aN=/^[0-9a-z]+$/,aO=/^[0-9A-HJKMNP-TV-Z]{26}$/i,aP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aQ=/^[a-z0-9_-]{21}$/i,aR=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,aS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,aV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,aW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,aX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,aY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,aZ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,a$="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",a_=RegExp(`^${a$}$`);function a0(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}class a1 extends aL{_parse(a){var b,c,e,f;let g;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==aw.string){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.string,received:b.parsedType}),aE}let h=new aD;for(let i of this._def.checks)if("min"===i.kind)a.data.length<i.value&&(aC(g=this._getOrReturnCtx(a,g),{code:ay.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("max"===i.kind)a.data.length>i.value&&(aC(g=this._getOrReturnCtx(a,g),{code:ay.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),h.dirty());else if("length"===i.kind){let b=a.data.length>i.value,c=a.data.length<i.value;(b||c)&&(g=this._getOrReturnCtx(a,g),b?aC(g,{code:ay.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):c&&aC(g,{code:ay.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),h.dirty())}else if("email"===i.kind)aT.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"email",code:ay.invalid_string,message:i.message}),h.dirty());else if("emoji"===i.kind)d||(d=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),d.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"emoji",code:ay.invalid_string,message:i.message}),h.dirty());else if("uuid"===i.kind)aP.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"uuid",code:ay.invalid_string,message:i.message}),h.dirty());else if("nanoid"===i.kind)aQ.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"nanoid",code:ay.invalid_string,message:i.message}),h.dirty());else if("cuid"===i.kind)aM.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"cuid",code:ay.invalid_string,message:i.message}),h.dirty());else if("cuid2"===i.kind)aN.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"cuid2",code:ay.invalid_string,message:i.message}),h.dirty());else if("ulid"===i.kind)aO.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"ulid",code:ay.invalid_string,message:i.message}),h.dirty());else if("url"===i.kind)try{new URL(a.data)}catch{aC(g=this._getOrReturnCtx(a,g),{validation:"url",code:ay.invalid_string,message:i.message}),h.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"regex",code:ay.invalid_string,message:i.message}),h.dirty())):"trim"===i.kind?a.data=a.data.trim():"includes"===i.kind?a.data.includes(i.value,i.position)||(aC(g=this._getOrReturnCtx(a,g),{code:ay.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),h.dirty()):"toLowerCase"===i.kind?a.data=a.data.toLowerCase():"toUpperCase"===i.kind?a.data=a.data.toUpperCase():"startsWith"===i.kind?a.data.startsWith(i.value)||(aC(g=this._getOrReturnCtx(a,g),{code:ay.invalid_string,validation:{startsWith:i.value},message:i.message}),h.dirty()):"endsWith"===i.kind?a.data.endsWith(i.value)||(aC(g=this._getOrReturnCtx(a,g),{code:ay.invalid_string,validation:{endsWith:i.value},message:i.message}),h.dirty()):"datetime"===i.kind?(function(a){let b=`${a$}T${a0(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)})(i).test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{code:ay.invalid_string,validation:"datetime",message:i.message}),h.dirty()):"date"===i.kind?a_.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{code:ay.invalid_string,validation:"date",message:i.message}),h.dirty()):"time"===i.kind?RegExp(`^${a0(i)}$`).test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{code:ay.invalid_string,validation:"time",message:i.message}),h.dirty()):"duration"===i.kind?aS.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"duration",code:ay.invalid_string,message:i.message}),h.dirty()):"ip"===i.kind?(b=a.data,!(("v4"===(c=i.version)||!c)&&aU.test(b)||("v6"===c||!c)&&aW.test(b))&&1&&(aC(g=this._getOrReturnCtx(a,g),{validation:"ip",code:ay.invalid_string,message:i.message}),h.dirty())):"jwt"===i.kind?!function(a,b){if(!aR.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,i.alg)&&(aC(g=this._getOrReturnCtx(a,g),{validation:"jwt",code:ay.invalid_string,message:i.message}),h.dirty()):"cidr"===i.kind?(e=a.data,!(("v4"===(f=i.version)||!f)&&aV.test(e)||("v6"===f||!f)&&aX.test(e))&&1&&(aC(g=this._getOrReturnCtx(a,g),{validation:"cidr",code:ay.invalid_string,message:i.message}),h.dirty())):"base64"===i.kind?aY.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"base64",code:ay.invalid_string,message:i.message}),h.dirty()):"base64url"===i.kind?aZ.test(a.data)||(aC(g=this._getOrReturnCtx(a,g),{validation:"base64url",code:ay.invalid_string,message:i.message}),h.dirty()):k.assertNever(i);return{status:h.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:ay.invalid_string,...m.errToObj(c)})}_addCheck(a){return new a1({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...m.errToObj(a)})}url(a){return this._addCheck({kind:"url",...m.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...m.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...m.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...m.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...m.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...m.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...m.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...m.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...m.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...m.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...m.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...m.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...m.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...m.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...m.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...m.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...m.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...m.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...m.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...m.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...m.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...m.errToObj(b)})}nonempty(a){return this.min(1,m.errToObj(a))}trim(){return new a1({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a1({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a1({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}a1.create=a=>new a1({checks:[],typeName:n.ZodString,coerce:a?.coerce??!1,...aK(a)});class a2 extends aL{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==aw.number){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.number,received:b.parsedType}),aE}let c=new aD;for(let d of this._def.checks)"int"===d.kind?k.isInteger(a.data)||(aC(b=this._getOrReturnCtx(a,b),{code:ay.invalid_type,expected:"integer",received:"float",message:d.message}),c.dirty()):"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,exact:!1,message:d.message}),c.dirty()):"multipleOf"===d.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,d.value)&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):"finite"===d.kind?Number.isFinite(a.data)||(aC(b=this._getOrReturnCtx(a,b),{code:ay.not_finite,message:d.message}),c.dirty()):k.assertNever(d);return{status:c.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,m.toString(b))}gt(a,b){return this.setLimit("min",a,!1,m.toString(b))}lte(a,b){return this.setLimit("max",a,!0,m.toString(b))}lt(a,b){return this.setLimit("max",a,!1,m.toString(b))}setLimit(a,b,c,d){return new a2({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:m.toString(d)}]})}_addCheck(a){return new a2({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:m.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:m.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:m.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:m.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:m.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:m.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:m.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:m.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:m.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&k.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}a2.create=a=>new a2({checks:[],typeName:n.ZodNumber,coerce:a?.coerce||!1,...aK(a)});class a3 extends aL{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==aw.bigint)return this._getInvalidInput(a);let c=new aD;for(let d of this._def.checks)"min"===d.kind?(d.inclusive?a.data<d.value:a.data<=d.value)&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.too_small,type:"bigint",minimum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"max"===d.kind?(d.inclusive?a.data>d.value:a.data>=d.value)&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.too_big,type:"bigint",maximum:d.value,inclusive:d.inclusive,message:d.message}),c.dirty()):"multipleOf"===d.kind?a.data%d.value!==BigInt(0)&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.not_multiple_of,multipleOf:d.value,message:d.message}),c.dirty()):k.assertNever(d);return{status:c.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.bigint,received:b.parsedType}),aE}gte(a,b){return this.setLimit("min",a,!0,m.toString(b))}gt(a,b){return this.setLimit("min",a,!1,m.toString(b))}lte(a,b){return this.setLimit("max",a,!0,m.toString(b))}lt(a,b){return this.setLimit("max",a,!1,m.toString(b))}setLimit(a,b,c,d){return new a3({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:m.toString(d)}]})}_addCheck(a){return new a3({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:m.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:m.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:m.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:m.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:m.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}a3.create=a=>new a3({checks:[],typeName:n.ZodBigInt,coerce:a?.coerce??!1,...aK(a)});class a4 extends aL{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==aw.boolean){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.boolean,received:b.parsedType}),aE}return aG(a.data)}}a4.create=a=>new a4({typeName:n.ZodBoolean,coerce:a?.coerce||!1,...aK(a)});class a5 extends aL{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==aw.date){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.date,received:b.parsedType}),aE}if(Number.isNaN(a.data.getTime()))return aC(this._getOrReturnCtx(a),{code:ay.invalid_date}),aE;let c=new aD;for(let d of this._def.checks)"min"===d.kind?a.data.getTime()<d.value&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.too_small,message:d.message,inclusive:!0,exact:!1,minimum:d.value,type:"date"}),c.dirty()):"max"===d.kind?a.data.getTime()>d.value&&(aC(b=this._getOrReturnCtx(a,b),{code:ay.too_big,message:d.message,inclusive:!0,exact:!1,maximum:d.value,type:"date"}),c.dirty()):k.assertNever(d);return{status:c.value,value:new Date(a.data.getTime())}}_addCheck(a){return new a5({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:m.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:m.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}a5.create=a=>new a5({checks:[],coerce:a?.coerce||!1,typeName:n.ZodDate,...aK(a)});class a6 extends aL{_parse(a){if(this._getType(a)!==aw.symbol){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.symbol,received:b.parsedType}),aE}return aG(a.data)}}a6.create=a=>new a6({typeName:n.ZodSymbol,...aK(a)});class a7 extends aL{_parse(a){if(this._getType(a)!==aw.undefined){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.undefined,received:b.parsedType}),aE}return aG(a.data)}}a7.create=a=>new a7({typeName:n.ZodUndefined,...aK(a)});class a8 extends aL{_parse(a){if(this._getType(a)!==aw.null){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.null,received:b.parsedType}),aE}return aG(a.data)}}a8.create=a=>new a8({typeName:n.ZodNull,...aK(a)});class a9 extends aL{constructor(){super(...arguments),this._any=!0}_parse(a){return aG(a.data)}}a9.create=a=>new a9({typeName:n.ZodAny,...aK(a)});class ba extends aL{constructor(){super(...arguments),this._unknown=!0}_parse(a){return aG(a.data)}}ba.create=a=>new ba({typeName:n.ZodUnknown,...aK(a)});class bb extends aL{_parse(a){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.never,received:b.parsedType}),aE}}bb.create=a=>new bb({typeName:n.ZodNever,...aK(a)});class bc extends aL{_parse(a){if(this._getType(a)!==aw.undefined){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.void,received:b.parsedType}),aE}return aG(a.data)}}bc.create=a=>new bc({typeName:n.ZodVoid,...aK(a)});class bd extends aL{_parse(a){let{ctx:b,status:c}=this._processInputParams(a),d=this._def;if(b.parsedType!==aw.array)return aC(b,{code:ay.invalid_type,expected:aw.array,received:b.parsedType}),aE;if(null!==d.exactLength){let a=b.data.length>d.exactLength.value,e=b.data.length<d.exactLength.value;(a||e)&&(aC(b,{code:a?ay.too_big:ay.too_small,minimum:e?d.exactLength.value:void 0,maximum:a?d.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:d.exactLength.message}),c.dirty())}if(null!==d.minLength&&b.data.length<d.minLength.value&&(aC(b,{code:ay.too_small,minimum:d.minLength.value,type:"array",inclusive:!0,exact:!1,message:d.minLength.message}),c.dirty()),null!==d.maxLength&&b.data.length>d.maxLength.value&&(aC(b,{code:ay.too_big,maximum:d.maxLength.value,type:"array",inclusive:!0,exact:!1,message:d.maxLength.message}),c.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>d.type._parseAsync(new aI(b,a,b.path,c)))).then(a=>aD.mergeArray(c,a));let e=[...b.data].map((a,c)=>d.type._parseSync(new aI(b,a,b.path,c)));return aD.mergeArray(c,e)}get element(){return this._def.type}min(a,b){return new bd({...this._def,minLength:{value:a,message:m.toString(b)}})}max(a,b){return new bd({...this._def,maxLength:{value:a,message:m.toString(b)}})}length(a,b){return new bd({...this._def,exactLength:{value:a,message:m.toString(b)}})}nonempty(a){return this.min(1,a)}}bd.create=(a,b)=>new bd({type:a,minLength:null,maxLength:null,exactLength:null,typeName:n.ZodArray,...aK(b)});class be extends aL{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=k.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==aw.object){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.object,received:b.parsedType}),aE}let{status:b,ctx:c}=this._processInputParams(a),{shape:d,keys:e}=this._getCached(),f=[];if(!(this._def.catchall instanceof bb&&"strip"===this._def.unknownKeys))for(let a in c.data)e.includes(a)||f.push(a);let g=[];for(let a of e){let b=d[a],e=c.data[a];g.push({key:{status:"valid",value:a},value:b._parse(new aI(c,e,c.path,a)),alwaysSet:a in c.data})}if(this._def.catchall instanceof bb){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of f)g.push({key:{status:"valid",value:a},value:{status:"valid",value:c.data[a]}});else if("strict"===a)f.length>0&&(aC(c,{code:ay.unrecognized_keys,keys:f}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of f){let d=c.data[b];g.push({key:{status:"valid",value:b},value:a._parse(new aI(c,d,c.path,b)),alwaysSet:b in c.data})}}return c.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of g){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>aD.mergeObjectSync(b,a)):aD.mergeObjectSync(b,g)}get shape(){return this._def.shape()}strict(a){return m.errToObj,new be({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:m.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new be({...this._def,unknownKeys:"strip"})}passthrough(){return new be({...this._def,unknownKeys:"passthrough"})}extend(a){return new be({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new be({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:n.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new be({...this._def,catchall:a})}pick(a){let b={};for(let c of k.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new be({...this._def,shape:()=>b})}omit(a){let b={};for(let c of k.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new be({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof be){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=bv.create(a(e))}return new be({...b._def,shape:()=>c})}if(b instanceof bd)return new bd({...b._def,type:a(b.element)});if(b instanceof bv)return bv.create(a(b.unwrap()));if(b instanceof bw)return bw.create(a(b.unwrap()));if(b instanceof bj)return bj.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of k.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new be({...this._def,shape:()=>b})}required(a){let b={};for(let c of k.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof bv;)a=a._def.innerType;b[c]=a}return new be({...this._def,shape:()=>b})}keyof(){return bq(k.objectKeys(this.shape))}}be.create=(a,b)=>new be({shape:()=>a,unknownKeys:"strip",catchall:bb.create(),typeName:n.ZodObject,...aK(b)}),be.strictCreate=(a,b)=>new be({shape:()=>a,unknownKeys:"strict",catchall:bb.create(),typeName:n.ZodObject,...aK(b)}),be.lazycreate=(a,b)=>new be({shape:a,unknownKeys:"strip",catchall:bb.create(),typeName:n.ZodObject,...aK(b)});class bf extends aL{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new az(a.ctx.common.issues));return aC(b,{code:ay.invalid_union,unionErrors:c}),aE});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let e=d.map(a=>new az(a));return aC(b,{code:ay.invalid_union,unionErrors:e}),aE}}get options(){return this._def.options}}bf.create=(a,b)=>new bf({options:a,typeName:n.ZodUnion,...aK(b)});let bg=a=>{if(a instanceof bo)return bg(a.schema);if(a instanceof bu)return bg(a.innerType());if(a instanceof bp)return[a.value];if(a instanceof br)return a.options;if(a instanceof bs)return k.objectValues(a.enum);else if(a instanceof bx)return bg(a._def.innerType);else if(a instanceof a7)return[void 0];else if(a instanceof a8)return[null];else if(a instanceof bv)return[void 0,...bg(a.unwrap())];else if(a instanceof bw)return[null,...bg(a.unwrap())];else if(a instanceof bA)return bg(a.unwrap());else if(a instanceof bC)return bg(a.unwrap());else if(a instanceof by)return bg(a._def.innerType);else return[]};class bh extends aL{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==aw.object)return aC(b,{code:ay.invalid_type,expected:aw.object,received:b.parsedType}),aE;let c=this.discriminator,d=b.data[c],e=this.optionsMap.get(d);return e?b.common.async?e._parseAsync({data:b.data,path:b.path,parent:b}):e._parseSync({data:b.data,path:b.path,parent:b}):(aC(b,{code:ay.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[c]}),aE)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=bg(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new bh({typeName:n.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...aK(c)})}}class bi extends aL{_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=(a,d)=>{if("aborted"===a.status||"aborted"===d.status)return aE;let e=function a(b,c){let d=ax(b),e=ax(c);if(b===c)return{valid:!0,data:b};if(d===aw.object&&e===aw.object){let d=k.objectKeys(c),e=k.objectKeys(b).filter(a=>-1!==d.indexOf(a)),f={...b,...c};for(let d of e){let e=a(b[d],c[d]);if(!e.valid)return{valid:!1};f[d]=e.data}return{valid:!0,data:f}}if(d===aw.array&&e===aw.array){if(b.length!==c.length)return{valid:!1};let d=[];for(let e=0;e<b.length;e++){let f=a(b[e],c[e]);if(!f.valid)return{valid:!1};d.push(f.data)}return{valid:!0,data:d}}if(d===aw.date&&e===aw.date&&+b==+c)return{valid:!0,data:b};return{valid:!1}}(a.value,d.value);return e.valid?(("dirty"===a.status||"dirty"===d.status)&&b.dirty(),{status:b.value,value:e.data}):(aC(c,{code:ay.invalid_intersection_types}),aE)};return c.common.async?Promise.all([this._def.left._parseAsync({data:c.data,path:c.path,parent:c}),this._def.right._parseAsync({data:c.data,path:c.path,parent:c})]).then(([a,b])=>d(a,b)):d(this._def.left._parseSync({data:c.data,path:c.path,parent:c}),this._def.right._parseSync({data:c.data,path:c.path,parent:c}))}}bi.create=(a,b,c)=>new bi({left:a,right:b,typeName:n.ZodIntersection,...aK(c)});class bj extends aL{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==aw.array)return aC(c,{code:ay.invalid_type,expected:aw.array,received:c.parsedType}),aE;if(c.data.length<this._def.items.length)return aC(c,{code:ay.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),aE;!this._def.rest&&c.data.length>this._def.items.length&&(aC(c,{code:ay.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let d=[...c.data].map((a,b)=>{let d=this._def.items[b]||this._def.rest;return d?d._parse(new aI(c,a,c.path,b)):null}).filter(a=>!!a);return c.common.async?Promise.all(d).then(a=>aD.mergeArray(b,a)):aD.mergeArray(b,d)}get items(){return this._def.items}rest(a){return new bj({...this._def,rest:a})}}bj.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new bj({items:a,typeName:n.ZodTuple,rest:null,...aK(b)})};class bk extends aL{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==aw.object)return aC(c,{code:ay.invalid_type,expected:aw.object,received:c.parsedType}),aE;let d=[],e=this._def.keyType,f=this._def.valueType;for(let a in c.data)d.push({key:e._parse(new aI(c,a,c.path,a)),value:f._parse(new aI(c,c.data[a],c.path,a)),alwaysSet:a in c.data});return c.common.async?aD.mergeObjectAsync(b,d):aD.mergeObjectSync(b,d)}get element(){return this._def.valueType}static create(a,b,c){return new bk(b instanceof aL?{keyType:a,valueType:b,typeName:n.ZodRecord,...aK(c)}:{keyType:a1.create(),valueType:a,typeName:n.ZodRecord,...aK(b)})}}class bl extends aL{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==aw.map)return aC(c,{code:ay.invalid_type,expected:aw.map,received:c.parsedType}),aE;let d=this._def.keyType,e=this._def.valueType,f=[...c.data.entries()].map(([a,b],f)=>({key:d._parse(new aI(c,a,c.path,[f,"key"])),value:e._parse(new aI(c,b,c.path,[f,"value"]))}));if(c.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of f){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return aE;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of f){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return aE;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}bl.create=(a,b,c)=>new bl({valueType:b,keyType:a,typeName:n.ZodMap,...aK(c)});class bm extends aL{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.parsedType!==aw.set)return aC(c,{code:ay.invalid_type,expected:aw.set,received:c.parsedType}),aE;let d=this._def;null!==d.minSize&&c.data.size<d.minSize.value&&(aC(c,{code:ay.too_small,minimum:d.minSize.value,type:"set",inclusive:!0,exact:!1,message:d.minSize.message}),b.dirty()),null!==d.maxSize&&c.data.size>d.maxSize.value&&(aC(c,{code:ay.too_big,maximum:d.maxSize.value,type:"set",inclusive:!0,exact:!1,message:d.maxSize.message}),b.dirty());let e=this._def.valueType;function f(a){let c=new Set;for(let d of a){if("aborted"===d.status)return aE;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let g=[...c.data.values()].map((a,b)=>e._parse(new aI(c,a,c.path,b)));return c.common.async?Promise.all(g).then(a=>f(a)):f(g)}min(a,b){return new bm({...this._def,minSize:{value:a,message:m.toString(b)}})}max(a,b){return new bm({...this._def,maxSize:{value:a,message:m.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}bm.create=(a,b)=>new bm({valueType:a,minSize:null,maxSize:null,typeName:n.ZodSet,...aK(b)});class bn extends aL{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==aw.function)return aC(b,{code:ay.invalid_type,expected:aw.function,received:b.parsedType}),aE;function c(a,c){return aB({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,aA,aA].filter(a=>!!a),issueData:{code:ay.invalid_arguments,argumentsError:c}})}function d(a,c){return aB({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,aA,aA].filter(a=>!!a),issueData:{code:ay.invalid_return_type,returnTypeError:c}})}let e={errorMap:b.common.contextualErrorMap},f=b.data;if(this._def.returns instanceof bt){let a=this;return aG(async function(...b){let g=new az([]),h=await a._def.args.parseAsync(b,e).catch(a=>{throw g.addIssue(c(b,a)),g}),i=await Reflect.apply(f,this,h);return await a._def.returns._def.type.parseAsync(i,e).catch(a=>{throw g.addIssue(d(i,a)),g})})}{let a=this;return aG(function(...b){let g=a._def.args.safeParse(b,e);if(!g.success)throw new az([c(b,g.error)]);let h=Reflect.apply(f,this,g.data),i=a._def.returns.safeParse(h,e);if(!i.success)throw new az([d(h,i.error)]);return i.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new bn({...this._def,args:bj.create(a).rest(ba.create())})}returns(a){return new bn({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new bn({args:a||bj.create([]).rest(ba.create()),returns:b||ba.create(),typeName:n.ZodFunction,...aK(c)})}}class bo extends aL{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}bo.create=(a,b)=>new bo({getter:a,typeName:n.ZodLazy,...aK(b)});class bp extends aL{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return aC(b,{received:b.data,code:ay.invalid_literal,expected:this._def.value}),aE}return{status:"valid",value:a.data}}get value(){return this._def.value}}function bq(a,b){return new br({values:a,typeName:n.ZodEnum,...aK(b)})}bp.create=(a,b)=>new bp({value:a,typeName:n.ZodLiteral,...aK(b)});class br extends aL{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return aC(b,{expected:k.joinValues(c),received:b.parsedType,code:ay.invalid_type}),aE}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return aC(b,{received:b.data,code:ay.invalid_enum_value,options:c}),aE}return aG(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return br.create(a,{...this._def,...b})}exclude(a,b=this._def){return br.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}br.create=bq;class bs extends aL{_parse(a){let b=k.getValidEnumValues(this._def.values),c=this._getOrReturnCtx(a);if(c.parsedType!==aw.string&&c.parsedType!==aw.number){let a=k.objectValues(b);return aC(c,{expected:k.joinValues(a),received:c.parsedType,code:ay.invalid_type}),aE}if(this._cache||(this._cache=new Set(k.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=k.objectValues(b);return aC(c,{received:c.data,code:ay.invalid_enum_value,options:a}),aE}return aG(a.data)}get enum(){return this._def.values}}bs.create=(a,b)=>new bs({values:a,typeName:n.ZodNativeEnum,...aK(b)});class bt extends aL{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==aw.promise&&!1===b.common.async?(aC(b,{code:ay.invalid_type,expected:aw.promise,received:b.parsedType}),aE):aG((b.parsedType===aw.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}bt.create=(a,b)=>new bt({type:a,typeName:n.ZodPromise,...aK(b)});class bu extends aL{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===n.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{aC(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return aE;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?aE:"dirty"===d.status||"dirty"===b.value?aF(d.value):d});{if("aborted"===b.value)return aE;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?aE:"dirty"===d.status||"dirty"===b.value?aF(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?aE:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?aE:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>"valid"!==a.status?aE:Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})));else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if("valid"!==a.status)return aE;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}k.assertNever(d)}}bu.create=(a,b,c)=>new bu({schema:a,typeName:n.ZodEffects,effect:b,...aK(c)}),bu.createWithPreprocess=(a,b,c)=>new bu({schema:b,effect:{type:"preprocess",transform:a},typeName:n.ZodEffects,...aK(c)});class bv extends aL{_parse(a){return this._getType(a)===aw.undefined?aG(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}bv.create=(a,b)=>new bv({innerType:a,typeName:n.ZodOptional,...aK(b)});class bw extends aL{_parse(a){return this._getType(a)===aw.null?aG(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}bw.create=(a,b)=>new bw({innerType:a,typeName:n.ZodNullable,...aK(b)});class bx extends aL{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return b.parsedType===aw.undefined&&(c=this._def.defaultValue()),this._def.innerType._parse({data:c,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}bx.create=(a,b)=>new bx({innerType:a,typeName:n.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...aK(b)});class by extends aL{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return aH(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new az(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new az(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}by.create=(a,b)=>new by({innerType:a,typeName:n.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...aK(b)});class bz extends aL{_parse(a){if(this._getType(a)!==aw.nan){let b=this._getOrReturnCtx(a);return aC(b,{code:ay.invalid_type,expected:aw.nan,received:b.parsedType}),aE}return{status:"valid",value:a.data}}}bz.create=a=>new bz({typeName:n.ZodNaN,...aK(a)}),Symbol("zod_brand");class bA extends aL{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class bB extends aL{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?aE:"dirty"===a.status?(b.dirty(),aF(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?aE:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new bB({in:a,out:b,typeName:n.ZodPipeline})}}class bC extends aL{_parse(a){let b=this._def.innerType._parse(a),c=a=>("valid"===a.status&&(a.value=Object.freeze(a.value)),a);return aH(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}async function bD(a,b){if(null==a)return Promise.resolve();let c=null==b?void 0:b.abortSignal;return new Promise((b,d)=>{if(null==c?void 0:c.aborted)return void d(bE());let e=setTimeout(()=>{f(),b()},a),f=()=>{clearTimeout(e),null==c||c.removeEventListener("abort",g)},g=()=>{f(),d(bE())};null==c||c.addEventListener("abort",g)})}function bE(){return new DOMException("Delay was aborted","AbortError")}bC.create=(a,b)=>new bC({innerType:a,typeName:n.ZodReadonly,...aK(b)}),be.lazycreate,function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"}(n||(n={})),a1.create,a2.create,bz.create,a3.create,a4.create,a5.create,a6.create,a7.create,a8.create,a9.create,ba.create,bb.create,bc.create,bd.create,be.create,be.strictCreate,bf.create,bh.create,bi.create,bj.create,bk.create,bl.create,bm.create,bn.create,bo.create,bp.create,br.create,bs.create,bt.create,bu.create,bv.create,bw.create,bu.createWithPreprocess,bB.create;var bF=({prefix:a,size:b=16,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:d="-"}={})=>{let e=()=>{let a=c.length,d=Array(b);for(let e=0;e<b;e++)d[e]=c[Math.random()*a|0];return d.join("")};if(null==a)return e;if(c.includes(d))throw new ac({argument:"separator",message:`The separator "${d}" must not be part of the alphabet "${c}".`});return()=>`${a}${d}${e()}`};function bG(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}bF();var bH=/"__proto__"\s*:/,bI=/"constructor"\s*:/,bJ=Symbol.for("vercel.ai.validator");async function bK({value:a,schema:b}){var c;let d="object"==typeof b&&null!==b&&bJ in b&&!0===b[bJ]&&"validate"in b?b:(c=b,{[bJ]:!0,validate:async a=>{let b=await c["~standard"].validate(a);return null==b.issues?{success:!0,value:b.value}:{success:!1,error:new ao({value:a,cause:b.issues})}}});try{if(null==d.validate)return{success:!0,value:a,rawValue:a};let b=await d.validate(a);if(b.success)return{success:!0,value:b.value,rawValue:a};return{success:!1,error:ao.wrap({value:a,cause:b.error}),rawValue:a}}catch(b){return{success:!1,error:ao.wrap({value:a,cause:b}),rawValue:a}}}async function bL({text:a,schema:b}){try{let c=function(a){let{stackTraceLimit:b}=Error;Error.stackTraceLimit=0;try{let b=JSON.parse(a);return null===b||"object"!=typeof b||!1===bH.test(a)&&!1===bI.test(a)?b:function(a){let b=[a];for(;b.length;){let a=b;for(let c of(b=[],a)){if(Object.prototype.hasOwnProperty.call(c,"__proto__")||Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let a in c){let d=c[a];d&&"object"==typeof d&&b.push(d)}}}return a}(b)}finally{Error.stackTraceLimit=b}}(a);if(null==b)return{success:!0,value:c,rawValue:c};return await bK({value:c,schema:b})}catch(b){return{success:!1,error:ak.isInstance(b)?b:new ak({text:a,cause:b}),rawValue:void 0}}}var bM=Symbol("Let zodToJsonSchema decide on which parser to use"),bN={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function bO(a,b){return bZ(a.type._def,b)}var bP=void 0,bQ={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===bP&&(bP=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),bP),ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function bR(a,b){let c={type:"string"};if(a.checks)for(let d of a.checks)switch(d.kind){case"min":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value;break;case"max":c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"email":switch(b.emailStrategy){case"format:email":bU(c,"email",d.message,b);break;case"format:idn-email":bU(c,"idn-email",d.message,b);break;case"pattern:zod":bV(c,bQ.email,d.message,b)}break;case"url":bU(c,"uri",d.message,b);break;case"uuid":bU(c,"uuid",d.message,b);break;case"regex":bV(c,d.regex,d.message,b);break;case"cuid":bV(c,bQ.cuid,d.message,b);break;case"cuid2":bV(c,bQ.cuid2,d.message,b);break;case"startsWith":bV(c,RegExp(`^${bS(d.value,b)}`),d.message,b);break;case"endsWith":bV(c,RegExp(`${bS(d.value,b)}$`),d.message,b);break;case"datetime":bU(c,"date-time",d.message,b);break;case"date":bU(c,"date",d.message,b);break;case"time":bU(c,"time",d.message,b);break;case"duration":bU(c,"duration",d.message,b);break;case"length":c.minLength="number"==typeof c.minLength?Math.max(c.minLength,d.value):d.value,c.maxLength="number"==typeof c.maxLength?Math.min(c.maxLength,d.value):d.value;break;case"includes":bV(c,RegExp(bS(d.value,b)),d.message,b);break;case"ip":"v6"!==d.version&&bU(c,"ipv4",d.message,b),"v4"!==d.version&&bU(c,"ipv6",d.message,b);break;case"base64url":bV(c,bQ.base64url,d.message,b);break;case"jwt":bV(c,bQ.jwt,d.message,b);break;case"cidr":"v6"!==d.version&&bV(c,bQ.ipv4Cidr,d.message,b),"v4"!==d.version&&bV(c,bQ.ipv6Cidr,d.message,b);break;case"emoji":bV(c,bQ.emoji(),d.message,b);break;case"ulid":bV(c,bQ.ulid,d.message,b);break;case"base64":switch(b.base64Strategy){case"format:binary":bU(c,"binary",d.message,b);break;case"contentEncoding:base64":c.contentEncoding="base64";break;case"pattern:zod":bV(c,bQ.base64,d.message,b)}break;case"nanoid":bV(c,bQ.nanoid,d.message,b)}return c}function bS(a,b){return"escape"===b.patternStrategy?function(a){let b="";for(let c=0;c<a.length;c++)bT.has(a[c])||(b+="\\"),b+=a[c];return b}(a):a}var bT=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function bU(a,b,c,d){var e;a.format||(null==(e=a.anyOf)?void 0:e.some(a=>a.format))?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format}),delete a.format),a.anyOf.push({format:b,...c&&d.errorMessages&&{errorMessage:{format:c}}})):a.format=b}function bV(a,b,c,d){var e;a.pattern||(null==(e=a.allOf)?void 0:e.some(a=>a.pattern))?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern}),delete a.pattern),a.allOf.push({pattern:bW(b,d),...c&&d.errorMessages&&{errorMessage:{pattern:c}}})):a.pattern=bW(b,d)}function bW(a,b){var c;if(!b.applyRegexFlags||!a.flags)return a.source;let d={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},e=d.i?a.source.toLowerCase():a.source,f="",g=!1,h=!1,i=!1;for(let a=0;a<e.length;a++){if(g){f+=e[a],g=!1;continue}if(d.i){if(h){if(e[a].match(/[a-z]/)){i?(f+=e[a],f+=`${e[a-2]}-${e[a]}`.toUpperCase(),i=!1):"-"===e[a+1]&&(null==(c=e[a+2])?void 0:c.match(/[a-z]/))?(f+=e[a],i=!0):f+=`${e[a]}${e[a].toUpperCase()}`;continue}}else if(e[a].match(/[a-z]/)){f+=`[${e[a]}${e[a].toUpperCase()}]`;continue}}if(d.m){if("^"===e[a]){f+=`(^|(?<=[\r
]))`;continue}else if("$"===e[a]){f+=`($|(?=[\r
]))`;continue}}if(d.s&&"."===e[a]){f+=h?`${e[a]}\r
`:`[${e[a]}\r
]`;continue}f+=e[a],"\\"===e[a]?g=!0:h&&"]"===e[a]?h=!1:h||"["!==e[a]||(h=!0)}try{new RegExp(f)}catch(c){return console.warn(`Could not convert regex pattern at ${b.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return f}function bX(a,b){var c,d,e,f,g,h;let i={type:"object",additionalProperties:null!=(c=bZ(a.valueType._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]}))?c:b.allowedAdditionalProperties};if((null==(d=a.keyType)?void 0:d._def.typeName)===n.ZodString&&(null==(e=a.keyType._def.checks)?void 0:e.length)){let{type:c,...d}=bR(a.keyType._def,b);return{...i,propertyNames:d}}if((null==(f=a.keyType)?void 0:f._def.typeName)===n.ZodEnum)return{...i,propertyNames:{enum:a.keyType._def.values}};if((null==(g=a.keyType)?void 0:g._def.typeName)===n.ZodBranded&&a.keyType._def.type._def.typeName===n.ZodString&&(null==(h=a.keyType._def.type._def.checks)?void 0:h.length)){let{type:c,...d}=bO(a.keyType._def,b);return{...i,propertyNames:d}}return i}var bY={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function bZ(a,b,c=!1){var d;let e=b.seen.get(a);if(b.override){let f=null==(d=b.override)?void 0:d.call(b,a,b,e,c);if(f!==bM)return f}if(e&&!c){let a=b$(e,b);if(void 0!==a)return a}let f={def:a,path:b.currentPath,jsonSchema:void 0};b.seen.set(a,f);let g=((a,b,c)=>{switch(b){case n.ZodString:return bR(a,c);case n.ZodNumber:var d,e,f,g,h,i,j=a;let k={type:"number"};if(!j.checks)return k;for(let a of j.checks)switch(a.kind){case"int":k.type="integer";break;case"min":a.inclusive?k.minimum=a.value:k.exclusiveMinimum=a.value;break;case"max":a.inclusive?k.maximum=a.value:k.exclusiveMaximum=a.value;break;case"multipleOf":k.multipleOf=a.value}return k;case n.ZodObject:return function(a,b){let c={type:"object",properties:{}},d=[],e=a.shape();for(let a in e){let f=e[a];if(void 0===f||void 0===f._def)continue;let g=function(a){try{return a.isOptional()}catch(a){return!0}}(f),h=bZ(f._def,{...b,currentPath:[...b.currentPath,"properties",a],propertyPath:[...b.currentPath,"properties",a]});void 0!==h&&(c.properties[a]=h,g||d.push(a))}d.length&&(c.required=d);let f=function(a,b){if("ZodNever"!==a.catchall._def.typeName)return bZ(a.catchall._def,{...b,currentPath:[...b.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return b.allowedAdditionalProperties;case"strict":return b.rejectedAdditionalProperties;case"strip":return"strict"===b.removeAdditionalStrategy?b.allowedAdditionalProperties:b.rejectedAdditionalProperties}}(a,b);return void 0!==f&&(c.additionalProperties=f),c}(a,c);case n.ZodBigInt:var l=a;let m={type:"integer",format:"int64"};if(!l.checks)return m;for(let a of l.checks)switch(a.kind){case"min":a.inclusive?m.minimum=a.value:m.exclusiveMinimum=a.value;break;case"max":a.inclusive?m.maximum=a.value:m.exclusiveMaximum=a.value;break;case"multipleOf":m.multipleOf=a.value}return m;case n.ZodBoolean:return{type:"boolean"};case n.ZodDate:return function a(b,c,d){let e=null!=d?d:c.dateStrategy;if(Array.isArray(e))return{anyOf:e.map((d,e)=>a(b,c,d))};switch(e){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":var f=b;let g={type:"integer",format:"unix-time"};for(let a of f.checks)switch(a.kind){case"min":g.minimum=a.value;break;case"max":g.maximum=a.value}return g}}(a,c);case n.ZodUndefined:return{not:{}};case n.ZodNull:return{type:"null"};case n.ZodArray:var o,p,q,r=a,s=c;let t={type:"array"};return(null==(o=r.type)?void 0:o._def)&&(null==(q=null==(p=r.type)?void 0:p._def)?void 0:q.typeName)!==n.ZodAny&&(t.items=bZ(r.type._def,{...s,currentPath:[...s.currentPath,"items"]})),r.minLength&&(t.minItems=r.minLength.value),r.maxLength&&(t.maxItems=r.maxLength.value),r.exactLength&&(t.minItems=r.exactLength.value,t.maxItems=r.exactLength.value),t;case n.ZodUnion:case n.ZodDiscriminatedUnion:return function(a,b){let c=a.options instanceof Map?Array.from(a.options.values()):a.options;if(c.every(a=>a._def.typeName in bY&&(!a._def.checks||!a._def.checks.length))){let a=c.reduce((a,b)=>{let c=bY[b._def.typeName];return c&&!a.includes(c)?[...a,c]:a},[]);return{type:a.length>1?a:a[0]}}if(c.every(a=>"ZodLiteral"===a._def.typeName&&!a.description)){let a=c.reduce((a,b)=>{let c=typeof b._def.value;switch(c){case"string":case"number":case"boolean":return[...a,c];case"bigint":return[...a,"integer"];case"object":if(null===b._def.value)return[...a,"null"];default:return a}},[]);if(a.length===c.length){let b=a.filter((a,b,c)=>c.indexOf(a)===b);return{type:b.length>1?b:b[0],enum:c.reduce((a,b)=>a.includes(b._def.value)?a:[...a,b._def.value],[])}}}else if(c.every(a=>"ZodEnum"===a._def.typeName))return{type:"string",enum:c.reduce((a,b)=>[...a,...b._def.values.filter(b=>!a.includes(b))],[])};var d=a,e=b;let f=(d.options instanceof Map?Array.from(d.options.values()):d.options).map((a,b)=>bZ(a._def,{...e,currentPath:[...e.currentPath,"anyOf",`${b}`]})).filter(a=>!!a&&(!e.strictUnions||"object"==typeof a&&Object.keys(a).length>0));return f.length?{anyOf:f}:void 0}(a,c);case n.ZodIntersection:var u=a,v=c;let w=[bZ(u.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),bZ(u.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter(a=>!!a),x=[];return w.forEach(a=>{if((!("type"in a)||"string"!==a.type)&&"allOf"in a)x.push(...a.allOf);else{let b=a;if("additionalProperties"in a&&!1===a.additionalProperties){let{additionalProperties:c,...d}=a;b=d}x.push(b)}}),x.length?{allOf:x}:void 0;case n.ZodTuple:return H=a,I=c,H.rest?{type:"array",minItems:H.items.length,items:H.items.map((a,b)=>bZ(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[]),additionalItems:bZ(H.rest._def,{...I,currentPath:[...I.currentPath,"additionalItems"]})}:{type:"array",minItems:H.items.length,maxItems:H.items.length,items:H.items.map((a,b)=>bZ(a._def,{...I,currentPath:[...I.currentPath,"items",`${b}`]})).reduce((a,b)=>void 0===b?a:[...a,b],[])};case n.ZodRecord:return bX(a,c);case n.ZodLiteral:var y=a;let z=typeof y.value;return"bigint"!==z&&"number"!==z&&"boolean"!==z&&"string"!==z?{type:Array.isArray(y.value)?"array":"object"}:{type:"bigint"===z?"integer":z,const:y.value};case n.ZodEnum:return{type:"string",enum:Array.from(a.values)};case n.ZodNativeEnum:var A=a;let B=A.values,C=Object.keys(A.values).filter(a=>"number"!=typeof B[B[a]]).map(a=>B[a]),D=Array.from(new Set(C.map(a=>typeof a)));return{type:1===D.length?"string"===D[0]?"string":"number":["string","number"],enum:C};case n.ZodNullable:var E=a,F=c;if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(E.innerType._def.typeName)&&(!E.innerType._def.checks||!E.innerType._def.checks.length))return{type:[bY[E.innerType._def.typeName],"null"]};let G=bZ(E.innerType._def,{...F,currentPath:[...F.currentPath,"anyOf","0"]});return G&&{anyOf:[G,{type:"null"}]};case n.ZodOptional:var H,I,J,K=a,L=c;if(L.currentPath.toString()===(null==(J=L.propertyPath)?void 0:J.toString()))return bZ(K.innerType._def,L);let M=bZ(K.innerType._def,{...L,currentPath:[...L.currentPath,"anyOf","1"]});return M?{anyOf:[{not:{}},M]}:{};case n.ZodMap:return d=a,"record"===(e=c).mapStrategy?bX(d,e):{type:"array",maxItems:125,items:{type:"array",items:[bZ(d.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},bZ(d.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}};case n.ZodSet:var N=a,O=c;let P={type:"array",uniqueItems:!0,items:bZ(N.valueType._def,{...O,currentPath:[...O.currentPath,"items"]})};return N.minSize&&(P.minItems=N.minSize.value),N.maxSize&&(P.maxItems=N.maxSize.value),P;case n.ZodLazy:return()=>a.getter()._def;case n.ZodPromise:return bZ(a.type._def,c);case n.ZodNaN:case n.ZodNever:return{not:{}};case n.ZodEffects:return f=a,"input"===(g=c).effectStrategy?bZ(f.schema._def,g):{};case n.ZodAny:case n.ZodUnknown:return{};case n.ZodDefault:return h=a,i=c,{...bZ(h.innerType._def,i),default:h.defaultValue()};case n.ZodBranded:return bO(a,c);case n.ZodReadonly:case n.ZodCatch:return bZ(a.innerType._def,c);case n.ZodPipeline:var Q=a,R=c;if("input"===R.pipeStrategy)return bZ(Q.in._def,R);if("output"===R.pipeStrategy)return bZ(Q.out._def,R);let S=bZ(Q.in._def,{...R,currentPath:[...R.currentPath,"allOf","0"]}),T=bZ(Q.out._def,{...R,currentPath:[...R.currentPath,"allOf",S?"1":"0"]});return{allOf:[S,T].filter(a=>void 0!==a)};case n.ZodFunction:case n.ZodVoid:case n.ZodSymbol:default:return}})(a,a.typeName,b),h="function"==typeof g?bZ(g(),b):g;if(h&&b_(a,b,h),b.postProcess){let c=b.postProcess(h,a,b);return f.jsonSchema=h,c}return f.jsonSchema=h,h}var b$=(a,b)=>{switch(b.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:((a,b)=>{let c=0;for(;c<a.length&&c<b.length&&a[c]===b[c];c++);return[(a.length-c).toString(),...b.slice(c)].join("/")})(b.currentPath,a.path)};case"none":case"seen":if(a.path.length<b.currentPath.length&&a.path.every((a,c)=>b.currentPath[c]===a))return console.warn(`Recursive reference detected at ${b.currentPath.join("/")}! Defaulting to any`),{};return"seen"===b.$refStrategy?{}:void 0}},b_=(a,b,c)=>(a.description&&(c.description=a.description),c),b0=Symbol.for("vercel.ai.schema");function b1(a,{validate:b}={}){return{[b0]:!0,_type:void 0,[bJ]:!0,jsonSchema:a,validate:b}}function b2(a){return null==a?b1({properties:{},additionalProperties:!1}):"object"==typeof a&&null!==a&&b0 in a&&!0===a[b0]&&"jsonSchema"in a&&"validate"in a?a:function(a,b){var c;return"_zod"in a?b1(function(a,b){if(a instanceof as.rs){let c=new au(b),d={};for(let b of a._idmap.entries()){let[a,d]=b;c.process(d)}let e={},f={registry:a,uri:b?.uri,defs:d};for(let d of a._idmap.entries()){let[a,g]=d;e[a]=c.emit(g,{...b,external:f})}return Object.keys(d).length>0&&(e.__shared={["draft-2020-12"===c.target?"$defs":"definitions"]:d}),{schemas:e}}let c=new au(b);return c.process(a),c.emit(a,b)}(a,{target:"draft-7",io:"output",reused:"inline"}),{validate:async b=>{let c=await av.bp(a,b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}}):b1(((a,b)=>{var c;let d=(a=>{let b,c="string"==typeof(b=a)?{...bN,name:b}:{...bN,...b},d=void 0!==c.name?[...c.basePath,c.definitionPath,c.name]:c.basePath;return{...c,currentPath:d,propertyPath:void 0,seen:new Map(Object.entries(c.definitions).map(([a,b])=>[b._def,{def:b._def,path:[...c.basePath,c.definitionPath,a],jsonSchema:void 0}]))}})(b),e="object"==typeof b&&b.definitions?Object.entries(b.definitions).reduce((a,[b,c])=>{var e;return{...a,[b]:null!=(e=bZ(c._def,{...d,currentPath:[...d.basePath,d.definitionPath,b]},!0))?e:{}}},{}):void 0,f="string"==typeof b?b:(null==b?void 0:b.nameStrategy)==="title"||null==b?void 0:b.name,g=null!=(c=bZ(a._def,void 0===f?d:{...d,currentPath:[...d.basePath,d.definitionPath,f]},!1))?c:{},h="object"==typeof b&&void 0!==b.name&&"title"===b.nameStrategy?b.name:void 0;void 0!==h&&(g.title=h);let i=void 0===f?e?{...g,[d.definitionPath]:e}:g:{$ref:[..."relative"===d.$refStrategy?[]:d.basePath,d.definitionPath,f].join("/"),[d.definitionPath]:{...e,[f]:g}};return i.$schema="http://json-schema.org/draft-07/schema#",i})(a,{$refStrategy:(c=void 0,"none")}),{validate:async b=>{let c=await a.safeParseAsync(b);return c.success?{success:!0,value:c.data}:{success:!1,error:c.error}}})}(a)}var{btoa:b3,atob:b4}=globalThis;function b5(a){let b=b4(a.replace(/-/g,"+").replace(/_/g,"/"));return Uint8Array.from(b,a=>a.codePointAt(0))}function b6(a){let b="";for(let c=0;c<a.length;c++)b+=String.fromCodePoint(a[c]);return b3(b)}async function*b7({execute:a,input:b,options:c}){let d=a(b,c);if(null!=d&&"function"==typeof d[Symbol.asyncIterator]){let a;for await(let b of d)a=b,yield{type:"preliminary",output:b};yield{type:"final",output:a}}else yield{type:"final",output:await d}}var b8="vercel.ai.error",b9=Symbol.for(b8),ca=class a extends Error{constructor({name:a,message:b,cause:c}){super(b),this[o]=!0,this.name=a,this.cause=c}static isInstance(b){return a.hasMarker(b,b8)}static hasMarker(a,b){let c=Symbol.for(b);return null!=a&&"object"==typeof a&&c in a&&"boolean"==typeof a[c]&&!0===a[c]}};o=b9;var cb=ca,cc="AI_APICallError",cd=`vercel.ai.error.${cc}`,ce=Symbol.for(cd),cf=class extends cb{constructor({message:a,url:b,requestBodyValues:c,statusCode:d,responseHeaders:e,responseBody:f,cause:g,isRetryable:h=null!=d&&(408===d||409===d||429===d||d>=500),data:i}){super({name:cc,message:a,cause:g}),this[p]=!0,this.url=b,this.requestBodyValues=c,this.statusCode=d,this.responseHeaders=e,this.responseBody=f,this.isRetryable=h,this.data=i}static isInstance(a){return cb.hasMarker(a,cd)}};p=ce;var cg="AI_EmptyResponseBodyError",ch=`vercel.ai.error.${cg}`,ci=Symbol.for(ch),cj=class extends cb{constructor({message:a="Empty response body"}={}){super({name:cg,message:a}),this[q]=!0}static isInstance(a){return cb.hasMarker(a,ch)}};function ck(a){return null==a?"unknown error":"string"==typeof a?a:a instanceof Error?a.message:JSON.stringify(a)}q=ci;var cl="AI_InvalidArgumentError",cm=`vercel.ai.error.${cl}`,cn=Symbol.for(cm),co=class extends cb{constructor({message:a,cause:b,argument:c}){super({name:cl,message:a,cause:b}),this[r]=!0,this.argument=c}static isInstance(a){return cb.hasMarker(a,cm)}};r=cn,Symbol.for("vercel.ai.error.AI_InvalidPromptError"),Symbol.for("vercel.ai.error.AI_InvalidResponseDataError");var cp="AI_JSONParseError",cq=`vercel.ai.error.${cp}`,cr=Symbol.for(cq),cs=class extends cb{constructor({text:a,cause:b}){super({name:cp,message:`JSON parsing failed: Text: ${a}.
Error message: ${ck(b)}`,cause:b}),this[s]=!0,this.text=a}static isInstance(a){return cb.hasMarker(a,cq)}};s=cr,Symbol.for("vercel.ai.error.AI_LoadAPIKeyError"),Symbol.for("vercel.ai.error.AI_LoadSettingError"),Symbol.for("vercel.ai.error.AI_NoContentGeneratedError");var ct="AI_NoSuchModelError",cu=`vercel.ai.error.${ct}`,cv=Symbol.for(cu),cw=class extends cb{constructor({errorName:a=ct,modelId:b,modelType:c,message:d=`No such ${c}: ${b}`}){super({name:a,message:d}),this[t]=!0,this.modelId=b,this.modelType=c}static isInstance(a){return cb.hasMarker(a,cu)}};t=cv,Symbol.for("vercel.ai.error.AI_TooManyEmbeddingValuesForCallError");var cx="AI_TypeValidationError",cy=`vercel.ai.error.${cx}`,cz=Symbol.for(cy),cA=class a extends cb{constructor({value:a,cause:b}){super({name:cx,message:`Type validation failed: Value: ${JSON.stringify(a)}.
Error message: ${ck(b)}`,cause:b}),this[u]=!0,this.value=a}static isInstance(a){return cb.hasMarker(a,cy)}static wrap({value:b,cause:c}){return a.isInstance(c)&&c.value===b?c:new a({value:b,cause:c})}};function cB(...a){return a.reduce((a,b)=>({...a,...null!=b?b:{}}),{})}function cC(a){return Object.fromEntries([...a.headers])}function cD(a){return(a instanceof Error||a instanceof DOMException)&&("AbortError"===a.name||"ResponseAborted"===a.name||"TimeoutError"===a.name)}u=cz,Symbol.for("vercel.ai.error.AI_UnsupportedFunctionalityError"),(({prefix:a,size:b=16,alphabet:c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:d="-"}={})=>{if(null!=a){if(c.includes(d))throw new co({argument:"separator",message:`The separator "${d}" must not be part of the alphabet "${c}".`});return()=>`${a}${d}${(()=>{let a=c.length,d=Array(b);for(let e=0;e<b;e++)d[e]=c[Math.random()*a|0];return d.join("")})()}`}})();var cE=["fetch failed","failed to fetch"];function cF({error:a,url:b,requestBodyValues:c}){if(cD(a))return a;if(a instanceof TypeError&&cE.includes(a.message.toLowerCase())){let d=a.cause;if(null!=d)return new cf({message:`Cannot connect to API: ${d.message}`,cause:d,url:b,requestBodyValues:c,isRetryable:!0})}return a}function cG(a){return Object.fromEntries(Object.entries(a).filter(([a,b])=>null!=b))}var cH=()=>globalThis.fetch,cI=async({url:a,headers:b={},successfulResponseHandler:c,failedResponseHandler:d,abortSignal:e,fetch:f=cH()})=>{try{let g=await f(a,{method:"GET",headers:cG(b),signal:e}),h=cC(g);if(!g.ok){let b;try{b=await d({response:g,url:a,requestBodyValues:{}})}catch(b){if(cD(b)||cf.isInstance(b))throw b;throw new cf({message:"Failed to process error response",cause:b,statusCode:g.status,url:a,responseHeaders:h,requestBodyValues:{}})}throw b.value}try{return await c({response:g,url:a,requestBodyValues:{}})}catch(b){if(b instanceof Error&&(cD(b)||cf.isInstance(b)))throw b;throw new cf({message:"Failed to process successful response",cause:b,statusCode:g.status,url:a,responseHeaders:h,requestBodyValues:{}})}}catch(b){throw cF({error:b,url:a,requestBodyValues:{}})}};function cJ({settingValue:a,environmentVariableName:b}){return"string"==typeof a?a:null!=a||"undefined"==typeof process?void 0:null!=(a=process.env[b])&&"string"==typeof a?a:void 0}var cK=/"__proto__"\s*:/,cL=/"constructor"\s*:/;function cM(a){let{stackTraceLimit:b}=Error;Error.stackTraceLimit=0;try{let b=JSON.parse(a);return null===b||"object"!=typeof b||!1===cK.test(a)&&!1===cL.test(a)?b:function(a){let b=[a];for(;b.length;){let a=b;for(let c of(b=[],a)){if(Object.prototype.hasOwnProperty.call(c,"__proto__")||Object.prototype.hasOwnProperty.call(c,"constructor")&&Object.prototype.hasOwnProperty.call(c.constructor,"prototype"))throw SyntaxError("Object contains forbidden prototype property");for(let a in c){let d=c[a];d&&"object"==typeof d&&b.push(d)}}}return a}(b)}finally{Error.stackTraceLimit=b}}var cN=Symbol.for("vercel.ai.validator");async function cO({value:a,schema:b}){let c=await cP({value:a,schema:b});if(!c.success)throw cA.wrap({value:a,cause:c.error});return c.value}async function cP({value:a,schema:b}){var c;let d="object"==typeof b&&null!==b&&cN in b&&!0===b[cN]&&"validate"in b?b:(c=b,{[cN]:!0,validate:async a=>{let b=await c["~standard"].validate(a);return null==b.issues?{success:!0,value:b.value}:{success:!1,error:new cA({value:a,cause:b.issues})}}});try{if(null==d.validate)return{success:!0,value:a,rawValue:a};let b=await d.validate(a);if(b.success)return{success:!0,value:b.value,rawValue:a};return{success:!1,error:cA.wrap({value:a,cause:b.error}),rawValue:a}}catch(b){return{success:!1,error:cA.wrap({value:a,cause:b}),rawValue:a}}}async function cQ({text:a,schema:b}){try{let c=cM(a);if(null==b)return c;return cO({value:c,schema:b})}catch(b){if(cs.isInstance(b)||cA.isInstance(b))throw b;throw new cs({text:a,cause:b})}}async function cR({text:a,schema:b}){try{let c=cM(a);if(null==b)return{success:!0,value:c,rawValue:c};return await cP({value:c,schema:b})}catch(b){return{success:!1,error:cs.isInstance(b)?b:new cs({text:a,cause:b}),rawValue:void 0}}}var cS=()=>globalThis.fetch,cT=async({url:a,headers:b,body:c,failedResponseHandler:d,successfulResponseHandler:e,abortSignal:f,fetch:g})=>cU({url:a,headers:{"Content-Type":"application/json",...b},body:{content:JSON.stringify(c),values:c},failedResponseHandler:d,successfulResponseHandler:e,abortSignal:f,fetch:g}),cU=async({url:a,headers:b={},body:c,successfulResponseHandler:d,failedResponseHandler:e,abortSignal:f,fetch:g=cS()})=>{try{let h=await g(a,{method:"POST",headers:cG(b),body:c.content,signal:f}),i=cC(h);if(!h.ok){let b;try{b=await e({response:h,url:a,requestBodyValues:c.values})}catch(b){if(cD(b)||cf.isInstance(b))throw b;throw new cf({message:"Failed to process error response",cause:b,statusCode:h.status,url:a,responseHeaders:i,requestBodyValues:c.values})}throw b.value}try{return await d({response:h,url:a,requestBodyValues:c.values})}catch(b){if(b instanceof Error&&(cD(b)||cf.isInstance(b)))throw b;throw new cf({message:"Failed to process successful response",cause:b,statusCode:h.status,url:a,responseHeaders:i,requestBodyValues:c.values})}}catch(b){throw cF({error:b,url:a,requestBodyValues:c.values})}};async function cV(a){return"function"==typeof a&&(a=a()),Promise.resolve(a)}var cW=({errorSchema:a,errorToMessage:b,isRetryable:c})=>async({response:d,url:e,requestBodyValues:f})=>{let g=await d.text(),h=cC(d);if(""===g.trim())return{responseHeaders:h,value:new cf({message:d.statusText,url:e,requestBodyValues:f,statusCode:d.status,responseHeaders:h,responseBody:g,isRetryable:null==c?void 0:c(d)})};try{let i=await cQ({text:g,schema:a});return{responseHeaders:h,value:new cf({message:b(i),url:e,requestBodyValues:f,statusCode:d.status,responseHeaders:h,responseBody:g,data:i,isRetryable:null==c?void 0:c(d,i)})}}catch(a){return{responseHeaders:h,value:new cf({message:d.statusText,url:e,requestBodyValues:f,statusCode:d.status,responseHeaders:h,responseBody:g,isRetryable:null==c?void 0:c(d)})}}},cX=a=>async({response:b,url:c,requestBodyValues:d})=>{let e=await b.text(),f=await cR({text:e,schema:a}),g=cC(b);if(!f.success)throw new cf({message:"Invalid JSON response",cause:f.error,statusCode:b.status,responseHeaders:g,responseBody:e,url:c,requestBodyValues:d});return{responseHeaders:g,value:f.value,rawValue:f.rawValue}},cY=Symbol("Let zodToJsonSchema decide on which parser to use");Symbol.for("vercel.ai.schema");var{btoa:cZ,atob:c$}=globalThis,c_=c(59256),c0=Symbol.for("vercel.ai.gateway.error"),c1=class a extends(w=Error,v=c0,w){constructor({message:a,statusCode:b=500,cause:c}){super(a),this[v]=!0,this.statusCode=b,this.cause=c}static isInstance(b){return a.hasMarker(b)}static hasMarker(a){return"object"==typeof a&&null!==a&&c0 in a&&!0===a[c0]}},c2="GatewayAuthenticationError",c3=Symbol.for(`vercel.ai.gateway.error.${c2}`),c4=class a extends(y=c1,x=c3,y){constructor({message:a="Authentication failed",statusCode:b=401,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[x]=!0,this.name=c2,this.type="authentication_error"}static isInstance(a){return c1.hasMarker(a)&&c3 in a}static createContextualError({apiKeyProvided:b,oidcTokenProvided:c,message:d="Authentication failed",statusCode:e=401,cause:f}){return new a({message:b?`AI Gateway authentication failed: Invalid API key provided.

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:c?`AI Gateway authentication failed: Invalid OIDC token provided.

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed

Alternative: Provide an API key via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:`AI Gateway authentication failed: No authentication provided.

Provide either an API key or OIDC token.

API key instructions:

The token is expected to be provided via the 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

OIDC token instructions:

The token is expected to be provided via the 'VERCEL_OIDC_TOKEN' environment variable. It expires every 12 hours.
- make sure your Vercel project settings have OIDC enabled
- if running locally with 'vercel dev', the token is automatically obtained and refreshed
- if running locally with your own dev server, run 'vercel env pull' to fetch the token
- in production/preview, the token is automatically obtained and refreshed`,statusCode:e,cause:f})}},c5="GatewayInvalidRequestError",c6=Symbol.for(`vercel.ai.gateway.error.${c5}`),c7=class extends(A=c1,z=c6,A){constructor({message:a="Invalid request",statusCode:b=400,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[z]=!0,this.name=c5,this.type="invalid_request_error"}static isInstance(a){return c1.hasMarker(a)&&c6 in a}},c8="GatewayRateLimitError",c9=Symbol.for(`vercel.ai.gateway.error.${c8}`),da=class extends(C=c1,B=c9,C){constructor({message:a="Rate limit exceeded",statusCode:b=429,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[B]=!0,this.name=c8,this.type="rate_limit_exceeded"}static isInstance(a){return c1.hasMarker(a)&&c9 in a}},db="GatewayModelNotFoundError",dc=Symbol.for(`vercel.ai.gateway.error.${db}`),dd=c_.Ik({modelId:c_.Yj()}),de=class extends(E=c1,D=dc,E){constructor({message:a="Model not found",statusCode:b=404,modelId:c,cause:d}={}){super({message:a,statusCode:b,cause:d}),this[D]=!0,this.name=db,this.type="model_not_found",this.modelId=c}static isInstance(a){return c1.hasMarker(a)&&dc in a}},df="GatewayInternalServerError",dg=Symbol.for(`vercel.ai.gateway.error.${df}`),dh=class extends(G=c1,F=dg,G){constructor({message:a="Internal server error",statusCode:b=500,cause:c}={}){super({message:a,statusCode:b,cause:c}),this[F]=!0,this.name=df,this.type="internal_server_error"}static isInstance(a){return c1.hasMarker(a)&&dg in a}},di="GatewayResponseError",dj=Symbol.for(`vercel.ai.gateway.error.${di}`),dk=class extends(I=c1,H=dj,I){constructor({message:a="Invalid response from Gateway",statusCode:b=502,response:c,validationError:d,cause:e}={}){super({message:a,statusCode:b,cause:e}),this[H]=!0,this.name=di,this.type="response_error",this.response=c,this.validationError=d}static isInstance(a){return c1.hasMarker(a)&&dj in a}};function dl({response:a,statusCode:b,defaultMessage:c="Gateway request failed",cause:d,authMethod:e}){let f=dm.safeParse(a);if(!f.success)return new dk({message:`Invalid error response format: ${c}`,statusCode:b,response:a,validationError:f.error,cause:d});let g=f.data,h=g.error.type,i=g.error.message;switch(h){case"authentication_error":return c4.createContextualError({apiKeyProvided:"api-key"===e,oidcTokenProvided:"oidc"===e,statusCode:b,cause:d});case"invalid_request_error":return new c7({message:i,statusCode:b,cause:d});case"rate_limit_exceeded":return new da({message:i,statusCode:b,cause:d});case"model_not_found":{let a=dd.safeParse(g.error.param);return new de({message:i,statusCode:b,modelId:a.success?a.data.modelId:void 0,cause:d})}default:return new dh({message:i,statusCode:b,cause:d})}}var dm=c_.Ik({error:c_.Ik({message:c_.Yj(),type:c_.Yj().nullish(),param:c_.L5().nullish(),code:c_.KC([c_.Yj(),c_.ai()]).nullish()})});function dn(a,b){var c;return c1.isInstance(a)?a:cf.isInstance(a)?dl({response:function(a){if(void 0!==a.data)return a.data;if(null!=a.responseBody)try{return JSON.parse(a.responseBody)}catch(b){return a.responseBody}return{}}(a),statusCode:null!=(c=a.statusCode)?c:500,defaultMessage:"Gateway request failed",cause:a,authMethod:b}):dl({response:{},statusCode:500,defaultMessage:a instanceof Error?`Gateway request failed: ${a.message}`:"Unknown Gateway error",cause:a,authMethod:b})}var dp="ai-gateway-auth-method";function dq(a){let b=dr.safeParse(a[dp]);return b.success?b.data:void 0}var dr=c_.KC([c_.eu("api-key"),c_.eu("oidc")]),ds=class{constructor(a){this.config=a}async getAvailableModels(){try{let{value:a}=await cI({url:`${this.config.baseURL}/config`,headers:await cV(this.config.headers()),successfulResponseHandler:cX(dw),failedResponseHandler:cW({errorSchema:c_.bz(),errorToMessage:a=>a}),fetch:this.config.fetch});return a}catch(a){throw dn(a)}}},dt=c_.Ik({specificationVersion:c_.eu("v2"),provider:c_.Yj(),modelId:c_.Yj()}),du=c_.Ik({input:c_.Yj(),output:c_.Yj(),input_cache_read:c_.Yj().nullish(),input_cache_write:c_.Yj().nullish()}).transform(({input:a,output:b,input_cache_read:c,input_cache_write:d})=>({input:a,output:b,...c?{cachedInputTokens:c}:{},...d?{cacheCreationInputTokens:d}:{}})),dv=c_.Ik({id:c_.Yj(),name:c_.Yj(),description:c_.Yj().nullish(),pricing:du.nullish(),specification:dt,modelType:c_.k5(["language","embedding","image"]).nullish()}),dw=c_.Ik({models:c_.YO(dv)}),dx=class{constructor(a,b){this.modelId=a,this.config=b,this.specificationVersion="v2",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(a){let{abortSignal:b,...c}=a;return{args:this.maybeEncodeFileParts(c),warnings:[]}}async doGenerate(a){let{args:b,warnings:c}=await this.getArgs(a),{abortSignal:d}=a,e=await cV(this.config.headers());try{let{responseHeaders:f,value:g,rawValue:h}=await cT({url:this.getUrl(),headers:cB(e,a.headers,this.getModelConfigHeaders(this.modelId,!1),await cV(this.config.o11yHeaders)),body:b,successfulResponseHandler:cX(c_.bz()),failedResponseHandler:cW({errorSchema:c_.bz(),errorToMessage:a=>a}),...d&&{abortSignal:d},fetch:this.config.fetch});return{...g,request:{body:b},response:{headers:f,body:h},warnings:c}}catch(a){throw dn(a,dq(e))}}async doStream(a){let{args:b,warnings:c}=await this.getArgs(a),{abortSignal:d}=a,e=await cV(this.config.headers());try{let f,{value:g,responseHeaders:h}=await cT({url:this.getUrl(),headers:cB(e,a.headers,this.getModelConfigHeaders(this.modelId,!0),await cV(this.config.o11yHeaders)),body:b,successfulResponseHandler:(f=c_.bz(),async({response:a})=>{let b=cC(a);if(null==a.body)throw new cj({});return{responseHeaders:b,value:function({stream:a,schema:b}){return a.pipeThrough(new TextDecoderStream).pipeThrough(new ar).pipeThrough(new TransformStream({async transform({data:a},c){"[DONE]"!==a&&c.enqueue(await cR({text:a,schema:b}))}}))}({stream:a.body,schema:f})}}),failedResponseHandler:cW({errorSchema:c_.bz(),errorToMessage:a=>a}),...d&&{abortSignal:d},fetch:this.config.fetch});return{stream:g.pipeThrough(new TransformStream({start(a){c.length>0&&a.enqueue({type:"stream-start",warnings:c})},transform(b,c){if(b.success){let d=b.value;("raw"!==d.type||a.includeRawChunks)&&("response-metadata"===d.type&&d.timestamp&&"string"==typeof d.timestamp&&(d.timestamp=new Date(d.timestamp)),c.enqueue(d))}else c.error(b.error)}})),request:{body:b},response:{headers:h}}}catch(a){throw dn(a,dq(e))}}isFilePart(a){return a&&"object"==typeof a&&"type"in a&&"file"===a.type}maybeEncodeFileParts(a){for(let b of a.prompt)for(let a of b.content)if(this.isFilePart(a)&&a.data instanceof Uint8Array){let b=Uint8Array.from(a.data),c=Buffer.from(b).toString("base64");a.data=new URL(`data:${a.mediaType||"application/octet-stream"};base64,${c}`)}return a}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(a,b){return{"ai-language-model-specification-version":"2","ai-language-model-id":a,"ai-language-model-streaming":String(b)}}},dy=class{constructor(a,b){this.modelId=a,this.config=b,this.specificationVersion="v2",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:a,headers:b,abortSignal:c,providerOptions:d}){var e;let f=await cV(this.config.headers());try{let{responseHeaders:g,value:h,rawValue:i}=await cT({url:this.getUrl(),headers:cB(f,null!=b?b:{},this.getModelConfigHeaders(),await cV(this.config.o11yHeaders)),body:{input:1===a.length?a[0]:a,...null!=d?d:{}},successfulResponseHandler:cX(dz),failedResponseHandler:cW({errorSchema:c_.bz(),errorToMessage:a=>a}),...c&&{abortSignal:c},fetch:this.config.fetch});return{embeddings:h.embeddings,usage:null!=(e=h.usage)?e:void 0,providerMetadata:h.providerMetadata,response:{headers:g,body:i}}}catch(a){throw dn(a,dq(f))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"2","ai-model-id":this.modelId}}},dz=c_.Ik({embeddings:c_.YO(c_.YO(c_.ai())),usage:c_.Ik({tokens:c_.ai()}).nullish(),providerMetadata:c_.g1(c_.Yj(),c_.g1(c_.Yj(),c_.L5())).optional()});async function dA(){var a,b;let c=null!=(b=null==(a=dD().headers)?void 0:a["x-vercel-oidc-token"])?b:process.env.VERCEL_OIDC_TOKEN;if(!c)throw new c4({message:"OIDC token not available",statusCode:401});return c}async function dB(){var a;return null==(a=dD().headers)?void 0:a["x-vercel-id"]}var dC=Symbol.for("@vercel/request-context");function dD(){var a,b,c;return null!=(c=null==(b=null==(a=globalThis[dC])?void 0:a.get)?void 0:b.call(a))?c:{}}var dE=function(a={}){var b,c,d;let e=null,f=null,g=null!=(b=a.metadataCacheRefreshMillis)?b:3e5,h=0,i=null!=(c=null==(d=a.baseURL)?void 0:d.replace(/\/$/,""))?c:"https://ai-gateway.vercel.sh/v1/ai",j=async()=>{let b=await dF(a);if(b)return{Authorization:`Bearer ${b.token}`,"ai-gateway-protocol-version":"0.0.1",[dp]:b.authMethod,...a.headers};throw c4.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401})},k=()=>{let a=cJ({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),b=cJ({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),c=cJ({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{let d=await dB();return{...a&&{"ai-o11y-deployment-id":a},...b&&{"ai-o11y-environment":b},...c&&{"ai-o11y-region":c},...d&&{"ai-o11y-request-id":d}}}},l=b=>new dx(b,{provider:"gateway",baseURL:i,headers:j,fetch:a.fetch,o11yHeaders:k()}),m=function(a){if(new.target)throw Error("The Gateway Provider model function cannot be called with the new keyword.");return l(a)};return m.getAvailableModels=async()=>{var b,c,d;let k=null!=(d=null==(c=null==(b=a._internal)?void 0:b.currentDate)?void 0:c.call(b).getTime())?d:Date.now();return(!e||k-h>g)&&(h=k,e=new ds({baseURL:i,headers:j,fetch:a.fetch}).getAvailableModels().then(a=>(f=a,a)).catch(async a=>{throw dn(a,dq(await j()))})),f?Promise.resolve(f):e},m.imageModel=a=>{throw new cw({modelId:a,modelType:"imageModel"})},m.languageModel=l,m.textEmbeddingModel=b=>new dy(b,{provider:"gateway",baseURL:i,headers:j,fetch:a.fetch,o11yHeaders:k()}),m}();async function dF(a){let b=cJ({settingValue:a.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});if(b)return{token:b,authMethod:"api-key"};try{return{token:await dA(),authMethod:"oidc"}}catch(a){return null}}var dG=c(69907),dH=c(92818),dI=Object.defineProperty,dJ="AI_NoOutputSpecifiedError",dK=`vercel.ai.error.${dJ}`,dL=Symbol.for(dK),dM=class extends V{constructor({message:a="No output specified."}={}){super({name:dJ,message:a}),this[J]=!0}static isInstance(a){return V.hasMarker(a,dK)}};J=dL;var dN=!1,dO=a=>{if(0===a.length)return;let b=globalThis.AI_SDK_LOG_WARNINGS;if(!1!==b){if("function"==typeof b)return void b(a);for(let b of(dN||(dN=!0,console.info("AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.")),a))console.warn(function(a){let b="AI SDK Warning:";switch(a.type){case"unsupported-setting":{let c=`${b} The "${a.setting}" setting is not supported by this model`;return a.details&&(c+=` - ${a.details}`),c}case"unsupported-tool":{let c="name"in a.tool?a.tool.name:"unknown tool",d=`${b} The tool "${c}" is not supported by this model`;return a.details&&(d+=` - ${a.details}`),d}case"other":return`${b} ${a.message}`;default:return`${b} ${JSON.stringify(a,null,2)}`}}(b))}},dP="AI_InvalidArgumentError",dQ=`vercel.ai.error.${dP}`,dR=Symbol.for(dQ),dS=class extends V{constructor({parameter:a,value:b,message:c}){super({name:dP,message:`Invalid argument for parameter ${a}: ${c}`}),this[K]=!0,this.parameter=a,this.value=b}static isInstance(a){return V.hasMarker(a,dQ)}};K=dR,Symbol.for("vercel.ai.error.AI_InvalidStreamPartError");var dT="AI_InvalidToolInputError",dU=`vercel.ai.error.${dT}`,dV=Symbol.for(dU),dW=class extends V{constructor({toolInput:a,toolName:b,cause:c,message:d=`Invalid input for tool ${b}: ${$(c)}`}){super({name:dT,message:d,cause:c}),this[L]=!0,this.toolInput=a,this.toolName=b}static isInstance(a){return V.hasMarker(a,dU)}};L=dV,Symbol.for("vercel.ai.error.AI_MCPClientError"),Symbol.for("vercel.ai.error.AI_NoImageGeneratedError");var dX="AI_NoObjectGeneratedError",dY=`vercel.ai.error.${dX}`,dZ=Symbol.for(dY),d$=class extends V{constructor({message:a="No object generated.",cause:b,text:c,response:d,usage:e,finishReason:f}){super({name:dX,message:a,cause:b}),this[M]=!0,this.text=c,this.response=d,this.usage=e,this.finishReason=f}static isInstance(a){return V.hasMarker(a,dY)}};M=dZ,Symbol.for("vercel.ai.error.AI_NoOutputGeneratedError");var d_="AI_NoSuchToolError",d0=`vercel.ai.error.${d_}`,d1=Symbol.for(d0),d2=class extends V{constructor({toolName:a,availableTools:b,message:c=`Model tried to call unavailable tool '${a}'. ${void 0===b?"No tools are available.":`Available tools: ${b.join(", ")}.`}`}){super({name:d_,message:c}),this[N]=!0,this.toolName=a,this.availableTools=b}static isInstance(a){return V.hasMarker(a,d0)}};N=d1;var d3="AI_ToolCallRepairError",d4=`vercel.ai.error.${d3}`,d5=Symbol.for(d4),d6=class extends V{constructor({cause:a,originalError:b,message:c=`Error repairing tool call: ${$(a)}`}){super({name:d3,message:c,cause:a}),this[O]=!0,this.originalError=b}static isInstance(a){return V.hasMarker(a,d4)}};O=d5;var d7=class extends V{constructor(a){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${a.version} for provider "${a.provider}" and model "${a.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=a.version,this.provider=a.provider,this.modelId=a.modelId}},d8=(Symbol.for("vercel.ai.error.AI_InvalidDataContentError"),"AI_InvalidMessageRoleError"),d9=`vercel.ai.error.${d8}`,ea=Symbol.for(d9),eb=class extends V{constructor({role:a,message:b=`Invalid message role: '${a}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:d8,message:b}),this[P]=!0,this.role=a}static isInstance(a){return V.hasMarker(a,d9)}};P=ea,Symbol.for("vercel.ai.error.AI_MessageConversionError");var ec="AI_DownloadError",ed=`vercel.ai.error.${ec}`,ee=Symbol.for(ed),ef=class extends V{constructor({url:a,statusCode:b,statusText:c,cause:d,message:e=null==d?`Failed to download ${a}: ${b} ${c}`:`Failed to download ${a}: ${d}`}){super({name:ec,message:e,cause:d}),this[Q]=!0,this.url=a,this.statusCode=b,this.statusText=c}static isInstance(a){return V.hasMarker(a,ed)}};Q=ee;var eg="AI_RetryError",eh=`vercel.ai.error.${eg}`,ei=Symbol.for(eh),ej=class extends V{constructor({message:a,reason:b,errors:c}){super({name:eg,message:a}),this[R]=!0,this.reason=b,this.errors=c,this.lastError=c[c.length-1]}static isInstance(a){return V.hasMarker(a,eh)}};function ek(a){var b;if("string"!=typeof a){if("v2"!==a.specificationVersion)throw new d7({version:a.specificationVersion,provider:a.provider,modelId:a.modelId});return a}return(null!=(b=globalThis.AI_SDK_DEFAULT_PROVIDER)?b:dE).languageModel(a)}R=ei;var el=[{mediaType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mediaType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mediaType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mediaType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mediaType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],em=async({url:a})=>{var b;let c=a.toString();try{let a=await fetch(c);if(!a.ok)throw new ef({url:c,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mediaType:null!=(b=a.headers.get("content-type"))?b:void 0}}catch(a){if(ef.isInstance(a))throw a;throw new ef({url:c,cause:a})}},en=c_.KC([c_.Yj(),c_.Nl(Uint8Array),c_.Nl(ArrayBuffer),c_.Ie(a=>{var b,c;return null!=(c=null==(b=globalThis.Buffer)?void 0:b.isBuffer(a))&&c},{message:"Must be a Buffer"})]);function eo(a){if(a instanceof Uint8Array)return{data:a,mediaType:void 0};if(a instanceof ArrayBuffer)return{data:new Uint8Array(a),mediaType:void 0};if("string"==typeof a)try{a=new URL(a)}catch(a){}if(a instanceof URL&&"data:"===a.protocol){let{mediaType:b,base64Content:c}=function(a){try{let[b,c]=a.split(",");return{mediaType:b.split(";")[0].split(":")[1],base64Content:c}}catch(a){return{mediaType:void 0,base64Content:void 0}}}(a.toString());if(null==b||null==c)throw new V({name:"InvalidDataContentError",message:`Invalid data URL format in content ${a.toString()}`});return{data:c,mediaType:b}}return{data:a,mediaType:void 0}}async function ep({prompt:a,supportedUrls:b,download:c=((a=em)=>b=>Promise.all(b.map(async b=>b.isUrlSupportedByModel?null:a(b))))()}){let d=await eq(a.messages,c,b);return[...null!=a.system?[{role:"system",content:a.system}]:[],...a.messages.map(a=>(function({message:a,downloadedAssets:b}){let c=a.role;switch(c){case"system":return{role:"system",content:a.content,providerOptions:a.providerOptions};case"user":if("string"==typeof a.content)return{role:"user",content:[{type:"text",text:a.content}],providerOptions:a.providerOptions};return{role:"user",content:a.content.map(a=>(function(a,b){var c;let d;if("text"===a.type)return{type:"text",text:a.text,providerOptions:a.providerOptions};let e=a.type;switch(e){case"image":d=a.image;break;case"file":d=a.data;break;default:throw Error(`Unsupported part type: ${e}`)}let{data:f,mediaType:g}=eo(d),h=null!=g?g:a.mediaType,i=f;if(i instanceof URL){let a=b[i.toString()];a&&(i=a.data,null!=h||(h=a.mediaType))}switch(e){case"image":return(i instanceof Uint8Array||"string"==typeof i)&&(h=null!=(c=function({data:a,signatures:b}){let c="string"==typeof a&&a.startsWith("SUQz")||"string"!=typeof a&&a.length>10&&73===a[0]&&68===a[1]&&51===a[2]?(a=>{let b="string"==typeof a?b5(a):a,c=(127&b[6])<<21|(127&b[7])<<14|(127&b[8])<<7|127&b[9];return b.slice(c+10)})(a):a;for(let a of b)if("string"==typeof c?c.startsWith(a.base64Prefix):c.length>=a.bytesPrefix.length&&a.bytesPrefix.every((a,b)=>c[b]===a))return a.mediaType}({data:i,signatures:el}))?c:h),{type:"file",mediaType:null!=h?h:"image/*",filename:void 0,data:i,providerOptions:a.providerOptions};case"file":if(null==h)throw Error("Media type is missing for file part");return{type:"file",mediaType:h,filename:a.filename,data:i,providerOptions:a.providerOptions}}})(a,b)).filter(a=>"text"!==a.type||""!==a.text),providerOptions:a.providerOptions};case"assistant":if("string"==typeof a.content)return{role:"assistant",content:[{type:"text",text:a.content}],providerOptions:a.providerOptions};return{role:"assistant",content:a.content.filter(a=>"text"!==a.type||""!==a.text).map(a=>{let b=a.providerOptions;switch(a.type){case"file":{let{data:c,mediaType:d}=eo(a.data);return{type:"file",data:c,filename:a.filename,mediaType:null!=d?d:a.mediaType,providerOptions:b}}case"reasoning":return{type:"reasoning",text:a.text,providerOptions:b};case"text":return{type:"text",text:a.text,providerOptions:b};case"tool-call":return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,providerExecuted:a.providerExecuted,providerOptions:b};case"tool-result":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:a.output,providerOptions:b}}}),providerOptions:a.providerOptions};case"tool":return{role:"tool",content:a.content.map(a=>({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:a.output,providerOptions:a.providerOptions})),providerOptions:a.providerOptions};default:throw new eb({role:c})}})({message:a,downloadedAssets:d}))]}async function eq(a,b,c){let d=a.filter(a=>"user"===a.role).map(a=>a.content).filter(a=>Array.isArray(a)).flat().filter(a=>"image"===a.type||"file"===a.type).map(a=>{var b;let c=null!=(b=a.mediaType)?b:"image"===a.type?"image/*":void 0,d="image"===a.type?a.image:a.data;if("string"==typeof d)try{d=new URL(d)}catch(a){}return{mediaType:c,data:d}}).filter(a=>a.data instanceof URL).map(a=>({url:a.data,isUrlSupportedByModel:null!=a.mediaType&&function({mediaType:a,url:b,supportedUrls:c}){return b=b.toLowerCase(),a=a.toLowerCase(),Object.entries(c).map(([a,b])=>{let c=a.toLowerCase();return"*"===c||"*/*"===c?{mediaTypePrefix:"",regexes:b}:{mediaTypePrefix:c.replace(/\*/,""),regexes:b}}).filter(({mediaTypePrefix:b})=>a.startsWith(b)).flatMap(({regexes:a})=>a).some(a=>a.test(b))}({url:a.data.toString(),mediaType:a.mediaType,supportedUrls:c})}));return Object.fromEntries((await b(d)).filter(a=>(null==a?void 0:a.data)!=null).map(({data:a,mediaType:b},c)=>[d[c].url.toString(),{data:a,mediaType:b}]))}function er({maxOutputTokens:a,temperature:b,topP:c,topK:d,presencePenalty:e,frequencyPenalty:f,seed:g,stopSequences:h}){if(null!=a){if(!Number.isInteger(a))throw new dS({parameter:"maxOutputTokens",value:a,message:"maxOutputTokens must be an integer"});if(a<1)throw new dS({parameter:"maxOutputTokens",value:a,message:"maxOutputTokens must be >= 1"})}if(null!=b&&"number"!=typeof b)throw new dS({parameter:"temperature",value:b,message:"temperature must be a number"});if(null!=c&&"number"!=typeof c)throw new dS({parameter:"topP",value:c,message:"topP must be a number"});if(null!=d&&"number"!=typeof d)throw new dS({parameter:"topK",value:d,message:"topK must be a number"});if(null!=e&&"number"!=typeof e)throw new dS({parameter:"presencePenalty",value:e,message:"presencePenalty must be a number"});if(null!=f&&"number"!=typeof f)throw new dS({parameter:"frequencyPenalty",value:f,message:"frequencyPenalty must be a number"});if(null!=g&&!Number.isInteger(g))throw new dS({parameter:"seed",value:g,message:"seed must be an integer"});return{maxOutputTokens:a,temperature:b,topP:c,topK:d,presencePenalty:e,frequencyPenalty:f,stopSequences:h,seed:g}}var es=c_.RZ(()=>c_.KC([c_.ch(),c_.Yj(),c_.ai(),c_.zM(),c_.g1(c_.Yj(),es),c_.YO(es)])),et=c_.g1(c_.Yj(),c_.g1(c_.Yj(),es)),eu=c_.Ik({type:c_.eu("text"),text:c_.Yj(),providerOptions:et.optional()}),ev=c_.Ik({type:c_.eu("image"),image:c_.KC([en,c_.Nl(URL)]),mediaType:c_.Yj().optional(),providerOptions:et.optional()}),ew=c_.Ik({type:c_.eu("file"),data:c_.KC([en,c_.Nl(URL)]),filename:c_.Yj().optional(),mediaType:c_.Yj(),providerOptions:et.optional()}),ex=c_.Ik({type:c_.eu("reasoning"),text:c_.Yj(),providerOptions:et.optional()}),ey=c_.Ik({type:c_.eu("tool-call"),toolCallId:c_.Yj(),toolName:c_.Yj(),input:c_.L5(),providerOptions:et.optional(),providerExecuted:c_.zM().optional()}),ez=c_.gM("type",[c_.Ik({type:c_.eu("text"),value:c_.Yj()}),c_.Ik({type:c_.eu("json"),value:es}),c_.Ik({type:c_.eu("error-text"),value:c_.Yj()}),c_.Ik({type:c_.eu("error-json"),value:es}),c_.Ik({type:c_.eu("content"),value:c_.YO(c_.KC([c_.Ik({type:c_.eu("text"),text:c_.Yj()}),c_.Ik({type:c_.eu("media"),data:c_.Yj(),mediaType:c_.Yj()})]))})]),eA=c_.Ik({type:c_.eu("tool-result"),toolCallId:c_.Yj(),toolName:c_.Yj(),output:ez,providerOptions:et.optional()}),eB=c_.Ik({role:c_.eu("system"),content:c_.Yj(),providerOptions:et.optional()}),eC=c_.Ik({role:c_.eu("user"),content:c_.KC([c_.Yj(),c_.YO(c_.KC([eu,ev,ew]))]),providerOptions:et.optional()}),eD=c_.Ik({role:c_.eu("assistant"),content:c_.KC([c_.Yj(),c_.YO(c_.KC([eu,ew,ex,ey,eA]))]),providerOptions:et.optional()}),eE=c_.Ik({role:c_.eu("tool"),content:c_.YO(eA),providerOptions:et.optional()}),eF=c_.KC([eB,eC,eD,eE]);async function eG(a){let b;if(null==a.prompt&&null==a.messages)throw new ag({prompt:a,message:"prompt or messages must be defined"});if(null!=a.prompt&&null!=a.messages)throw new ag({prompt:a,message:"prompt and messages cannot be defined at the same time"});if(null!=a.system&&"string"!=typeof a.system)throw new ag({prompt:a,message:"system must be a string"});if(null!=a.prompt&&"string"==typeof a.prompt)b=[{role:"user",content:a.prompt}];else if(null!=a.prompt&&Array.isArray(a.prompt))b=a.prompt;else if(null!=a.messages)b=a.messages;else throw new ag({prompt:a,message:"prompt or messages must be defined"});if(0===b.length)throw new ag({prompt:a,message:"messages must not be empty"});let c=await bK({value:b,schema:c_.YO(eF)});if(!c.success)throw new ag({prompt:a,message:"The messages must be a ModelMessage[]. If you have passed a UIMessage[], you can use convertToModelMessages to convert them.",cause:c.error});return{messages:b,system:a.system}}function eH({operationId:a,telemetry:b}){return{"operation.name":`${a}${(null==b?void 0:b.functionId)!=null?` ${b.functionId}`:""}`,"resource.name":null==b?void 0:b.functionId,"ai.operationId":a,"ai.telemetry.functionId":null==b?void 0:b.functionId}}var eI={startSpan:()=>eJ,startActiveSpan:(a,b,c,d)=>"function"==typeof b?b(eJ):"function"==typeof c?c(eJ):"function"==typeof d?d(eJ):void 0},eJ={spanContext:()=>eK,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},eK={traceId:"",spanId:"",traceFlags:0};function eL({name:a,tracer:b,attributes:c,fn:d,endWhenDone:e=!0}){return b.startActiveSpan(a,{attributes:c},async a=>{try{let b=await d(a);return e&&a.end(),b}catch(b){try{eM(a,b)}finally{a.end()}throw b}})}function eM(a,b){b instanceof Error?(a.recordException({name:b.name,message:b.message,stack:b.stack}),a.setStatus({code:dH.s.ERROR,message:b.message})):a.setStatus({code:dH.s.ERROR})}function eN({telemetry:a,attributes:b}){return(null==a?void 0:a.isEnabled)!==!0?{}:Object.entries(b).reduce((b,[c,d])=>{if(null==d)return b;if("object"==typeof d&&"input"in d&&"function"==typeof d.input){if((null==a?void 0:a.recordInputs)===!1)return b;let e=d.input();return null==e?b:{...b,[c]:e}}if("object"==typeof d&&"output"in d&&"function"==typeof d.output){if((null==a?void 0:a.recordOutputs)===!1)return b;let e=d.output();return null==e?b:{...b,[c]:e}}return{...b,[c]:d}},{})}function eO(a,b){return null==a&&null==b?void 0:(null!=a?a:0)+(null!=b?b:0)}async function eP(a,{maxRetries:b,delayInMs:c,backoffFactor:d,abortSignal:e},f=[]){try{return await a()}catch(j){if((j instanceof Error||j instanceof DOMException)&&("AbortError"===j.name||"ResponseAborted"===j.name||"TimeoutError"===j.name)||0===b)throw j;let g=bG(j),h=[...f,j],i=h.length;if(i>b)throw new ej({message:`Failed after ${i} attempts. Last error: ${g}`,reason:"maxRetriesExceeded",errors:h});if(j instanceof Error&&Z.isInstance(j)&&!0===j.isRetryable&&i<=b)return await bD(function({error:a,exponentialBackoffDelay:b}){let c,d=a.responseHeaders;if(!d)return b;let e=d["retry-after-ms"];if(e){let a=parseFloat(e);Number.isNaN(a)||(c=a)}let f=d["retry-after"];if(f&&void 0===c){let a=parseFloat(f);c=Number.isNaN(a)?Date.parse(f)-Date.now():1e3*a}return null!=c&&!Number.isNaN(c)&&0<=c&&(c<6e4||c<b)?c:b}({error:j,exponentialBackoffDelay:c}),{abortSignal:e}),eP(a,{maxRetries:b,delayInMs:d*c,backoffFactor:d,abortSignal:e},h);if(1===i)throw j;throw new ej({message:`Failed after ${i} attempts with non-retryable error: '${g}'`,reason:"errorNotRetryable",errors:h})}}function eQ(a){let b=a.filter(a=>"text"===a.type);if(0!==b.length)return b.map(a=>a.text).join("")}var eR=class{constructor({data:a,mediaType:b}){let c=a instanceof Uint8Array;this.base64Data=c?void 0:a,this.uint8ArrayData=c?a:void 0,this.mediaType=b}get base64(){return null==this.base64Data&&(this.base64Data=b6(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=b5(this.base64Data)),this.uint8ArrayData}};async function eS({toolCall:a,tools:b,repairToolCall:c,system:d,messages:e}){try{if(null==b)throw new d2({toolName:a.toolName});try{return await eT({toolCall:a,tools:b})}catch(g){if(null==c||!(d2.isInstance(g)||dW.isInstance(g)))throw g;let f=null;try{f=await c({toolCall:a,tools:b,inputSchema:({toolName:a})=>{let{inputSchema:c}=b[a];return b2(c).jsonSchema},system:d,messages:e,error:g})}catch(a){throw new d6({cause:a,originalError:g})}if(null==f)throw g;return await eT({toolCall:f,tools:b})}}catch(d){let b=await bL({text:a.input}),c=b.success?b.value:a.input;return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:c,dynamic:!0,invalid:!0,error:d}}}async function eT({toolCall:a,tools:b}){let c=a.toolName,d=b[c];if(null==d)throw new d2({toolName:a.toolName,availableTools:Object.keys(b)});let e=b2(d.inputSchema),f=""===a.input.trim()?await bK({value:{},schema:e}):await bL({text:a.input,schema:e});if(!1===f.success)throw new dW({toolName:c,toolInput:a.input,cause:f.error});return"dynamic"===d.type?{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:f.value,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata,dynamic:!0}:{type:"tool-call",toolCallId:a.toolCallId,toolName:c,input:f.value,providerExecuted:a.providerExecuted,providerMetadata:a.providerMetadata}}var eU=class{constructor({content:a,finishReason:b,usage:c,warnings:d,request:e,response:f,providerMetadata:g}){this.content=a,this.finishReason=b,this.usage=c,this.warnings=d,this.request=e,this.response=f,this.providerMetadata=g}get text(){return this.content.filter(a=>"text"===a.type).map(a=>a.text).join("")}get reasoning(){return this.content.filter(a=>"reasoning"===a.type)}get reasoningText(){return 0===this.reasoning.length?void 0:this.reasoning.map(a=>a.text).join("")}get files(){return this.content.filter(a=>"file"===a.type).map(a=>a.file)}get sources(){return this.content.filter(a=>"source"===a.type)}get toolCalls(){return this.content.filter(a=>"tool-call"===a.type)}get staticToolCalls(){return this.toolCalls.filter(a=>!1===a.dynamic)}get dynamicToolCalls(){return this.toolCalls.filter(a=>!0===a.dynamic)}get toolResults(){return this.content.filter(a=>"tool-result"===a.type)}get staticToolResults(){return this.toolResults.filter(a=>!1===a.dynamic)}get dynamicToolResults(){return this.toolResults.filter(a=>!0===a.dynamic)}};async function eV({stopConditions:a,steps:b}){return(await Promise.all(a.map(a=>a({steps:b})))).some(a=>a)}function eW({output:a,tool:b,errorMode:c}){return"text"===c?{type:"error-text",value:$(a)}:"json"===c?{type:"error-json",value:eX(a)}:(null==b?void 0:b.toModelOutput)?b.toModelOutput(a):"string"==typeof a?{type:"text",value:a}:{type:"json",value:eX(a)}}function eX(a){return void 0===a?null:a}var eY=bF({prefix:"aitxt",size:24});async function eZ({model:a,tools:b,toolChoice:c,system:d,prompt:e,messages:f,maxRetries:g,abortSignal:h,headers:i,stopWhen:j=function(a){return({steps:a})=>1===a.length}(0),experimental_output:k,experimental_telemetry:l,providerOptions:m,experimental_activeTools:n,activeTools:o=n,experimental_prepareStep:p,prepareStep:q=p,experimental_repairToolCall:r,experimental_download:s,experimental_context:t,_internal:{generateId:u=eY,currentDate:v=()=>new Date}={},onStepFinish:w,...x}){let y=ek(a),z=void 0===j?[]:Array.isArray(j)?j:[j],{maxRetries:A,retry:B}=function({maxRetries:a,abortSignal:b}){if(null!=a){if(!Number.isInteger(a))throw new dS({parameter:"maxRetries",value:a,message:"maxRetries must be an integer"});if(a<0)throw new dS({parameter:"maxRetries",value:a,message:"maxRetries must be >= 0"})}let c=null!=a?a:2;return{maxRetries:c,retry:(({maxRetries:a=2,initialDelayInMs:b=2e3,backoffFactor:c=2,abortSignal:d}={})=>async e=>eP(e,{maxRetries:a,delayInMs:b,backoffFactor:c,abortSignal:d}))({maxRetries:c,abortSignal:b})}}({maxRetries:g,abortSignal:h}),C=function({model:a,settings:b,telemetry:c,headers:d}){var e;return{"ai.model.provider":a.provider,"ai.model.id":a.modelId,...Object.entries(b).reduce((a,[b,c])=>(a[`ai.settings.${b}`]=c,a),{}),...Object.entries(null!=(e=null==c?void 0:c.metadata)?e:{}).reduce((a,[b,c])=>(a[`ai.telemetry.metadata.${b}`]=c,a),{}),...Object.entries(null!=d?d:{}).reduce((a,[b,c])=>(void 0!==c&&(a[`ai.request.headers.${b}`]=c),a),{})}}({model:y,telemetry:l,headers:i,settings:{...er(x),maxRetries:A}}),D=await eG({system:d,prompt:e,messages:f}),E=function({isEnabled:a=!1,tracer:b}={}){return a?b||dG.u.getTracer("ai"):eI}(l);try{return await eL({name:"ai.generateText",attributes:eN({telemetry:l,attributes:{...eH({operationId:"ai.generateText",telemetry:l}),...C,"ai.model.provider":y.provider,"ai.model.id":y.modelId,"ai.prompt":{input:()=>JSON.stringify({system:d,prompt:e,messages:f})}}}),tracer:E,fn:async a=>{var e,f,g,j,n,p,A;let F,G=er(x),H=[],I=[],J=[],K=[];do{let a=[...D.messages,...J],z=await (null==q?void 0:q({model:y,steps:K,stepNumber:K.length,messages:a})),L=await ep({prompt:{system:null!=(e=null==z?void 0:z.system)?e:D.system,messages:null!=(f=null==z?void 0:z.messages)?f:a},supportedUrls:await y.supportedUrls,download:s}),M=ek(null!=(g=null==z?void 0:z.model)?g:y),{toolChoice:N,tools:O}=function({tools:a,toolChoice:b,activeTools:c}){return null!=a&&Object.keys(a).length>0?{tools:(null!=c?Object.entries(a).filter(([a])=>c.includes(a)):Object.entries(a)).map(([a,b])=>{let c=b.type;switch(c){case void 0:case"dynamic":case"function":return{type:"function",name:a,description:b.description,inputSchema:b2(b.inputSchema).jsonSchema,providerOptions:b.providerOptions};case"provider-defined":return{type:"provider-defined",name:a,id:b.id,args:b.args};default:throw Error(`Unsupported tool type: ${c}`)}}),toolChoice:null==b?{type:"auto"}:"string"==typeof b?{type:b}:{type:"tool",toolName:b.toolName}}:{tools:void 0,toolChoice:void 0}}({tools:b,toolChoice:null!=(j=null==z?void 0:z.toolChoice)?j:c,activeTools:null!=(n=null==z?void 0:z.activeTools)?n:o});F=await B(()=>{var a;return eL({name:"ai.generateText.doGenerate",attributes:eN({telemetry:l,attributes:{...eH({operationId:"ai.generateText.doGenerate",telemetry:l}),...C,"ai.model.provider":M.provider,"ai.model.id":M.modelId,"ai.prompt.messages":{input:()=>JSON.stringify(L.map(a=>({...a,content:"string"==typeof a.content?a.content:a.content.map(a=>{var b;return"file"===a.type?{...a,data:a.data instanceof Uint8Array?"string"==typeof(b=a.data)?b:b instanceof ArrayBuffer?b6(new Uint8Array(b)):b6(b):a.data}:a})})))},"ai.prompt.tools":{input:()=>null==O?void 0:O.map(a=>JSON.stringify(a))},"ai.prompt.toolChoice":{input:()=>null!=N?JSON.stringify(N):void 0},"gen_ai.system":M.provider,"gen_ai.request.model":M.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxOutputTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.stop_sequences":x.stopSequences,"gen_ai.request.temperature":null!=(a=x.temperature)?a:void 0,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:E,fn:async a=>{var b,c,d,e,f,g,j,n;let o=await M.doGenerate({...G,tools:O,toolChoice:N,responseFormat:null==k?void 0:k.responseFormat,prompt:L,providerOptions:m,abortSignal:h,headers:i}),p={id:null!=(c=null==(b=o.response)?void 0:b.id)?c:u(),timestamp:null!=(e=null==(d=o.response)?void 0:d.timestamp)?e:v(),modelId:null!=(g=null==(f=o.response)?void 0:f.modelId)?g:M.modelId,headers:null==(j=o.response)?void 0:j.headers,body:null==(n=o.response)?void 0:n.body};return a.setAttributes(eN({telemetry:l,attributes:{"ai.response.finishReason":o.finishReason,"ai.response.text":{output:()=>eQ(o.content)},"ai.response.toolCalls":{output:()=>{let a=e0(o.content);return null==a?void 0:JSON.stringify(a)}},"ai.response.id":p.id,"ai.response.model":p.modelId,"ai.response.timestamp":p.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(o.providerMetadata),"ai.usage.promptTokens":o.usage.inputTokens,"ai.usage.completionTokens":o.usage.outputTokens,"gen_ai.response.finish_reasons":[o.finishReason],"gen_ai.response.id":p.id,"gen_ai.response.model":p.modelId,"gen_ai.usage.input_tokens":o.usage.inputTokens,"gen_ai.usage.output_tokens":o.usage.outputTokens}})),{...o,response:p}}})});let P=await Promise.all(F.content.filter(a=>"tool-call"===a.type).map(c=>eS({toolCall:c,tools:b,repairToolCall:r,system:d,messages:a})));for(let c of P){if(c.invalid)continue;let d=b[c.toolName];(null==d?void 0:d.onInputAvailable)!=null&&await d.onInputAvailable({input:c.input,toolCallId:c.toolCallId,messages:a,abortSignal:h,experimental_context:t})}let Q=P.filter(a=>a.invalid&&a.dynamic);for(let a of(I=[],Q))I.push({type:"tool-error",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,error:bG(a.error),dynamic:!0});H=P.filter(a=>!a.providerExecuted),null!=b&&I.push(...await e$({toolCalls:H.filter(a=>!a.invalid),tools:b,tracer:E,telemetry:l,messages:a,abortSignal:h,experimental_context:t}));let R=function({content:a,toolCalls:b,toolOutputs:c}){return[...a.map(a=>{switch(a.type){case"text":case"reasoning":case"source":return a;case"file":return{type:"file",file:new eR(a)};case"tool-call":return b.find(b=>b.toolCallId===a.toolCallId);case"tool-result":{let c=b.find(b=>b.toolCallId===a.toolCallId);if(null==c)throw Error(`Tool call ${a.toolCallId} not found.`);if(a.isError)return{type:"tool-error",toolCallId:a.toolCallId,toolName:a.toolName,input:c.input,error:a.result,providerExecuted:!0,dynamic:c.dynamic};return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,input:c.input,output:a.result,providerExecuted:!0,dynamic:c.dynamic}}}}),...c]}({content:F.content,toolCalls:P,toolOutputs:I});J.push(...function({content:a,tools:b}){let c=[],d=a.filter(a=>"source"!==a.type).filter(a=>("tool-result"!==a.type||a.providerExecuted)&&("tool-error"!==a.type||a.providerExecuted)).filter(a=>"text"!==a.type||a.text.length>0).map(a=>{switch(a.type){case"text":return{type:"text",text:a.text,providerOptions:a.providerMetadata};case"reasoning":return{type:"reasoning",text:a.text,providerOptions:a.providerMetadata};case"file":return{type:"file",data:a.file.base64,mediaType:a.file.mediaType,providerOptions:a.providerMetadata};case"tool-call":return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,providerExecuted:a.providerExecuted,providerOptions:a.providerMetadata};case"tool-result":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:eW({tool:null==b?void 0:b[a.toolName],output:a.output,errorMode:"none"}),providerExecuted:!0,providerOptions:a.providerMetadata};case"tool-error":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:eW({tool:null==b?void 0:b[a.toolName],output:a.error,errorMode:"json"}),providerOptions:a.providerMetadata}}});d.length>0&&c.push({role:"assistant",content:d});let e=a.filter(a=>"tool-result"===a.type||"tool-error"===a.type).filter(a=>!a.providerExecuted).map(a=>({type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:eW({tool:null==b?void 0:b[a.toolName],output:"tool-result"===a.type?a.output:a.error,errorMode:"tool-error"===a.type?"text":"none"})}));return e.length>0&&c.push({role:"tool",content:e}),c}({content:R,tools:b}));let S=new eU({content:R,finishReason:F.finishReason,usage:F.usage,warnings:F.warnings,providerMetadata:F.providerMetadata,request:null!=(p=F.request)?p:{},response:{...F.response,messages:structuredClone(J)}});dO(null!=(A=F.warnings)?A:[]),K.push(S),await (null==w?void 0:w(S))}while(H.length>0&&I.length===H.length&&!await eV({stopConditions:z,steps:K}));a.setAttributes(eN({telemetry:l,attributes:{"ai.response.finishReason":F.finishReason,"ai.response.text":{output:()=>eQ(F.content)},"ai.response.toolCalls":{output:()=>{let a=e0(F.content);return null==a?void 0:JSON.stringify(a)}},"ai.response.providerMetadata":JSON.stringify(F.providerMetadata),"ai.usage.promptTokens":F.usage.inputTokens,"ai.usage.completionTokens":F.usage.outputTokens}}));let L=K[K.length-1];return new e_({steps:K,resolvedOutput:await (null==k?void 0:k.parseOutput({text:L.text},{response:L.response,usage:L.usage,finishReason:L.finishReason}))})}})}catch(a){throw c4.isInstance(a)||de.isInstance(a)?new V({name:"GatewayError",message:"Vercel AI Gateway access failed. If you want to use AI SDK providers directly, use the providers, e.g. @ai-sdk/openai, or register a different global default provider.",cause:a}):a}}async function e$({toolCalls:a,tools:b,tracer:c,telemetry:d,messages:e,abortSignal:f,experimental_context:g}){return(await Promise.all(a.map(async({toolCallId:a,toolName:h,input:i})=>{let j=b[h];if((null==j?void 0:j.execute)!=null)return eL({name:"ai.toolCall",attributes:eN({telemetry:d,attributes:{...eH({operationId:"ai.toolCall",telemetry:d}),"ai.toolCall.name":h,"ai.toolCall.id":a,"ai.toolCall.args":{output:()=>JSON.stringify(i)}}}),tracer:c,fn:async b=>{try{let c;for await(let b of b7({execute:j.execute.bind(j),input:i,options:{toolCallId:a,messages:e,abortSignal:f,experimental_context:g}}))"final"===b.type&&(c=b.output);try{b.setAttributes(eN({telemetry:d,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(c)}}}))}catch(a){}return{type:"tool-result",toolCallId:a,toolName:h,input:i,output:c,dynamic:"dynamic"===j.type}}catch(c){return eM(b,c),{type:"tool-error",toolCallId:a,toolName:h,input:i,error:c,dynamic:"dynamic"===j.type}}}})}))).filter(a=>null!=a)}var e_=class{constructor(a){this.steps=a.steps,this.resolvedOutput=a.resolvedOutput}get finalStep(){return this.steps[this.steps.length-1]}get content(){return this.finalStep.content}get text(){return this.finalStep.text}get files(){return this.finalStep.files}get reasoningText(){return this.finalStep.reasoningText}get reasoning(){return this.finalStep.reasoning}get toolCalls(){return this.finalStep.toolCalls}get staticToolCalls(){return this.finalStep.staticToolCalls}get dynamicToolCalls(){return this.finalStep.dynamicToolCalls}get toolResults(){return this.finalStep.toolResults}get staticToolResults(){return this.finalStep.staticToolResults}get dynamicToolResults(){return this.finalStep.dynamicToolResults}get sources(){return this.finalStep.sources}get finishReason(){return this.finalStep.finishReason}get warnings(){return this.finalStep.warnings}get providerMetadata(){return this.finalStep.providerMetadata}get response(){return this.finalStep.response}get request(){return this.finalStep.request}get usage(){return this.finalStep.usage}get totalUsage(){return this.steps.reduce((a,b)=>{var c;return c=b.usage,{inputTokens:eO(a.inputTokens,c.inputTokens),outputTokens:eO(a.outputTokens,c.outputTokens),totalTokens:eO(a.totalTokens,c.totalTokens),reasoningTokens:eO(a.reasoningTokens,c.reasoningTokens),cachedInputTokens:eO(a.cachedInputTokens,c.cachedInputTokens)}},{inputTokens:void 0,outputTokens:void 0,totalTokens:void 0,reasoningTokens:void 0,cachedInputTokens:void 0})}get experimental_output(){if(null==this.resolvedOutput)throw new dM;return this.resolvedOutput}};function e0(a){let b=a.filter(a=>"tool-call"===a.type);if(0!==b.length)return b.map(a=>({toolCallId:a.toolCallId,toolName:a.toolName,input:a.input}))}async function e1(a){if(void 0===a)return{value:void 0,state:"undefined-input"};let b=await bL({text:a});return b.success?{value:b.value,state:"successful-parse"}:(b=await bL({text:function(a){let b=["ROOT"],c=-1,d=null;function e(a,e,f){switch(a){case'"':c=e,b.pop(),b.push(f),b.push("INSIDE_STRING");break;case"f":case"t":case"n":c=e,d=e,b.pop(),b.push(f),b.push("INSIDE_LITERAL");break;case"-":b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=e,b.pop(),b.push(f),b.push("INSIDE_NUMBER");break;case"{":c=e,b.pop(),b.push(f),b.push("INSIDE_OBJECT_START");break;case"[":c=e,b.pop(),b.push(f),b.push("INSIDE_ARRAY_START")}}function f(a,d){switch(a){case",":b.pop(),b.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":c=d,b.pop()}}function g(a,d){switch(a){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=d,b.pop()}}for(let h=0;h<a.length;h++){let i=a[h];switch(b[b.length-1]){case"ROOT":e(i,h,"FINISH");break;case"INSIDE_OBJECT_START":switch(i){case'"':b.pop(),b.push("INSIDE_OBJECT_KEY");break;case"}":c=h,b.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_KEY"));break;case"INSIDE_OBJECT_KEY":'"'===i&&(b.pop(),b.push("INSIDE_OBJECT_AFTER_KEY"));break;case"INSIDE_OBJECT_AFTER_KEY":":"===i&&(b.pop(),b.push("INSIDE_OBJECT_BEFORE_VALUE"));break;case"INSIDE_OBJECT_BEFORE_VALUE":e(i,h,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":f(i,h);break;case"INSIDE_STRING":switch(i){case'"':b.pop(),c=h;break;case"\\":b.push("INSIDE_STRING_ESCAPE");break;default:c=h}break;case"INSIDE_ARRAY_START":"]"===i?(c=h,b.pop()):(c=h,e(i,h,"INSIDE_ARRAY_AFTER_VALUE"));break;case"INSIDE_ARRAY_AFTER_VALUE":switch(i){case",":b.pop(),b.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":c=h,b.pop();break;default:c=h}break;case"INSIDE_ARRAY_AFTER_COMMA":e(i,h,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":b.pop(),c=h;break;case"INSIDE_NUMBER":switch(i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":c=h;break;case"e":case"E":case"-":case".":break;case",":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"}":b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]&&f(i,h);break;case"]":b.pop(),"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h);break;default:b.pop()}break;case"INSIDE_LITERAL":{let e=a.substring(d,h+1);"false".startsWith(e)||"true".startsWith(e)||"null".startsWith(e)?c=h:(b.pop(),"INSIDE_OBJECT_AFTER_VALUE"===b[b.length-1]?f(i,h):"INSIDE_ARRAY_AFTER_VALUE"===b[b.length-1]&&g(i,h))}}}let h=a.slice(0,c+1);for(let c=b.length-1;c>=0;c--)switch(b[c]){case"INSIDE_STRING":h+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":h+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":h+="]";break;case"INSIDE_LITERAL":{let b=a.substring(d,a.length);"true".startsWith(b)?h+="true".slice(b.length):"false".startsWith(b)?h+="false".slice(b.length):"null".startsWith(b)&&(h+="null".slice(b.length))}}return h}(a)})).success?{value:b.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"}}TransformStream,c_.KC([c_.re({type:c_.eu("text-start"),id:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.eu("text-delta"),id:c_.Yj(),delta:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.eu("text-end"),id:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.eu("error"),errorText:c_.Yj()}),c_.re({type:c_.eu("tool-input-start"),toolCallId:c_.Yj(),toolName:c_.Yj(),providerExecuted:c_.zM().optional(),dynamic:c_.zM().optional()}),c_.re({type:c_.eu("tool-input-delta"),toolCallId:c_.Yj(),inputTextDelta:c_.Yj()}),c_.re({type:c_.eu("tool-input-available"),toolCallId:c_.Yj(),toolName:c_.Yj(),input:c_.L5(),providerExecuted:c_.zM().optional(),providerMetadata:et.optional(),dynamic:c_.zM().optional()}),c_.re({type:c_.eu("tool-input-error"),toolCallId:c_.Yj(),toolName:c_.Yj(),input:c_.L5(),providerExecuted:c_.zM().optional(),providerMetadata:et.optional(),dynamic:c_.zM().optional(),errorText:c_.Yj()}),c_.re({type:c_.eu("tool-output-available"),toolCallId:c_.Yj(),output:c_.L5(),providerExecuted:c_.zM().optional(),dynamic:c_.zM().optional(),preliminary:c_.zM().optional()}),c_.re({type:c_.eu("tool-output-error"),toolCallId:c_.Yj(),errorText:c_.Yj(),providerExecuted:c_.zM().optional(),dynamic:c_.zM().optional()}),c_.re({type:c_.eu("reasoning"),text:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.eu("reasoning-start"),id:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.eu("reasoning-delta"),id:c_.Yj(),delta:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.eu("reasoning-end"),id:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.eu("reasoning-part-finish")}),c_.re({type:c_.eu("source-url"),sourceId:c_.Yj(),url:c_.Yj(),title:c_.Yj().optional(),providerMetadata:et.optional()}),c_.re({type:c_.eu("source-document"),sourceId:c_.Yj(),mediaType:c_.Yj(),title:c_.Yj(),filename:c_.Yj().optional(),providerMetadata:et.optional()}),c_.re({type:c_.eu("file"),url:c_.Yj(),mediaType:c_.Yj(),providerMetadata:et.optional()}),c_.re({type:c_.Yj().startsWith("data-"),id:c_.Yj().optional(),data:c_.L5(),transient:c_.zM().optional()}),c_.re({type:c_.eu("start-step")}),c_.re({type:c_.eu("finish-step")}),c_.re({type:c_.eu("start"),messageId:c_.Yj().optional(),messageMetadata:c_.L5().optional()}),c_.re({type:c_.eu("finish"),messageMetadata:c_.L5().optional()}),c_.re({type:c_.eu("abort")}),c_.re({type:c_.eu("message-metadata"),messageMetadata:c_.L5()})]),bF({prefix:"aitxt",size:24}),bF({prefix:"aiobj",size:24}),bF({prefix:"aiobj",size:24}),((a,b)=>{for(var c in b)dI(a,c,{get:b[c],enumerable:!0})})({},{object:()=>e3,text:()=>e2});var e2=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:a})=>({partial:a}),parseOutput:async({text:a})=>a}),e3=({schema:a})=>{let b=b2(a);return{type:"object",responseFormat:{type:"json",schema:b.jsonSchema},async parsePartial({text:a}){let b=await e1(a);switch(b.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:b.value};default:{let a=b.state;throw Error(`Unsupported parse state: ${a}`)}}},async parseOutput({text:a},c){let d=await bL({text:a});if(!d.success)throw new d$({message:"No object generated: could not parse the response.",cause:d.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});let e=await bK({value:d.value,schema:b});if(!e.success)throw new d$({message:"No object generated: response did not match schema.",cause:e.error,text:a,response:c.response,usage:c.usage,finishReason:c.finishReason});return e.value}}},e4=(Symbol.for("vercel.ai.error.AI_NoSuchProviderError"),c_._H({name:c_.Yj(),version:c_.Yj()})),e5=c_._H({_meta:c_.lq(c_.Ik({}).loose())}),e6=c_.Ik({method:c_.Yj(),params:c_.lq(e5)}),e7=c_._H({experimental:c_.lq(c_.Ik({}).loose()),logging:c_.lq(c_.Ik({}).loose()),prompts:c_.lq(c_._H({listChanged:c_.lq(c_.zM())})),resources:c_.lq(c_._H({subscribe:c_.lq(c_.zM()),listChanged:c_.lq(c_.zM())})),tools:c_.lq(c_._H({listChanged:c_.lq(c_.zM())}))});e5.extend({protocolVersion:c_.Yj(),capabilities:e7,serverInfo:e4,instructions:c_.lq(c_.Yj())});var e8=e5.extend({nextCursor:c_.lq(c_.Yj())}),e9=c_.Ik({name:c_.Yj(),description:c_.lq(c_.Yj()),inputSchema:c_.Ik({type:c_.eu("object"),properties:c_.lq(c_.Ik({}).loose())}).loose()}).loose();e8.extend({tools:c_.YO(e9)});var fa=c_.Ik({type:c_.eu("text"),text:c_.Yj()}).loose(),fb=c_.Ik({type:c_.eu("image"),data:c_.K3(),mimeType:c_.Yj()}).loose(),fc=c_.Ik({uri:c_.Yj(),mimeType:c_.lq(c_.Yj())}).loose(),fd=fc.extend({text:c_.Yj()}),fe=fc.extend({blob:c_.K3()}),ff=c_.Ik({type:c_.eu("resource"),resource:c_.KC([fd,fe])}).loose();e5.extend({content:c_.YO(c_.KC([fa,fb,ff])),isError:c_.zM().default(!1).optional()}).or(e5.extend({toolResult:c_.L5()}));var fg=c_.Ik({jsonrpc:c_.eu("2.0"),id:c_.KC([c_.Yj(),c_.ai().int()])}).merge(e6).strict(),fh=c_.Ik({jsonrpc:c_.eu("2.0"),id:c_.KC([c_.Yj(),c_.ai().int()]),result:e5}).strict(),fi=c_.Ik({jsonrpc:c_.eu("2.0"),id:c_.KC([c_.Yj(),c_.ai().int()]),error:c_.Ik({code:c_.ai().int(),message:c_.Yj(),data:c_.lq(c_.L5())})}).strict(),fj=c_.Ik({jsonrpc:c_.eu("2.0")}).merge(c_.Ik({method:c_.Yj(),params:c_.lq(e5)})).strict();c_.KC([fg,fj,fh,fi]);var fk=c_.Ik({type:c_.eu("text"),text:c_.Yj(),state:c_.k5(["streaming","done"]).optional(),providerMetadata:et.optional()}),fl=c_.Ik({type:c_.eu("reasoning"),text:c_.Yj(),state:c_.k5(["streaming","done"]).optional(),providerMetadata:et.optional()}),fm=c_.Ik({type:c_.eu("source-url"),sourceId:c_.Yj(),url:c_.Yj(),title:c_.Yj().optional(),providerMetadata:et.optional()}),fn=c_.Ik({type:c_.eu("source-document"),sourceId:c_.Yj(),mediaType:c_.Yj(),title:c_.Yj(),filename:c_.Yj().optional(),providerMetadata:et.optional()}),fo=c_.Ik({type:c_.eu("file"),mediaType:c_.Yj(),filename:c_.Yj().optional(),url:c_.Yj(),providerMetadata:et.optional()}),fp=c_.Ik({type:c_.eu("step-start")}),fq=c_.Ik({type:c_.Yj().startsWith("data-"),id:c_.Yj().optional(),data:c_.L5()}),fr=[c_.Ik({type:c_.eu("dynamic-tool"),toolName:c_.Yj(),toolCallId:c_.Yj(),state:c_.eu("input-streaming"),input:c_.L5().optional(),output:c_.Zm().optional(),errorText:c_.Zm().optional()}),c_.Ik({type:c_.eu("dynamic-tool"),toolName:c_.Yj(),toolCallId:c_.Yj(),state:c_.eu("input-available"),input:c_.L5(),output:c_.Zm().optional(),errorText:c_.Zm().optional(),callProviderMetadata:et.optional()}),c_.Ik({type:c_.eu("dynamic-tool"),toolName:c_.Yj(),toolCallId:c_.Yj(),state:c_.eu("output-available"),input:c_.L5(),output:c_.L5(),errorText:c_.Zm().optional(),callProviderMetadata:et.optional(),preliminary:c_.zM().optional()}),c_.Ik({type:c_.eu("dynamic-tool"),toolName:c_.Yj(),toolCallId:c_.Yj(),state:c_.eu("output-error"),input:c_.L5(),output:c_.Zm().optional(),errorText:c_.Yj(),callProviderMetadata:et.optional()})],fs=[c_.Ik({type:c_.Yj().startsWith("tool-"),toolCallId:c_.Yj(),state:c_.eu("input-streaming"),input:c_.L5().optional(),output:c_.Zm().optional(),errorText:c_.Zm().optional()}),c_.Ik({type:c_.Yj().startsWith("tool-"),toolCallId:c_.Yj(),state:c_.eu("input-available"),input:c_.L5(),output:c_.Zm().optional(),errorText:c_.Zm().optional(),callProviderMetadata:et.optional()}),c_.Ik({type:c_.Yj().startsWith("tool-"),toolCallId:c_.Yj(),state:c_.eu("output-available"),input:c_.L5(),output:c_.L5(),errorText:c_.Zm().optional(),callProviderMetadata:et.optional(),preliminary:c_.zM().optional()}),c_.Ik({type:c_.Yj().startsWith("tool-"),toolCallId:c_.Yj(),state:c_.eu("output-error"),input:c_.L5(),output:c_.Zm().optional(),errorText:c_.Yj(),callProviderMetadata:et.optional()})];c_.Ik({id:c_.Yj(),role:c_.k5(["system","user","assistant"]),metadata:c_.L5().optional(),parts:c_.YO(c_.KC([fk,fl,fm,fn,fo,fp,fq,...fr,...fs]))})}};