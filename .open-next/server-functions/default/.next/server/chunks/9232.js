exports.id=9232,exports.ids=[9232],exports.modules={590:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FgaPaginatable=void 0;let d=c(46944);class e extends d.AutoPaginatable{constructor(a,b,c){super(a,b,c)}get warnings(){return this.list.warnings}}b.FgaPaginatable=e},612:(a,b,c)=>{"use strict";c.r(b),c.d(b,{Crypto:()=>eb,CryptoKey:()=>b6});var d,e,f,g,h,i={};c.r(i),c.d(i,{Any:()=>aQ,BaseBlock:()=>Q,BaseStringBlock:()=>R,BitString:()=>ae,BmpString:()=>ax,Boolean:()=>aa,CharacterString:()=>aI,Choice:()=>aR,Constructed:()=>X,DATE:()=>aL,DateTime:()=>aN,Duration:()=>aO,EndOfContent:()=>Z,Enumerated:()=>ai,GeneralString:()=>aH,GeneralizedTime:()=>aK,GraphicString:()=>aF,HexBlock:()=>K,IA5String:()=>aE,Integer:()=>ah,Null:()=>$,NumericString:()=>aA,ObjectIdentifier:()=>al,OctetString:()=>ac,Primitive:()=>T,PrintableString:()=>aB,RawData:()=>aT,RelativeObjectIdentifier:()=>ao,Repeated:()=>aS,Sequence:()=>ap,Set:()=>aq,TIME:()=>aP,TeletexString:()=>aC,TimeOfDay:()=>aM,UTCTime:()=>aJ,UniversalString:()=>az,Utf8String:()=>av,ValueBlock:()=>M,VideotexString:()=>aD,ViewWriter:()=>A,VisibleString:()=>aG,compareSchema:()=>aU,fromBER:()=>V,verifySchema:()=>aV});class j{static isArrayBuffer(a){return"[object ArrayBuffer]"===Object.prototype.toString.call(a)}static toArrayBuffer(a){return this.isArrayBuffer(a)?a:a.byteLength===a.buffer.byteLength||0===a.byteOffset&&a.byteLength===a.buffer.byteLength?a.buffer:this.toUint8Array(a.buffer).slice(a.byteOffset,a.byteOffset+a.byteLength).buffer}static toUint8Array(a){return this.toView(a,Uint8Array)}static toView(a,b){if(a.constructor===b)return a;if(this.isArrayBuffer(a))return new b(a);if(this.isArrayBufferView(a))return new b(a.buffer,a.byteOffset,a.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(a){return this.isArrayBufferView(a)||this.isArrayBuffer(a)}static isArrayBufferView(a){return ArrayBuffer.isView(a)||a&&this.isArrayBuffer(a.buffer)}static isEqual(a,b){let c=j.toUint8Array(a),d=j.toUint8Array(b);if(c.length!==d.byteLength)return!1;for(let a=0;a<c.length;a++)if(c[a]!==d[a])return!1;return!0}static concat(...a){let b;b=!Array.isArray(a[0])||a[1]instanceof Function?Array.isArray(a[0])&&a[1]instanceof Function?a[0]:a[a.length-1]instanceof Function?a.slice(0,a.length-1):a:a[0];let c=0;for(let a of b)c+=a.byteLength;let d=new Uint8Array(c),e=0;for(let a of b){let b=this.toUint8Array(a);d.set(b,e),e+=b.length}return a[a.length-1]instanceof Function?this.toView(d,a[a.length-1]):d.buffer}}let k="string",l=/^[0-9a-f\s]+$/i,m=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,n=/^[a-zA-Z0-9-_]+$/;class o{static fromString(a){let b=unescape(encodeURIComponent(a)),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c.buffer}static toString(a){let b=j.toUint8Array(a),c="";for(let a=0;a<b.length;a++)c+=String.fromCharCode(b[a]);return decodeURIComponent(escape(c))}}class p{static toString(a,b=!1){let c=j.toArrayBuffer(a),d=new DataView(c),e="";for(let a=0;a<c.byteLength;a+=2)e+=String.fromCharCode(d.getUint16(a,b));return e}static fromString(a,b=!1){let c=new ArrayBuffer(2*a.length),d=new DataView(c);for(let c=0;c<a.length;c++)d.setUint16(2*c,a.charCodeAt(c),b);return c}}class q{static isHex(a){return typeof a===k&&l.test(a)}static isBase64(a){return typeof a===k&&m.test(a)}static isBase64Url(a){return typeof a===k&&n.test(a)}static ToString(a,b="utf8"){let c=j.toUint8Array(a);switch(b.toLowerCase()){case"utf8":return this.ToUtf8String(c);case"binary":return this.ToBinary(c);case"hex":return this.ToHex(c);case"base64":return this.ToBase64(c);case"base64url":return this.ToBase64Url(c);case"utf16le":return p.toString(c,!0);case"utf16":case"utf16be":return p.toString(c);default:throw Error(`Unknown type of encoding '${b}'`)}}static FromString(a,b="utf8"){if(!a)return new ArrayBuffer(0);switch(b.toLowerCase()){case"utf8":return this.FromUtf8String(a);case"binary":return this.FromBinary(a);case"hex":return this.FromHex(a);case"base64":return this.FromBase64(a);case"base64url":return this.FromBase64Url(a);case"utf16le":return p.fromString(a,!0);case"utf16":case"utf16be":return p.fromString(a);default:throw Error(`Unknown type of encoding '${b}'`)}}static ToBase64(a){let b=j.toUint8Array(a);return"undefined"!=typeof btoa?btoa(this.ToString(b,"binary")):Buffer.from(b).toString("base64")}static FromBase64(a){let b=this.formatString(a);if(!b)return new ArrayBuffer(0);if(!q.isBase64(b))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(b)):new Uint8Array(Buffer.from(b,"base64")).buffer}static FromBase64Url(a){let b=this.formatString(a);if(!b)return new ArrayBuffer(0);if(!q.isBase64Url(b))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(b.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(a){return this.ToBase64(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(a,b=q.DEFAULT_UTF8_ENCODING){switch(b){case"ascii":return this.FromBinary(a);case"utf8":return o.fromString(a);case"utf16":case"utf16be":return p.fromString(a);case"utf16le":case"usc2":return p.fromString(a,!0);default:throw Error(`Unknown type of encoding '${b}'`)}}static ToUtf8String(a,b=q.DEFAULT_UTF8_ENCODING){switch(b){case"ascii":return this.ToBinary(a);case"utf8":return o.toString(a);case"utf16":case"utf16be":return p.toString(a);case"utf16le":case"usc2":return p.toString(a,!0);default:throw Error(`Unknown type of encoding '${b}'`)}}static FromBinary(a){let b=a.length,c=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer}static ToBinary(a){let b=j.toUint8Array(a),c="";for(let a=0;a<b.length;a++)c+=String.fromCharCode(b[a]);return c}static ToHex(a){let b=j.toUint8Array(a),c="",d=b.length;for(let a=0;a<d;a++){let d=b[a];d<16&&(c+="0"),c+=d.toString(16)}return c}static FromHex(a){let b=this.formatString(a);if(!b)return new ArrayBuffer(0);if(!q.isHex(b))throw TypeError("Argument 'hexString' is not HEX encoded");b.length%2&&(b=`0${b}`);let c=new Uint8Array(b.length/2);for(let a=0;a<b.length;a+=2){let d=b.slice(a,a+2);c[a/2]=parseInt(d,16)}return c.buffer}static ToUtf16String(a,b=!1){return p.toString(a,b)}static FromUtf16String(a,b=!1){return p.fromString(a,b)}static Base64Padding(a){let b=4-a.length%4;if(b<4)for(let c=0;c<b;c++)a+="=";return a}static formatString(a){return(null==a?void 0:a.replace(/[\n\r\t ]/g,""))||""}}function r(...a){let b=new Uint8Array(a.map(a=>a.byteLength).reduce((a,b)=>a+b)),c=0;return a.map(a=>new Uint8Array(a)).forEach(a=>{for(let d of a)b[c++]=d}),b.buffer}function s(a,b){let c=0;if(1===a.length)return a[0];for(let d=a.length-1;d>=0;d--)c+=a[a.length-1-d]*Math.pow(2,b*d);return c}function t(a,b,c=-1){let d=a,e=0,f=Math.pow(2,b);for(let g=1;g<8;g++){if(a<f){let a;if(c<0)a=new ArrayBuffer(g),e=g;else{if(c<g)return new ArrayBuffer(0);a=new ArrayBuffer(c),e=c}let f=new Uint8Array(a);for(let a=g-1;a>=0;a--){let c=Math.pow(2,a*b);f[e-a-1]=Math.floor(d/c),d-=f[e-a-1]*c}return a}f*=Math.pow(2,b)}return new ArrayBuffer(0)}function u(...a){let b=0,c=0;for(let c of a)b+=c.length;let d=new Uint8Array(new ArrayBuffer(b));for(let b of a)d.set(b,c),c+=b.length;return d}function v(){let a=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let b=255===a[0]&&128&a[1],c=0===a[0]&&(128&a[1])==0;(b||c)&&this.warnings.push("Needlessly long format")}let b=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let a=0;a<this.valueHex.byteLength;a++)b[a]=0;b[0]=128&a[0];let c=s(b,8),d=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let b=0;b<this.valueHex.byteLength;b++)d[b]=a[b];return d[0]&=127,s(d,8)-c}function w(a,b){let c=a.toString(10);if(b<c.length)return"";let d=b-c.length,e=Array(d);for(let a=0;a<d;a++)e[a]="0";return e.join("").concat(c)}function x(){if("undefined"==typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function y(a){let b=0,c=0;for(let c=0;c<a.length;c++)b+=a[c].byteLength;let d=new Uint8Array(b);for(let b=0;b<a.length;b++){let e=a[b];d.set(new Uint8Array(e),c),c+=e.byteLength}return d.buffer}function z(a,b,c,d){return b instanceof Uint8Array?b.byteLength?c<0?(a.error="Wrong parameter: inputOffset less than zero",!1):d<0?(a.error="Wrong parameter: inputLength less than zero",!1):!(b.byteLength-c-d<0)||(a.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(a.error="Wrong parameter: inputBuffer has zero length",!1):(a.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}q.DEFAULT_UTF8_ENCODING="utf8";class A{constructor(){this.items=[]}write(a){this.items.push(a)}final(){return y(this.items)}}let B=[new Uint8Array([1])],C="0123456789",D="name",E="valueHexView",F=new ArrayBuffer(0),G=new Uint8Array(0),H="EndOfContent",I="OCTET STRING",J="BIT STRING";function K(a){var b;return(b=class extends a{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(a){this.valueHexView=new Uint8Array(a)}constructor(...a){var b;super(...a);let c=a[0]||{};this.isHexOnly=null!=(b=c.isHexOnly)&&b,this.valueHexView=c.valueHex?j.toUint8Array(c.valueHex):G}fromBER(a,b,c){let d=a instanceof ArrayBuffer?new Uint8Array(a):a;if(!z(this,d,b,c))return -1;let e=b+c;return(this.valueHexView=d.subarray(b,e),this.valueHexView.length)?(this.blockLength=c,e):(this.warnings.push("Zero buffer length"),b)}toBER(a=!1){return this.isHexOnly?a?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",F)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:q.ToHex(this.valueHexView)}}}).NAME="hexBlock",b}class L{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(a){this.valueBeforeDecodeView=new Uint8Array(a)}constructor({blockLength:a=0,error:b="",warnings:c=[],valueBeforeDecode:d=G}={}){this.blockLength=a,this.error=b,this.warnings=c,this.valueBeforeDecodeView=j.toUint8Array(d)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:q.ToHex(this.valueBeforeDecodeView)}}}L.NAME="baseBlock";class M extends L{fromBER(a,b,c){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(a,b){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}M.NAME="valueBlock";class N extends K(L){constructor({idBlock:a={}}={}){var b,c,d,e;super(),a?(this.isHexOnly=null!=(b=a.isHexOnly)&&b,this.valueHexView=a.valueHex?j.toUint8Array(a.valueHex):G,this.tagClass=null!=(c=a.tagClass)?c:-1,this.tagNumber=null!=(d=a.tagNumber)?d:-1,this.isConstructed=null!=(e=a.isConstructed)&&e):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(a=!1){let b=0;switch(this.tagClass){case 1:b|=0;break;case 2:b|=64;break;case 3:b|=128;break;case 4:b|=192;break;default:return this.error="Unknown tag class",F}if(this.isConstructed&&(b|=32),this.tagNumber<31&&!this.isHexOnly){let c=new Uint8Array(1);if(!a){let a=this.tagNumber;a&=31,b|=a,c[0]=b}return c.buffer}if(!this.isHexOnly){let c=t(this.tagNumber,7),d=new Uint8Array(c),e=c.byteLength,f=new Uint8Array(e+1);if(f[0]=31|b,!a){for(let a=0;a<e-1;a++)f[a+1]=128|d[a];f[e]=d[e-1]}return f.buffer}let c=new Uint8Array(this.valueHexView.byteLength+1);if(c[0]=31|b,!a){let a=this.valueHexView;for(let b=0;b<a.length-1;b++)c[b+1]=128|a[b];c[this.valueHexView.byteLength]=a[a.length-1]}return c.buffer}fromBER(a,b,c){let d=j.toUint8Array(a);if(!z(this,d,b,c))return -1;let e=d.subarray(b,b+c);if(0===e.length)return this.error="Zero buffer length",-1;switch(192&e[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&e[0])==32,this.isHexOnly=!1;let f=31&e[0];if(31!==f)this.tagNumber=f,this.blockLength=1;else{let a=1,b=this.valueHexView=new Uint8Array(255),c=255;for(;128&e[a];){if(b[a-1]=127&e[a],++a>=e.length)return this.error="End of input reached before message was fully decoded",-1;if(a===c){let a=new Uint8Array(c+=255);for(let c=0;c<b.length;c++)a[c]=b[c];b=this.valueHexView=new Uint8Array(c)}}this.blockLength=a+1,b[a-1]=127&e[a];let d=new Uint8Array(a);for(let c=0;c<a;c++)d[c]=b[c];(b=this.valueHexView=new Uint8Array(a)).set(d),this.blockLength<=9?this.tagNumber=s(b,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return b+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}N.NAME="identificationBlock";class O extends L{constructor({lenBlock:a={}}={}){var b,c,d;super(),this.isIndefiniteForm=null!=(b=a.isIndefiniteForm)&&b,this.longFormUsed=null!=(c=a.longFormUsed)&&c,this.length=null!=(d=a.length)?d:0}fromBER(a,b,c){let d=j.toUint8Array(a);if(!z(this,d,b,c))return -1;let e=d.subarray(b,b+c);if(0===e.length)return this.error="Zero buffer length",-1;if(255===e[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===e[0],this.isIndefiniteForm)return this.blockLength=1,b+this.blockLength;if(this.longFormUsed=!!(128&e[0]),!1===this.longFormUsed)return this.length=e[0],this.blockLength=1,b+this.blockLength;let f=127&e[0];if(f>8)return this.error="Too big integer",-1;if(f+1>e.length)return this.error="End of input reached before message was fully decoded",-1;let g=b+1,h=d.subarray(g,g+f);return 0===h[f-1]&&this.warnings.push("Needlessly long encoded length"),this.length=s(h,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=f+1,b+this.blockLength}toBER(a=!1){let b,c;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return b=new ArrayBuffer(1),!1===a&&((c=new Uint8Array(b))[0]=128),b;if(this.longFormUsed){let d=t(this.length,8);if(d.byteLength>127)return this.error="Too big length",F;if(b=new ArrayBuffer(d.byteLength+1),a)return b;let e=new Uint8Array(d);(c=new Uint8Array(b))[0]=128|d.byteLength;for(let a=0;a<d.byteLength;a++)c[a+1]=e[a];return b}return b=new ArrayBuffer(1),!1===a&&((c=new Uint8Array(b))[0]=this.length),b}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}O.NAME="lengthBlock";let P={};class Q extends L{constructor({name:a="",optional:b=!1,primitiveSchema:c,...d}={},e){super(d),this.name=a,this.optional=b,c&&(this.primitiveSchema=c),this.idBlock=new N(d),this.lenBlock=new O(d),this.valueBlock=e?new e(d):new M(d)}fromBER(a,b,c){let d=this.valueBlock.fromBER(a,b,this.lenBlock.isIndefiniteForm?c:this.lenBlock.length);return -1===d?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),d}toBER(a,b){let c=b||new A;b||function a(b){var c;if(b instanceof P.Constructed)for(let c of b.valueBlock.value)a(c)&&(b.lenBlock.isIndefiniteForm=!0);return!!(null==(c=b.lenBlock)?void 0:c.isIndefiniteForm)}(this);let d=this.idBlock.toBER(a);if(c.write(d),this.lenBlock.isIndefiniteForm)c.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(a,c),c.write(new ArrayBuffer(2));else{let b=this.valueBlock.toBER(a);this.lenBlock.length=b.byteLength;let d=this.lenBlock.toBER(a);c.write(d),c.write(b)}return b?F:c.final()}toJSON(){let a={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(a.primitiveSchema=this.primitiveSchema.toJSON()),a}toString(a="ascii"){return"ascii"===a?this.onAsciiEncoding():q.ToHex(this.toBER())}onAsciiEncoding(){let a=this.constructor.NAME,b=q.ToHex(this.valueBlock.valueBeforeDecodeView);return`${a} : ${b}`}isEqual(a){if(this===a)return!0;if(!(a instanceof this.constructor))return!1;let b=this.toBER(),c=a.toBER();if(b.byteLength!==c.byteLength)return!1;let d=new Uint8Array(b),e=new Uint8Array(c);for(let a=0;a<d.length;a++)if(d[a]!==e[a])return!1;return!0}}Q.NAME="BaseBlock";class R extends Q{getValue(){return this.valueBlock.value}setValue(a){this.valueBlock.value=a}constructor({value:a="",...b}={},c){super(b,c),a&&this.fromString(a)}fromBER(a,b,c){let d=this.valueBlock.fromBER(a,b,this.lenBlock.isIndefiniteForm?c:this.lenBlock.length);return -1===d?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),d}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}R.NAME="BaseStringBlock";class S extends K(M){constructor({isHexOnly:a=!0,...b}={}){super(b),this.isHexOnly=a}}S.NAME="PrimitiveValueBlock";class T extends Q{constructor(a={}){super(a,S),this.idBlock.isConstructed=!1}}function U(a,b=0,c=a.length){let d=b,e=new Q({},M),f=new L;if(!z(f,a,b,c))return e.error=f.error,{offset:-1,result:e};if(!a.subarray(b,b+c).length)return e.error="Zero buffer length",{offset:-1,result:e};let g=e.idBlock.fromBER(a,b,c);if(e.idBlock.warnings.length&&e.warnings.concat(e.idBlock.warnings),-1===g)return e.error=e.idBlock.error,{offset:-1,result:e};if(b=g,c-=e.idBlock.blockLength,g=e.lenBlock.fromBER(a,b,c),e.lenBlock.warnings.length&&e.warnings.concat(e.lenBlock.warnings),-1===g)return e.error=e.lenBlock.error,{offset:-1,result:e};if(b=g,c-=e.lenBlock.blockLength,!e.idBlock.isConstructed&&e.lenBlock.isIndefiniteForm)return e.error="Indefinite length form used for primitive encoding form",{offset:-1,result:e};let h=Q;if(1===e.idBlock.tagClass){if(e.idBlock.tagNumber>=37&&!1===e.idBlock.isHexOnly)return e.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:e};switch(e.idBlock.tagNumber){case 0:if(e.idBlock.isConstructed&&e.lenBlock.length>0)return e.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:e};h=P.EndOfContent;break;case 1:h=P.Boolean;break;case 2:h=P.Integer;break;case 3:h=P.BitString;break;case 4:h=P.OctetString;break;case 5:h=P.Null;break;case 6:h=P.ObjectIdentifier;break;case 10:h=P.Enumerated;break;case 12:h=P.Utf8String;break;case 13:h=P.RelativeObjectIdentifier;break;case 14:h=P.TIME;break;case 15:return e.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:e};case 16:h=P.Sequence;break;case 17:h=P.Set;break;case 18:h=P.NumericString;break;case 19:h=P.PrintableString;break;case 20:h=P.TeletexString;break;case 21:h=P.VideotexString;break;case 22:h=P.IA5String;break;case 23:h=P.UTCTime;break;case 24:h=P.GeneralizedTime;break;case 25:h=P.GraphicString;break;case 26:h=P.VisibleString;break;case 27:h=P.GeneralString;break;case 28:h=P.UniversalString;break;case 29:h=P.CharacterString;break;case 30:h=P.BmpString;break;case 31:h=P.DATE;break;case 32:h=P.TimeOfDay;break;case 33:h=P.DateTime;break;case 34:h=P.Duration;break;default:{let a=e.idBlock.isConstructed?new P.Constructed:new P.Primitive;a.idBlock=e.idBlock,a.lenBlock=e.lenBlock,a.warnings=e.warnings,e=a}}}else h=e.idBlock.isConstructed?P.Constructed:P.Primitive;return g=(e=function(a,b){if(a instanceof b)return a;let c=new b;return c.idBlock=a.idBlock,c.lenBlock=a.lenBlock,c.warnings=a.warnings,c.valueBeforeDecodeView=a.valueBeforeDecodeView,c}(e,h)).fromBER(a,b,e.lenBlock.isIndefiniteForm?c:e.lenBlock.length),e.valueBeforeDecodeView=a.subarray(d,d+e.blockLength),{offset:g,result:e}}function V(a){if(!a.byteLength){let a=new Q({},M);return a.error="Input buffer has zero length",{offset:-1,result:a}}return U(j.toUint8Array(a).slice(),0,a.byteLength)}P.Primitive=T,T.NAME="PRIMITIVE";class W extends M{constructor({value:a=[],isIndefiniteForm:b=!1,...c}={}){super(c),this.value=a,this.isIndefiniteForm=b}fromBER(a,b,c){var d,e;let f=j.toUint8Array(a);if(!z(this,f,b,c))return -1;if(this.valueBeforeDecodeView=f.subarray(b,b+c),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),b;let g=b;for(;d=this.isIndefiniteForm,e=c,(d?1:e)>0;){let a=U(f,g,c);if(-1===a.offset)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(g=a.offset,this.blockLength+=a.result.blockLength,c-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===H)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===H?this.value.pop():this.warnings.push("No EndOfContent block encoded")),g}toBER(a,b){let c=b||new A;for(let b=0;b<this.value.length;b++)this.value[b].toBER(a,c);return b?F:c.final()}toJSON(){let a={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let b of this.value)a.value.push(b.toJSON());return a}}W.NAME="ConstructedValueBlock";class X extends Q{constructor(a={}){super(a,W),this.idBlock.isConstructed=!0}fromBER(a,b,c){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let d=this.valueBlock.fromBER(a,b,this.lenBlock.isIndefiniteForm?c:this.lenBlock.length);return -1===d?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),d}onAsciiEncoding(){let a=[];for(let b of this.valueBlock.value)a.push(b.toString("ascii").split("\n").map(a=>`  ${a}`).join("\n"));let b=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return a.length?`${b} :
${a.join("\n")}`:`${b} :`}}P.Constructed=X,X.NAME="CONSTRUCTED";class Y extends M{fromBER(a,b,c){return b}toBER(a){return F}}Y.override="EndOfContentValueBlock";class Z extends Q{constructor(a={}){super(a,Y),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}P.EndOfContent=Z,Z.NAME=H;class $ extends Q{constructor(a={}){super(a,M),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(a,b,c){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=c,b+c>a.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):b+c}toBER(a,b){let c=new ArrayBuffer(2);if(!a){let a=new Uint8Array(c);a[0]=5,a[1]=0}return b&&b.write(c),c}onAsciiEncoding(){return`${this.constructor.NAME}`}}P.Null=$,$.NAME="NULL";class _ extends K(M){get value(){for(let a of this.valueHexView)if(a>0)return!0;return!1}set value(a){this.valueHexView[0]=255*!!a}constructor({value:a,...b}={}){super(b),b.valueHex?this.valueHexView=j.toUint8Array(b.valueHex):this.valueHexView=new Uint8Array(1),a&&(this.value=a)}fromBER(a,b,c){let d=j.toUint8Array(a);return z(this,d,b,c)?(this.valueHexView=d.subarray(b,b+c),c>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,v.call(this),this.blockLength=c,b+c):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}_.NAME="BooleanValueBlock";class aa extends Q{getValue(){return this.valueBlock.value}setValue(a){this.valueBlock.value=a}constructor(a={}){super(a,_),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}P.Boolean=aa,aa.NAME="BOOLEAN";class ab extends K(W){constructor({isConstructed:a=!1,...b}={}){super(b),this.isConstructed=a}fromBER(a,b,c){let d=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(d=W.prototype.fromBER.call(this,a,b,c)))return d;for(let a=0;a<this.value.length;a++){let b=this.value[a].constructor.NAME;if(b===H)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;else break;if(b!==I)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,d=super.fromBER(a,b,c),this.blockLength=c;return d}toBER(a,b){return this.isConstructed?W.prototype.toBER.call(this,a,b):a?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}ab.NAME="OctetStringValueBlock";class ac extends Q{constructor({idBlock:a={},lenBlock:b={},...c}={}){var d;null!=c.isConstructed||(c.isConstructed=!!(null==(d=c.value)?void 0:d.length)),super({idBlock:{isConstructed:c.isConstructed,...a},lenBlock:{...b,isIndefiniteForm:!!c.isIndefiniteForm},...c},ab),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(a,b,c){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===c)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),b;if(!this.valueBlock.isConstructed){let d=(a instanceof ArrayBuffer?new Uint8Array(a):a).subarray(b,b+c);try{if(d.byteLength){let a=U(d,0,d.byteLength);-1!==a.offset&&a.offset===c&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(a,b,c)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return X.prototype.onAsciiEncoding.call(this);let a=this.constructor.NAME,b=q.ToHex(this.valueBlock.valueHexView);return`${a} : ${b}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let a=[];for(let b of this.valueBlock.value)b instanceof d&&a.push(b.valueBlock.valueHexView);return j.concat(a)}}P.OctetString=d=ac,ac.NAME=I;class ad extends K(W){constructor({unusedBits:a=0,isConstructed:b=!1,...c}={}){super(c),this.unusedBits=a,this.isConstructed=b,this.blockLength=this.valueHexView.byteLength}fromBER(a,b,c){if(!c)return b;let d=-1;if(this.isConstructed){if(-1===(d=W.prototype.fromBER.call(this,a,b,c)))return d;for(let a of this.value){let b=a.constructor.NAME;if(b===H)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;else break;if(b!==J)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let c=a.valueBlock;if(this.unusedBits>0&&c.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=c.unusedBits}return d}let e=j.toUint8Array(a);if(!z(this,e,b,c))return -1;let f=e.subarray(b,b+c);if(this.unusedBits=f[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let a=f.subarray(1);try{if(a.byteLength){let b=U(a,0,a.byteLength);-1!==b.offset&&b.offset===c-1&&(this.value=[b.result])}}catch{}}return this.valueHexView=f.subarray(1),this.blockLength=f.length,b+c}toBER(a,b){if(this.isConstructed)return W.prototype.toBER.call(this,a,b);if(a)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return F;let c=new Uint8Array(this.valueHexView.length+1);return c[0]=this.unusedBits,c.set(this.valueHexView,1),c.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}ad.NAME="BitStringValueBlock";class ae extends Q{constructor({idBlock:a={},lenBlock:b={},...c}={}){var d;null!=c.isConstructed||(c.isConstructed=!!(null==(d=c.value)?void 0:d.length)),super({idBlock:{isConstructed:c.isConstructed,...a},lenBlock:{...b,isIndefiniteForm:!!c.isIndefiniteForm},...c},ad),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(a,b,c){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(a,b,c)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return X.prototype.onAsciiEncoding.call(this);{let a=[];for(let b of this.valueBlock.valueHexView)a.push(b.toString(2).padStart(8,"0"));let b=a.join(""),c=this.constructor.NAME,d=b.substring(0,b.length-this.valueBlock.unusedBits);return`${c} : ${d}`}}}function af(a){if(a>=B.length)for(let b=B.length;b<=a;b++){let a=new Uint8Array([0]),c=B[b-1].slice(0);for(let b=c.length-1;b>=0;b--){let d=new Uint8Array([(c[b]<<1)+a[0]]);a[0]=d[0]/10,c[b]=d[0]%10}a[0]>0&&(c=u(a,c)),B.push(c)}return B[a]}P.BitString=ae,ae.NAME=J;class ag extends K(M){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=v.call(this)))}constructor({value:a,...b}={}){super(b),this._valueDec=0,b.valueHex&&this.setValueHex(),void 0!==a&&(this.valueDec=a)}set valueDec(a){this._valueDec=a,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(a){let b=a<0?-1*a:a,c=128;for(let d=1;d<8;d++){if(b<=c){if(a<0){let a=t(c-b,8,d),e=new Uint8Array(a);return e[0]|=128,a}let e=t(b,8,d),f=new Uint8Array(e);if(128&f[0]){let a=e.slice(0),b=new Uint8Array(a);f=new Uint8Array(e=new ArrayBuffer(e.byteLength+1));for(let c=0;c<a.byteLength;c++)f[c+1]=b[c];f[0]=0}return e}c*=256}return new ArrayBuffer(0)}(a))}get valueDec(){return this._valueDec}fromDER(a,b,c,d=0){let e=this.fromBER(a,b,c);if(-1===e)return e;let f=this.valueHexView;return 0===f[0]&&(128&f[1])!=0?this.valueHexView=f.subarray(1):0!==d&&f.length<d&&(d-f.length>1&&(d=f.length+1),this.valueHexView=f.subarray(d-f.length)),e}toDER(a=!1){let b=this.valueHexView;switch(!0){case(128&b[0])!=0:{let a=new Uint8Array(this.valueHexView.length+1);a[0]=0,a.set(b,1),this.valueHexView=a}break;case 0===b[0]&&(128&b[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(a)}fromBER(a,b,c){let d=super.fromBER(a,b,c);return -1===d||this.setValueHex(),d}toBER(a){return a?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let a,b=8*this.valueHexView.length-1,c=new Uint8Array(8*this.valueHexView.length/3),d=0,e=this.valueHexView,f="",g=!1;for(let g=e.byteLength-1;g>=0;g--){a=e[g];for(let e=0;e<8;e++)(1&a)==1&&(d===b?(c=function(a,b){let c,d=0,e=new Uint8Array(a),f=new Uint8Array(b),g=e.slice(0),h=g.length-1,i=f.slice(0),j=i.length-1,k=0;for(let a=j;a>=0;a--,k++)!0==(c=g[h-k]-i[j-k]-d)<0?(d=1,g[h-k]=c+10):(d=0,g[h-k]=c);if(d>0)for(let a=h-j+1;a>=0;a--,k++)if((c=g[h-k]-d)<0)d=1,g[h-k]=c+10;else{d=0,g[h-k]=c;break}return g.slice()}(af(d),c),f="-"):c=function(a,b){let c=new Uint8Array([0]),d=new Uint8Array(a),e=new Uint8Array(b),f=d.slice(0),g=f.length-1,h=e.slice(0),i=h.length-1,j=0,k=i<g?g:i,l=0;for(let a=k;a>=0;a--,l++)j=!0==l<h.length?f[g-l]+h[i-l]+c[0]:f[g-l]+c[0],c[0]=j/10,!0==l>=f.length?f=u(new Uint8Array([j%10]),f):f[g-l]=j%10;return c[0]>0&&(f=u(c,f)),f}(c,af(d))),d++,a>>=1}for(let a=0;a<c.length;a++)c[a]&&(g=!0),g&&(f+=C.charAt(c[a]));return!1===g&&(f+=C.charAt(0)),f}}ag.NAME="IntegerValueBlock",Object.defineProperty(ag.prototype,"valueHex",{set:function(a){this.valueHexView=new Uint8Array(a),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class ah extends Q{constructor(a={}){super(a,ag),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return x(),BigInt(this.valueBlock.toString())}static fromBigInt(a){x();let b=BigInt(a),c=new A,d=b.toString(16).replace(/^-/,""),f=new Uint8Array(q.FromHex(d));if(b<0){let a=new Uint8Array(f.length+(128&f[0]?1:0));a[0]|=128;let d=BigInt(`0x${q.ToHex(a)}`)+b,e=j.toUint8Array(q.FromHex(d.toString(16)));e[0]|=128,c.write(e)}else 128&f[0]&&c.write(new Uint8Array([0])),c.write(f);return new e({valueHex:c.final()})}convertToDER(){let a=new e({valueHex:this.valueBlock.valueHexView});return a.valueBlock.toDER(),a}convertFromDER(){return new e({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}P.Integer=e=ah,ah.NAME="INTEGER";class ai extends ah{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}P.Enumerated=ai,ai.NAME="ENUMERATED";class aj extends K(M){constructor({valueDec:a=-1,isFirstSid:b=!1,...c}={}){super(c),this.valueDec=a,this.isFirstSid=b}fromBER(a,b,c){if(!c)return b;let d=j.toUint8Array(a);if(!z(this,d,b,c))return -1;let e=d.subarray(b,b+c);this.valueHexView=new Uint8Array(c);for(let a=0;a<c&&(this.valueHexView[a]=127&e[a],this.blockLength++,(128&e[a])!=0);a++);let f=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)f[a]=this.valueHexView[a];return(this.valueHexView=f,(128&e[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),b+this.blockLength)}set valueBigInt(a){x();let b=BigInt(a).toString(2);for(;b.length%7;)b="0"+b;let c=new Uint8Array(b.length/7);for(let a=0;a<c.length;a++)c[a]=parseInt(b.slice(7*a,7*a+7),2)+128*(a+1<c.length);this.fromBER(c.buffer,0,c.length)}toBER(a){if(this.isHexOnly){if(a)return new ArrayBuffer(this.valueHexView.byteLength);let b=this.valueHexView,c=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)c[a]=128|b[a];return c[this.blockLength-1]=b[this.blockLength-1],c.buffer}let b=t(this.valueDec,7);if(0===b.byteLength)return this.error="Error during encoding SID value",F;let c=new Uint8Array(b.byteLength);if(!a){let a=new Uint8Array(b),d=b.byteLength-1;for(let b=0;b<d;b++)c[b]=128|a[b];c[d]=a[d]}return c}toString(){let a="";if(this.isHexOnly)a=q.ToHex(this.valueHexView);else if(this.isFirstSid){let b=this.valueDec;this.valueDec<=39?a="0.":this.valueDec<=79?(a="1.",b-=40):(a="2.",b-=80),a+=b.toString()}else a=this.valueDec.toString();return a}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}aj.NAME="sidBlock";class ak extends M{constructor({value:a="",...b}={}){super(b),this.value=[],a&&this.fromString(a)}fromBER(a,b,c){let d=b;for(;c>0;){let b=new aj;if(-1===(d=b.fromBER(a,d,c))){this.blockLength=0,this.error=b.error;break}0===this.value.length&&(b.isFirstSid=!0),this.blockLength+=b.blockLength,c-=b.blockLength,this.value.push(b)}return d}toBER(a){let b=[];for(let c=0;c<this.value.length;c++){let d=this.value[c].toBER(a);if(0===d.byteLength)return this.error=this.value[c].error,F;b.push(d)}return y(b)}fromString(a){this.value=[];let b=0,c=0,d="",e=!1;do if(d=-1===(c=a.indexOf(".",b))?a.substring(b):a.substring(b,c),b=c+1,e){let a=this.value[0],b=0;switch(a.valueDec){case 0:break;case 1:b=40;break;case 2:b=80;break;default:this.value=[];return}let c=parseInt(d,10);if(isNaN(c))return;a.valueDec=c+b,e=!1}else{let a=new aj;if(d>Number.MAX_SAFE_INTEGER)x(),a.valueBigInt=BigInt(d);else if(a.valueDec=parseInt(d,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,e=!0),this.value.push(a)}while(-1!==c)}toString(){let a="",b=!1;for(let c=0;c<this.value.length;c++){b=this.value[c].isHexOnly;let d=this.value[c].toString();0!==c&&(a=`${a}.`),b?(d=`{${d}}`,this.value[c].isFirstSid?a=`2.{${d} - 80}`:a+=d):a+=d}return a}toJSON(){let a={...super.toJSON(),value:this.toString(),sidArray:[]};for(let b=0;b<this.value.length;b++)a.sidArray.push(this.value[b].toJSON());return a}}ak.NAME="ObjectIdentifierValueBlock";class al extends Q{getValue(){return this.valueBlock.toString()}setValue(a){this.valueBlock.fromString(a)}constructor(a={}){super(a,ak),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}P.ObjectIdentifier=al,al.NAME="OBJECT IDENTIFIER";class am extends K(L){constructor({valueDec:a=0,...b}={}){super(b),this.valueDec=a}fromBER(a,b,c){if(0===c)return b;let d=j.toUint8Array(a);if(!z(this,d,b,c))return -1;let e=d.subarray(b,b+c);this.valueHexView=new Uint8Array(c);for(let a=0;a<c&&(this.valueHexView[a]=127&e[a],this.blockLength++,(128&e[a])!=0);a++);let f=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)f[a]=this.valueHexView[a];return(this.valueHexView=f,(128&e[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),b+this.blockLength)}toBER(a){if(this.isHexOnly){if(a)return new ArrayBuffer(this.valueHexView.byteLength);let b=this.valueHexView,c=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)c[a]=128|b[a];return c[this.blockLength-1]=b[this.blockLength-1],c.buffer}let b=t(this.valueDec,7);if(0===b.byteLength)return this.error="Error during encoding SID value",F;let c=new Uint8Array(b.byteLength);if(!a){let a=new Uint8Array(b),d=b.byteLength-1;for(let b=0;b<d;b++)c[b]=128|a[b];c[d]=a[d]}return c.buffer}toString(){return this.isHexOnly?q.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}am.NAME="relativeSidBlock";class an extends M{constructor({value:a="",...b}={}){super(b),this.value=[],a&&this.fromString(a)}fromBER(a,b,c){let d=b;for(;c>0;){let b=new am;if(-1===(d=b.fromBER(a,d,c))){this.blockLength=0,this.error=b.error;break}this.blockLength+=b.blockLength,c-=b.blockLength,this.value.push(b)}return d}toBER(a,b){let c=[];for(let b=0;b<this.value.length;b++){let d=this.value[b].toBER(a);if(0===d.byteLength)return this.error=this.value[b].error,F;c.push(d)}return y(c)}fromString(a){this.value=[];let b=0,c=0,d="";do{d=-1===(c=a.indexOf(".",b))?a.substring(b):a.substring(b,c),b=c+1;let e=new am;if(e.valueDec=parseInt(d,10),isNaN(e.valueDec))break;this.value.push(e)}while(-1!==c);return!0}toString(){let a="",b=!1;for(let c=0;c<this.value.length;c++){b=this.value[c].isHexOnly;let d=this.value[c].toString();0!==c&&(a=`${a}.`),b?a+=d=`{${d}}`:a+=d}return a}toJSON(){let a={...super.toJSON(),value:this.toString(),sidArray:[]};for(let b=0;b<this.value.length;b++)a.sidArray.push(this.value[b].toJSON());return a}}an.NAME="RelativeObjectIdentifierValueBlock";class ao extends Q{getValue(){return this.valueBlock.toString()}setValue(a){this.valueBlock.fromString(a)}constructor(a={}){super(a,an),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}P.RelativeObjectIdentifier=ao,ao.NAME="RelativeObjectIdentifier";class ap extends X{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}P.Sequence=ap,ap.NAME="SEQUENCE";class aq extends X{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}P.Set=aq,aq.NAME="SET";class ar extends K(M){constructor({...a}={}){super(a),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}}ar.NAME="StringValueBlock";class as extends ar{}as.NAME="SimpleStringValueBlock";class at extends R{constructor({...a}={}){super(a,as)}fromBuffer(a){this.valueBlock.value=String.fromCharCode.apply(null,j.toUint8Array(a))}fromString(a){let b=a.length,c=this.valueBlock.valueHexView=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);this.valueBlock.value=a}}at.NAME="SIMPLE STRING";class au extends at{fromBuffer(a){this.valueBlock.valueHexView=j.toUint8Array(a);try{this.valueBlock.value=q.ToUtf8String(a)}catch(b){this.warnings.push(`Error during "decodeURIComponent": ${b}, using raw string`),this.valueBlock.value=q.ToBinary(a)}}fromString(a){this.valueBlock.valueHexView=new Uint8Array(q.FromUtf8String(a)),this.valueBlock.value=a}}au.NAME="Utf8StringValueBlock";class av extends au{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}P.Utf8String=av,av.NAME="UTF8String";class aw extends at{fromBuffer(a){this.valueBlock.value=q.ToUtf16String(a),this.valueBlock.valueHexView=j.toUint8Array(a)}fromString(a){this.valueBlock.value=a,this.valueBlock.valueHexView=new Uint8Array(q.FromUtf16String(a))}}aw.NAME="BmpStringValueBlock";class ax extends aw{constructor({...a}={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}P.BmpString=ax,ax.NAME="BMPString";class ay extends at{fromBuffer(a){let b=ArrayBuffer.isView(a)?a.slice().buffer:a.slice(0),c=new Uint8Array(b);for(let a=0;a<c.length;a+=4)c[a]=c[a+3],c[a+1]=c[a+2],c[a+2]=0,c[a+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(b))}fromString(a){let b=a.length,c=this.valueBlock.valueHexView=new Uint8Array(4*b);for(let d=0;d<b;d++){let b=new Uint8Array(t(a.charCodeAt(d),8));if(b.length>4)continue;let e=4-b.length;for(let a=b.length-1;a>=0;a--)c[4*d+a+e]=b[a]}this.valueBlock.value=a}}ay.NAME="UniversalStringValueBlock";class az extends ay{constructor({...a}={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}P.UniversalString=az,az.NAME="UniversalString";class aA extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}P.NumericString=aA,aA.NAME="NumericString";class aB extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}P.PrintableString=aB,aB.NAME="PrintableString";class aC extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}P.TeletexString=aC,aC.NAME="TeletexString";class aD extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}P.VideotexString=aD,aD.NAME="VideotexString";class aE extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}P.IA5String=aE,aE.NAME="IA5String";class aF extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}P.GraphicString=aF,aF.NAME="GraphicString";class aG extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}P.VisibleString=aG,aG.NAME="VisibleString";class aH extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}P.GeneralString=aH,aH.NAME="GeneralString";class aI extends at{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}P.CharacterString=aI,aI.NAME="CharacterString";class aJ extends aG{constructor({value:a,valueDate:b,...c}={}){if(super(c),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,a){this.fromString(a),this.valueBlock.valueHexView=new Uint8Array(a.length);for(let b=0;b<a.length;b++)this.valueBlock.valueHexView[b]=a.charCodeAt(b)}b&&(this.fromDate(b),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(a){this.fromString(String.fromCharCode.apply(null,j.toUint8Array(a)))}toBuffer(){let a=this.toString(),b=new ArrayBuffer(a.length),c=new Uint8Array(b);for(let b=0;b<a.length;b++)c[b]=a.charCodeAt(b);return b}fromDate(a){this.year=a.getUTCFullYear(),this.month=a.getUTCMonth()+1,this.day=a.getUTCDate(),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),this.second=a.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(a){let b=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(a);if(null===b){this.error="Wrong input string for conversion";return}let c=parseInt(b[1],10);c>=50?this.year=1900+c:this.year=2e3+c,this.month=parseInt(b[2],10),this.day=parseInt(b[3],10),this.hour=parseInt(b[4],10),this.minute=parseInt(b[5],10),this.second=parseInt(b[6],10)}toString(a="iso"){if("iso"===a){let a=Array(7);return a[0]=w(this.year<2e3?this.year-1900:this.year-2e3,2),a[1]=w(this.month,2),a[2]=w(this.day,2),a[3]=w(this.hour,2),a[4]=w(this.minute,2),a[5]=w(this.second,2),a[6]="Z",a.join("")}return super.toString(a)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}P.UTCTime=aJ,aJ.NAME="UTCTime";class aK extends aJ{constructor(a={}){super(a),null!=this.millisecond||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(a){super.fromDate(a),this.millisecond=a.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(a){let b,c=!1,d="",e="",f=0,g=0,h=0;if("Z"===a[a.length-1])d=a.substring(0,a.length-1),c=!0;else{if(isNaN(new Number(a[a.length-1]).valueOf()))throw Error("Wrong input string for conversion");d=a}if(c){if(-1!==d.indexOf("+")||-1!==d.indexOf("-"))throw Error("Wrong input string for conversion")}else{let a=1,b=d.indexOf("+"),c="";if(-1===b&&(b=d.indexOf("-"),a=-1),-1!==b){if(c=d.substring(b+1),d=d.substring(0,b),2!==c.length&&4!==c.length)throw Error("Wrong input string for conversion");let e=parseInt(c.substring(0,2),10);if(isNaN(e.valueOf()))throw Error("Wrong input string for conversion");if(g=a*e,4===c.length){if(isNaN((e=parseInt(c.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");h=a*e}}}let i=d.indexOf(".");if(-1===i&&(i=d.indexOf(",")),-1!==i){let a=new Number(`0${d.substring(i)}`);if(isNaN(a.valueOf()))throw Error("Wrong input string for conversion");f=a.valueOf(),e=d.substring(0,i)}else e=d;switch(!0){case 8===e.length:if(b=/(\d{4})(\d{2})(\d{2})/ig,-1!==i)throw Error("Wrong input string for conversion");break;case 10===e.length:if(b=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==i){let a=60*f;this.minute=Math.floor(a),a=60*(a-this.minute),this.second=Math.floor(a),a=1e3*(a-this.second),this.millisecond=Math.floor(a)}break;case 12===e.length:if(b=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==i){let a=60*f;this.second=Math.floor(a),a=1e3*(a-this.second),this.millisecond=Math.floor(a)}break;case 14===e.length:if(b=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==i){let a=1e3*f;this.millisecond=Math.floor(a)}break;default:throw Error("Wrong input string for conversion")}let j=b.exec(e);if(null===j)throw Error("Wrong input string for conversion");for(let a=1;a<j.length;a++)switch(a){case 1:this.year=parseInt(j[a],10);break;case 2:this.month=parseInt(j[a],10);break;case 3:this.day=parseInt(j[a],10);break;case 4:this.hour=parseInt(j[a],10)+g;break;case 5:this.minute=parseInt(j[a],10)+h;break;case 6:this.second=parseInt(j[a],10);break;default:throw Error("Wrong input string for conversion")}if(!1===c){let a=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=a.getUTCFullYear(),this.month=a.getUTCMonth(),this.day=a.getUTCDay(),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),this.second=a.getUTCSeconds(),this.millisecond=a.getUTCMilliseconds()}}toString(a="iso"){if("iso"===a){let a=[];return a.push(w(this.year,4)),a.push(w(this.month,2)),a.push(w(this.day,2)),a.push(w(this.hour,2)),a.push(w(this.minute,2)),a.push(w(this.second,2)),0!==this.millisecond&&(a.push("."),a.push(w(this.millisecond,3))),a.push("Z"),a.join("")}return super.toString(a)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}P.GeneralizedTime=aK,aK.NAME="GeneralizedTime";class aL extends av{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}P.DATE=aL,aL.NAME="DATE";class aM extends av{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}P.TimeOfDay=aM,aM.NAME="TimeOfDay";class aN extends av{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}P.DateTime=aN,aN.NAME="DateTime";class aO extends av{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}P.Duration=aO,aO.NAME="Duration";class aP extends av{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}P.TIME=aP,aP.NAME="TIME";class aQ{constructor({name:a="",optional:b=!1}={}){this.name=a,this.optional=b}}class aR extends aQ{constructor({value:a=[],...b}={}){super(b),this.value=a}}class aS extends aQ{constructor({value:a=new aQ,local:b=!1,...c}={}){super(c),this.value=a,this.local=b}}class aT{get data(){return this.dataView.slice().buffer}set data(a){this.dataView=j.toUint8Array(a)}constructor({data:a=G}={}){this.dataView=j.toUint8Array(a)}fromBER(a,b,c){let d=b+c;return this.dataView=j.toUint8Array(a).subarray(b,d),d}toBER(a){return this.dataView.slice().buffer}}function aU(a,b,c){if(c instanceof aR){for(let d of c.value)if(aU(a,b,d).verified)return{verified:!0,result:a};{let a={verified:!1,result:{error:"Wrong values for Choice type"}};return c.hasOwnProperty(D)&&(a.name=c.name),a}}if(c instanceof aQ)return c.hasOwnProperty(D)&&(a[c.name]=b),{verified:!0,result:a};if(a instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(b instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(c instanceof Object==!1||"idBlock"in c==!1||"fromBER"in c.idBlock==!1||"toBER"in c.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let d=c.idBlock.toBER(!1);if(0===d.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===c.idBlock.fromBER(d,0,d.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===c.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.tagClass!==b.idBlock.tagClass)return{verified:!1,result:a};if(!1===c.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.tagNumber!==b.idBlock.tagNumber)return{verified:!1,result:a};if(!1===c.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.isConstructed!==b.idBlock.isConstructed)return{verified:!1,result:a};if(!("isHexOnly"in c.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.isHexOnly!==b.idBlock.isHexOnly)return{verified:!1,result:a};if(c.idBlock.isHexOnly){if(E in c.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let d=c.idBlock.valueHexView,e=b.idBlock.valueHexView;if(d.length!==e.length)return{verified:!1,result:a};for(let b=0;b<d.length;b++)if(d[b]!==e[1])return{verified:!1,result:a}}if(c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(a[c.name]=b)),c instanceof P.Constructed){let d=0,e={verified:!1,result:{error:"Unknown error"}},f=c.valueBlock.value.length;if(f>0&&c.valueBlock.value[0]instanceof aS&&(f=b.valueBlock.value.length),0===f)return{verified:!0,result:a};if(0===b.valueBlock.value.length&&0!==c.valueBlock.value.length){let b=!0;for(let a=0;a<c.valueBlock.value.length;a++)b=b&&(c.valueBlock.value[a].optional||!1);return b?{verified:!0,result:a}:(c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&delete a[c.name]),a.error="Inconsistent object length",{verified:!1,result:a})}for(let g=0;g<f;g++)if(g-d>=b.valueBlock.value.length){if(!1===c.valueBlock.value[g].optional){let b={verified:!1,result:a};return a.error="Inconsistent length between ASN.1 data and schema",c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(delete a[c.name],b.name=c.name)),b}}else if(c.valueBlock.value[0]instanceof aS){if(!1===(e=aU(a,b.valueBlock.value[g],c.valueBlock.value[0].value)).verified)if(!c.valueBlock.value[0].optional)return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&delete a[c.name]),e;else d++;if(D in c.valueBlock.value[0]&&c.valueBlock.value[0].name.length>0){let d={};void 0===(d="local"in c.valueBlock.value[0]&&c.valueBlock.value[0].local?b:a)[c.valueBlock.value[0].name]&&(d[c.valueBlock.value[0].name]=[]),d[c.valueBlock.value[0].name].push(b.valueBlock.value[g])}}else if(!1===(e=aU(a,b.valueBlock.value[g-d],c.valueBlock.value[g])).verified)if(!c.valueBlock.value[g].optional)return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&delete a[c.name]),e;else d++;if(!1===e.verified){let b={verified:!1,result:a};return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(delete a[c.name],b.name=c.name)),b}return{verified:!0,result:a}}if(c.primitiveSchema&&E in b.valueBlock){let d=U(b.valueBlock.valueHexView);if(-1===d.offset){let b={verified:!1,result:d.result};return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(delete a[c.name],b.name=c.name)),b}return aU(a,d.result,c.primitiveSchema)}return{verified:!0,result:a}}function aV(a,b){if(b instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let c=U(j.toUint8Array(a));return -1===c.offset?{verified:!1,result:c.result}:aU(c.result,c.result,b)}!function(a){a[a.Sequence=0]="Sequence",a[a.Set=1]="Set",a[a.Choice=2]="Choice"}(f||(f={})),function(a){a[a.Any=1]="Any",a[a.Boolean=2]="Boolean",a[a.OctetString=3]="OctetString",a[a.BitString=4]="BitString",a[a.Integer=5]="Integer",a[a.Enumerated=6]="Enumerated",a[a.ObjectIdentifier=7]="ObjectIdentifier",a[a.Utf8String=8]="Utf8String",a[a.BmpString=9]="BmpString",a[a.UniversalString=10]="UniversalString",a[a.NumericString=11]="NumericString",a[a.PrintableString=12]="PrintableString",a[a.TeletexString=13]="TeletexString",a[a.VideotexString=14]="VideotexString",a[a.IA5String=15]="IA5String",a[a.GraphicString=16]="GraphicString",a[a.VisibleString=17]="VisibleString",a[a.GeneralString=18]="GeneralString",a[a.CharacterString=19]="CharacterString",a[a.UTCTime=20]="UTCTime",a[a.GeneralizedTime=21]="GeneralizedTime",a[a.DATE=22]="DATE",a[a.TimeOfDay=23]="TimeOfDay",a[a.DateTime=24]="DateTime",a[a.Duration=25]="Duration",a[a.TIME=26]="TIME",a[a.Null=27]="Null"}(g||(g={}));let aW={fromASN:a=>a instanceof $?null:a.valueBeforeDecodeView,toASN:a=>{if(null===a)return new $;let b=V(a);if(b.result.error)throw Error(b.result.error);return b.result}},aX={fromASN:a=>a.valueBlock.valueHexView.byteLength>=4?a.valueBlock.toString():a.valueBlock.valueDec,toASN:a=>new ah({value:+a})},aY={fromASN:a=>a.valueBlock.valueDec,toASN:a=>new ai({value:a})},aZ={fromASN:a=>a.valueBlock.valueHexView,toASN:a=>new ae({valueHex:a})},a$={fromASN:a=>a.valueBlock.toString(),toASN:a=>new al({value:a})},a_={fromASN:a=>a.valueBlock.value,toASN:a=>new aa({value:a})},a0={fromASN:a=>a.valueBlock.valueHexView,toASN:a=>new ac({valueHex:a})};function a1(a){return{fromASN:a=>a.valueBlock.value,toASN:b=>new a({value:b})}}let a2=a1(av),a3=a1(ax),a4=a1(az),a5=a1(aA),a6=a1(aB),a7=a1(aC),a8=a1(aD),a9=a1(aE),ba=a1(aF),bb=a1(aG),bc=a1(aH),bd=a1(aI),be={fromASN:a=>a.toDate(),toASN:a=>new aJ({valueDate:a})},bf={fromASN:a=>a.toDate(),toASN:a=>new aK({valueDate:a})},bg={fromASN:()=>null,toASN:()=>new $};function bh(a){switch(a){case g.Any:return aW;case g.BitString:return aZ;case g.BmpString:return a3;case g.Boolean:return a_;case g.CharacterString:return bd;case g.Enumerated:return aY;case g.GeneralString:return bc;case g.GeneralizedTime:return bf;case g.GraphicString:return ba;case g.IA5String:return a9;case g.Integer:return aX;case g.Null:return bg;case g.NumericString:return a5;case g.ObjectIdentifier:return a$;case g.OctetString:return a0;case g.PrintableString:return a6;case g.TeletexString:return a7;case g.UTCTime:return be;case g.UniversalString:return a4;case g.Utf8String:return a2;case g.VideotexString:return a8;case g.VisibleString:return bb;default:return null}}function bi(a){return"function"==typeof a&&a.prototype?!!a.prototype.toASN&&!!a.prototype.fromASN||bi(a.prototype):!!(a&&"object"==typeof a&&"toASN"in a&&"fromASN"in a)}class bj{constructor(){this.items=new WeakMap}has(a){return this.items.has(a)}get(a,b=!1){let c=this.items.get(a);if(!c)throw Error(`Cannot get schema for '${a.prototype.constructor.name}' target`);if(b&&!c.schema)throw Error(`Schema '${a.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return c}cache(a){let b=this.get(a);b.schema||(b.schema=this.create(a,!0))}createDefault(a){let b={type:f.Sequence,items:{}},c=this.findParentSchema(a);return c&&(Object.assign(b,c),b.items=Object.assign({},b.items,c.items)),b}create(a,b){let c=this.items.get(a)||this.createDefault(a),d=[];for(let a in c.items){let e,h=c.items[a],j=b?a:"";if("number"==typeof h.type){let a=g[h.type],b=i[a];if(!b)throw Error(`Cannot get ASN1 class by name '${a}'`);e=new b({name:j})}else bi(h.type)?e=new h.type().toSchema(j):h.optional?this.get(h.type).type===f.Choice?e=new aQ({name:j}):(e=this.create(h.type,!1)).name=j:e=new aQ({name:j});let k=!!h.optional||void 0!==h.defaultValue;if(h.repeated&&(e.name="",e=new("set"===h.repeated?aq:ap)({name:"",value:[new aS({name:j,value:e})]})),null!==h.context&&void 0!==h.context)if(h.implicit)if("number"==typeof h.type||bi(h.type)){let a=h.repeated?X:T;d.push(new a({name:j,optional:k,idBlock:{tagClass:3,tagNumber:h.context}}))}else{this.cache(h.type);let a=!!h.repeated,b=a?e:this.get(h.type,!0).schema;b="valueBlock"in b?b.valueBlock.value:b.value,d.push(new X({name:a?"":j,optional:k,idBlock:{tagClass:3,tagNumber:h.context},value:b}))}else d.push(new X({optional:k,idBlock:{tagClass:3,tagNumber:h.context},value:[e]}));else e.optional=k,d.push(e)}switch(c.type){case f.Sequence:return new ap({value:d,name:""});case f.Set:return new aq({value:d,name:""});case f.Choice:return new aR({value:d,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(a,b){return this.items.set(a,b),this}findParentSchema(a){let b=Object.getPrototypeOf(a);return b?this.items.get(b)||this.findParentSchema(b):null}}let bk=new bj,bl=a=>b=>{let c;bk.has(b)?c=bk.get(b):(c=bk.createDefault(b),bk.set(b,c)),Object.assign(c,a)},bm=a=>(b,c)=>{let d;bk.has(b.constructor)?d=bk.get(b.constructor):(d=bk.createDefault(b.constructor),bk.set(b.constructor,d));let e=Object.assign({},a);if("number"==typeof e.type&&!e.converter){let d=bh(a.type);if(!d)throw Error(`Cannot get default converter for property '${c}' of ${b.constructor.name}`);e.converter=d}e.raw=a.raw,d.items[c]=e};class bn extends Error{constructor(){super(...arguments),this.schemas=[]}}class bo{static parse(a,b){let c=V(a);if(c.result.error)throw Error(c.result.error);return this.fromASN(c.result,b)}static fromASN(a,b){try{if(bi(b))return new b().fromASN(a);let c=bk.get(b);bk.cache(b);let d=c.schema,e=this.handleChoiceTypes(a,c,b,d);if(null==e?void 0:e.result)return e.result;(null==e?void 0:e.targetSchema)&&(d=e.targetSchema);let f=this.handleSequenceTypes(a,c,b,d);if(f&&"isManualMapping"in f)return f.result;let g=new b;if(function a(b){var c;if(b){let d=Object.getPrototypeOf(b);return(null==(c=null==d?void 0:d.prototype)?void 0:c.constructor)===Array||a(d)}return!1}(b))return this.handleArrayTypes(a,c,b);return this.processSchemaItems(c,f,g),g}catch(a){throw a instanceof bn&&a.schemas.push(b.name),a}}static handleChoiceTypes(a,b,c,d){if(a.constructor===X&&b.type===f.Choice&&3===a.idBlock.tagClass)for(let d in b.items){let e=b.items[d];if(e.context===a.idBlock.tagNumber&&e.implicit&&"function"==typeof e.type&&bk.has(e.type)){let b=bk.get(e.type);if(b&&b.type===f.Sequence){let b=new ap;if("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)&&"value"in b.valueBlock){b.valueBlock.value=a.valueBlock.value;let f=this.fromASN(b,e.type),g=new c;return g[d]=f,{result:g}}}}}else if(a.constructor===X&&b.type!==f.Choice){let c=new X({idBlock:{tagClass:3,tagNumber:a.idBlock.tagNumber},value:b.schema.valueBlock.value});for(let c in b.items)delete a[c];return{targetSchema:c}}return null}static handleSequenceTypes(a,b,c,d){if(b.type===f.Sequence){if(Object.keys(b.items).filter(a=>{let c=b.items[a];return c.optional&&"function"==typeof c.type&&bk.has(c.type)&&bk.get(c.type).type===f.Choice}).length>0&&"value"in a.valueBlock&&Array.isArray(a.valueBlock.value)&&"CertReqMsg"===c.name)return this.handleManualMapping(a,b,c);let e=aU({},a,d);if(!e.verified)throw new bn(`Data does not match to ${c.name} ASN1 schema.${e.result.error?` ${e.result.error}`:""}`);return e}{let b=aU({},a,d);if(!b.verified)throw new bn(`Data does not match to ${c.name} ASN1 schema.${b.result.error?` ${b.result.error}`:""}`);return b}}static handleManualMapping(a,b,c){let d=new c,e=a.valueBlock.value,f=Object.keys(b.items),g=0;for(let a=0;a<f.length;a++){let c=f[a],h=b.items[c];if(g>=e.length)break;if(h.repeated){d[c]=this.processRepeatedField(e,g,h);break}if("number"==typeof h.type)d[c]=this.processPrimitiveField(e[g],h),g++;else if(this.isOptionalChoiceField(h)){let a=this.processOptionalChoiceField(e[g],h);a.processed&&(d[c]=a.value,g++)}else d[c]=this.fromASN(e[g],h.type),g++}return{result:d,verified:!0,isManualMapping:!0}}static processRepeatedField(a,b,c){let d=a.slice(b);if(1===d.length&&"Sequence"===d[0].constructor.name){let a=d[0];a.valueBlock&&a.valueBlock.value&&Array.isArray(a.valueBlock.value)&&(d=a.valueBlock.value)}if("number"!=typeof c.type)return d.filter(a=>a&&a.valueBlock).map(a=>{try{return this.fromASN(a,c.type)}catch{return}}).filter(a=>void 0!==a);{let a=bh(c.type);if(!a)throw Error(`No converter for ASN.1 type ${c.type}`);return d.filter(a=>a&&a.valueBlock).map(b=>{try{return a.fromASN(b)}catch{return}}).filter(a=>void 0!==a)}}static processPrimitiveField(a,b){let c=bh(b.type);if(!c)throw Error(`No converter for ASN.1 type ${b.type}`);return c.fromASN(a)}static isOptionalChoiceField(a){return a.optional&&"function"==typeof a.type&&bk.has(a.type)&&bk.get(a.type).type===f.Choice}static processOptionalChoiceField(a,b){try{let c=this.fromASN(a,b.type);return{processed:!0,value:c}}catch(a){if(a instanceof bn&&/Wrong values for Choice type/.test(a.message))return{processed:!1};throw a}}static handleArrayTypes(a,b,c){if(!("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let d=b.itemType;if("number"!=typeof d)return c.from(a.valueBlock.value,a=>this.fromASN(a,d));{let b=bh(d);if(!b)throw Error(`Cannot get default converter for array item of ${c.name} ASN1 schema`);return c.from(a.valueBlock.value,a=>b.fromASN(a))}}static processSchemaItems(a,b,c){for(let d in a.items){let e,f=b.result[d];if(!f)continue;let g=a.items[d],h=g.type;(e="number"==typeof h||bi(h)?this.processPrimitiveSchemaItem(f,g,h):this.processComplexSchemaItem(f,g,h))&&"object"==typeof e&&"value"in e&&"raw"in e?(c[d]=e.value,c[`${d}Raw`]=e.raw):c[d]=e}}static processPrimitiveSchemaItem(a,b,c){var d;let e=null!=(d=b.converter)?d:bi(c)?new c:null;if(!e)throw Error("Converter is empty");return b.repeated?this.processRepeatedPrimitiveItem(a,b,e):this.processSinglePrimitiveItem(a,b,c,e)}static processRepeatedPrimitiveItem(a,b,c){if(!b.implicit)return Array.from(a,a=>c.fromASN(a));{let d=new("sequence"===b.repeated?ap:aq);d.valueBlock=a.valueBlock;let e=V(d.toBER(!1));if(-1===e.offset)throw Error(`Cannot parse the child item. ${e.result.error}`);if(!("value"in e.result.valueBlock&&Array.isArray(e.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");return Array.from(e.result.valueBlock.value,a=>c.fromASN(a))}}static processSinglePrimitiveItem(a,b,c,d){let e=a;if(b.implicit){let a;if(bi(c))a=new c().toSchema("");else{let b=g[c],d=i[b];if(!d)throw Error(`Cannot get '${b}' class from asn1js module`);a=new d}a.valueBlock=e.valueBlock,e=V(a.toBER(!1)).result}return d.fromASN(e)}static processComplexSchemaItem(a,b,c){if(b.repeated){if(!Array.isArray(a))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(a,a=>this.fromASN(a,c))}{let d=this.handleImplicitTagging(a,b,c);if(this.isOptionalChoiceField(b))try{return this.fromASN(d,c)}catch(a){if(a instanceof bn&&/Wrong values for Choice type/.test(a.message))return;throw a}{let e=this.fromASN(d,c);return b.raw?{value:e,raw:a.valueBeforeDecodeView}:e}}}static handleImplicitTagging(a,b,c){if(b.implicit&&"number"==typeof b.context){let b=bk.get(c);if(b.type===f.Sequence){let b=new ap;if("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)&&"value"in b.valueBlock)return b.valueBlock.value=a.valueBlock.value,b}else if(b.type===f.Set){let b=new aq;if("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)&&"value"in b.valueBlock)return b.valueBlock.value=a.valueBlock.value,b}}return a}}class bp{static serialize(a){return a instanceof Q?a.toBER(!1):this.toASN(a).toBER(!1)}static toASN(a){let b;if(a&&"object"==typeof a&&bi(a))return a.toASN();if(!(a&&"object"==typeof a))throw TypeError("Parameter 1 should be type of Object.");let c=a.constructor,d=bk.get(c);bk.cache(c);let e=[];if(d.itemType){if(!Array.isArray(a))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof d.itemType){let b=bh(d.itemType);if(!b)throw Error(`Cannot get default converter for array item of ${c.name} ASN1 schema`);e=a.map(a=>b.toASN(a))}else e=a.map(a=>this.toAsnItem({type:d.itemType},"[]",c,a))}else for(let b in d.items){let f=d.items[b],g=a[b];if(void 0===g||f.defaultValue===g||"object"==typeof f.defaultValue&&"object"==typeof g&&function(a,b){if(!(a&&b)||a.byteLength!==b.byteLength)return!1;let c=new Uint8Array(a),d=new Uint8Array(b);for(let b=0;b<a.byteLength;b++)if(c[b]!==d[b])return!1;return!0}(this.serialize(f.defaultValue),this.serialize(g)))continue;let h=bp.toAsnItem(f,b,c,g);if("number"==typeof f.context)if(f.implicit)if(!f.repeated&&("number"==typeof f.type||bi(f.type))){let a={};a.valueHex=h instanceof $?h.valueBeforeDecodeView:h.valueBlock.toBER(),e.push(new T({optional:f.optional,idBlock:{tagClass:3,tagNumber:f.context},...a}))}else e.push(new X({optional:f.optional,idBlock:{tagClass:3,tagNumber:f.context},value:h.valueBlock.value}));else e.push(new X({optional:f.optional,idBlock:{tagClass:3,tagNumber:f.context},value:[h]}));else f.repeated?e=e.concat(h):e.push(h)}switch(d.type){case f.Sequence:b=new ap({value:e});break;case f.Set:b=new aq({value:e});break;case f.Choice:if(!e[0])throw Error(`Schema '${c.name}' has wrong data. Choice cannot be empty.`);b=e[0]}return b}static toAsnItem(a,b,c,d){let e;if("number"==typeof a.type){let f=a.converter;if(!f)throw Error(`Property '${b}' doesn't have converter for type ${g[a.type]} in schema '${c.name}'`);if(a.repeated){if(!Array.isArray(d))throw TypeError("Parameter 'objProp' should be type of Array.");let b=Array.from(d,a=>f.toASN(a));e=new("sequence"===a.repeated?ap:aq)({value:b})}else e=f.toASN(d)}else if(a.repeated){if(!Array.isArray(d))throw TypeError("Parameter 'objProp' should be type of Array.");let b=Array.from(d,a=>this.toASN(a));e=new("sequence"===a.repeated?ap:aq)({value:b})}else e=this.toASN(d);return e}}class bq{static serialize(a){return bp.serialize(a)}static parse(a,b){return bo.parse(a,b)}static toString(a){let b=V(j.isBufferSource(a)?j.toArrayBuffer(a):bq.serialize(a));if(-1===b.offset)throw Error(`Cannot decode ASN.1 data. ${b.result.error}`);return b.result.toString()}}function br(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}Object.create;Object.create,"function"==typeof SuppressedError&&SuppressedError;class bs extends Error{constructor(a,b){super(b?`${a}. See the inner exception for more details.`:a),this.message=a,this.innerError=b}}class bt extends bs{constructor(a,b,c){super(b,c),this.schema=a}}class bu extends bt{constructor(a,b,c){super(a,`JSON doesn't match to '${a.target.name}' schema. ${b}`,c)}}class bv extends bs{}class bw extends bs{constructor(a,b,c){super(`Cannot serialize by '${a}' schema. ${b}`,c),this.schemaName=a}}class bx extends bu{constructor(a,b,c={}){super(a,"Some keys doesn't match to schema"),this.keys=b,this.errors=c}}function by(a,b){if(!function(a,b){switch(b){case h.Boolean:return"boolean"==typeof a;case h.Number:return"number"==typeof a;case h.String:return"string"==typeof a}return!0}(a,b))throw TypeError(`Value must be ${h[b]}`)}function bz(a){return a&&a.prototype?!!a.prototype.toJSON&&!!a.prototype.fromJSON||bz(a.prototype):!!(a&&a.toJSON&&a.fromJSON)}!function(a){a[a.Any=0]="Any",a[a.Boolean=1]="Boolean",a[a.Number=2]="Number",a[a.String=3]="String"}(h||(h={}));class bA{constructor(){this.items=new Map}has(a){return this.items.has(a)||!!this.findParentSchema(a)}get(a){let b=this.items.get(a)||this.findParentSchema(a);if(!b)throw Error("Cannot get schema for current target");return b}create(a){let b={names:{}},c=this.findParentSchema(a);if(c)for(let a in Object.assign(b,c),b.names={},c.names)b.names[a]=Object.assign({},c.names[a]);return b.target=a,b}set(a,b){return this.items.set(a,b),this}findParentSchema(a){let b=a.__proto__;return b?this.items.get(b)||this.findParentSchema(b):null}}let bB="default",bC=new bA;class bD{constructor(a){this.pattern=new RegExp(a)}validate(a){let b=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof a)throw new bv("Incoming value must be string");if(!b.exec(a))throw new bv(`Value doesn't match to pattern '${b.toString()}'`)}}class bE{constructor(a=5e-324,b=Number.MAX_VALUE){this.min=a,this.max=b}validate(a){if(by(a,h.Number),!(this.min<=a&&a<=this.max)){let a=5e-324===this.min?"MIN":this.min,b=this.max===Number.MAX_VALUE?"MAX":this.max;throw new bv(`Value doesn't match to diapason [${a},${b}]`)}}}class bF{constructor(a=5e-324,b=Number.MAX_VALUE){this.min=a,this.max=b}validate(a){if(by(a,h.Number),!(this.min<a&&a<this.max)){let a=5e-324===this.min?"MIN":this.min,b=this.max===Number.MAX_VALUE?"MAX":this.max;throw new bv(`Value doesn't match to diapason (${a},${b})`)}}}class bG{constructor(a,b,c){this.length=a,this.minLength=b,this.maxLength=c}validate(a){if(void 0!==this.length){if(a.length!==this.length)throw new bv(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&a.length<this.minLength)throw new bv(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&a.length>this.maxLength)throw new bv(`Value length must be less than ${this.maxLength}.`)}}class bH{constructor(a){this.enumeration=a}validate(a){if(by(a,h.String),!this.enumeration.includes(a))throw new bv(`Value must be one of ${this.enumeration.map(a=>`'${a}'`).join(", ")}`)}}class bI{static checkValues(a,b){for(let c of Array.isArray(a)?a:[a])for(let d of b.validations)d instanceof bG&&b.repeated?d.validate(a):d.validate(c)}static checkTypes(a,b){if(b.repeated&&!Array.isArray(a))throw TypeError("Value must be Array");if("number"==typeof b.type)for(let c of Array.isArray(a)?a:[a])by(c,b.type)}static getSchemaByName(a,b=bB){return{...a.names[bB],...a.names[b]}}}class bJ extends bI{static serialize(a,b,c,d){return JSON.stringify(this.toJSON(a,b),c,d)}static toJSON(a,b={}){let c,d=b.targetSchema,e=b.schemaName||bB;if(bz(a))return a.toJSON();if(Array.isArray(a))for(let d of(c=[],a))c.push(this.toJSON(d,b));else if("object"==typeof a){if(d&&!bC.has(d))throw new bs("Cannot get schema for `targetSchema` param");if(d=d||a.constructor,bC.has(d)){let b=bC.get(d);c={};let f=this.getSchemaByName(b,e);for(let g in f)try{let b,h=f[g],i=a[g];if(h.optional&&void 0===i||void 0!==h.defaultValue&&i===h.defaultValue)continue;if(!h.optional&&void 0===i)throw new bw(d.name,`Property '${g}' is required.`);b="number"==typeof h.type?h.converter?h.repeated?i.map(b=>h.converter.toJSON(b,a)):h.converter.toJSON(i,a):i:h.repeated?i.map(a=>this.toJSON(a,{schemaName:e})):this.toJSON(i,{schemaName:e}),this.checkTypes(b,h),this.checkValues(b,h),c[h.name||g]=b}catch(a){if(a instanceof bw)throw a;throw new bw(b.target.name,`Property '${g}' is wrong. ${a.message}`,a)}}else for(let b in c={},a)c[b]=this.toJSON(a[b],{schemaName:e})}else c=a;return c}}class bK extends bI{static parse(a,b){let c=JSON.parse(a);return this.fromJSON(c,b)}static fromJSON(a,b){let c=b.targetSchema,d=b.schemaName||bB,e=new c;if(bz(e))return e.fromJSON(a);let f=bC.get(c),g=this.getSchemaByName(f,d),h={};for(let c in b.strictProperty&&!Array.isArray(a)&&bK.checkStrictProperty(a,g,f),g)try{let h=g[c],i=h.name||c,j=a[i];if(void 0===j&&(h.optional||void 0!==h.defaultValue))continue;if(!h.optional&&void 0===j)throw new bu(f,`Property '${i}' is required.`);if(this.checkTypes(j,h),this.checkValues(j,h),"number"==typeof h.type)h.converter?h.repeated?e[c]=j.map(a=>h.converter.fromJSON(a,e)):e[c]=h.converter.fromJSON(j,e):e[c]=j;else{let a={...b,targetSchema:h.type,schemaName:d};h.repeated?e[c]=j.map(b=>this.fromJSON(b,a)):e[c]=this.fromJSON(j,a)}}catch(a){if(a instanceof bu||(a=new bu(f,`Property '${c}' is wrong. ${a.message}`,a)),b.strictAllKeys)h[c]=a;else throw a}let i=Object.keys(h);if(i.length)throw new bx(f,i,h);return e}static checkStrictProperty(a,b,c){let d=Object.keys(a),e=Object.keys(b),f=[];for(let a of d)-1===e.indexOf(a)&&f.push(a);if(f.length)throw new bx(c,f)}}let bL=(a={})=>(b,c)=>{let d,e=`Cannot set type for ${c} property of ${b.constructor.name} schema`;bC.has(b.constructor)?(d=bC.get(b.constructor)).target!==b.constructor&&(d=bC.create(b.constructor),bC.set(b.constructor,d)):(d=bC.create(b.constructor),bC.set(b.constructor,d));let f=Object.assign({type:h.Any,validations:[]},a);if(f.validations=function(a){let b=[];return a.pattern&&b.push(new bD(a.pattern)),(a.type===h.Number||a.type===h.Any)&&((void 0!==a.minInclusive||void 0!==a.maxInclusive)&&b.push(new bE(a.minInclusive,a.maxInclusive)),(void 0!==a.minExclusive||void 0!==a.maxExclusive)&&b.push(new bF(a.minExclusive,a.maxExclusive)),void 0!==a.enumeration&&b.push(new bH(a.enumeration))),(a.type===h.String||a.repeated||a.type===h.Any)&&(void 0!==a.length||void 0!==a.minLength||void 0!==a.maxLength)&&b.push(new bG(a.length,a.minLength,a.maxLength)),b}(f),"number"!=typeof f.type&&!bC.has(f.type)&&!bz(f.type))throw Error(`${e}. Assigning type doesn't have schema.`);for(let b of Array.isArray(a.schema)?a.schema:[a.schema||bB])d.names[b]||(d.names[b]={}),d.names[b][c]=f};class bM extends Error{}class bN extends bM{}class bO extends bM{constructor(a){super(`Unsupported operation: ${a?`${a}`:""}`)}}class bP extends bM{}class bQ extends bM{constructor(a){super(`${a}: Missing required property`)}}class bR{static toArrayBuffer(a){let b=a.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return q.FromBase64(b)}static toUint8Array(a){return new Uint8Array(this.toArrayBuffer(a))}static fromBufferSource(a,b){let c,d=q.ToBase64(a),e=0,f=[];for(;e<d.length&&(c=d.slice(e,e+64)).length;)f.push(c),e+=64;let g=b.toUpperCase();return`-----BEGIN ${g}-----
${f.join("\n")}
-----END ${g}-----`}static isPEM(a){return/-----BEGIN .+-----[A-Za-z0-9+/+=\s\n]+-----END .+-----/i.test(a)}static getTagName(a){if(!this.isPEM(a))throw Error("Bad parameter. Incoming data is not right PEM");let b=/-----BEGIN (.+)-----/.exec(a);if(!b)throw Error("Cannot get tag from PEM");return b[1]}static hasTagName(a,b){let c=this.getTagName(a);return b.toLowerCase()===c.toLowerCase()}static isCertificate(a){return this.hasTagName(a,"certificate")}static isCertificateRequest(a){return this.hasTagName(a,"certificate request")}static isCRL(a){return this.hasTagName(a,"x509 crl")}static isPublicKey(a){return this.hasTagName(a,"public key")}}class bS{async digest(...a){return this.checkDigest.apply(this,a),this.onDigest.apply(this,a)}checkDigest(a,b){this.checkAlgorithmName(a)}async onDigest(a,b){throw new bO("digest")}async generateKey(...a){return this.checkGenerateKey.apply(this,a),this.onGenerateKey.apply(this,a)}checkGenerateKey(a,b,c){let d;if(this.checkAlgorithmName(a),this.checkGenerateKeyParams(a),!(c&&c.length))throw TypeError("Usages cannot be empty when creating a key.");d=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(c,d)}checkGenerateKeyParams(a){}async onGenerateKey(a,b,c){throw new bO("generateKey")}async sign(...a){return this.checkSign.apply(this,a),this.onSign.apply(this,a)}checkSign(a,b,c){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,"sign")}async onSign(a,b,c){throw new bO("sign")}async verify(...a){return this.checkVerify.apply(this,a),this.onVerify.apply(this,a)}checkVerify(a,b,c,d){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,"verify")}async onVerify(a,b,c,d){throw new bO("verify")}async encrypt(...a){return this.checkEncrypt.apply(this,a),this.onEncrypt.apply(this,a)}checkEncrypt(a,b,c,d={}){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,d.keyUsage?"encrypt":void 0)}async onEncrypt(a,b,c){throw new bO("encrypt")}async decrypt(...a){return this.checkDecrypt.apply(this,a),this.onDecrypt.apply(this,a)}checkDecrypt(a,b,c,d={}){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,d.keyUsage?"decrypt":void 0)}async onDecrypt(a,b,c){throw new bO("decrypt")}async deriveBits(...a){return this.checkDeriveBits.apply(this,a),this.onDeriveBits.apply(this,a)}checkDeriveBits(a,b,c,d={}){if(this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,d.keyUsage?"deriveBits":void 0),c%8!=0)throw new bP("length: Is not multiple of 8")}async onDeriveBits(a,b,c){throw new bO("deriveBits")}async exportKey(...a){return this.checkExportKey.apply(this,a),this.onExportKey.apply(this,a)}checkExportKey(a,b){if(this.checkKeyFormat(a),this.checkCryptoKey(b),!b.extractable)throw new bM("key: Is not extractable")}async onExportKey(a,b){throw new bO("exportKey")}async importKey(...a){return this.checkImportKey.apply(this,a),this.onImportKey.apply(this,a)}checkImportKey(a,b,c,d,e){this.checkKeyFormat(a),this.checkKeyData(a,b),this.checkAlgorithmName(c),this.checkImportParams(c),Array.isArray(this.usages)&&this.checkKeyUsages(e,this.usages)}async onImportKey(a,b,c,d,e){throw new bO("importKey")}checkAlgorithmName(a){if(a.name.toLowerCase()!==this.name.toLowerCase())throw new bN("Unrecognized name")}checkAlgorithmParams(a){}checkDerivedKeyParams(a){}checkKeyUsages(a,b){for(let c of a)if(-1===b.indexOf(c))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(a,b){if(this.checkAlgorithmName(a.algorithm),b&&-1===a.usages.indexOf(b))throw new bM("key does not match that of operation")}checkRequiredProperty(a,b){if(!(b in a))throw new bQ(b)}checkHashAlgorithm(a,b){for(let c of b)if(c.toLowerCase()===a.name.toLowerCase())return;throw new bP(`hash: Must be one of ${b.join(", ")}`)}checkImportParams(a){}checkKeyFormat(a){switch(a){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(a,b){if(!b)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===a){if(!("object"==typeof b&&"kty"in b))throw TypeError("keyData: Is not JsonWebToken")}else if(!j.isBufferSource(b))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(a){return j.toArrayBuffer(a)}}class bT extends bS{checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not of type Number");switch(a.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(a){this.checkGenerateKeyParams(a)}}class bU extends bT{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"iv"),!(a.iv instanceof ArrayBuffer||ArrayBuffer.isView(a.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==a.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}}class bV extends bT{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not a Number");if(a.length<1)throw new bP("length: Must be more than 0")}}class bW extends bT{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"counter"),!(a.counter instanceof ArrayBuffer||ArrayBuffer.isView(a.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==a.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not a Number");if(a.length<1)throw new bP("length: Must be more than 0")}}class bX extends bT{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class bY extends bT{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"iv"),!(a.iv instanceof ArrayBuffer||ArrayBuffer.isView(a.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(a.iv.byteLength<1)throw new bP("iv: Must have length more than 0 and less than 2^64 - 1");switch(null!=a.tagLength||(a.tagLength=128),a.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new bP("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class bZ extends bT{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}}class b$ extends bS{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.ivSize){if(this.checkRequiredProperty(a,"iv"),!(a.iv instanceof ArrayBuffer||ArrayBuffer.isView(a.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(a.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not of type Number");if(a.length!==this.keySizeBits)throw new bP(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(a){this.checkGenerateKeyParams(a)}}class b_ extends bS{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),this.checkRequiredProperty(a,"publicExponent"),!(a.publicExponent&&a.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let b=q.ToBase64(a.publicExponent);if("Aw=="!==b&&"AQAB"!==b)throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(a,"modulusLength"),a.modulusLength%8||a.modulusLength<256||a.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(a){this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms)}}class b0 extends b_{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class b1 extends b_{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"saltLength"),"number"!=typeof a.saltLength)throw TypeError("saltLength: Is not a Number");if(a.saltLength<0)throw RangeError("saltLength: Must be positive number")}}class b2 extends b_{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(a){if(a.label&&!(a.label instanceof ArrayBuffer||ArrayBuffer.isView(a.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}class b3 extends bS{checkGenerateKeyParams(a){this.checkRequiredProperty(a,"namedCurve"),this.checkNamedCurve(a.namedCurve)}checkNamedCurve(a){for(let b of this.namedCurves)if(b.toLowerCase()===a.toLowerCase())return;throw new bP(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class b4 extends b3{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(a){this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms)}}let b5=["secret","private","public"];class b6{static create(a,b,c,d){let e=new this;return e.algorithm=a,e.type=b,e.extractable=c,e.usages=d,e}static isKeyType(a){return -1!==b5.indexOf(a)}get[Symbol.toStringTag](){return"CryptoKey"}}class b7 extends b3{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"public"),!(a.public instanceof b6))throw TypeError("public: Is not a CryptoKey");if("public"!==a.public.type)throw new bP("public: Is not a public key");if(a.public.algorithm.name!==this.name)throw new bP(`public: Is not ${this.name} key`)}}class b8 extends b7{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}}class b9 extends b3{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}}let ca=class{constructor(a){a&&(this.value=a)}};br([bm({type:g.ObjectIdentifier})],ca.prototype,"value",void 0),ca=br([bl({type:f.Choice})],ca);class cb{constructor(a){Object.assign(this,a)}}br([bm({type:g.ObjectIdentifier})],cb.prototype,"algorithm",void 0),br([bm({type:g.Any,optional:!0})],cb.prototype,"parameters",void 0);class cc{constructor(){this.version=0,this.privateKeyAlgorithm=new cb,this.privateKey=new ArrayBuffer(0)}}br([bm({type:g.Integer})],cc.prototype,"version",void 0),br([bm({type:cb})],cc.prototype,"privateKeyAlgorithm",void 0),br([bm({type:g.OctetString})],cc.prototype,"privateKey",void 0),br([bm({type:g.Any,optional:!0})],cc.prototype,"attributes",void 0);class cd{constructor(){this.publicKeyAlgorithm=new cb,this.publicKey=new ArrayBuffer(0)}}br([bm({type:cb})],cd.prototype,"publicKeyAlgorithm",void 0),br([bm({type:g.BitString})],cd.prototype,"publicKey",void 0);let ce={fromJSON:a=>q.FromBase64Url(a),toJSON:a=>q.ToBase64Url(new Uint8Array(a))},cf={fromASN:a=>new Uint8Array(a.valueBlock.valueHex)[0]?a.valueBlock.valueHex:a.valueBlock.valueHex.slice(1),toASN:a=>new ah({valueHex:new Uint8Array(a)[0]>127?r(new Uint8Array([0]).buffer,a):a})};class cg{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}br([bm({type:g.Integer,converter:aX})],cg.prototype,"version",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"n",converter:ce})],cg.prototype,"modulus",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"e",converter:ce})],cg.prototype,"publicExponent",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"d",converter:ce})],cg.prototype,"privateExponent",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"p",converter:ce})],cg.prototype,"prime1",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"q",converter:ce})],cg.prototype,"prime2",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"dp",converter:ce})],cg.prototype,"exponent1",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"dq",converter:ce})],cg.prototype,"exponent2",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"qi",converter:ce})],cg.prototype,"coefficient",void 0),br([bm({type:g.Any,optional:!0})],cg.prototype,"otherPrimeInfos",void 0);class ch{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}br([bm({type:g.Integer,converter:cf}),bL({name:"n",converter:ce})],ch.prototype,"modulus",void 0),br([bm({type:g.Integer,converter:cf}),bL({name:"e",converter:ce})],ch.prototype,"publicExponent",void 0);let ci=class{constructor(a){this.value=new ArrayBuffer(0),a&&(this.value=a)}toJSON(){let a=new Uint8Array(this.value);if(4!==a[0])throw new bM("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");let b=(a=new Uint8Array(this.value.slice(1))).length/2;return{x:q.ToBase64Url(a.buffer.slice(0,0+b)),y:q.ToBase64Url(a.buffer.slice(0+b,0+b+b))}}fromJSON(a){if(!("x"in a))throw Error("x: Missing required property");if(!("y"in a))throw Error("y: Missing required property");let b=q.FromBase64Url(a.x),c=q.FromBase64Url(a.y),d=r(new Uint8Array([4]).buffer,b,c);return this.value=new Uint8Array(d).buffer,this}};br([bm({type:g.OctetString})],ci.prototype,"value",void 0),ci=br([bl({type:f.Choice})],ci);class cj{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(a){if(!("d"in a))throw Error("d: Missing required property");if(this.privateKey=q.FromBase64Url(a.d),"x"in a){let b=new ci;b.fromJSON(a);let c=bp.toASN(b);"valueHex"in c.valueBlock&&(this.publicKey=c.valueBlock.valueHex)}return this}toJSON(){let a={};return a.d=q.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(a,new ci(this.publicKey).toJSON()),a}}br([bm({type:g.Integer,converter:aX})],cj.prototype,"version",void 0),br([bm({type:g.OctetString})],cj.prototype,"privateKey",void 0),br([bm({context:0,type:g.Any,optional:!0})],cj.prototype,"parameters",void 0),br([bm({context:1,type:g.BitString,optional:!0})],cj.prototype,"publicKey",void 0);let ck={fromASN:a=>{let b=new Uint8Array(a.valueBlock.valueHex);return 0===b[0]?b.buffer.slice(1):b.buffer},toASN:a=>{let b=new Uint8Array(a);if(b[0]>127){let a=new Uint8Array(b.length+1);return a.set(b,1),new ah({valueHex:a.buffer})}return new ah({valueHex:a})}};var cl=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:ck});class cm{static decodePoint(a,b){let c=j.toUint8Array(a);if(0===c.length||4!==c[0])throw Error("Only uncompressed point format supported");let d=(c.length-1)/2;if(d!==Math.ceil(b/8))throw Error("Point does not match field size");return{x:c.slice(1,d+1),y:c.slice(d+1,d+1+d)}}static encodePoint(a,b){let c=Math.ceil(b/8);if(a.x.byteLength!==c||a.y.byteLength!==c)throw Error("X,Y coordinates don't match point size criteria");let d=j.toUint8Array(a.x),e=j.toUint8Array(a.y),f=new Uint8Array(2*c+1);return f[0]=4,f.set(d,1),f.set(e,c+1),f}static getSize(a){return Math.ceil(a/8)}static encodeSignature(a,b){let c=this.getSize(b),d=j.toUint8Array(a.r),e=j.toUint8Array(a.s),f=new Uint8Array(2*c);return f.set(this.padStart(d,c)),f.set(this.padStart(e,c),c),f}static decodeSignature(a,b){let c=this.getSize(b),d=j.toUint8Array(a);if(d.length!==2*c)throw Error("Incorrect size of the signature");let e=d.slice(0,c),f=d.slice(c);return{r:this.trimStart(e),s:this.trimStart(f)}}static trimStart(a){let b=0;for(;b<a.length-1&&0===a[b];)b++;return 0===b?a:a.slice(b,a.length)}static padStart(a,b){if(b===a.length)return a;let c=new Uint8Array(b);return c.set(a,b-a.length),c}}class cn{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(a){let b=a.byteLength/2,c=cm.decodeSignature(a,8*b),d=new cn;return d.r=j.toArrayBuffer(c.r),d.s=j.toArrayBuffer(c.s),d}toWebCryptoSignature(a){if(!a){let b=Math.max(this.r.byteLength,this.s.byteLength);a=b<=32?256:b<=48?384:521}return cm.encodeSignature(this,a).buffer}}br([bm({type:g.Integer,converter:ck})],cn.prototype,"r",void 0),br([bm({type:g.Integer,converter:ck})],cn.prototype,"s",void 0);class co extends cc{}br([bm({context:1,implicit:!0,type:g.BitString,optional:!0})],co.prototype,"publicKey",void 0);let cp=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(a){if(!a.d)throw Error("d: Missing required property");return this.value=q.FromBase64Url(a.d),this}toJSON(){return{d:q.ToBase64Url(this.value)}}};br([bm({type:g.OctetString})],cp.prototype,"value",void 0),cp=br([bl({type:f.Choice})],cp);let cq=class{constructor(a){this.value=new ArrayBuffer(0),a&&(this.value=a)}toJSON(){return{x:q.ToBase64Url(this.value)}}fromJSON(a){if(!("x"in a))throw Error("x: Missing required property");return this.value=q.FromBase64Url(a.x),this}};br([bm({type:g.BitString})],cq.prototype,"value",void 0),cq=br([bl({type:f.Choice})],cq);let cr=class{};br([bm({type:g.OctetString}),bL({type:h.String,converter:ce})],cr.prototype,"d",void 0),cr=br([bl({type:f.Choice})],cr);let cs="1.2.840.10045.3.1.7",ct="1.3.132.0",cu=`${ct}.34`,cv=`${ct}.35`,cw=`${ct}.10`,cx="1.3.36.3.3.2.8.1.1",cy=`${cx}.1`,cz=`${cx}.2`,cA=`${cx}.3`,cB=`${cx}.4`,cC=`${cx}.5`,cD=`${cx}.6`,cE=`${cx}.7`,cF=`${cx}.8`,cG=`${cx}.9`,cH=`${cx}.10`,cI=`${cx}.11`,cJ=`${cx}.12`,cK=`${cx}.13`,cL=`${cx}.14`;var cM=Object.freeze({__proto__:null,AlgorithmIdentifier:cb,get CurvePrivateKey(){return cr},EcDsaSignature:cn,EcPrivateKey:cj,get EcPublicKey(){return ci},get EdPrivateKey(){return cp},get EdPublicKey(){return cq},get ObjectIdentifier(){return ca},OneAsymmetricKey:co,PrivateKeyInfo:cc,PublicKeyInfo:cd,RsaPrivateKey:cg,RsaPublicKey:ch,converters:cl,idBrainpoolP160r1:cy,idBrainpoolP160t1:cz,idBrainpoolP192r1:cA,idBrainpoolP192t1:cB,idBrainpoolP224r1:cC,idBrainpoolP224t1:cD,idBrainpoolP256r1:cE,idBrainpoolP256t1:cF,idBrainpoolP320r1:cG,idBrainpoolP320t1:cH,idBrainpoolP384r1:cI,idBrainpoolP384t1:cJ,idBrainpoolP512r1:cK,idBrainpoolP512t1:cL,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:ct,idSecp256k1:cw,idSecp256r1:cs,idSecp384r1:cu,idSecp521r1:cv,idVersionOne:cx,idX25519:"1.3.101.110",idX448:"1.3.101.111"});class cN{constructor(){}static register(a){let b=new ca;b.value=a.id;let c=bq.serialize(b);this.items.push({...a,raw:c}),this.names.push(a.name)}static find(a){for(let b of(a=a.toUpperCase(),this.items))if(b.name.toUpperCase()===a||b.id.toUpperCase()===a)return b;return null}static get(a){let b=this.find(a);if(!b)throw Error(`Unsupported EC named curve '${a}'`);return b}}cN.items=[],cN.names=[],cN.register({name:"P-256",id:cs,size:256}),cN.register({name:"P-384",id:cu,size:384}),cN.register({name:"P-521",id:cv,size:521}),cN.register({name:"K-256",id:cw,size:256}),cN.register({name:"brainpoolP160r1",id:cy,size:160}),cN.register({name:"brainpoolP160t1",id:cz,size:160}),cN.register({name:"brainpoolP192r1",id:cA,size:192}),cN.register({name:"brainpoolP192t1",id:cB,size:192}),cN.register({name:"brainpoolP224r1",id:cC,size:224}),cN.register({name:"brainpoolP224t1",id:cD,size:224}),cN.register({name:"brainpoolP256r1",id:cE,size:256}),cN.register({name:"brainpoolP256t1",id:cF,size:256}),cN.register({name:"brainpoolP320r1",id:cG,size:320}),cN.register({name:"brainpoolP320t1",id:cH,size:320}),cN.register({name:"brainpoolP384r1",id:cI,size:384}),cN.register({name:"brainpoolP384t1",id:cJ,size:384}),cN.register({name:"brainpoolP512r1",id:cK,size:512}),cN.register({name:"brainpoolP512t1",id:cL,size:512});class cO extends bS{constructor(){super(...arguments),this.name="X25519",this.usages={privateKey:["deriveKey","deriveBits"],publicKey:[]}}checkAlgorithmParams(a){this.checkRequiredProperty(a,"public")}}class cP extends bS{constructor(){super(...arguments),this.name="Ed25519",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class cQ extends bS{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(a){switch(a.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${a}'`)}}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),"length"in a){if("number"!=typeof a.length)throw TypeError("length: Is not a Number");if(a.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(a){this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms)}}class cR extends bS{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),this.checkRequiredProperty(a,"salt"),!(a.salt instanceof ArrayBuffer||ArrayBuffer.isView(a.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(a,"iterations"),"number"!=typeof a.iterations)throw TypeError("iterations: Is not a Number");if(a.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(a,b,c,d,e,...f){if(super.checkImportKey(a,b,c,d,e,...f),d)throw SyntaxError("extractable: Must be 'false'")}}class cS extends bS{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),this.checkRequiredProperty(a,"salt"),!j.isBufferSource(a.salt)||(this.checkRequiredProperty(a,"info"),!j.isBufferSource(a.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(a,b,c,d,e,...f){if(super.checkImportKey(a,b,c,d,e,...f),d)throw SyntaxError("extractable: Must be 'false'")}}class cT extends bS{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...a){return a[0]={length:this.defaultLength,...a[0]},super.digest.apply(this,a)}checkDigest(a,b){super.checkDigest(a,b);let c=a.length||0;if("number"!=typeof c)throw TypeError("length: Is not a Number");if(c<0)throw TypeError("length: Is negative")}}class cU extends cT{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}}class cV extends cT{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}}class cW{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let a=this.getRandomValues(new Uint8Array(16));a[6]=15&a[6]|64,a[8]=63&a[8]|128;let b=q.ToHex(a).toLowerCase();return`${b.substring(0,8)}-${b.substring(8,12)}-${b.substring(12,16)}-${b.substring(16,20)}-${b.substring(20)}`}}class cX{constructor(){this.items={}}get(a){return this.items[a.toLowerCase()]||null}set(a){this.items[a.name.toLowerCase()]=a}removeAt(a){let b=this.get(a.toLowerCase());return b&&delete this.items[a],b}has(a){return!!this.get(a)}get length(){return Object.keys(this.items).length}get algorithms(){let a=[];for(let b in this.items){let c=this.items[b];a.push(c.name)}return a.sort()}}let cY={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]},cZ=["pkcs8","spki","raw"];class c${constructor(){this.providers=new cX}static isHashedAlgorithm(a){return!!a&&"object"==typeof a&&"name"in a&&"hash"in a}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...a){this.checkRequiredArguments(a,2,"digest");let[b,c,...d]=a,e=this.prepareAlgorithm(b),f=j.toArrayBuffer(c),g=this.getProvider(e.name);return await g.digest(e,f,...d)}async generateKey(...a){this.checkRequiredArguments(a,3,"generateKey");let[b,c,d,...e]=a,f=this.prepareAlgorithm(b),g=this.getProvider(f.name);return await g.generateKey({...f,name:g.name},c,d,...e)}async sign(...a){this.checkRequiredArguments(a,3,"sign");let[b,c,d,...e]=a;this.checkCryptoKey(c);let f=this.prepareAlgorithm(b),g=j.toArrayBuffer(d),h=this.getProvider(f.name);return await h.sign({...f,name:h.name},c,g,...e)}async verify(...a){this.checkRequiredArguments(a,4,"verify");let[b,c,d,e,...f]=a;this.checkCryptoKey(c);let g=this.prepareAlgorithm(b),h=j.toArrayBuffer(e),i=j.toArrayBuffer(d),k=this.getProvider(g.name);return await k.verify({...g,name:k.name},c,i,h,...f)}async encrypt(...a){this.checkRequiredArguments(a,3,"encrypt");let[b,c,d,...e]=a;this.checkCryptoKey(c);let f=this.prepareAlgorithm(b),g=j.toArrayBuffer(d),h=this.getProvider(f.name);return await h.encrypt({...f,name:h.name},c,g,{keyUsage:!0},...e)}async decrypt(...a){this.checkRequiredArguments(a,3,"decrypt");let[b,c,d,...e]=a;this.checkCryptoKey(c);let f=this.prepareAlgorithm(b),g=j.toArrayBuffer(d),h=this.getProvider(f.name);return await h.decrypt({...f,name:h.name},c,g,{keyUsage:!0},...e)}async deriveBits(...a){this.checkRequiredArguments(a,3,"deriveBits");let[b,c,d,...e]=a;this.checkCryptoKey(c);let f=this.prepareAlgorithm(b),g=this.getProvider(f.name);return await g.deriveBits({...f,name:g.name},c,d,{keyUsage:!0},...e)}async deriveKey(...a){this.checkRequiredArguments(a,5,"deriveKey");let[b,c,d,e,f,...g]=a,h=this.prepareAlgorithm(d);this.getProvider(h.name).checkDerivedKeyParams(h);let i=this.prepareAlgorithm(b),j=this.getProvider(i.name);j.checkCryptoKey(c,"deriveKey");let k=await j.deriveBits({...i,name:j.name},c,d.length||512,{keyUsage:!1},...g);return this.importKey("raw",k,d,e,f,...g)}async exportKey(...a){this.checkRequiredArguments(a,2,"exportKey");let[b,c,...d]=a;if(this.checkCryptoKey(c),!cY[b])throw TypeError("Invalid keyFormat argument");if(!cY[b].includes(c.type))throw new DOMException("The key is not of the expected type");let e=this.getProvider(c.algorithm.name);return await e.exportKey(b,c,...d)}async importKey(...a){this.checkRequiredArguments(a,5,"importKey");let[b,c,d,e,f,...g]=a,h=this.prepareAlgorithm(d),i=this.getProvider(h.name);if("jwk"===b){if("object"!=typeof c||!c.kty)throw TypeError("Key data must be an object for JWK import")}else if(cZ.includes(b)){if(!j.isBufferSource(c))throw TypeError("Key data must be a BufferSource for non-JWK formats")}else throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'");return i.importKey(b,c,{...h,name:i.name},e,f,...g)}async wrapKey(a,b,c,d,...e){let f=await this.exportKey(a,b,...e);if("jwk"===a){let a=JSON.stringify(f);f=q.FromUtf8String(a)}let g=this.prepareAlgorithm(d),h=j.toArrayBuffer(f),i=this.getProvider(g.name);return i.encrypt({...g,name:i.name},c,h,{keyUsage:!1},...e)}async unwrapKey(a,b,c,d,e,f,g,...h){let i=this.prepareAlgorithm(d),k=j.toArrayBuffer(b),l=this.getProvider(i.name),m=await l.decrypt({...i,name:l.name},c,k,{keyUsage:!1},...h);if("jwk"===a)try{m=JSON.parse(q.ToUtf8String(m))}catch(b){let a=TypeError("wrappedKey: Is not a JSON");throw a.internal=b,a}return this.importKey(a,m,e,f,g,...h)}checkRequiredArguments(a,b,c){if(a.length<b)throw TypeError(`Failed to execute '${c}' on 'SubtleCrypto': ${b} arguments required, but only ${a.length} present`)}prepareAlgorithm(a){if("string"==typeof a)return{name:a};if(c$.isHashedAlgorithm(a)){let b={...a};return b.hash=this.prepareAlgorithm(a.hash),b}return{...a}}getProvider(a){let b=this.providers.get(a);if(!b)throw new bN("Unrecognized name");return b}checkCryptoKey(a){if(!(a instanceof b6))throw TypeError("Key is not of type 'CryptoKey'")}}var c_=c(79428),c0=c(55511),c1=c.n(c0),c2=c(19771);let c3={fromJSON:a=>c_.Buffer.from(q.FromBase64Url(a)),toJSON:a=>q.ToBase64Url(a)};class c4 extends b6{constructor(){super(...arguments),this.data=c_.Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}}br([bL({name:"ext",type:h.Boolean,optional:!0})],c4.prototype,"extractable",void 0),br([bL({name:"key_ops",type:h.String,repeated:!0,optional:!0})],c4.prototype,"usages",void 0),br([bL({type:h.String})],c4.prototype,"kty",void 0),br([bL({type:h.String,optional:!0})],c4.prototype,"alg",void 0);class c5 extends c4{constructor(){super(...arguments),this.kty="oct",this.type="secret"}}class c6 extends c4{}class c7 extends c5{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new bN("Unsupported algorithm name")}}set alg(a){}}br([bL({name:"k",converter:c3})],c7.prototype,"data",void 0);class c8{static async generateKey(a,b,c){let d=new c7;return d.algorithm=a,d.extractable=b,d.usages=c,d.data=c1().randomBytes(a.length>>3),d}static async exportKey(a,b){if(!(b instanceof c7))throw Error("key: Is not AesCryptoKey");switch(a.toLowerCase()){case"jwk":return bJ.toJSON(b);case"raw":return new Uint8Array(b.data).buffer;default:throw new bP("format: Must be 'jwk' or 'raw'")}}static async importKey(a,b,c,d,e){let f;switch(a.toLowerCase()){case"jwk":f=bK.fromJSON(b,{targetSchema:c7});break;case"raw":(f=new c7).data=c_.Buffer.from(b);break;default:throw new bP("format: Must be 'jwk' or 'raw'")}switch(f.algorithm=c,f.algorithm.length=f.data.length<<3,f.extractable=d,f.usages=e,f.algorithm.length){case 128:case 192:case 256:break;default:throw new bP("keyData: Is wrong key length")}return f}static async encrypt(a,b,c){switch(a.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(a,b,c_.Buffer.from(c));case"AES-CTR":return this.encryptAesCTR(a,b,c_.Buffer.from(c));case"AES-GCM":return this.encryptAesGCM(a,b,c_.Buffer.from(c));case"AES-KW":return this.encryptAesKW(a,b,c_.Buffer.from(c));case"AES-ECB":return this.encryptAesECB(a,b,c_.Buffer.from(c));default:throw new bP("algorithm: Is not recognized")}}static async decrypt(a,b,c){if(!(b instanceof c7))throw Error("key: Is not AesCryptoKey");switch(a.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(a,b,c_.Buffer.from(c));case"AES-CTR":return this.decryptAesCTR(a,b,c_.Buffer.from(c));case"AES-GCM":return this.decryptAesGCM(a,b,c_.Buffer.from(c));case"AES-KW":return this.decryptAesKW(a,b,c_.Buffer.from(c));case"AES-ECB":return this.decryptAesECB(a,b,c_.Buffer.from(c));default:throw new bP("algorithm: Is not recognized")}}static async encryptAesCBC(a,b,c){let d=c1().createCipheriv(`aes-${b.algorithm.length}-cbc`,b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async decryptAesCBC(a,b,c){let d=c1().createDecipheriv(`aes-${b.algorithm.length}-cbc`,b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async encryptAesCTR(a,b,c){let d=c1().createCipheriv(`aes-${b.algorithm.length}-ctr`,b.data,c_.Buffer.from(a.counter)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async decryptAesCTR(a,b,c){let d=c1().createDecipheriv(`aes-${b.algorithm.length}-ctr`,b.data,new Uint8Array(a.counter)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async encryptAesGCM(a,b,c){let d=c1().createCipheriv(`aes-${b.algorithm.length}-gcm`,b.data,c_.Buffer.from(a.iv),{authTagLength:(a.tagLength||128)>>3});a.additionalData&&d.setAAD(c_.Buffer.from(a.additionalData));let e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final(),d.getAuthTag()])).buffer}static async decryptAesGCM(a,b,c){let d=(a.tagLength||128)>>3,e=c1().createDecipheriv(`aes-${b.algorithm.length}-gcm`,b.data,new Uint8Array(a.iv),{authTagLength:d}),f=c.slice(0,c.length-d),g=c.slice(c.length-d);a.additionalData&&e.setAAD(c_.Buffer.from(a.additionalData)),e.setAuthTag(g);let h=e.update(f);return new Uint8Array(h=c_.Buffer.concat([h,e.final()])).buffer}static async encryptAesKW(a,b,c){let d=c1().createCipheriv(`id-aes${b.algorithm.length}-wrap`,b.data,this.AES_KW_IV),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async decryptAesKW(a,b,c){let d=c1().createDecipheriv(`id-aes${b.algorithm.length}-wrap`,b.data,this.AES_KW_IV),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async encryptAesECB(a,b,c){let d=c1().createCipheriv(`aes-${b.algorithm.length}-ecb`,b.data,new Uint8Array(0)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async decryptAesECB(a,b,c){let d=c1().createDecipheriv(`aes-${b.algorithm.length}-ecb`,b.data,new Uint8Array(0)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}}c8.AES_KW_IV=c_.Buffer.from("A6A6A6A6A6A6A6A6","hex");let c9=new WeakMap;function da(a){let b=c9.get(a);if(!b)throw new bP("Cannot get CryptoKey from secure storage");return b}function db(a){let b=b6.create(a.algorithm,a.type,a.extractable,a.usages);return Object.freeze(b),c9.set(b,a),b}class dc extends bU{async onGenerateKey(a,b,c){return db(await c8.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c8.encrypt(a,da(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c8.decrypt(a,da(b),new Uint8Array(c))}async onExportKey(a,b){return c8.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await c8.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof c7))throw TypeError("key: Is not a AesCryptoKey")}}let dd=c_.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),de=c_.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);function df(a){let b=c_.Buffer.alloc(a.length),c=a.length-1;for(let d=0;d<c;d++)b[d]=a[d]<<1,128&a[d+1]&&(b[d]+=1);return b[c]=a[c]<<1,b}function dg(a,b){let c=Math.min(a.length,b.length),d=c_.Buffer.alloc(c);for(let e=0;e<c;e++)d[e]=a[e]^b[e];return d}function dh(a,b){let c=c1().createCipheriv(`aes${a.length<<3}`,a,dd),d=c.update(b);return c.final(),d}function di(a,b){let c=c_.Buffer.alloc(16),d=16*b;return a.copy(c,0,d,d+16),c}class dj extends bV{async onGenerateKey(a,b,c){return db(await c8.generateKey({name:this.name,length:a.length},b,c))}async onSign(a,b,c){return new Uint8Array(function(a,b){let c,d,e=function(a){let b=dh(a,dd),c=df(b);128&b[0]&&(c=dg(c,de));let d=df(c);return 128&c[0]&&(d=dg(d,de)),{subkey1:c,subkey2:d}}(a),f=Math.ceil(b.length/16);0===f?(f=1,c=!1):c=b.length%16==0;let g=f-1;d=c?dg(di(b,g),e.subkey1):dg(function(a,b){let c=c_.Buffer.alloc(16),d=16*b,e=a.length;return c.fill(0),a.copy(c,0,d,e),c[e-d]=128,c}(b,g),e.subkey2);let h=dd;for(let c=0;c<g;c++)h=dh(a,dg(h,di(b,c)));return dh(a,dg(d,h))}(da(b).data,c_.Buffer.from(c))).buffer}async onVerify(a,b,c,d){let e=await this.sign(a,b,d);return 0===c_.Buffer.from(c).compare(c_.Buffer.from(e))}async onExportKey(a,b){return c8.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await c8.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof c7))throw TypeError("key: Is not a AesCryptoKey")}}class dk extends bW{async onGenerateKey(a,b,c){return db(await c8.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c8.encrypt(a,da(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c8.decrypt(a,da(b),new Uint8Array(c))}async onExportKey(a,b){return c8.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await c8.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof c7))throw TypeError("key: Is not a AesCryptoKey")}}class dl extends bY{async onGenerateKey(a,b,c){return db(await c8.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c8.encrypt(a,da(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c8.decrypt(a,da(b),new Uint8Array(c))}async onExportKey(a,b){return c8.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await c8.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof c7))throw TypeError("key: Is not a AesCryptoKey")}}class dm extends bZ{async onGenerateKey(a,b,c){return db(await c8.generateKey({name:this.name,length:a.length},b,c))}async onExportKey(a,b){return c8.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await c8.importKey(a,b,{name:c.name},d,e))}async onEncrypt(a,b,c){return c8.encrypt(a,da(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c8.decrypt(a,da(b),new Uint8Array(c))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof c7))throw TypeError("key: Is not a AesCryptoKey")}}class dn extends bX{async onGenerateKey(a,b,c){return db(await c8.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c8.encrypt(a,da(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c8.decrypt(a,da(b),new Uint8Array(c))}async onExportKey(a,b){return c8.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await c8.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof c7))throw TypeError("key: Is not a AesCryptoKey")}}class dp extends c5{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new bN("Unsupported algorithm name")}}set alg(a){}}br([bL({name:"k",converter:c3})],dp.prototype,"data",void 0);class dq{static async generateKey(a,b,c){let d=new dp;return d.algorithm=a,d.extractable=b,d.usages=c,d.data=c1().randomBytes(a.length>>3),d}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bJ.toJSON(b);case"raw":return new Uint8Array(b.data).buffer;default:throw new bP("format: Must be 'jwk' or 'raw'")}}static async importKey(a,b,c,d,e){let f;switch(a.toLowerCase()){case"jwk":f=bK.fromJSON(b,{targetSchema:dp});break;case"raw":(f=new dp).data=c_.Buffer.from(b);break;default:throw new bP("format: Must be 'jwk' or 'raw'")}return f.algorithm=c,f.extractable=d,f.usages=e,f}static async encrypt(a,b,c){switch(a.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(a,b,c_.Buffer.from(c));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(a,b,c_.Buffer.from(c));default:throw new bP("algorithm: Is not recognized")}}static async decrypt(a,b,c){if(!(b instanceof dp))throw Error("key: Is not DesCryptoKey");switch(a.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(a,b,c_.Buffer.from(c));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(a,b,c_.Buffer.from(c));default:throw new bP("algorithm: Is not recognized")}}static async encryptDesCBC(a,b,c){let d=c1().createCipheriv("des-cbc",b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async decryptDesCBC(a,b,c){let d=c1().createDecipheriv("des-cbc",b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async encryptDesEDE3CBC(a,b,c){let d=c1().createCipheriv("des-ede3-cbc",b.data,c_.Buffer.from(a.iv)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}static async decryptDesEDE3CBC(a,b,c){let d=c1().createDecipheriv("des-ede3-cbc",b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c_.Buffer.concat([e,d.final()])).buffer}}class dr extends b${constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(a,b,c){return db(await dq.generateKey({name:this.name,length:this.keySizeBits},b,c))}async onEncrypt(a,b,c){return dq.encrypt(a,da(b),new Uint8Array(c))}async onDecrypt(a,b,c){return dq.decrypt(a,da(b),new Uint8Array(c))}async onExportKey(a,b){return dq.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){let f=await dq.importKey(a,b,{name:this.name,length:this.keySizeBits},d,e);if(f.data.length!==this.keySizeBits>>3)throw new bP("keyData: Wrong key size");return db(f)}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof dp))throw TypeError("key: Is not a DesCryptoKey")}}class ds extends b${constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(a,b,c){return db(await dq.generateKey({name:this.name,length:this.keySizeBits},b,c))}async onEncrypt(a,b,c){return dq.encrypt(a,da(b),new Uint8Array(c))}async onDecrypt(a,b,c){return dq.decrypt(a,da(b),new Uint8Array(c))}async onExportKey(a,b){return dq.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){let f=await dq.importKey(a,b,{name:this.name,length:this.keySizeBits},d,e);if(f.data.length!==this.keySizeBits>>3)throw new bP("keyData: Wrong key size");return db(f)}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof dp))throw TypeError("key: Is not a DesCryptoKey")}}function dt(a){switch(a.name.toUpperCase()){case"RSA-OAEP":{let b=/(\d+)$/.exec(a.hash.name)[1];return`RSA-OAEP${"1"!==b?`-${b}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(a.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(a.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new bP("algorithm: Is not recognized")}}class du extends c6{constructor(){super(...arguments),this.type="private"}getKey(){let a=bo.parse(this.data,cM.PrivateKeyInfo);return bo.parse(a.privateKey,cM.RsaPrivateKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"RSA",alg:dt(this.algorithm),key_ops:this.usages,ext:this.extractable},bJ.toJSON(a))}fromJSON(a){let b=bK.fromJSON(a,{targetSchema:cM.RsaPrivateKey}),c=new cM.PrivateKeyInfo;c.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",c.privateKeyAlgorithm.parameters=null,c.privateKey=bp.serialize(b),this.data=c_.Buffer.from(bp.serialize(c))}}class dv extends c6{constructor(){super(...arguments),this.type="public"}getKey(){let a=bo.parse(this.data,cM.PublicKeyInfo);return bo.parse(a.publicKey,cM.RsaPublicKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"RSA",alg:dt(this.algorithm),key_ops:this.usages,ext:this.extractable},bJ.toJSON(a))}fromJSON(a){let b=bK.fromJSON(a,{targetSchema:cM.RsaPublicKey}),c=new cM.PublicKeyInfo;c.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",c.publicKeyAlgorithm.parameters=null,c.publicKey=bp.serialize(b),this.data=c_.Buffer.from(bp.serialize(c))}}class dw{static async generateKey(a,b,c){let d=new du;d.algorithm=a,d.extractable=b,d.usages=c.filter(a=>-1!==this.privateKeyUsages.indexOf(a));let e=new dv;e.algorithm=a,e.extractable=!0,e.usages=c.filter(a=>-1!==this.publicKeyUsages.indexOf(a));let f=c_.Buffer.concat([c_.Buffer.alloc(4-a.publicExponent.byteLength,0),c_.Buffer.from(a.publicExponent)]).readInt32BE(0),g=c1().generateKeyPairSync("rsa",{modulusLength:a.modulusLength,publicExponent:f,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return d.data=g.privateKey,e.data=g.publicKey,{privateKey:d,publicKey:e}}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bJ.toJSON(b);case"pkcs8":case"spki":return new Uint8Array(b.data).buffer;default:throw new bP("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(a,b,c,d,e){switch(a.toLowerCase()){case"jwk":if(b.d){let a=bK.fromJSON(b,{targetSchema:cM.RsaPrivateKey});return this.importPrivateKey(a,c,d,e)}{let a=bK.fromJSON(b,{targetSchema:cM.RsaPublicKey});return this.importPublicKey(a,c,d,e)}case"spki":{let a=bo.parse(new Uint8Array(b),cM.PublicKeyInfo),f=bo.parse(a.publicKey,cM.RsaPublicKey);return this.importPublicKey(f,c,d,e)}case"pkcs8":{let a=bo.parse(new Uint8Array(b),cM.PrivateKeyInfo),f=bo.parse(a.privateKey,cM.RsaPrivateKey);return this.importPrivateKey(f,c,d,e)}default:throw new bP("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(a,b,c){switch(a.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(a,b,c);default:throw new bP("algorithm: Is not recognized")}}static async verify(a,b,c,d){switch(a.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(a,b,d,c);default:throw new bP("algorithm: Is not recognized")}}static async encrypt(a,b,c){if("RSA-OAEP"===a.name.toUpperCase())return this.encryptOAEP(a,b,c);throw new bP("algorithm: Is not recognized")}static async decrypt(a,b,c){if("RSA-OAEP"===a.name.toUpperCase())return this.decryptOAEP(a,b,c);throw new bP("algorithm: Is not recognized")}static importPrivateKey(a,b,c,d){let e=new cM.PrivateKeyInfo;e.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",e.privateKeyAlgorithm.parameters=null,e.privateKey=bp.serialize(a);let f=new du;return f.data=c_.Buffer.from(bp.serialize(e)),f.algorithm=Object.assign({},b),f.algorithm.publicExponent=new Uint8Array(a.publicExponent),f.algorithm.modulusLength=a.modulus.byteLength<<3,f.extractable=c,f.usages=d,f}static importPublicKey(a,b,c,d){let e=new cM.PublicKeyInfo;e.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",e.publicKeyAlgorithm.parameters=null,e.publicKey=bp.serialize(a);let f=new dv;return f.data=c_.Buffer.from(bp.serialize(e)),f.algorithm=Object.assign({},b),f.algorithm.publicExponent=new Uint8Array(a.publicExponent),f.algorithm.modulusLength=a.modulus.byteLength<<3,f.extractable=c,f.usages=d,f}static getCryptoAlgorithm(a){switch(a.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new bP("algorithm.hash: Is not recognized")}}static signRsa(a,b,c){let d=this.getCryptoAlgorithm(b.algorithm),e=c1().createSign(d);e.update(c_.Buffer.from(c)),b.pem||(b.pem=`-----BEGIN PRIVATE KEY-----
${b.data.toString("base64")}
-----END PRIVATE KEY-----`);let f={key:b.pem};return"RSA-PSS"===a.name.toUpperCase()&&(f.padding=c1().constants.RSA_PKCS1_PSS_PADDING,f.saltLength=a.saltLength),new Uint8Array(e.sign(f)).buffer}static verifySSA(a,b,c,d){let e=this.getCryptoAlgorithm(b.algorithm),f=c1().createVerify(e);f.update(c_.Buffer.from(c)),b.pem||(b.pem=`-----BEGIN PUBLIC KEY-----
${b.data.toString("base64")}
-----END PUBLIC KEY-----`);let g={key:b.pem};return"RSA-PSS"===a.name.toUpperCase()&&(g.padding=c1().constants.RSA_PKCS1_PSS_PADDING,g.saltLength=a.saltLength),f.verify(g,d)}static encryptOAEP(a,b,c){let d={key:`-----BEGIN PUBLIC KEY-----
${b.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:c1().constants.RSA_PKCS1_OAEP_PADDING};return a.label,new Uint8Array(c1().publicEncrypt(d,c)).buffer}static decryptOAEP(a,b,c){let d={key:`-----BEGIN PRIVATE KEY-----
${b.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:c1().constants.RSA_PKCS1_OAEP_PADDING};return a.label,new Uint8Array(c1().privateDecrypt(d,c)).buffer}}dw.publicKeyUsages=["verify","encrypt","wrapKey"],dw.privateKeyUsages=["sign","decrypt","unwrapKey"];class dx extends b0{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(a,b,c){let d=await dw.generateKey({...a,name:this.name},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onSign(a,b,c){return dw.sign(a,da(b),new Uint8Array(c))}async onVerify(a,b,c,d){return dw.verify(a,da(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return dw.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dw.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=da(a);if(!(c instanceof du||c instanceof dv))throw TypeError("key: Is not RSA CryptoKey")}}class dy extends b1{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(a,b,c){let d=await dw.generateKey({...a,name:this.name},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onSign(a,b,c){return dw.sign(a,da(b),new Uint8Array(c))}async onVerify(a,b,c,d){return dw.verify(a,da(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return dw.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dw.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=da(a);if(!(c instanceof du||c instanceof dv))throw TypeError("key: Is not RSA CryptoKey")}}class dz{static size(a){switch(a.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(a){switch(a.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(a,b){let c=this.getAlgorithmName(a);return new Uint8Array(c1().createHash(c).update(c_.Buffer.from(b)).digest()).buffer}}class dA extends b2{async onGenerateKey(a,b,c){let d=await dw.generateKey({...a,name:this.name},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onEncrypt(a,b,c){let d=da(b),e=new Uint8Array(c),f=Math.ceil(d.algorithm.modulusLength>>3),g=dz.size(d.algorithm.hash)>>3,h=e.byteLength,i=f-h-2*g-2;if(h>f-2*g-2)throw Error("Data too large");let k=new Uint8Array(f),l=k.subarray(1,g+1),m=k.subarray(g+1);m.set(e,g+i+1);let n=c1().createHash(d.algorithm.hash.name.replace("-","")).update(j.toUint8Array(a.label||new Uint8Array(0))).digest();m.set(n,0),m[g+i]=1,c1().randomFillSync(l);let o=this.mgf1(d.algorithm.hash,l,m.length);for(let a=0;a<m.length;a++)m[a]^=o[a];let p=this.mgf1(d.algorithm.hash,m,l.length);for(let a=0;a<l.length;a++)l[a]^=p[a];return d.pem||(d.pem=`-----BEGIN PUBLIC KEY-----
${d.data.toString("base64")}
-----END PUBLIC KEY-----`),new Uint8Array(c1().publicEncrypt({key:d.pem,padding:c1().constants.RSA_NO_PADDING},c_.Buffer.from(k))).buffer}async onDecrypt(a,b,c){let d=da(b),e=Math.ceil(d.algorithm.modulusLength>>3),f=dz.size(d.algorithm.hash)>>3;if(c.byteLength!==e)throw Error("Bad data");d.pem||(d.pem=`-----BEGIN PRIVATE KEY-----
${d.data.toString("base64")}
-----END PRIVATE KEY-----`);let g=c1().privateDecrypt({key:d.pem,padding:c1().constants.RSA_NO_PADDING},c_.Buffer.from(c)),h=g[0],i=g.subarray(1,f+1),k=g.subarray(f+1);if(0!==h)throw Error("Decryption failed");let l=this.mgf1(d.algorithm.hash,k,i.length);for(let a=0;a<i.length;a++)i[a]^=l[a];let m=this.mgf1(d.algorithm.hash,i,k.length);for(let a=0;a<k.length;a++)k[a]^=m[a];let n=c1().createHash(d.algorithm.hash.name.replace("-","")).update(j.toUint8Array(a.label||new Uint8Array(0))).digest();for(let a=0;a<f;a++)if(n[a]!==k[a])throw Error("Decryption failed");let o=f;for(;o<k.length;o++){let a=k[o];if(1===a)break;if(0!==a)throw Error("Decryption failed")}if(o===k.length)throw Error("Decryption failed");return new Uint8Array(g=k.subarray(o+1)).buffer}async onExportKey(a,b){return dw.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dw.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=da(a);if(!(c instanceof du||c instanceof dv))throw TypeError("key: Is not RSA CryptoKey")}mgf1(a,b,c=0){let d=dz.size(a)>>3,e=new Uint8Array(c),f=new Uint8Array(4),g=Math.ceil(c/d);for(let c=0;c<g;c++){f[0]=c>>>24,f[1]=c>>>16&255,f[2]=c>>>8&255,f[3]=255&c;let g=e.subarray(c*d),h=c1().createHash(a.name.replace("-","")).update(b).update(f).digest();h.length>g.length&&(h=h.subarray(0,g.length)),g.set(h)}return e}}class dB extends bS{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(a,b,c){let d=await dw.generateKey({...a,name:this.name},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"publicExponent"),!(a.publicExponent&&a.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let b=q.ToBase64(a.publicExponent);if("Aw=="!==b&&"AQAB"!==b)throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(a,"modulusLength"),a.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(a,b,c){let d=this.toCryptoOptions(b),e=c1().publicEncrypt(d,new Uint8Array(c));return new Uint8Array(e).buffer}async onDecrypt(a,b,c){let d=this.toCryptoOptions(b),e=c1().privateDecrypt(d,new Uint8Array(c));return new Uint8Array(e).buffer}async onExportKey(a,b){return dw.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dw.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=da(a);if(!(c instanceof du||c instanceof dv))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(a){let b=a.type.toUpperCase();return{key:`-----BEGIN ${b} KEY-----
${da(a).data.toString("base64")}
-----END ${b} KEY-----`,padding:c1().constants.RSA_PKCS1_PADDING}}}let dC={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function dD(a){let b=dC[a];if(!b)throw new bP(`Cannot convert WebCrypto named curve '${a}' to OID`);return b}class dE extends c6{constructor(){super(...arguments),this.type="private"}getKey(){let a=bo.parse(this.data,cM.PrivateKeyInfo);return bo.parse(a.privateKey,cM.EcPrivateKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},bJ.toJSON(a))}fromJSON(a){if(!a.crv)throw new bP("Cannot get named curve from JWK. Property 'crv' is required");let b=new cM.PrivateKeyInfo;b.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",b.privateKeyAlgorithm.parameters=bp.serialize(new cM.ObjectIdentifier(dD(a.crv)));let c=bK.fromJSON(a,{targetSchema:cM.EcPrivateKey});return b.privateKey=bp.serialize(c),this.data=c_.Buffer.from(bp.serialize(b)),this}}class dF extends c6{constructor(){super(...arguments),this.type="public"}getKey(){let a=bo.parse(this.data,cM.PublicKeyInfo);return new cM.EcPublicKey(a.publicKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},bJ.toJSON(a))}fromJSON(a){if(!a.crv)throw new bP("Cannot get named curve from JWK. Property 'crv' is required");let b=bK.fromJSON(a,{targetSchema:cM.EcPublicKey}),c=new cM.PublicKeyInfo;return c.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",c.publicKeyAlgorithm.parameters=bp.serialize(new cM.ObjectIdentifier(dD(a.crv))),c.publicKey=bp.toASN(b).valueHex,this.data=c_.Buffer.from(bp.serialize(c)),this}}class dG extends bS{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(a,b){return dz.digest(a,b)}}class dH extends bS{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(a,b){return dz.digest(a,b)}}class dI extends bS{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(a,b){return dz.digest(a,b)}}class dJ extends bS{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(a,b){return dz.digest(a,b)}}class dK extends bS{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(a,b){return dz.digest(a,b)}}class dL extends bS{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(a,b){return dz.digest(a,b)}}class dM extends bS{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(a,b){return dz.digest(a,b)}}class dN{static async generateKey(a,b,c){let d=new dE;d.algorithm=a,d.extractable=b,d.usages=c.filter(a=>-1!==this.privateKeyUsages.indexOf(a));let e=new dF;e.algorithm=a,e.extractable=!0,e.usages=c.filter(a=>-1!==this.publicKeyUsages.indexOf(a));let f=c1().generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(a.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return d.data=f.privateKey,e.data=f.publicKey,{privateKey:d,publicKey:e}}static async sign(a,b,c){let d=dz.getAlgorithmName(a.hash),e=c1().createSign(d);e.update(c_.Buffer.from(c)),b.pem||(b.pem=`-----BEGIN PRIVATE KEY-----
${b.data.toString("base64")}
-----END PRIVATE KEY-----`);let f={key:b.pem},g=e.sign(f),h=bo.parse(g,cM.EcDsaSignature);return cm.encodeSignature(h,cN.get(b.algorithm.namedCurve).size).buffer}static async verify(a,b,c,d){let e=dz.getAlgorithmName(a.hash),f=c1().createVerify(e);f.update(c_.Buffer.from(d)),b.pem||(b.pem=`-----BEGIN PUBLIC KEY-----
${b.data.toString("base64")}
-----END PUBLIC KEY-----`);let g={key:b.pem},h=new cM.EcDsaSignature,i=cN.get(b.algorithm.namedCurve),k=cm.decodeSignature(c,i.size);h.r=j.toArrayBuffer(k.r),h.s=j.toArrayBuffer(k.s);let l=c_.Buffer.from(bp.serialize(h));return f.verify(g,l)}static async deriveBits(a,b,c){let d=this.getOpenSSLNamedCurve(b.algorithm.namedCurve),e=c1().createECDH(d),f=bo.parse(b.data,cM.PrivateKeyInfo),g=bo.parse(f.privateKey,cM.EcPrivateKey);e.setPrivateKey(c_.Buffer.from(g.privateKey));let h=bo.parse(a.public.data,cM.PublicKeyInfo),i=e.computeSecret(c_.Buffer.from(h.publicKey));return null===c?i:new Uint8Array(i).buffer.slice(0,c>>3)}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bJ.toJSON(b);case"pkcs8":case"spki":return new Uint8Array(b.data).buffer;case"raw":return bo.parse(b.data,cM.PublicKeyInfo).publicKey;default:throw new bP("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(a,b,c,d,e){switch(a.toLowerCase()){case"jwk":if(b.d){let a=bK.fromJSON(b,{targetSchema:cM.EcPrivateKey});return this.importPrivateKey(a,c,d,e)}{let a=bK.fromJSON(b,{targetSchema:cM.EcPublicKey});return this.importPublicKey(a,c,d,e)}case"raw":{let a=new cM.EcPublicKey(b);return this.importPublicKey(a,c,d,e)}case"spki":{let a=bo.parse(new Uint8Array(b),cM.PublicKeyInfo),f=new cM.EcPublicKey(a.publicKey);return this.assertKeyParameters(a.publicKeyAlgorithm.parameters,c.namedCurve),this.importPublicKey(f,c,d,e)}case"pkcs8":{let a=bo.parse(new Uint8Array(b),cM.PrivateKeyInfo),f=bo.parse(a.privateKey,cM.EcPrivateKey);return this.assertKeyParameters(a.privateKeyAlgorithm.parameters,c.namedCurve),this.importPrivateKey(f,c,d,e)}default:throw new bP("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(a,b){if(!a)throw new bM("Key info doesn't have required parameters");let c="";try{c=bo.parse(a,cM.ObjectIdentifier).value}catch(a){throw new bM("Cannot read key info parameters")}if(dD(b)!==c)throw new bM("Key info parameter doesn't match to named curve")}static async importPrivateKey(a,b,c,d){let e=new cM.PrivateKeyInfo;e.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",e.privateKeyAlgorithm.parameters=bp.serialize(new cM.ObjectIdentifier(dD(b.namedCurve))),e.privateKey=bp.serialize(a);let f=new dE;return f.data=c_.Buffer.from(bp.serialize(e)),f.algorithm=Object.assign({},b),f.extractable=c,f.usages=d,f}static async importPublicKey(a,b,c,d){let e=new cM.PublicKeyInfo;e.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let f=dD(b.namedCurve);e.publicKeyAlgorithm.parameters=bp.serialize(new cM.ObjectIdentifier(f)),e.publicKey=a.value;let g=new dF;return g.data=c_.Buffer.from(bp.serialize(e)),g.algorithm=Object.assign({},b),g.extractable=c,g.usages=d,g}static getOpenSSLNamedCurve(a){switch(a.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return a}}}dN.publicKeyUsages=["verify"],dN.privateKeyUsages=["sign","deriveKey","deriveBits"];class dO extends b4{constructor(){super(...arguments),this.namedCurves=cN.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(a,b,c){let d=await dN.generateKey({...a,name:this.name},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onSign(a,b,c){return dN.sign(a,da(b),new Uint8Array(c))}async onVerify(a,b,c,d){return dN.verify(a,da(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return dN.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dN.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=da(a);if(!(c instanceof dE||c instanceof dF))throw TypeError("key: Is not EC CryptoKey")}}class dP extends b7{constructor(){super(...arguments),this.namedCurves=cN.names}async onGenerateKey(a,b,c){let d=await dN.generateKey({...a,name:this.name},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onExportKey(a,b){return dN.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dN.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=da(a);if(!(c instanceof dE||c instanceof dF))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(a,b,c){return await dN.deriveBits({...a,public:da(a.public)},da(b),c)}}let dQ={[cM.idEd448]:"Ed448",ed448:cM.idEd448,[cM.idX448]:"X448",x448:cM.idX448,[cM.idEd25519]:"Ed25519",ed25519:cM.idEd25519,[cM.idX25519]:"X25519",x25519:cM.idX25519};function dR(a){let b=dQ[a.toLowerCase()];if(!b)throw new bP(`Cannot convert WebCrypto named curve '${a}' to OID`);return b}class dS extends c6{constructor(){super(...arguments),this.type="private"}getKey(){let a=bo.parse(this.data,cM.PrivateKeyInfo);return bo.parse(a.privateKey,cM.CurvePrivateKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},bJ.toJSON(a))}fromJSON(a){if(!a.crv)throw new bP("Cannot get named curve from JWK. Property 'crv' is required");let b=new cM.PrivateKeyInfo;b.privateKeyAlgorithm.algorithm=dR(a.crv);let c=bK.fromJSON(a,{targetSchema:cM.CurvePrivateKey});return b.privateKey=bp.serialize(c),this.data=c_.Buffer.from(bp.serialize(b)),this}}class dT extends c6{constructor(){super(...arguments),this.type="public"}getKey(){return bo.parse(this.data,cM.PublicKeyInfo).publicKey}toJSON(){let a=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},{x:q.ToBase64Url(a)})}fromJSON(a){if(!a.crv)throw new bP("Cannot get named curve from JWK. Property 'crv' is required");if(!a.x)throw new bP("Cannot get property from JWK. Property 'x' is required");let b=new cM.PublicKeyInfo;return b.publicKeyAlgorithm.algorithm=dR(a.crv),b.publicKey=q.FromBase64Url(a.x),this.data=c_.Buffer.from(bp.serialize(b)),this}}class dU{static async generateKey(a,b,c){let d=new dS;d.algorithm=a,d.extractable=b,d.usages=c.filter(a=>-1!==this.privateKeyUsages.indexOf(a));let e=new dT;e.algorithm=a,e.extractable=!0,e.usages=c.filter(a=>-1!==this.publicKeyUsages.indexOf(a));let f=a.namedCurve.toLowerCase(),g=c1().generateKeyPairSync(f,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return d.data=g.privateKey,e.data=g.publicKey,{privateKey:d,publicKey:e}}static async sign(a,b,c){b.pem||(b.pem=`-----BEGIN PRIVATE KEY-----
${b.data.toString("base64")}
-----END PRIVATE KEY-----`);let d={key:b.pem},e=c1().sign(null,c_.Buffer.from(c),d);return j.toArrayBuffer(e)}static async verify(a,b,c,d){b.pem||(b.pem=`-----BEGIN PUBLIC KEY-----
${b.data.toString("base64")}
-----END PUBLIC KEY-----`);let e={key:b.pem};return c1().verify(null,c_.Buffer.from(d),e,c_.Buffer.from(c))}static async deriveBits(a,b,c){let d=c1().createPublicKey({key:a.public.data,format:"der",type:"spki"}),e=c1().createPrivateKey({key:b.data,format:"der",type:"pkcs8"});return new Uint8Array(c1().diffieHellman({publicKey:d,privateKey:e})).buffer.slice(0,c>>3)}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bJ.toJSON(b);case"pkcs8":case"spki":return new Uint8Array(b.data).buffer;case"raw":return bo.parse(b.data,cM.PublicKeyInfo).publicKey;default:throw new bP("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(a,b,c,d,e){switch(a.toLowerCase()){case"jwk":if(b.d){let a=bK.fromJSON(b,{targetSchema:cM.CurvePrivateKey});return this.importPrivateKey(a,c,d,e)}if(!b.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(q.FromBase64Url(b.x),c,d,e);case"raw":return this.importPublicKey(b,c,d,e);case"spki":{let a=bo.parse(new Uint8Array(b),cM.PublicKeyInfo);return this.importPublicKey(a.publicKey,c,d,e)}case"pkcs8":{let a=bo.parse(new Uint8Array(b),cM.PrivateKeyInfo),f=bo.parse(a.privateKey,cM.CurvePrivateKey);return this.importPrivateKey(f,c,d,e)}default:throw new bP("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(a,b,c,d){let e=new dS;return e.fromJSON({crv:b.namedCurve,d:q.ToBase64Url(a.d)}),e.algorithm=Object.assign({},b),e.extractable=c,e.usages=d,e}static async importPublicKey(a,b,c,d){let e=new dT;return e.fromJSON({crv:b.namedCurve,x:q.ToBase64Url(a)}),e.algorithm=Object.assign({},b),e.extractable=c,e.usages=d,e}}dU.publicKeyUsages=["verify"],dU.privateKeyUsages=["sign","deriveKey","deriveBits"];class dV extends b9{async onGenerateKey(a,b,c){let d=await dU.generateKey({name:this.name,namedCurve:a.namedCurve.replace(/^ed/i,"Ed")},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onSign(a,b,c){return dU.sign(a,da(b),new Uint8Array(c))}async onVerify(a,b,c,d){return dU.verify(a,da(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return dU.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dU.importKey(a,b,{...c,name:this.name},d,e))}}class dW extends b8{async onGenerateKey(a,b,c){let d=await dU.generateKey({name:this.name,namedCurve:a.namedCurve.toUpperCase()},b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onDeriveBits(a,b,c){return await dU.deriveBits({...a,public:da(a.public)},da(b),c)}async onExportKey(a,b){return dU.exportKey(a,da(b))}async onImportKey(a,b,c,d,e){return db(await dU.importKey(a,b,{...c,name:this.name},d,e))}}class dX extends c4{constructor(a,b,c,d){super(),this.algorithm=a,this.extractable=b,this.usages=c,this.data=Buffer.from(d)}toJWK(){return{kty:"OKP",crv:this.algorithm.name,key_ops:this.usages,ext:this.extractable}}}class dY extends dX{constructor(){super(...arguments),this.type="private"}toJWK(){let a=c1().createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"}),b=bR.toUint8Array(this.data.toString()),c=bq.parse(b,cM.PrivateKeyInfo),d=bq.parse(c.privateKey,cM.EdPrivateKey).value;return{...super.toJWK(),...a,d:Buffer.from(new Uint8Array(d)).toString("base64url")}}}class dZ extends dX{constructor(){super(...arguments),this.type="public"}toJWK(){let a=c1().createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"});return{...super.toJWK(),...a}}}class d${static async generateKey(a,b,c){let d=a.name.toLowerCase(),e=c1().generateKeyPairSync(d,{publicKeyEncoding:{format:"pem",type:"spki"},privateKeyEncoding:{format:"pem",type:"pkcs8"}}),f={name:"ed25519"===d?"Ed25519":"X25519"},g=c.filter(a=>this.privateKeyUsages.includes(a)),h=c.filter(a=>this.publicKeyUsages.includes(a));return{privateKey:new dY(f,b,g,e.privateKey),publicKey:new dZ(f,!0,h,e.publicKey)}}static async sign(a,b,c){let d=c1().sign(null,Buffer.from(c),b.data);return j.toArrayBuffer(d)}static async verify(a,b,c,d){return c1().verify(null,Buffer.from(d),b.data,c)}static async exportKey(a,b){switch(a){case"jwk":return b.toJWK();case"pkcs8":case"spki":return bR.toArrayBuffer(b.data.toString());case"raw":{let a=b.toJWK();return q.FromBase64Url(a.x)}default:return Promise.reject(new bP("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}static async importKey(a,b,c,d,e){switch(a){case"jwk":if(b.d){let a=new cM.EdPrivateKey;a.value=j.toArrayBuffer(Buffer.from(b.d,"base64url"));let f=new cM.PrivateKeyInfo;f.privateKeyAlgorithm.algorithm="ed25519"===c.name.toLowerCase()?cM.idEd25519:cM.idX25519,f.privateKey=bq.serialize(a);let g=bq.serialize(f);return new dY(c,d,e,bR.fromBufferSource(g,"PRIVATE KEY"))}if(b.x)return new dZ(c,d,e,c1().createPublicKey({format:"jwk",key:b}).export({format:"pem",type:"spki"}));throw new bP("keyData: Cannot import JWK. 'd' or 'x' must be presented");case"pkcs8":return new dY(c,d,e,bR.fromBufferSource(b,"PRIVATE KEY"));case"spki":return new dZ(c,d,e,bR.fromBufferSource(b,"PUBLIC KEY"));case"raw":{let a=c1().createPublicKey({format:"jwk",key:{kty:"OKP",crv:"ed25519"===c.name.toLowerCase()?"Ed25519":"X25519",x:q.ToBase64Url(b)}}).export({format:"pem",type:"spki"});return new dZ(c,d,e,a)}default:return Promise.reject(new bP("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}}d$.privateKeyUsages=["sign","deriveBits","deriveKey"],d$.publicKeyUsages=["verify"];class d_ extends cP{async onGenerateKey(a,b,c){let d=await d$.generateKey(a,b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onSign(a,b,c){let d=da(b);return d$.sign(a,d,new Uint8Array(c))}onVerify(a,b,c,d){let e=da(b);return d$.verify(a,e,new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){let c=da(b);return d$.exportKey(a,c)}async onImportKey(a,b,c,d,e){return db(await d$.importKey(a,b,c,d,e))}}class d0 extends cO{async onGenerateKey(a,b,c){let d=await d$.generateKey(a,b,c);return{privateKey:db(d.privateKey),publicKey:db(d.publicKey)}}async onDeriveBits(a,b,c){let d=da(b),e=da(a.public),f=c1().createPublicKey({key:e.data.toString(),format:"pem",type:"spki"}),g=c1().createPrivateKey({key:d.data.toString(),format:"pem",type:"pkcs8"});return new Uint8Array(c1().diffieHellman({publicKey:f,privateKey:g})).buffer.slice(0,c>>3)}async onExportKey(a,b){let c=da(b);return d$.exportKey(a,c)}async onImportKey(a,b,c,d,e){return db(await d$.importKey(a,b,c,d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof dX))throw TypeError("key: Is not a Ed25519CryptoKey")}}class d1 extends c4{}class d2 extends cR{async onDeriveBits(a,b,c){return new Promise((d,e)=>{let f=j.toArrayBuffer(a.salt),g=a.hash.name.replace("-","");c1().pbkdf2(da(b).data,c_.Buffer.from(f),a.iterations,c>>3,g,(a,b)=>{a?e(a):d(new Uint8Array(b).buffer)})})}async onImportKey(a,b,c,d,e){if("raw"===a){let a=new d1;return a.data=c_.Buffer.from(b),a.algorithm={name:this.name},a.extractable=!1,a.usages=e,db(a)}throw new bP("format: Must be 'raw'")}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof d1))throw TypeError("key: Is not PBKDF CryptoKey")}}class d3 extends c4{get alg(){let a=this.algorithm.hash.name.toUpperCase();return`HS${a.replace("SHA-","")}`}set alg(a){}}br([bL({name:"k",converter:c3})],d3.prototype,"data",void 0);class d4 extends cQ{async onGenerateKey(a,b,c){let d=(a.length||this.getDefaultLength(a.hash.name))>>3<<3,e=new d3;return e.algorithm={...a,length:d,name:this.name},e.extractable=b,e.usages=c,e.data=c1().randomBytes(d>>3),db(e)}async onSign(a,b,c){let d=dz.getAlgorithmName(b.algorithm.hash);return new Uint8Array(c1().createHmac(d,da(b).data).update(c_.Buffer.from(c)).digest()).buffer}async onVerify(a,b,c,d){let e=dz.getAlgorithmName(b.algorithm.hash);return 0===c1().createHmac(e,da(b).data).update(c_.Buffer.from(d)).digest().compare(c_.Buffer.from(c))}async onImportKey(a,b,c,d,e){let f;switch(a.toLowerCase()){case"jwk":f=bK.fromJSON(b,{targetSchema:d3});break;case"raw":(f=new d3).data=c_.Buffer.from(b);break;default:throw new bP("format: Must be 'jwk' or 'raw'")}return f.algorithm={hash:{name:c.hash.name},name:this.name,length:f.data.length<<3},f.extractable=d,f.usages=e,db(f)}async onExportKey(a,b){switch(a.toLowerCase()){case"jwk":return bJ.toJSON(da(b));case"raw":return new Uint8Array(da(b).data).buffer;default:throw new bP("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof d3))throw TypeError("key: Is not HMAC CryptoKey")}}class d5 extends c4{}class d6 extends cS{async onImportKey(a,b,c,d,e){if("raw"!==a.toLowerCase())throw new bP("Operation not supported");let f=new d5;return f.data=c_.Buffer.from(b),f.algorithm={name:this.name},f.extractable=d,f.usages=e,db(f)}async onDeriveBits(a,b,c){let d=a.hash.name.replace("-",""),e=c1().createHash(d).digest().length,f=c/8,g=j.toUint8Array(a.info),h=c1().createHmac(d,j.toUint8Array(a.salt)).update(j.toUint8Array(da(b).data)).digest(),i=[c_.Buffer.alloc(0)],k=Math.ceil(f/e)+1;for(let a=1;a<k;++a)i.push(c1().createHmac(d,h).update(c_.Buffer.concat([i[a-1],g,c_.Buffer.from([a])])).digest());return c_.Buffer.concat(i).slice(0,f)}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(da(a)instanceof d5))throw TypeError("key: Is not HKDF CryptoKey")}}class d7{static digest(a,b){return new Uint8Array(c1().createHash(a.name.toLowerCase(),{outputLength:a.length}).update(c_.Buffer.from(b)).digest()).buffer}}class d8 extends cU{async onDigest(a,b){return d7.digest(a,b)}}class d9 extends cV{async onDigest(a,b){return d7.digest(a,b)}}class ea extends c${constructor(){var a;super(),this.providers.set(new dc),this.providers.set(new dk),this.providers.set(new dl),this.providers.set(new dj),this.providers.set(new dm),this.providers.set(new dn),c1().getCiphers().includes("des-cbc")&&this.providers.set(new dr),this.providers.set(new ds),this.providers.set(new dx),this.providers.set(new dy),this.providers.set(new dA),this.providers.set(new dB),this.providers.set(new dO),this.providers.set(new dP),this.providers.set(new dG),this.providers.set(new dH),this.providers.set(new dI),this.providers.set(new dJ),this.providers.set(new d2),this.providers.set(new d4),this.providers.set(new d6);let b=null==(a=/^v(\d+)/.exec(c2.version))?void 0:a[1];b&&parseInt(b,10)>=12&&(this.providers.set(new d8),this.providers.set(new d9));let c=c1().getHashes();c.includes("sha3-256")&&this.providers.set(new dK),c.includes("sha3-384")&&this.providers.set(new dL),c.includes("sha3-512")&&this.providers.set(new dM),b&&parseInt(b,10)>=14&&(this.providers.set(new dV),this.providers.set(new dW),this.providers.set(new d_),this.providers.set(new d0))}}class eb extends cW{constructor(){super(...arguments),this.subtle=new ea}getRandomValues(a){if(!ArrayBuffer.isView(a))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let b=c_.Buffer.from(a.buffer,a.byteOffset,a.byteLength);return c1().randomFillSync(b),a}}},938:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},1842:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}},1886:a=>{"use strict";a.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},1945:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.calculateJwkThumbprintUri=b.calculateJwkThumbprint=void 0;let d=c(28162),e=c(67040),f=c(69817),g=c(74855),h=c(16217),i=(a,b)=>{if("string"!=typeof a||!a)throw new f.JWKInvalid(`${b} missing or invalid`)};async function j(a,b){let c;if(!(0,h.default)(a))throw TypeError("JWK must be an object");if("sha256"!==(b??="sha256")&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(a.kty){case"EC":i(a.crv,'"crv" (Curve) Parameter'),i(a.x,'"x" (X Coordinate) Parameter'),i(a.y,'"y" (Y Coordinate) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x,y:a.y};break;case"OKP":i(a.crv,'"crv" (Subtype of Key Pair) Parameter'),i(a.x,'"x" (Public Key) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x};break;case"RSA":i(a.e,'"e" (Exponent) Parameter'),i(a.n,'"n" (Modulus) Parameter'),c={e:a.e,kty:a.kty,n:a.n};break;case"oct":i(a.k,'"k" (Key Value) Parameter'),c={k:a.k,kty:a.kty};break;default:throw new f.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let j=g.encoder.encode(JSON.stringify(c));return(0,e.encode)(await (0,d.default)(b,j))}b.calculateJwkThumbprint=j,b.calculateJwkThumbprintUri=async function(a,b){b??="sha256";let c=await j(a,b);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${b.slice(-3)}:${c}`}},2099:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeGetTokenResponse=b.serializeGetTokenOptions=void 0,b.serializeGetTokenOptions=a=>({organization_id:a.organizationId,user_id:a.userId,scopes:a.scopes}),b.deserializeGetTokenResponse=a=>({token:a.token})},2140:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},2674:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},2678:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.bitLength=void 0;let d=c(69817),e=c(39469);function f(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new d.JOSENotSupported(`Unsupported JWE Algorithm: ${a}`)}}b.bitLength=f,b.default=a=>(0,e.default)(new Uint8Array(f(a)>>3))},2813:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateAuditLogEventOptions=void 0,b.serializeCreateAuditLogEventOptions=a=>({action:a.action,version:a.version,occurred_at:a.occurredAt.toISOString(),actor:a.actor,targets:a.targets,context:{location:a.context.location,user_agent:a.context.userAgent},metadata:a.metadata})},2914:(a,b)=>{"use strict";b.parse=function(a,b){if("string"!=typeof a)throw TypeError("argument str must be a string");for(var c={},d=(b||{}).decode||e,f=0;f<a.length;){var g=a.indexOf("=",f);if(-1===g)break;var h=a.indexOf(";",f);if(-1===h)h=a.length;else if(h<g){f=a.lastIndexOf(";",g-1)+1;continue}var i=a.slice(f,g).trim();if(void 0===c[i]){var j=a.slice(g+1,h).trim();34===j.charCodeAt(0)&&(j=j.slice(1,-1)),c[i]=function(a,b){try{return b(a)}catch(b){return a}}(j,d)}f=h+1}return c},b.serialize=function(a,b,e){var g=e||{},h=g.encode||f;if("function"!=typeof h)throw TypeError("option encode is invalid");if(!d.test(a))throw TypeError("argument name is invalid");var i=h(b);if(i&&!d.test(i))throw TypeError("argument val is invalid");var j=a+"="+i;if(null!=g.maxAge){var k=g.maxAge-0;if(isNaN(k)||!isFinite(k))throw TypeError("option maxAge is invalid");j+="; Max-Age="+Math.floor(k)}if(g.domain){if(!d.test(g.domain))throw TypeError("option domain is invalid");j+="; Domain="+g.domain}if(g.path){if(!d.test(g.path))throw TypeError("option path is invalid");j+="; Path="+g.path}if(g.expires){var l,m=g.expires;if(l=m,"[object Date]"!==c.call(l)&&!(l instanceof Date)||isNaN(m.valueOf()))throw TypeError("option expires is invalid");j+="; Expires="+m.toUTCString()}if(g.httpOnly&&(j+="; HttpOnly"),g.secure&&(j+="; Secure"),g.priority)switch("string"==typeof g.priority?g.priority.toLowerCase():g.priority){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(g.sameSite)switch("string"==typeof g.sameSite?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return j};var c=Object.prototype.toString,d=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function e(a){return -1!==a.indexOf("%")?decodeURIComponent(a):a}function f(a){return encodeURIComponent(a)}},3070:a=>{"use strict";a.exports=Math.max},3135:a=>{"use strict";a.exports=Object.getOwnPropertyDescriptor},4584:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},4815:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},f=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.UserManagement=void 0;let g=c(91499),h=f(c(34563)),i=c(70043),j=c(61324),k=c(46944),l=c(32863),m=c(23584),n=c(69091),o=c(28654),p=c(43460),q=c(95119),r=c(15258),s=c(46830),t=c(24347),u=c(70116),v=c(71619),w=c(25172),x=c(27845),y=c(39272),z=c(78250),A=c(84331),B=c(93561),C=c(57258);class D{constructor(a,b){this.workos=a;let{clientId:c}=a.options;this.clientId=c,this.ironSessionProvider=b}get jwks(){if(this.clientId)return null!=this._jwks||(this._jwks=(0,g.createRemoteJWKSet)(new URL(this.getJwksUrl(this.clientId)),{cooldownDuration:3e5})),this._jwks}loadSealedSession(a){return new C.CookieSession(this,a.sessionData,a.cookiePassword)}getUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/users/${a}`);return(0,p.deserializeUser)(b)})}getUserByExternalId(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/users/external_id/${a}`);return(0,p.deserializeUser)(b)})}listUsers(a){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,"/user_management/users",p.deserializeUser,a?(0,y.serializeListUsersOptions)(a):void 0)),a=>(0,j.fetchAndDeserialize)(this.workos,"/user_management/users",p.deserializeUser,a),a?(0,y.serializeListUsersOptions)(a):void 0)})}createUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/users",(0,p.serializeCreateUserOptions)(a));return(0,p.deserializeUser)(b)})}authenticateWithMagicAuth(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithMagicAuthOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithPassword(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithPasswordOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithCode(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithCodeOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithCodeAndVerifier(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithCodeAndVerifierOptions)(c));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithRefreshToken(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithRefreshTokenOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithTotp(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,p.serializeAuthenticateWithTotpOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithEmailVerification(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,q.serializeAuthenticateWithEmailVerificationOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithOrganizationSelection(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,r.serializeAuthenticateWithOrganizationSelectionOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,p.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithSessionCookie({sessionData:a,cookiePassword:b=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){if(!b)throw Error("Cookie password is required");if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");if(!a)return{authenticated:!1,reason:m.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};let c=yield this.ironSessionProvider.unsealData(a,{password:b});if(!c.accessToken)return{authenticated:!1,reason:m.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(c.accessToken)))return{authenticated:!1,reason:m.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:d,org_id:e,role:f,roles:h,permissions:i,entitlements:j,feature_flags:k}=(0,g.decodeJwt)(c.accessToken);return{authenticated:!0,sessionId:d,organizationId:e,role:f,roles:h,user:c.user,permissions:i,entitlements:j,featureFlags:k,accessToken:c.accessToken}})}isValidJwt(a){return d(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");try{return yield(0,g.jwtVerify)(a,this.jwks),!0}catch(a){return!1}})}refreshAndSealSessionData({sessionData:a,organizationId:b,cookiePassword:c=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){if(!c)throw Error("Cookie password is required");if(!a)return{authenticated:!1,reason:n.RefreshAndSealSessionDataFailureReason.NO_SESSION_COOKIE_PROVIDED};let d=yield this.ironSessionProvider.unsealData(a,{password:c});if(!d.refreshToken||!d.user)return{authenticated:!1,reason:n.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};let{org_id:e}=(0,g.decodeJwt)(d.accessToken);try{let{sealedSession:a}=yield this.authenticateWithRefreshToken({clientId:this.workos.clientId,refreshToken:d.refreshToken,organizationId:null!=b?b:e,session:{sealSession:!0,cookiePassword:c}});if(!a)return{authenticated:!1,reason:n.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};return{authenticated:!0,sealedSession:a}}catch(a){if(a instanceof i.OauthException&&(a.error===n.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||a.error===n.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||a.error===n.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:a.error};throw a}})}prepareAuthenticationResponse({authenticationResponse:a,session:b}){return d(this,void 0,void 0,function*(){return(null==b?void 0:b.sealSession)?Object.assign(Object.assign({},a),{sealedSession:yield this.sealSessionDataFromAuthenticationResponse({authenticationResponse:a,cookiePassword:b.cookiePassword})}):a})}sealSessionDataFromAuthenticationResponse({authenticationResponse:a,cookiePassword:b}){return d(this,void 0,void 0,function*(){if(!b)throw Error("Cookie password is required");let{org_id:c}=(0,g.decodeJwt)(a.accessToken),d={organizationId:c,user:a.user,accessToken:a.accessToken,refreshToken:a.refreshToken,impersonator:a.impersonator};return this.ironSessionProvider.sealData(d,{password:b})})}getSessionFromCookie({sessionData:a,cookiePassword:b=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){if(!b)throw Error("Cookie password is required");if(a)return this.ironSessionProvider.unsealData(a,{password:b})})}getEmailVerification(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/email_verification/${a}`);return(0,p.deserializeEmailVerification)(b)})}sendVerificationEmail({userId:a}){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/users/${a}/email_verification/send`,{});return{user:(0,p.deserializeUser)(b.user)}})}getMagicAuth(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/magic_auth/${a}`);return(0,p.deserializeMagicAuth)(b)})}createMagicAuth(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/magic_auth",(0,p.serializeCreateMagicAuthOptions)(Object.assign({},a)));return(0,p.deserializeMagicAuth)(b)})}sendMagicAuthCode(a){return d(this,void 0,void 0,function*(){yield this.workos.post("/user_management/magic_auth/send",(0,p.serializeSendMagicAuthCodeOptions)(a))})}verifyEmail({code:a,userId:b}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post(`/user_management/users/${b}/email_verification/confirm`,{code:a});return{user:(0,p.deserializeUser)(c.user)}})}getPasswordReset(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/password_reset/${a}`);return(0,p.deserializePasswordReset)(b)})}createPasswordReset(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/password_reset",(0,p.serializeCreatePasswordResetOptions)(Object.assign({},a)));return(0,p.deserializePasswordReset)(b)})}sendPasswordResetEmail(a){return d(this,void 0,void 0,function*(){yield this.workos.post("/user_management/password_reset/send",(0,p.serializeSendPasswordResetEmailOptions)(a))})}resetPassword(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/password_reset/confirm",(0,p.serializeResetPasswordOptions)(a));return{user:(0,p.deserializeUser)(b.user)}})}updateUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/user_management/users/${a.userId}`,(0,p.serializeUpdateUserOptions)(a));return(0,p.deserializeUser)(b)})}enrollAuthFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/users/${a.userId}/auth_factors`,(0,p.serializeEnrollAuthFactorOptions)(a));return{authenticationFactor:(0,p.deserializeFactorWithSecrets)(b.authentication_factor),authenticationChallenge:(0,l.deserializeChallenge)(b.authentication_challenge)}})}listAuthFactors(a){return d(this,void 0,void 0,function*(){let{userId:b}=a,c=e(a,["userId"]);return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${b}/auth_factors`,t.deserializeFactor,c)),a=>(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${b}/auth_factors`,t.deserializeFactor,a),c)})}listSessions(a,b){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${a}/sessions`,p.deserializeSession,b?(0,p.serializeListSessionsOptions)(b):void 0)),b=>(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${a}/sessions`,p.deserializeSession,b),b?(0,p.serializeListSessionsOptions)(b):void 0)})}deleteUser(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/users/${a}`)})}getUserIdentities(a){return d(this,void 0,void 0,function*(){if(!a)throw TypeError("Incomplete arguments. Need to specify 'userId'.");let{data:b}=yield this.workos.get(`/user_management/users/${a}/identities`);return(0,u.deserializeIdentities)(b)})}getOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/organization_memberships/${a}`);return(0,z.deserializeOrganizationMembership)(b)})}listOrganizationMemberships(a){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",z.deserializeOrganizationMembership,a?(0,x.serializeListOrganizationMembershipsOptions)(a):void 0)),a=>(0,j.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",z.deserializeOrganizationMembership,a),a?(0,x.serializeListOrganizationMembershipsOptions)(a):void 0)})}createOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/organization_memberships",(0,s.serializeCreateOrganizationMembershipOptions)(a));return(0,z.deserializeOrganizationMembership)(b)})}updateOrganizationMembership(a,b){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.put(`/user_management/organization_memberships/${a}`,(0,B.serializeUpdateOrganizationMembershipOptions)(b));return(0,z.deserializeOrganizationMembership)(c)})}deleteOrganizationMembership(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/organization_memberships/${a}`)})}deactivateOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/user_management/organization_memberships/${a}/deactivate`,{});return(0,z.deserializeOrganizationMembership)(b)})}reactivateOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/user_management/organization_memberships/${a}/reactivate`,{});return(0,z.deserializeOrganizationMembership)(b)})}getInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/invitations/${a}`);return(0,v.deserializeInvitation)(b)})}findInvitationByToken(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/invitations/by_token/${a}`);return(0,v.deserializeInvitation)(b)})}listInvitations(a){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,"/user_management/invitations",v.deserializeInvitation,a?(0,w.serializeListInvitationsOptions)(a):void 0)),a=>(0,j.fetchAndDeserialize)(this.workos,"/user_management/invitations",v.deserializeInvitation,a),a?(0,w.serializeListInvitationsOptions)(a):void 0)})}sendInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/invitations",(0,A.serializeSendInvitationOptions)(Object.assign({},a)));return(0,v.deserializeInvitation)(b)})}acceptInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/invitations/${a}/accept`,null);return(0,v.deserializeInvitation)(b)})}revokeInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/invitations/${a}/revoke`,null);return(0,v.deserializeInvitation)(b)})}revokeSession(a){return d(this,void 0,void 0,function*(){yield this.workos.post("/user_management/sessions/revoke",(0,o.serializeRevokeSessionOptions)(a))})}getAuthorizationUrl({connectionId:a,codeChallenge:b,codeChallengeMethod:c,context:d,clientId:e,domainHint:f,loginHint:g,organizationId:i,provider:j,providerQueryParams:k,providerScopes:l,prompt:m,redirectUri:n,state:o,screenHint:p}){let q;if(!j&&!a&&!i)throw TypeError("Incomplete arguments. Need to specify either a 'connectionId', 'organizationId', or 'provider'.");if("authkit"!==j&&p)throw TypeError("'screenHint' is only supported for 'authkit' provider");d&&this.workos.emitWarning(`\`context\` is deprecated. We previously required initiate login endpoints to return the
\`context\` query parameter when getting the authorization URL. This is no longer necessary.`);let r=(q={connection_id:a,code_challenge:b,code_challenge_method:c,context:d,organization_id:i,domain_hint:f,login_hint:g,provider:j,provider_query_params:k,provider_scopes:l,prompt:m,client_id:e,redirect_uri:n,response_type:"code",state:o,screen_hint:p},h.default.stringify(q,{arrayFormat:"repeat",sort:(a,b)=>a.localeCompare(b),format:"RFC1738"}));return`${this.workos.baseURL}/user_management/authorize?${r}`}getLogoutUrl({sessionId:a,returnTo:b}){if(!a)throw TypeError("Incomplete arguments. Need to specify 'sessionId'.");let c=new URL("/user_management/sessions/logout",this.workos.baseURL);return c.searchParams.set("session_id",a),b&&c.searchParams.set("return_to",b),c.toString()}getLogoutUrlFromSessionCookie({sessionData:a,cookiePassword:b=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){let c=yield this.authenticateWithSessionCookie({sessionData:a,cookiePassword:b});if(!c.authenticated){let{reason:a}=c;throw Error(`Failed to extract session ID for logout URL: ${a}`)}return this.getLogoutUrl({sessionId:c.sessionId})})}getJwksUrl(a){if(!a)throw TypeError("clientId must be a valid clientId");return`${this.workos.baseURL}/sso/jwks/${a}`}}b.UserManagement=D},4964:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a){switch(a){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new d.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},5061:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(74855);b.default=function(a,b,c,f,g,h){let i=(0,e.concat)(a,b,c,(0,e.uint64be)(a.length<<3)),j=(0,d.createHmac)(`sha${f}`,g);return j.update(i),j.digest().slice(0,h>>3)}},5202:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},5296:(a,b,c)=>{"use strict";var d=c(60237),e=a=>(d.Buffer.isBuffer(a)?a:d.Buffer.from(a)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),f=a=>({...a,encryption:{...a.encryption},integrity:{...a.integrity}}),g={"aes-128-ctr":{keyBits:128,ivBits:128,name:"AES-CTR"},"aes-256-cbc":{keyBits:256,ivBits:128,name:"AES-CBC"},sha256:{keyBits:256,name:"SHA-256"}},h="Fe26.2",i=(a,b)=>{if(b<1)throw Error("Invalid random bits count");return((a,b)=>{let c=d.Buffer.allocUnsafe(b);return a.getRandomValues(c),c})(a,Math.ceil(b/8))},j=async(a,b,c,e,f,g)=>{let h=new TextEncoder,i=h.encode(b),j=await a.subtle.importKey("raw",i,"PBKDF2",!1,["deriveBits"]),k=h.encode(c),l=await a.subtle.deriveBits({name:"PBKDF2",hash:g,salt:k,iterations:e},j,8*f);return d.Buffer.from(l)},k=async(a,b,c)=>{var d;if(null==b||!b.length)throw Error("Empty password");if(null==c||"object"!=typeof c)throw Error("Bad options");if(!(c.algorithm in g))throw Error(`Unknown algorithm: ${c.algorithm}`);let e=g[c.algorithm],f={},h=null!=(d=c.hmac)&&d,k=h?{name:"HMAC",hash:e.name}:{name:e.name},l=h?["sign","verify"]:["encrypt","decrypt"];if("string"==typeof b){if(b.length<c.minPasswordlength)throw Error(`Password string too short (min ${c.minPasswordlength} characters required)`);let{salt:d=""}=c;if(!d){let{saltBits:b=0}=c;if(!b)throw Error("Missing salt and saltBits options");d=i(a,b).toString("hex")}let g=await j(a,b,d,c.iterations,e.keyBits/8,"SHA-1");f.key=await a.subtle.importKey("raw",g,k,!1,l),f.salt=d}else{if(b.length<e.keyBits/8)throw Error("Key buffer (password) too small");f.key=await a.subtle.importKey("raw",b,k,!1,l),f.salt=""}return c.iv?f.iv=c.iv:"ivBits"in e&&(f.iv=i(a,e.ivBits)),f},l=async(a,b,c,e)=>{let f=await k(a,b,c),h=new TextEncoder().encode(e),i=await a.subtle.encrypt({name:g[c.algorithm].name,iv:f.iv},f.key,h);return{encrypted:d.Buffer.from(i),key:f}},m=async(a,b,c,e)=>{let f=await k(a,b,c),h=await a.subtle.decrypt({name:g[c.algorithm].name,iv:f.iv},f.key,d.Buffer.isBuffer(e)?e:d.Buffer.from(e));return new TextDecoder().decode(h)},n=async(a,b,c,f)=>{let g=await k(a,b,{...c,hmac:!0}),h=new TextEncoder().encode(f),i=await a.subtle.sign({name:"HMAC"},g.key,h);return{digest:e(d.Buffer.from(i)),salt:g.salt}},o=a=>"object"!=typeof a||d.Buffer.isBuffer(a)?{encryption:a,integrity:a}:"secret"in a?{id:a.id,encryption:a.secret,integrity:a.secret}:{id:a.id,encryption:a.encryption,integrity:a.integrity},p=async(a,b,c,d)=>{if(!c)throw Error("Empty password");let g=f(d),i=Date.now()+(g.localtimeOffsetMsec||0),j=JSON.stringify(b),k=o(c),{id:m=""}=k;if(m&&!/^\w+$/.test(m))throw Error("Invalid password id");let{encrypted:p,key:q}=await l(a,k.encryption,g.encryption,j),r=e(p),s=e(q.iv),t=g.ttl?i+g.ttl:"",u=`${h}*${m}*${q.salt}*${s}*${r}*${t}`,v=await n(a,k.integrity,g.integrity,u);return`${u}*${v.salt}*${v.digest}`},q=async(a,b,c,e)=>{let g;if(!c)throw Error("Empty password");let i=f(e),j=Date.now()+(i.localtimeOffsetMsec||0),k=b.split("*");if(8!==k.length)throw Error("Incorrect number of sealed components");let l=k[0],p=k[1],q=k[2],r=k[3],s=k[4],t=k[5],u=k[6],v=k[7],w=`${l}*${p}*${q}*${r}*${s}*${t}`;if(h!==l)throw Error("Wrong mac prefix");if(t){if(!/^\d+$/.exec(t))throw Error("Invalid expiration");if(parseInt(t,10)<=j-1e3*i.timestampSkewSec)throw Error("Expired seal")}if(void 0===c||"string"==typeof c&&0===c.length)throw Error("Empty password");if("object"!=typeof c||d.Buffer.isBuffer(c))g=c;else{if(!((p||"default")in c))throw Error(`Cannot find password: ${p}`);g=c[p||"default"]}g=o(g);let x=i.integrity;if(x.salt=u,!((a,b)=>{let c=+(a.length!==b.length);c&&(b=a);for(let d=0;d<a.length;d+=1)c|=a.charCodeAt(d)^b.charCodeAt(d);return 0===c})((await n(a,g.integrity,x,w)).digest,v))throw Error("Bad hmac value");let y=d.Buffer.from(s,"base64"),z=i.encryption;z.salt=q,z.iv=d.Buffer.from(r,"base64");let A=await m(a,g.encryption,z,y);return A?JSON.parse(A):null};Object.defineProperty(b,"Buffer",{enumerable:!0,get:function(){return d.Buffer}}),b.algorithms=g,b.base64urlEncode=e,b.clone=f,b.decrypt=m,b.defaults={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0},b.encrypt=l,b.generateKey=k,b.hmacWithPassword=n,b.macFormatVersion="2",b.macPrefix=h,b.randomBits=i,b.seal=p,b.unseal=q},5340:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(92930),b),e(c(67014),b),e(c(88408),b),e(c(90123),b),e(c(53317),b),e(c(27216),b),e(c(75129),b)},5839:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(57975),f=c(88311),g=c(4964),h=c(26274),i=c(22896),j=(0,e.promisify)(d.sign);b.default=async(a,b,c)=>{let e=(0,i.default)(a,b,"sign");if(a.startsWith("HS")){let b=d.createHmac((0,g.default)(a),e);return b.update(c),b.digest()}return j((0,f.default)(a),c,(0,h.default)(a,e))}},6032:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=c(97272).default},6347:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},6374:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},6683:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.fromX509=b.fromSPKI=b.fromPKCS8=b.toPKCS8=b.toSPKI=void 0;let d=c(77598),e=c(4573),f=c(72927),g=c(25066),h=c(94415),i=c(89722),j=(a,b,c)=>{let e;if((0,f.isCryptoKey)(c)){if(!c.extractable)throw TypeError("CryptoKey is not extractable");e=d.KeyObject.from(c)}else if((0,g.default)(c))e=c;else throw TypeError((0,h.default)(c,...i.types));if(e.type!==a)throw TypeError(`key is not a ${a} key`);return e.export({format:"pem",type:b})};b.toSPKI=a=>j("public","spki",a),b.toPKCS8=a=>j("private","pkcs8",a),b.fromPKCS8=a=>(0,d.createPrivateKey)({key:e.Buffer.from(a.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),b.fromSPKI=a=>(0,d.createPublicKey)({key:e.Buffer.from(a.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),b.fromX509=a=>(0,d.createPublicKey)({key:a,type:"spki",format:"pem"})},6725:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},6917:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},7706:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(98781),e=c(75598),f=c(90070),g=c(11434),h=c(67040),i=c(90939),j=c(69817),k=c(2678),l=c(80518),m=c(84634),n=c(16217),o=c(37009);b.default=async function(a,b,c,p,q){switch((0,m.default)(a,b,"decrypt"),b=await i.default.normalizePrivateKey?.(b,a)||b,a){case"dir":if(void 0!==c)throw new j.JWEInvalid("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new j.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let f,g;if(!(0,n.default)(p.epk))throw new j.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!e.ecdhAllowed(b))throw new j.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let i=await (0,l.importJWK)(p.epk,a);if(void 0!==p.apu){if("string"!=typeof p.apu)throw new j.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{f=(0,h.decode)(p.apu)}catch{throw new j.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==p.apv){if("string"!=typeof p.apv)throw new j.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{g=(0,h.decode)(p.apv)}catch{throw new j.JWEInvalid("Failed to base64url decode the apv")}}let m=await e.deriveKey(i,b,"ECDH-ES"===a?p.enc:a,"ECDH-ES"===a?(0,k.bitLength)(p.enc):parseInt(a.slice(-5,-2),10),f,g);if("ECDH-ES"===a)return m;if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");return(0,d.unwrap)(a.slice(-6),m,c)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");return(0,g.decrypt)(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let d;if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof p.p2c)throw new j.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let e=q?.maxPBES2Count||1e4;if(p.p2c>e)throw new j.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof p.p2s)throw new j.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{d=(0,h.decode)(p.p2s)}catch{throw new j.JWEInvalid("Failed to base64url decode the p2s")}return(0,f.decrypt)(a,b,c,p.p2c,d)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");return(0,d.unwrap)(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let d,e;if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof p.iv)throw new j.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof p.tag)throw new j.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{d=(0,h.decode)(p.iv)}catch{throw new j.JWEInvalid("Failed to base64url decode the iv")}try{e=(0,h.decode)(p.tag)}catch{throw new j.JWEInvalid("Failed to base64url decode the tag")}return(0,o.unwrap)(a,b,c,d,e)}default:throw new j.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}},7730:a=>{"use strict";a.exports=SyntaxError},8465:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},8697:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.compactDecrypt=void 0;let d=c(55307),e=c(69817),f=c(74855);b.compactDecrypt=async function(a,b,c){if(a instanceof Uint8Array&&(a=f.decoder.decode(a)),"string"!=typeof a)throw new e.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:g,1:h,2:i,3:j,4:k,length:l}=a.split(".");if(5!==l)throw new e.JWEInvalid("Invalid Compact JWE");let m=await (0,d.flattenedDecrypt)({ciphertext:j,iv:i||void 0,protected:g,tag:k||void 0,encrypted_key:h||void 0},b,c),n={plaintext:m.plaintext,protectedHeader:m.protectedHeader};return"function"==typeof b?{...n,key:m.key}:n}},8870:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},9112:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.WarrantOp=void 0,function(a){a.Create="create",a.Delete="delete"}(c||(b.WarrantOp=c={}))},9619:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.SSO=void 0;let f=e(c(34563)),g=c(61324),h=c(46944),i=c(21330);class j{constructor(a){this.workos=a}listConnections(a){return d(this,void 0,void 0,function*(){return new h.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/connections",i.deserializeConnection,a?(0,i.serializeListConnectionsOptions)(a):void 0)),a=>(0,g.fetchAndDeserialize)(this.workos,"/connections",i.deserializeConnection,a),a?(0,i.serializeListConnectionsOptions)(a):void 0)})}deleteConnection(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/connections/${a}`)})}getAuthorizationUrl({connection:a,clientId:b,domain:c,domainHint:d,loginHint:e,organization:g,provider:h,providerQueryParams:i,providerScopes:j,redirectUri:k,state:l}){let m;if(!c&&!h&&!a&&!g)throw Error("Incomplete arguments. Need to specify either a 'connection', 'organization', 'domain', or 'provider'.");c&&this.workos.emitWarning("The `domain` parameter for `getAuthorizationURL` is deprecated. Please use `organization` instead.");let n=(m={connection:a,organization:g,domain:c,domain_hint:d,login_hint:e,provider:h,provider_query_params:i,provider_scopes:j,client_id:b,redirect_uri:k,response_type:"code",state:l},f.default.stringify(m,{arrayFormat:"repeat",sort:(a,b)=>a.localeCompare(b),format:"RFC1738"}));return`${this.workos.baseURL}/sso/authorize?${n}`}getConnection(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/connections/${a}`);return(0,i.deserializeConnection)(b)})}getProfileAndToken({code:a,clientId:b}){return d(this,void 0,void 0,function*(){let c=new URLSearchParams({client_id:b,client_secret:this.workos.key,grant_type:"authorization_code",code:a}),{data:d}=yield this.workos.post("/sso/token",c);return(0,i.deserializeProfileAndToken)(d)})}getProfile({accessToken:a}){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get("/sso/profile",{accessToken:a});return(0,i.deserializeProfile)(b)})}}b.SSO=j},9756:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeVerifyResponse=void 0;let d=c(33318);b.deserializeVerifyResponse=a=>({challenge:(0,d.deserializeChallenge)(a.challenge),valid:a.valid})},10007:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListWarrantsOptions=void 0,b.serializeListWarrantsOptions=a=>({resource_type:a.resourceType,resource_id:a.resourceId,relation:a.relation,subject_type:a.subjectType,subject_id:a.subjectId,subject_relation:a.subjectRelation,limit:a.limit,after:a.after})},10362:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.RateLimitExceededException=void 0;let d=c(38383);class e extends d.GenericServerException{constructor(a,b,c){super(429,a,{},b),this.retryAfter=c,this.name="RateLimitExceededException"}}b.RateLimitExceededException=e},10445:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generateKeyPair=b.generateSecret=void 0;let d=c(77598),e=c(57975),f=c(39469),g=c(69817),h=(0,e.promisify)(d.generateKeyPair);b.generateSecret=async function(a,b){let c;switch(a){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":c=parseInt(a.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":c=parseInt(a.slice(1,4),10);break;default:throw new g.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,d.createSecretKey)((0,f.default)(new Uint8Array(c>>3)))},b.generateKeyPair=async function(a,b){switch(a){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let a=b?.modulusLength??2048;if("number"!=typeof a||a<2048)throw new g.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return await h("rsa",{modulusLength:a,publicExponent:65537})}case"ES256":return h("ec",{namedCurve:"P-256"});case"ES256K":return h("ec",{namedCurve:"secp256k1"});case"ES384":return h("ec",{namedCurve:"P-384"});case"ES512":return h("ec",{namedCurve:"P-521"});case"EdDSA":switch(b?.crv){case void 0:case"Ed25519":return h("ed25519");case"Ed448":return h("ed448");default:throw new g.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let a=b?.crv??"P-256";switch(a){case void 0:case"P-256":case"P-384":case"P-521":return h("ec",{namedCurve:a});case"X25519":return h("x25519");case"X448":return h("x448");default:throw new g.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}}default:throw new g.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}},10891:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(15402),b)},11192:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0});let e=c(77598);b.default=a=>(d||=new Set((0,e.getCiphers)())).has(a)},11312:(a,b)=>{"use strict";var c,d;Object.defineProperty(b,"__esModule",{value:!0}),b.OrganizationDomainVerificationStrategy=b.OrganizationDomainState=void 0,function(a){a.LegacyVerified="legacy_verified",a.Verified="verified",a.Pending="pending",a.Failed="failed"}(c||(b.OrganizationDomainState=c={})),function(a){a.Dns="dns",a.Manual="manual"}(d||(b.OrganizationDomainVerificationStrategy=d={}))},11434:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decrypt=b.encrypt=void 0;let d=c(77598),e=c(57975),f=c(36231),g=c(72927),h=c(69978),i=c(25066),j=c(94415),k=c(89722),l=(a,b)=>{if("rsa"!==a.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,f.default)(a,b)},m=(0,e.deprecate)(()=>d.constants.RSA_PKCS1_PADDING,'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),n=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return d.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return m();default:return}},o=a=>{switch(a){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function p(a,b,...c){if((0,i.default)(a))return a;if((0,g.isCryptoKey)(a))return(0,h.checkEncCryptoKey)(a,b,...c),d.KeyObject.from(a);throw TypeError((0,j.default)(a,...k.types))}b.encrypt=(a,b,c)=>{let e=n(a),f=o(a),g=p(b,a,"wrapKey","encrypt");return l(g,a),(0,d.publicEncrypt)({key:g,oaepHash:f,padding:e},c)},b.decrypt=(a,b,c)=>{let e=n(a),f=o(a),g=p(b,a,"unwrapKey","decrypt");return l(g,a),(0,d.privateDecrypt)({key:g,oaepHash:f,padding:e},c)}},11571:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},12967:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.Vault=void 0;let e=c(22537),f=c(46507),g=c(95581),h=c(40659);class i{constructor(a){this.workos=a,this.createSecret=this.createObject,this.listSecrets=this.listObjects,this.listSecretVersions=this.listObjectVersions,this.readSecret=this.readObject,this.describeSecret=this.describeObject,this.updateSecret=this.updateObject,this.deleteSecret=this.deleteObject,this.cryptoProvider=a.getCryptoProvider()}decode(a){let b=(0,f.base64ToUint8Array)(a),c=new Uint8Array(b.subarray(0,12)),d=new Uint8Array(b.subarray(12,28)),{value:g,nextIndex:h}=(0,e.decodeUInt32)(b,28),i=b.subarray(h,h+g);return{iv:c,tag:d,keys:(0,f.uint8ArrayToBase64)(i),ciphertext:new Uint8Array(b.subarray(h+g))}}createObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/vault/v1/kv",(0,h.serializeCreateObjectEntity)(a));return(0,h.deserializeObjectMetadata)(b)})}listObjects(a){return d(this,void 0,void 0,function*(){let b=new URL("/vault/v1/kv",this.workos.baseURL);(null==a?void 0:a.after)&&b.searchParams.set("after",a.after),(null==a?void 0:a.limit)&&b.searchParams.set("limit",a.limit.toString());let{data:c}=yield this.workos.get(b.toString());return(0,h.deserializeListObjects)(c)})}listObjectVersions(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(a.id)}/versions`);return(0,h.desrializeListObjectVersions)(b)})}readObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(a.id)}`);return(0,h.deserializeObject)(b)})}describeObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(a.id)}/metadata`);return(0,h.deserializeObject)(b)})}updateObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/vault/v1/kv/${encodeURIComponent(a.id)}`,(0,h.serializeUpdateObjectEntity)(a));return(0,h.deserializeObject)(b)})}deleteObject(a){return d(this,void 0,void 0,function*(){return this.workos.delete(`/vault/v1/kv/${encodeURIComponent(a.id)}`)})}createDataKey(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/vault/v1/keys/data-key",a);return(0,g.deserializeCreateDataKeyResponse)(b)})}decryptDataKey(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/vault/v1/keys/decrypt",a);return(0,g.deserializeDecryptDataKeyResponse)(b)})}encrypt(a,b,c){return d(this,void 0,void 0,function*(){let d=yield this.createDataKey({context:b}),g=new TextEncoder,h=(0,f.base64ToUint8Array)(d.dataKey.key),i=(0,f.base64ToUint8Array)(d.encryptedKeys),j=(0,e.encodeUInt32)(i.length),k=c?g.encode(c):void 0,l=this.cryptoProvider.randomBytes(12),{ciphertext:m,iv:n,tag:o}=yield this.cryptoProvider.encrypt(g.encode(a),h,l,k),p=new Uint8Array(n.length+o.length+j.length+i.length+m.length),q=0;return p.set(n,q),q+=n.length,p.set(o,q),q+=o.length,p.set(new Uint8Array(j),q),q+=j.length,p.set(i,q),q+=i.length,p.set(m,q),(0,f.uint8ArrayToBase64)(p)})}decrypt(a,b){return d(this,void 0,void 0,function*(){let c=this.decode(a),d=yield this.decryptDataKey({keys:c.keys}),e=(0,f.base64ToUint8Array)(d.key),g=new TextEncoder,h=b?g.encode(b):void 0,i=yield this.cryptoProvider.decrypt(c.ciphertext,e,c.iv,c.tag,h);return new TextDecoder().decode(i)})}}b.Vault=i},12998:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},13030:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},13086:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(40333),b),e(c(24103),b),e(c(85515),b),e(c(65435),b),e(c(98973),b),e(c(9112),b),e(c(938),b),e(c(77590),b)},14330:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeTotpWithSecrets=b.deserializeTotp=void 0,b.deserializeTotp=a=>({issuer:a.issuer,user:a.user}),b.deserializeTotpWithSecrets=a=>({issuer:a.issuer,user:a.user,qrCode:a.qr_code,secret:a.secret,uri:a.uri})},15049:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithTotpOptions=void 0,b.serializeAuthenticateWithTotpOptions=a=>({grant_type:"urn:workos:oauth:grant-type:mfa-totp",client_id:a.clientId,client_secret:a.clientSecret,code:a.code,authentication_challenge_id:a.authenticationChallengeId,pending_authentication_token:a.pendingAuthenticationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},15258:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithOrganizationSelectionOptions=void 0,b.serializeAuthenticateWithOrganizationSelectionOptions=a=>({grant_type:"urn:workos:oauth:grant-type:organization-selection",client_id:a.clientId,client_secret:a.clientSecret,pending_authentication_token:a.pendingAuthenticationToken,organization_id:a.organizationId,ip_address:a.ipAddress,user_agent:a.userAgent})},15402:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},15515:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},15927:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},16148:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NotFoundException=void 0;class c extends Error{constructor({code:a,message:b,path:c,requestID:d}){super(),this.status=404,this.name="NotFoundException",this.code=a,this.message=null!=b?b:`The requested path '${c}' could not be found.`,this.requestID=d}}b.NotFoundException=c},16217:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}},17152:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EncryptJWT=void 0;let d=c(28481),e=c(74855),f=c(23817);class g extends f.ProduceJWT{_cek;_iv;_keyManagementParameters;_protectedHeader;_replicateIssuerAsHeader;_replicateSubjectAsHeader;_replicateAudienceAsHeader;setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(a,b){let c=new d.CompactEncrypt(e.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),c.setProtectedHeader(this._protectedHeader),this._iv&&c.setInitializationVector(this._iv),this._cek&&c.setContentEncryptionKey(this._cek),this._keyManagementParameters&&c.setKeyManagementParameters(this._keyManagementParameters),c.encrypt(a,b)}}b.EncryptJWT=g},17213:(a,b,c)=>{var d="function"==typeof Map&&Map.prototype,e=Object.getOwnPropertyDescriptor&&d?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,f=d&&e&&"function"==typeof e.get?e.get:null,g=d&&Map.prototype.forEach,h="function"==typeof Set&&Set.prototype,i=Object.getOwnPropertyDescriptor&&h?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,j=h&&i&&"function"==typeof i.get?i.get:null,k=h&&Set.prototype.forEach,l="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,m="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,n="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,o=Boolean.prototype.valueOf,p=Object.prototype.toString,q=Function.prototype.toString,r=String.prototype.match,s=String.prototype.slice,t=String.prototype.replace,u=String.prototype.toUpperCase,v=String.prototype.toLowerCase,w=RegExp.prototype.test,x=Array.prototype.concat,y=Array.prototype.join,z=Array.prototype.slice,A=Math.floor,B="function"==typeof BigInt?BigInt.prototype.valueOf:null,C=Object.getOwnPropertySymbols,D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,E="function"==typeof Symbol&&"object"==typeof Symbol.iterator,F="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===E?"object":"symbol")?Symbol.toStringTag:null,G=Object.prototype.propertyIsEnumerable,H=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(a){return a.__proto__}:null);function I(a,b){if(a===1/0||a===-1/0||a!=a||a&&a>-1e3&&a<1e3||w.call(/e/,b))return b;var c=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof a){var d=a<0?-A(-a):A(a);if(d!==a){var e=String(d),f=s.call(b,e.length+1);return t.call(e,c,"$&_")+"."+t.call(t.call(f,/([0-9]{3})/g,"$&_"),/_$/,"")}}return t.call(b,c,"$&_")}var J=c(77443),K=J.custom,L=S(K)?K:null,M={__proto__:null,double:'"',single:"'"},N={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function O(a,b,c){var d=M[c.quoteStyle||b];return d+a+d}function P(a){return!F||!("object"==typeof a&&(F in a||void 0!==a[F]))}function Q(a){return"[object Array]"===V(a)&&P(a)}function R(a){return"[object RegExp]"===V(a)&&P(a)}function S(a){if(E)return a&&"object"==typeof a&&a instanceof Symbol;if("symbol"==typeof a)return!0;if(!a||"object"!=typeof a||!D)return!1;try{return D.call(a),!0}catch(a){}return!1}a.exports=function a(b,c,d,e){var h,i,p,u,w,A=c||{};if(U(A,"quoteStyle")&&!U(M,A.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(U(A,"maxStringLength")&&("number"==typeof A.maxStringLength?A.maxStringLength<0&&A.maxStringLength!==1/0:null!==A.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var C=!U(A,"customInspect")||A.customInspect;if("boolean"!=typeof C&&"symbol"!==C)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(U(A,"indent")&&null!==A.indent&&"	"!==A.indent&&!(parseInt(A.indent,10)===A.indent&&A.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(U(A,"numericSeparator")&&"boolean"!=typeof A.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var K=A.numericSeparator;if(void 0===b)return"undefined";if(null===b)return"null";if("boolean"==typeof b)return b?"true":"false";if("string"==typeof b)return function a(b,c){if(b.length>c.maxStringLength){var d=b.length-c.maxStringLength;return a(s.call(b,0,c.maxStringLength),c)+("... "+d)+" more character"+(d>1?"s":"")}var e=N[c.quoteStyle||"single"];return e.lastIndex=0,O(t.call(t.call(b,e,"\\$1"),/[\x00-\x1f]/g,X),"single",c)}(b,A);if("number"==typeof b){if(0===b)return 1/0/b>0?"0":"-0";var T=String(b);return K?I(b,T):T}if("bigint"==typeof b){var ab=String(b)+"n";return K?I(b,ab):ab}var ac=void 0===A.depth?5:A.depth;if(void 0===d&&(d=0),d>=ac&&ac>0&&"object"==typeof b)return Q(b)?"[Array]":"[Object]";var ad=function(a,b){var c;if("	"===a.indent)c="	";else{if("number"!=typeof a.indent||!(a.indent>0))return null;c=y.call(Array(a.indent+1)," ")}return{base:c,prev:y.call(Array(b+1),c)}}(A,d);if(void 0===e)e=[];else if(W(e,b)>=0)return"[Circular]";function ae(b,c,f){if(c&&(e=z.call(e)).push(c),f){var g={depth:A.depth};return U(A,"quoteStyle")&&(g.quoteStyle=A.quoteStyle),a(b,g,d+1,e)}return a(b,A,d+1,e)}if("function"==typeof b&&!R(b)){var af=function(a){if(a.name)return a.name;var b=r.call(q.call(a),/^function\s*([\w$]+)/);return b?b[1]:null}(b),ag=aa(b,ae);return"[Function"+(af?": "+af:" (anonymous)")+"]"+(ag.length>0?" { "+y.call(ag,", ")+" }":"")}if(S(b)){var ah=E?t.call(String(b),/^(Symbol\(.*\))_[^)]*$/,"$1"):D.call(b);return"object"!=typeof b||E?ah:Y(ah)}if((ai=b)&&"object"==typeof ai&&("undefined"!=typeof HTMLElement&&ai instanceof HTMLElement||"string"==typeof ai.nodeName&&"function"==typeof ai.getAttribute)){for(var ai,aj,ak="<"+v.call(String(b.nodeName)),al=b.attributes||[],am=0;am<al.length;am++){ak+=" "+al[am].name+"="+O((aj=al[am].value,t.call(String(aj),/"/g,"&quot;")),"double",A)}return ak+=">",b.childNodes&&b.childNodes.length&&(ak+="..."),ak+="</"+v.call(String(b.nodeName))+">"}if(Q(b)){if(0===b.length)return"[]";var an=aa(b,ae);return ad&&!function(a){for(var b=0;b<a.length;b++)if(W(a[b],"\n")>=0)return!1;return!0}(an)?"["+_(an,ad)+"]":"[ "+y.call(an,", ")+" ]"}if("[object Error]"===V(h=b)&&P(h)){var ao=aa(b,ae);return"cause"in Error.prototype||!("cause"in b)||G.call(b,"cause")?0===ao.length?"["+String(b)+"]":"{ ["+String(b)+"] "+y.call(ao,", ")+" }":"{ ["+String(b)+"] "+y.call(x.call("[cause]: "+ae(b.cause),ao),", ")+" }"}if("object"==typeof b&&C){if(L&&"function"==typeof b[L]&&J)return J(b,{depth:ac-d});else if("symbol"!==C&&"function"==typeof b.inspect)return b.inspect()}if(function(a){if(!f||!a||"object"!=typeof a)return!1;try{f.call(a);try{j.call(a)}catch(a){return!0}return a instanceof Map}catch(a){}return!1}(b)){var ap=[];return g&&g.call(b,function(a,c){ap.push(ae(c,b,!0)+" => "+ae(a,b))}),$("Map",f.call(b),ap,ad)}if(function(a){if(!j||!a||"object"!=typeof a)return!1;try{j.call(a);try{f.call(a)}catch(a){return!0}return a instanceof Set}catch(a){}return!1}(b)){var aq=[];return k&&k.call(b,function(a){aq.push(ae(a,b))}),$("Set",j.call(b),aq,ad)}if(function(a){if(!l||!a||"object"!=typeof a)return!1;try{l.call(a,l);try{m.call(a,m)}catch(a){return!0}return a instanceof WeakMap}catch(a){}return!1}(b))return Z("WeakMap");if(function(a){if(!m||!a||"object"!=typeof a)return!1;try{m.call(a,m);try{l.call(a,l)}catch(a){return!0}return a instanceof WeakSet}catch(a){}return!1}(b))return Z("WeakSet");if(function(a){if(!n||!a||"object"!=typeof a)return!1;try{return n.call(a),!0}catch(a){}return!1}(b))return Z("WeakRef");if("[object Number]"===V(i=b)&&P(i))return Y(ae(Number(b)));if(function(a){if(!a||"object"!=typeof a||!B)return!1;try{return B.call(a),!0}catch(a){}return!1}(b))return Y(ae(B.call(b)));if("[object Boolean]"===V(p=b)&&P(p))return Y(o.call(b));if("[object String]"===V(u=b)&&P(u))return Y(ae(String(b)));if("undefined"!=typeof window&&b===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&b===globalThis||"undefined"!=typeof global&&b===global)return"{ [object globalThis] }";if(!("[object Date]"===V(w=b)&&P(w))&&!R(b)){var ar=aa(b,ae),as=H?H(b)===Object.prototype:b instanceof Object||b.constructor===Object,at=b instanceof Object?"":"null prototype",au=!as&&F&&Object(b)===b&&F in b?s.call(V(b),8,-1):at?"Object":"",av=(as||"function"!=typeof b.constructor?"":b.constructor.name?b.constructor.name+" ":"")+(au||at?"["+y.call(x.call([],au||[],at||[]),": ")+"] ":"");return 0===ar.length?av+"{}":ad?av+"{"+_(ar,ad)+"}":av+"{ "+y.call(ar,", ")+" }"}return String(b)};var T=Object.prototype.hasOwnProperty||function(a){return a in this};function U(a,b){return T.call(a,b)}function V(a){return p.call(a)}function W(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return -1}function X(a){var b=a.charCodeAt(0),c={8:"b",9:"t",10:"n",12:"f",13:"r"}[b];return c?"\\"+c:"\\x"+(b<16?"0":"")+u.call(b.toString(16))}function Y(a){return"Object("+a+")"}function Z(a){return a+" { ? }"}function $(a,b,c,d){return a+" ("+b+") {"+(d?_(c,d):y.call(c,", "))+"}"}function _(a,b){if(0===a.length)return"";var c="\n"+b.prev+b.base;return c+y.call(a,","+c)+"\n"+b.prev}function aa(a,b){var c,d=Q(a),e=[];if(d){e.length=a.length;for(var f=0;f<a.length;f++)e[f]=U(a,f)?b(a[f],a):""}var g="function"==typeof C?C(a):[];if(E){c={};for(var h=0;h<g.length;h++)c["$"+g[h]]=g[h]}for(var i in a)if(U(a,i)&&(!d||String(Number(i))!==i||!(i<a.length)))if(E&&c["$"+i]instanceof Symbol)continue;else w.call(/[^\w$]/,i)?e.push(b(i,a)+": "+b(a[i],a)):e.push(i+": "+b(a[i],a));if("function"==typeof C)for(var j=0;j<g.length;j++)G.call(a,g[j])&&e.push("["+b(g[j])+"]: "+b(a[g[j]],a));return e}},17250:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeBatchWriteResourcesOptions=void 0;let d=c(13086),e=c(68233),f=c(89434);b.serializeBatchWriteResourcesOptions=a=>{let b=[];return a.op===d.ResourceOp.Create?b=a.resources.map(a=>(0,e.serializeCreateResourceOptions)(a)):a.op===d.ResourceOp.Delete&&(b=a.resources.map(a=>(0,f.serializeDeleteResourceOptions)(a))),{op:a.op,resources:b}}},17382:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},17524:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},17753:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},17861:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeWriteWarrantOptions=void 0;let d=c(60189);b.serializeWriteWarrantOptions=a=>({op:a.op,resource_type:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,resource_id:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId?a.resource.resourceId:"",relation:a.relation,subject:(0,d.isSubject)(a.subject)?{resource_type:a.subject.resourceType,resource_id:a.subject.resourceId}:{resource_type:a.subject.getResourceType(),resource_id:a.subject.getResourceId()},policy:a.policy})},18013:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(30660),f=c(52349),g=c(74855),h=c(5061),i=c(72927),j=c(69978),k=c(25066),l=c(94415),m=c(95032),n=c(69817),o=c(11192),p=c(89722);b.default=(a,b,c,q,r)=>{let s;if((0,i.isCryptoKey)(c))(0,j.checkEncCryptoKey)(c,a,"encrypt"),s=d.KeyObject.from(c);else if(c instanceof Uint8Array||(0,k.default)(c))s=c;else throw TypeError((0,l.default)(c,...p.types,"Uint8Array"));switch((0,f.default)(a,s),q?(0,e.default)(a,q):q=(0,m.default)(a),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(a,b,c,e,f){let i=parseInt(a.slice(1,4),10);(0,k.default)(c)&&(c=c.export());let j=c.subarray(i>>3),l=c.subarray(0,i>>3),m=`aes-${i}-cbc`;if(!(0,o.default)(m))throw new n.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let p=(0,d.createCipheriv)(m,j,e),q=(0,g.concat)(p.update(b),p.final()),r=parseInt(a.slice(-3),10),s=(0,h.default)(f,e,q,r,l,i);return{ciphertext:q,tag:s,iv:e}}(a,b,s,q,r);case"A128GCM":case"A192GCM":case"A256GCM":return function(a,b,c,e,f){let g=parseInt(a.slice(1,4),10),h=`aes-${g}-gcm`;if(!(0,o.default)(h))throw new n.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let i=(0,d.createCipheriv)(h,c,e,{authTagLength:16});f.byteLength&&i.setAAD(f,{plaintextLength:b.length});let j=i.update(b);return i.final(),{ciphertext:j,tag:i.getAuthTag(),iv:e}}(a,b,s,q,r);default:throw new n.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},18093:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},18178:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UnauthorizedException=void 0;class c extends Error{constructor(a){super(),this.requestID=a,this.status=401,this.name="UnauthorizedException",this.message="Could not authorize the request. Maybe your API key is invalid?"}}b.UnauthorizedException=c},18652:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},18923:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UnsecuredJWT=void 0;let d=c(67040),e=c(74855),f=c(69817),g=c(19267),h=c(23817);class i extends h.ProduceJWT{encode(){let a=d.encode(JSON.stringify({alg:"none"})),b=d.encode(JSON.stringify(this._payload));return`${a}.${b}.`}static decode(a,b){let c;if("string"!=typeof a)throw new f.JWTInvalid("Unsecured JWT must be a string");let{0:h,1:i,2:j,length:k}=a.split(".");if(3!==k||""!==j)throw new f.JWTInvalid("Invalid Unsecured JWT");try{if(c=JSON.parse(e.decoder.decode(d.decode(h))),"none"!==c.alg)throw Error()}catch{throw new f.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,g.default)(c,d.decode(i),b),header:c}}}b.UnsecuredJWT=i},19145:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeAuthenticationEvent=void 0,b.deserializeAuthenticationEvent=a=>({email:a.email,error:a.error,ipAddress:a.ip_address,status:a.status,type:a.type,userAgent:a.user_agent,userId:a.user_id})},19267:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817),e=c(74855),f=c(19918),g=c(51153),h=c(16217),i=a=>a.toLowerCase().replace(/^application\//,"");b.default=(a,b,c={})=>{let j,k;try{j=JSON.parse(e.decoder.decode(b))}catch{}if(!(0,h.default)(j))throw new d.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{typ:l}=c;if(l&&("string"!=typeof a.typ||i(a.typ)!==i(l)))throw new d.JWTClaimValidationFailed('unexpected "typ" JWT header value',j,"typ","check_failed");let{requiredClaims:m=[],issuer:n,subject:o,audience:p,maxTokenAge:q}=c,r=[...m];for(let a of(void 0!==q&&r.push("iat"),void 0!==p&&r.push("aud"),void 0!==o&&r.push("sub"),void 0!==n&&r.push("iss"),new Set(r.reverse())))if(!(a in j))throw new d.JWTClaimValidationFailed(`missing required "${a}" claim`,j,a,"missing");if(n&&!(Array.isArray(n)?n:[n]).includes(j.iss))throw new d.JWTClaimValidationFailed('unexpected "iss" claim value',j,"iss","check_failed");if(o&&j.sub!==o)throw new d.JWTClaimValidationFailed('unexpected "sub" claim value',j,"sub","check_failed");if(p&&!((a,b)=>"string"==typeof a?b.includes(a):!!Array.isArray(a)&&b.some(Set.prototype.has.bind(new Set(a))))(j.aud,"string"==typeof p?[p]:p))throw new d.JWTClaimValidationFailed('unexpected "aud" claim value',j,"aud","check_failed");switch(typeof c.clockTolerance){case"string":k=(0,g.default)(c.clockTolerance);break;case"number":k=c.clockTolerance;break;case"undefined":k=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:s}=c,t=(0,f.default)(s||new Date);if((void 0!==j.iat||q)&&"number"!=typeof j.iat)throw new d.JWTClaimValidationFailed('"iat" claim must be a number',j,"iat","invalid");if(void 0!==j.nbf){if("number"!=typeof j.nbf)throw new d.JWTClaimValidationFailed('"nbf" claim must be a number',j,"nbf","invalid");if(j.nbf>t+k)throw new d.JWTClaimValidationFailed('"nbf" claim timestamp check failed',j,"nbf","check_failed")}if(void 0!==j.exp){if("number"!=typeof j.exp)throw new d.JWTClaimValidationFailed('"exp" claim must be a number',j,"exp","invalid");if(j.exp<=t-k)throw new d.JWTExpired('"exp" claim timestamp check failed',j,"exp","check_failed")}if(q){let a=t-j.iat;if(a-k>("number"==typeof q?q:(0,g.default)(q)))throw new d.JWTExpired('"iat" claim timestamp check failed (too far in the past)',j,"iat","check_failed");if(a<0-k)throw new d.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',j,"iat","check_failed")}return j}},19887:(a,b,c)=>{"use strict";var d=c(42877);a.exports=function(a){return d(a)||0===a?a:a<0?-1:1}},19918:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=a=>Math.floor(a.getTime()/1e3)},20578:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CompactSign=void 0;let d=c(69531);class e{_flattened;constructor(a){this._flattened=new d.FlattenedSign(a)}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}async sign(a,b){let c=await this._flattened.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}b.CompactSign=e},20716:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},20927:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},21329:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(82315),b),e(c(18093),b),e(c(43289),b),e(c(82836),b),e(c(38292),b),e(c(57869),b)},21330:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(81652),b),e(c(88325),b),e(c(89077),b),e(c(29409),b)},21650:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeOrganizationDomain=void 0,b.deserializeOrganizationDomain=a=>({object:a.object,id:a.id,domain:a.domain,organizationId:a.organization_id,state:a.state,verificationToken:a.verification_token,verificationStrategy:a.verification_strategy,createdAt:a.created_at,updatedAt:a.updated_at})},22537:(a,b,c)=>{"use strict";var d=c(43988),e=c(86490);function f(a,b){b?(f=d.getSign(a),g=d.highOrder(1^d.getSign(a),a)+2):(f=0,g=d.highOrder(1,a)+1||1);for(var c,f,g,h=Math.ceil(g/7),i=e.alloc(h),j=0;j<h;j++){var k=d.extract(a,7*j,7,f);i[j]=128|k}return i[h-1]&=127,i}function g(a,b,c){for(var f,g,h=function(a,b){for(var c=0;a[b+c]>=128;)c++;if(b+ ++c>a.length)throw Error("Bogus encoding");return c}(a,b=void 0===b?0:b),i=Math.ceil(7*h/8),j=e.alloc(i),k=0;h>0;)d.inject(j,k,7,a[b]),k+=7,b++,h--;if(c){var l=j[i-1],m=k%8;if(0!==m){var n=32-m;l=j[i-1]=l<<n>>n&255}g=255*(f=l>>7)}else f=0,g=0;for(;i>1&&j[i-1]===g&&(!c||j[i-2]>>7===f);)i--;return{value:j=e.resize(j,i),nextIndex:b}}function h(a){return f(a,!0)}function i(a,b){return g(a,b,!0)}function j(a){return f(a,!1)}function k(a,b){return g(a,b,!1)}a.exports={decodeInt32:function(a,b){var c=i(a,b),d=e.readInt(c.value).value;if(e.free(c.value),d<-0x80000000||d>0x7fffffff)throw Error("Result out of range");return{value:d,nextIndex:c.nextIndex}},decodeInt64:function(a,b){var c=i(a,b),d=e.readInt(c.value),f=d.value;if(e.free(c.value),f<-0x8000000000000000||f>0x7ffffffffffffc00)throw Error("Result out of range");return{value:f,nextIndex:c.nextIndex,lossy:d.lossy}},decodeIntBuffer:i,decodeUInt32:function(a,b){var c=k(a,b),d=e.readUInt(c.value).value;if(e.free(c.value),d>0xffffffff)throw Error("Result out of range");return{value:d,nextIndex:c.nextIndex}},decodeUInt64:function(a,b){var c=k(a,b),d=e.readUInt(c.value),f=d.value;if(e.free(c.value),f>0xfffffffffffff800)throw Error("Result out of range");return{value:f,nextIndex:c.nextIndex,lossy:d.lossy}},decodeUIntBuffer:k,encodeInt32:function(a){var b=e.alloc(4);b.writeInt32LE(a,0);var c=h(b);return e.free(b),c},encodeInt64:function(a){var b=e.alloc(8);e.writeInt64(a,b);var c=h(b);return e.free(b),c},encodeIntBuffer:h,encodeUInt32:function(a){var b=e.alloc(4);b.writeUInt32LE(a,0);var c=j(b);return e.free(b),c},encodeUInt64:function(a){var b=e.alloc(8);e.writeUInt64(a,b);var c=j(b);return e.free(b),c},encodeUIntBuffer:j}},22549:a=>{"use strict";var b=Object.defineProperty||!1;if(b)try{b({},"a",{value:1})}catch(a){b=!1}a.exports=b},22842:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},22896:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(72927),f=c(69978),g=c(94415),h=c(89722);b.default=function(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError((0,g.default)(b,...h.types));return(0,d.createSecretKey)(b)}if(b instanceof d.KeyObject)return b;if((0,e.isCryptoKey)(b))return(0,f.checkSigCryptoKey)(b,a,c),d.KeyObject.from(b);throw TypeError((0,g.default)(b,...h.types,"Uint8Array"))}},23584:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.AuthenticateWithSessionCookieFailureReason=void 0,function(a){a.INVALID_JWT="invalid_jwt",a.INVALID_SESSION_COOKIE="invalid_session_cookie",a.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided"}(c||(b.AuthenticateWithSessionCookieFailureReason=c={}))},23817:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ProduceJWT=void 0;let d=c(19918),e=c(16217),f=c(51153);function g(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}class h{_payload;constructor(a={}){if(!(0,e.default)(a))throw TypeError("JWT Claims Set MUST be an object");this._payload=a}setIssuer(a){return this._payload={...this._payload,iss:a},this}setSubject(a){return this._payload={...this._payload,sub:a},this}setAudience(a){return this._payload={...this._payload,aud:a},this}setJti(a){return this._payload={...this._payload,jti:a},this}setNotBefore(a){return"number"==typeof a?this._payload={...this._payload,nbf:g("setNotBefore",a)}:a instanceof Date?this._payload={...this._payload,nbf:g("setNotBefore",(0,d.default)(a))}:this._payload={...this._payload,nbf:(0,d.default)(new Date)+(0,f.default)(a)},this}setExpirationTime(a){return"number"==typeof a?this._payload={...this._payload,exp:g("setExpirationTime",a)}:a instanceof Date?this._payload={...this._payload,exp:g("setExpirationTime",(0,d.default)(a))}:this._payload={...this._payload,exp:(0,d.default)(new Date)+(0,f.default)(a)},this}setIssuedAt(a){return void 0===a?this._payload={...this._payload,iat:(0,d.default)(new Date)}:a instanceof Date?this._payload={...this._payload,iat:g("setIssuedAt",(0,d.default)(a))}:"string"==typeof a?this._payload={...this._payload,iat:g("setIssuedAt",(0,d.default)(new Date)+(0,f.default)(a))}:this._payload={...this._payload,iat:g("setIssuedAt",a)},this}}b.ProduceJWT=h},23917:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithCodeOptions=void 0,b.serializeAuthenticateWithCodeOptions=a=>({grant_type:"authorization_code",client_id:a.clientId,client_secret:a.clientSecret,code:a.code,code_verifier:a.codeVerifier,invitation_token:a.invitationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},24103:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CheckResult=void 0;let d=c(46096);class e{constructor(a){this.result=a.result,this.isImplicit=a.is_implicit,this.warrantToken=a.warrant_token,this.debugInfo=a.debug_info?{processingTime:a.debug_info.processing_time,decisionTree:(0,d.deserializeDecisionTreeNode)(a.debug_info.decision_tree)}:void 0,this.warnings=a.warnings}isAuthorized(){return"authorized"===this.result}}b.CheckResult=e},24347:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeFactorWithSecrets=b.deserializeFactor=void 0;let d=c(14330);b.deserializeFactor=a=>({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type,totp:(0,d.deserializeTotp)(a.totp),userId:a.user_id}),b.deserializeFactorWithSecrets=a=>({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type,totp:(0,d.deserializeTotpWithSecrets)(a.totp),userId:a.user_id})},24384:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.HttpClientError=b.HttpClientResponse=b.HttpClient=void 0;class c{constructor(a,b){this.baseURL=a,this.options=b,this.MAX_RETRY_ATTEMPTS=3,this.BACKOFF_MULTIPLIER=1.5,this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS=500,this.RETRY_STATUS_CODES=[500,502,504],this.sleep=a=>new Promise(b=>setTimeout(b,this.getSleepTimeInMilliseconds(a)))}getClientName(){throw Error("getClientName not implemented")}addClientToUserAgent(a){return a.indexOf(" ")>-1?a.replace(/\b\s/,`/${this.getClientName()} `):a+=`/${this.getClientName()}`}static getResourceURL(a,b,d){return new URL([b,c.getQueryString(d)].filter(Boolean).join("?"),a).toString()}static getQueryString(a){if(!a)return;let b={};return Object.entries(a).forEach(([a,c])=>{""!==c&&void 0!==c&&(b[a]=c)}),new URLSearchParams(b).toString()}static getContentTypeHeader(a){if(a instanceof URLSearchParams)return{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}}static getBody(a){return null===a||a instanceof URLSearchParams?a:JSON.stringify(a)}getSleepTimeInMilliseconds(a){return this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS*Math.pow(this.BACKOFF_MULTIPLIER,a)*(Math.random()+.5)}}b.HttpClient=c;class d{constructor(a,b){this._statusCode=a,this._headers=b}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}}b.HttpClientResponse=d;class e extends Error{constructor({message:a,response:b}){super(a),this.name="HttpClientError",this.message="The request could not be completed.",this.message=a,this.response=b}}b.HttpClientError=e},24795:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(48474),b),e(c(11312),b)},25066:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(57975);b.default=a=>d.types.isKeyObject(a)},25172:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListInvitationsOptions=void 0,b.serializeListInvitationsOptions=a=>({email:a.email,organization_id:a.organizationId,limit:a.limit,before:a.before,after:a.after,order:a.order})},25425:a=>{"use strict";a.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},25896:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},26077:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decodeProtectedHeader=void 0;let d=c(45592),e=c(74855),f=c(16217);b.decodeProtectedHeader=function(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(e.decoder.decode((0,d.decode)(b)));if(!(0,f.default)(a))throw Error();return a}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},26274:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(69558),f=c(69817),g=c(36231),h={padding:d.constants.RSA_PKCS1_PSS_PADDING,saltLength:d.constants.RSA_PSS_SALTLEN_DIGEST},i=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);b.default=function(a,b){switch(a){case"EdDSA":if(!["ed25519","ed448"].includes(b.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return b;case"RS256":case"RS384":case"RS512":if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,g.default)(b,a),b;case"PS256":case"PS384":case"PS512":if("rsa-pss"===b.asymmetricKeyType){let{hashAlgorithm:c,mgf1HashAlgorithm:d,saltLength:e}=b.asymmetricKeyDetails,f=parseInt(a.slice(-3),10);if(void 0!==c&&(c!==`sha${f}`||d!==c))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}`);if(void 0!==e&&e>f>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}`)}else if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,g.default)(b,a),{key:b,...h};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let c=(0,e.default)(b),d=i.get(a);if(c!==d)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${d}, got ${c}`);return{dsaEncoding:"ieee-p1363",key:b}}default:throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},26604:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.UnprocessableEntityException=void 0;let e=d(c(49565));class f extends Error{constructor({code:a,errors:b,message:c,requestID:d}){if(super(),this.status=422,this.name="UnprocessableEntityException",this.message="Unprocessable entity",this.requestID=d,c&&(this.message=c),a&&(this.code=a),b){let a=(0,e.default)("requirement",b.length);for(let{code:c}of(this.message=`The following ${a} must be met:
`,b))this.message=this.message.concat(`	${c}
`)}}}b.UnprocessableEntityException=f},27067:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a){if(!(a instanceof Uint8Array)||a.length<8)throw new d.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},27216:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},27845:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListOrganizationMembershipsOptions=void 0,b.serializeListOrganizationMembershipsOptions=a=>{var b;return{user_id:a.userId,organization_id:a.organizationId,statuses:null==(b=a.statuses)?void 0:b.join(","),limit:a.limit,before:a.before,after:a.after,order:a.order}}},28103:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},28162:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598);b.default=(a,b)=>(0,d.createHash)(a).update(b).digest()},28168:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},28224:a=>{"use strict";a.exports=Math.round},28341:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},28453:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},28481:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CompactEncrypt=void 0;let d=c(93695);class e{_flattened;constructor(a){this._flattened=new d.FlattenedEncrypt(a)}setContentEncryptionKey(a){return this._flattened.setContentEncryptionKey(a),this}setInitializationVector(a){return this._flattened.setInitializationVector(a),this}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}setKeyManagementParameters(a){return this._flattened.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this._flattened.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}b.CompactEncrypt=e},28654:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeRevokeSessionOptions=void 0,b.serializeRevokeSessionOptions=a=>({session_id:a.sessionId})},29300:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SignJWT=void 0;let d=c(20578),e=c(69817),f=c(74855),g=c(23817);class h extends g.ProduceJWT{_protectedHeader;setProtectedHeader(a){return this._protectedHeader=a,this}async sign(a,b){let c=new d.CompactSign(f.encoder.encode(JSON.stringify(this._payload)));if(c.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new e.JWTInvalid("JWTs MUST NOT use unencoded payload");return c.sign(a,b)}}b.SignJWT=h},29409:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeProfile=void 0,b.deserializeProfile=a=>({id:a.id,idpId:a.idp_id,organizationId:a.organization_id,connectionId:a.connection_id,connectionType:a.connection_type,email:a.email,firstName:a.first_name,lastName:a.last_name,role:a.role,groups:a.groups,customAttributes:a.custom_attributes,rawAttributes:a.raw_attributes})},29579:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.FGA=void 0;let e=c(13086),f=c(54815),g=c(60189),h=c(46944),i=c(61324),j=c(590),k=c(59870);class l{constructor(a){this.workos=a}check(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post("/fga/v1/check",(0,f.serializeCheckOptions)(a),b);return new e.CheckResult(c)})}checkBatch(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post("/fga/v1/check",(0,f.serializeCheckBatchOptions)(a),b);return c.map(a=>new e.CheckResult(a))})}createResource(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/resources",(0,f.serializeCreateResourceOptions)(a));return(0,f.deserializeResource)(b)})}getResource(a){return d(this,void 0,void 0,function*(){let b=(0,g.isResourceInterface)(a)?a.getResourceType():a.resourceType,c=(0,g.isResourceInterface)(a)?a.getResourceId():a.resourceId,{data:d}=yield this.workos.get(`/fga/v1/resources/${b}/${c}`);return(0,f.deserializeResource)(d)})}listResources(a){return d(this,void 0,void 0,function*(){return new h.AutoPaginatable((yield(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/resources",f.deserializeResource,a?(0,f.serializeListResourceOptions)(a):void 0)),a=>(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/resources",f.deserializeResource,a),a?(0,f.serializeListResourceOptions)(a):void 0)})}updateResource(a){return d(this,void 0,void 0,function*(){let b=(0,g.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,c=(0,g.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId,{data:d}=yield this.workos.put(`/fga/v1/resources/${b}/${c}`,{meta:a.meta});return(0,f.deserializeResource)(d)})}deleteResource(a){return d(this,void 0,void 0,function*(){let b=(0,g.isResourceInterface)(a)?a.getResourceType():a.resourceType,c=(0,g.isResourceInterface)(a)?a.getResourceId():a.resourceId;yield this.workos.delete(`/fga/v1/resources/${b}/${c}`)})}batchWriteResources(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/resources/batch",(0,f.serializeBatchWriteResourcesOptions)(a));return(0,f.deserializeBatchWriteResourcesResponse)(b)})}writeWarrant(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/warrants",(0,f.serializeWriteWarrantOptions)(a));return(0,f.deserializeWarrantToken)(b)})}batchWriteWarrants(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/warrants",a.map(f.serializeWriteWarrantOptions));return(0,f.deserializeWarrantToken)(b)})}listWarrants(a,b){return d(this,void 0,void 0,function*(){return new h.AutoPaginatable((yield(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",f.deserializeWarrant,a?(0,f.serializeListWarrantsOptions)(a):void 0,b)),a=>(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",f.deserializeWarrant,a,b),a?(0,f.serializeListWarrantsOptions)(a):void 0)})}query(a,b={}){return d(this,void 0,void 0,function*(){return new j.FgaPaginatable((yield(0,k.fetchAndDeserializeFGAList)(this.workos,"/fga/v1/query",f.deserializeQueryResult,(0,f.serializeQueryOptions)(a),b)),a=>(0,k.fetchAndDeserializeFGAList)(this.workos,"/fga/v1/query",f.deserializeQueryResult,a,b),(0,f.serializeQueryOptions)(a))})}}b.FGA=l},29926:a=>{"use strict";a.exports=Function.prototype.call},30150:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateOrganizationOptions=void 0,b.serializeCreateOrganizationOptions=a=>({name:a.name,allow_profiles_outside_organization:a.allowProfilesOutsideOrganization,domain_data:a.domainData,domains:a.domains,external_id:a.externalId,metadata:a.metadata})},30660:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817),e=c(95032);b.default=(a,b)=>{if(b.length<<3!==(0,e.bitLength)(a))throw new d.JWEInvalid("Invalid Initialization Vector length")}},31848:(a,b,c)=>{"use strict";var d=c(50094),e=Object.prototype.hasOwnProperty,f=Array.isArray,g={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:d.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},h=function(a,b,c){if(a&&"string"==typeof a&&b.comma&&a.indexOf(",")>-1)return a.split(",");if(b.throwOnLimitExceeded&&c>=b.arrayLimit)throw RangeError("Array limit exceeded. Only "+b.arrayLimit+" element"+(1===b.arrayLimit?"":"s")+" allowed in an array.");return a},i=function(a,b){var c={__proto__:null},i=b.ignoreQueryPrefix?a.replace(/^\?/,""):a;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var j=b.parameterLimit===1/0?void 0:b.parameterLimit,k=i.split(b.delimiter,b.throwOnLimitExceeded?j+1:j);if(b.throwOnLimitExceeded&&k.length>j)throw RangeError("Parameter limit exceeded. Only "+j+" parameter"+(1===j?"":"s")+" allowed.");var l=-1,m=b.charset;if(b.charsetSentinel)for(n=0;n<k.length;++n)0===k[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===k[n]?m="utf-8":"utf8=%26%2310003%3B"===k[n]&&(m="iso-8859-1"),l=n,n=k.length);for(n=0;n<k.length;++n)if(n!==l){var n,o,p,q=k[n],r=q.indexOf("]="),s=-1===r?q.indexOf("="):r+1;-1===s?(o=b.decoder(q,g.decoder,m,"key"),p=b.strictNullHandling?null:""):(o=b.decoder(q.slice(0,s),g.decoder,m,"key"),p=d.maybeMap(h(q.slice(s+1),b,f(c[o])?c[o].length:0),function(a){return b.decoder(a,g.decoder,m,"value")})),p&&b.interpretNumericEntities&&"iso-8859-1"===m&&(p=String(p).replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(parseInt(b,10))})),q.indexOf("[]=")>-1&&(p=f(p)?[p]:p);var t=e.call(c,o);t&&"combine"===b.duplicates?c[o]=d.combine(c[o],p):t&&"last"!==b.duplicates||(c[o]=p)}return c},j=function(a,b,c,e){var f=0;if(a.length>0&&"[]"===a[a.length-1]){var g=a.slice(0,-1).join("");f=Array.isArray(b)&&b[g]?b[g].length:0}for(var i=e?b:h(b,c,f),j=a.length-1;j>=0;--j){var k,l=a[j];if("[]"===l&&c.parseArrays)k=c.allowEmptyArrays&&(""===i||c.strictNullHandling&&null===i)?[]:d.combine([],i);else{k=c.plainObjects?{__proto__:null}:{};var m="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,n=c.decodeDotInKeys?m.replace(/%2E/g,"."):m,o=parseInt(n,10);c.parseArrays||""!==n?!isNaN(o)&&l!==n&&String(o)===n&&o>=0&&c.parseArrays&&o<=c.arrayLimit?(k=[])[o]=i:"__proto__"!==n&&(k[n]=i):k={0:i}}i=k}return i},k=function(a,b,c,d){if(a){var f=c.allowDots?a.replace(/\.([^.[]+)/g,"[$1]"):a,g=/(\[[^[\]]*])/g,h=c.depth>0&&/(\[[^[\]]*])/.exec(f),i=h?f.slice(0,h.index):f,k=[];if(i){if(!c.plainObjects&&e.call(Object.prototype,i)&&!c.allowPrototypes)return;k.push(i)}for(var l=0;c.depth>0&&null!==(h=g.exec(f))&&l<c.depth;){if(l+=1,!c.plainObjects&&e.call(Object.prototype,h[1].slice(1,-1))&&!c.allowPrototypes)return;k.push(h[1])}if(h){if(!0===c.strictDepth)throw RangeError("Input depth exceeded depth option of "+c.depth+" and strictDepth is true");k.push("["+f.slice(h.index)+"]")}return j(k,b,c,d)}},l=function(a){if(!a)return g;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.decodeDotInKeys&&"boolean"!=typeof a.decodeDotInKeys)throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==a.throwOnLimitExceeded&&"boolean"!=typeof a.throwOnLimitExceeded)throw TypeError("`throwOnLimitExceeded` option must be a boolean");var b=void 0===a.charset?g.charset:a.charset,c=void 0===a.duplicates?g.duplicates:a.duplicates;if("combine"!==c&&"first"!==c&&"last"!==c)throw TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===a.allowDots?!0===a.decodeDotInKeys||g.allowDots:!!a.allowDots,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:g.allowEmptyArrays,allowPrototypes:"boolean"==typeof a.allowPrototypes?a.allowPrototypes:g.allowPrototypes,allowSparse:"boolean"==typeof a.allowSparse?a.allowSparse:g.allowSparse,arrayLimit:"number"==typeof a.arrayLimit?a.arrayLimit:g.arrayLimit,charset:b,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:g.charsetSentinel,comma:"boolean"==typeof a.comma?a.comma:g.comma,decodeDotInKeys:"boolean"==typeof a.decodeDotInKeys?a.decodeDotInKeys:g.decodeDotInKeys,decoder:"function"==typeof a.decoder?a.decoder:g.decoder,delimiter:"string"==typeof a.delimiter||d.isRegExp(a.delimiter)?a.delimiter:g.delimiter,depth:"number"==typeof a.depth||!1===a.depth?+a.depth:g.depth,duplicates:c,ignoreQueryPrefix:!0===a.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof a.interpretNumericEntities?a.interpretNumericEntities:g.interpretNumericEntities,parameterLimit:"number"==typeof a.parameterLimit?a.parameterLimit:g.parameterLimit,parseArrays:!1!==a.parseArrays,plainObjects:"boolean"==typeof a.plainObjects?a.plainObjects:g.plainObjects,strictDepth:"boolean"==typeof a.strictDepth?!!a.strictDepth:g.strictDepth,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:g.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof a.throwOnLimitExceeded&&a.throwOnLimitExceeded}};a.exports=function(a,b){var c=l(b);if(""===a||null==a)return c.plainObjects?{__proto__:null}:{};for(var e="string"==typeof a?i(a,c):a,f=c.plainObjects?{__proto__:null}:{},g=Object.keys(e),h=0;h<g.length;++h){var j=g[h],m=k(j,e[j],c,"string"==typeof a);f=d.merge(f,m,c)}return!0===c.allowSparse?f:d.compact(f)}},31981:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},32057:(a,b,c)=>{"use strict";var d=c(38563),e=c(44326),f=c(17213),g=c(70141),h=d("%Map%",!0),i=e("Map.prototype.get",!0),j=e("Map.prototype.set",!0),k=e("Map.prototype.has",!0),l=e("Map.prototype.delete",!0),m=e("Map.prototype.size",!0);a.exports=!!h&&function(){var a,b={assert:function(a){if(!b.has(a))throw new g("Side channel does not contain "+f(a))},delete:function(b){if(a){var c=l(a,b);return 0===m(a)&&(a=void 0),c}return!1},get:function(b){if(a)return i(a,b)},has:function(b){return!!a&&k(a,b)},set:function(b,c){a||(a=new h),j(a,b,c)}};return b}},32468:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeUpdateUserOptions=void 0,b.serializeUpdateUserOptions=a=>({email:a.email,email_verified:a.emailVerified,first_name:a.firstName,last_name:a.lastName,password:a.password,password_hash:a.passwordHash,password_hash_type:a.passwordHashType,external_id:a.externalId,metadata:a.metadata})},32863:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(33318),b),e(c(48856),b),e(c(9756),b)},32987:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},33318:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeChallenge=void 0,b.deserializeChallenge=a=>({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,expiresAt:a.expires_at,code:a.code,authenticationFactorId:a.authentication_factor_id})},33595:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeDeletedEventDirectory=b.deserializeEventDirectory=b.deserializeDirectoryState=b.deserializeDirectory=void 0,b.deserializeDirectory=a=>({object:a.object,id:a.id,domain:a.domain,externalKey:a.external_key,name:a.name,organizationId:a.organization_id,state:(0,b.deserializeDirectoryState)(a.state),type:a.type,createdAt:a.created_at,updatedAt:a.updated_at}),b.deserializeDirectoryState=a=>"linked"===a?"active":"unlinked"===a?"inactive":a,b.deserializeEventDirectory=a=>({object:a.object,id:a.id,externalKey:a.external_key,type:a.type,state:a.state,name:a.name,organizationId:a.organization_id,domains:a.domains,createdAt:a.created_at,updatedAt:a.updated_at}),b.deserializeDeletedEventDirectory=a=>({object:a.object,id:a.id,type:a.type,state:a.state,name:a.name,organizationId:a.organization_id,createdAt:a.created_at,updatedAt:a.updated_at})},33762:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},33874:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListEventOptions=void 0,b.serializeListEventOptions=a=>({events:a.events,organization_id:a.organizationId,range_start:a.rangeStart,range_end:a.rangeEnd,limit:a.limit,after:a.after})},33886:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},34003:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeAuthenticationRadarRiskDetectedEvent=void 0,b.deserializeAuthenticationRadarRiskDetectedEvent=a=>({authMethod:a.auth_method,action:a.action,control:a.control,blocklistType:a.blocklist_type,ipAddress:a.ip_address,userAgent:a.user_agent,userId:a.user_id,email:a.email})},34563:(a,b,c)=>{"use strict";var d=c(44994),e=c(31848);a.exports={formats:c(87943),parse:e,stringify:d}},34604:a=>{"use strict";a.exports=RangeError},34821:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CryptoProvider=void 0;class c{constructor(){this.encoder=new TextEncoder}}b.CryptoProvider=c},35254:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GeneralSign=void 0;let d=c(69531),e=c(69817);class f{parent;protectedHeader;unprotectedHeader;options;key;constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setProtectedHeader(a){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=a,this}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addSignature(...a){return this.parent.addSignature(...a)}sign(...a){return this.parent.sign(...a)}done(){return this.parent}}class g{_payload;_signatures=[];constructor(a){this._payload=a}addSignature(a,b){let c=new f(this,a,b);return this._signatures.push(c),c}async sign(){if(!this._signatures.length)throw new e.JWSInvalid("at least one signature must be added");let a={signatures:[],payload:""};for(let b=0;b<this._signatures.length;b++){let c=this._signatures[b],f=new d.FlattenedSign(this._payload);f.setProtectedHeader(c.protectedHeader),f.setUnprotectedHeader(c.unprotectedHeader);let{payload:g,...h}=await f.sign(c.key,c.options);if(0===b)a.payload=g;else if(a.payload!==g)throw new e.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");a.signatures.push(h)}return a}}b.GeneralSign=g},35642:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=(a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}},36165:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(30660),f=c(52349),g=c(74855),h=c(69817),i=c(78109),j=c(5061),k=c(72927),l=c(69978),m=c(25066),n=c(94415),o=c(11192),p=c(89722);b.default=(a,b,c,q,r,s)=>{let t;if((0,k.isCryptoKey)(b))(0,l.checkEncCryptoKey)(b,a,"decrypt"),t=d.KeyObject.from(b);else if(b instanceof Uint8Array||(0,m.default)(b))t=b;else throw TypeError((0,n.default)(b,...p.types,"Uint8Array"));if(!q)throw new h.JWEInvalid("JWE Initialization Vector missing");if(!r)throw new h.JWEInvalid("JWE Authentication Tag missing");switch((0,f.default)(a,t),(0,e.default)(a,q),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(a,b,c,e,f,k){let l,n,p=parseInt(a.slice(1,4),10);(0,m.default)(b)&&(b=b.export());let q=b.subarray(p>>3),r=b.subarray(0,p>>3),s=parseInt(a.slice(-3),10),t=`aes-${p}-cbc`;if(!(0,o.default)(t))throw new h.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let u=(0,j.default)(k,e,c,s,r,p);try{l=(0,i.default)(f,u)}catch{}if(!l)throw new h.JWEDecryptionFailed;try{let a=(0,d.createDecipheriv)(t,q,e);n=(0,g.concat)(a.update(c),a.final())}catch{}if(!n)throw new h.JWEDecryptionFailed;return n}(a,t,c,q,r,s);case"A128GCM":case"A192GCM":case"A256GCM":return function(a,b,c,e,f,g){let i=parseInt(a.slice(1,4),10),j=`aes-${i}-gcm`;if(!(0,o.default)(j))throw new h.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);try{let a=(0,d.createDecipheriv)(j,b,e,{authTagLength:16});a.setAuthTag(f),g.byteLength&&a.setAAD(g,{plaintextLength:c.length});let h=a.update(c);return a.final(),h}catch{throw new h.JWEDecryptionFailed}}(a,t,c,q,r,s);default:throw new h.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},36231:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=(a,b)=>{let{modulusLength:c}=a.asymmetricKeyDetails;if("number"!=typeof c||c<2048)throw TypeError(`${b} requires key modulusLength to be 2048 bits or larger`)}},36890:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeAction=void 0;let d=c(93098),e=c(43460),f=c(78250);b.deserializeAction=a=>{switch(a.object){case"user_registration_action_context":return{id:a.id,object:a.object,userData:(a=>({object:a.object,email:a.email,firstName:a.first_name,lastName:a.last_name}))(a.user_data),invitation:a.invitation?(0,e.deserializeInvitation)(a.invitation):void 0,ipAddress:a.ip_address,userAgent:a.user_agent,deviceFingerprint:a.device_fingerprint};case"authentication_action_context":return{id:a.id,object:a.object,user:(0,e.deserializeUser)(a.user),organization:a.organization?(0,d.deserializeOrganization)(a.organization):void 0,organizationMembership:a.organization_membership?(0,f.deserializeOrganizationMembership)(a.organization_membership):void 0,ipAddress:a.ip_address,userAgent:a.user_agent,deviceFingerprint:a.device_fingerprint,issuer:a.issuer}}}},36903:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},37009:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.unwrap=b.wrap=void 0;let d=c(18013),e=c(36165),f=c(67040);b.wrap=async function(a,b,c,e){let g=a.slice(0,7),h=await (0,d.default)(g,c,b,e,new Uint8Array(0));return{encryptedKey:h.ciphertext,iv:(0,f.encode)(h.iv),tag:(0,f.encode)(h.tag)}},b.unwrap=async function(a,b,c,d,f){let g=a.slice(0,7);return(0,e.default)(g,b,c,d,f,new Uint8Array(0))}},37386:(a,b)=>{"use strict";function c(a){if(!a)return{};let b={};return Object.keys(a).forEach(c=>{b[c]={type:a[c]}}),b}Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateAuditLogSchemaOptions=void 0,b.serializeCreateAuditLogSchemaOptions=a=>{var b;return{actor:{metadata:{type:"object",properties:c(null==(b=a.actor)?void 0:b.metadata)}},targets:a.targets.map(a=>({type:a.type,metadata:a.metadata?{type:"object",properties:c(a.metadata)}:void 0})),metadata:a.metadata?{type:"object",properties:c(a.metadata)}:void 0}}},37702:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeMagicAuthEvent=b.deserializeMagicAuth=void 0,b.deserializeMagicAuth=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,code:a.code,createdAt:a.created_at,updatedAt:a.updated_at}),b.deserializeMagicAuthEvent=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,createdAt:a.created_at,updatedAt:a.updated_at})},37866:a=>{"use strict";a.exports=Math.floor},38292:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},38303:a=>{"use strict";a.exports=URIError},38383:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GenericServerException=void 0;class c extends Error{constructor(a,b,c,d){super(),this.status=a,this.rawData=c,this.requestID=d,this.name="GenericServerException",this.message="The request could not be completed.",b&&(this.message=b)}}b.GenericServerException=c},38563:(a,b,c)=>{"use strict";var d,e=c(62654),f=c(51313),g=c(98479),h=c(34604),i=c(63216),j=c(7730),k=c(70141),l=c(38303),m=c(66560),n=c(37866),o=c(3070),p=c(75007),q=c(59378),r=c(28224),s=c(19887),t=Function,u=function(a){try{return t('"use strict"; return ('+a+").constructor;")()}catch(a){}},v=c(65041),w=c(22549),x=function(){throw new k},y=v?function(){try{return arguments.callee,x}catch(a){try{return v(arguments,"callee").get}catch(a){return x}}}():x,z=c(97141)(),A=c(47170),B=c(72662),C=c(1886),D=c(81392),E=c(29926),F={},G="undefined"!=typeof Uint8Array&&A?A(Uint8Array):d,H={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?d:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?d:ArrayBuffer,"%ArrayIteratorPrototype%":z&&A?A([][Symbol.iterator]()):d,"%AsyncFromSyncIteratorPrototype%":d,"%AsyncFunction%":F,"%AsyncGenerator%":F,"%AsyncGeneratorFunction%":F,"%AsyncIteratorPrototype%":F,"%Atomics%":"undefined"==typeof Atomics?d:Atomics,"%BigInt%":"undefined"==typeof BigInt?d:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?d:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?d:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?d:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":f,"%eval%":eval,"%EvalError%":g,"%Float16Array%":"undefined"==typeof Float16Array?d:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?d:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?d:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?d:FinalizationRegistry,"%Function%":t,"%GeneratorFunction%":F,"%Int8Array%":"undefined"==typeof Int8Array?d:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?d:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?d:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":z&&A?A(A([][Symbol.iterator]())):d,"%JSON%":"object"==typeof JSON?JSON:d,"%Map%":"undefined"==typeof Map?d:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&z&&A?A(new Map()[Symbol.iterator]()):d,"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":v,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?d:Promise,"%Proxy%":"undefined"==typeof Proxy?d:Proxy,"%RangeError%":h,"%ReferenceError%":i,"%Reflect%":"undefined"==typeof Reflect?d:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?d:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&z&&A?A(new Set()[Symbol.iterator]()):d,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?d:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":z&&A?A(""[Symbol.iterator]()):d,"%Symbol%":z?Symbol:d,"%SyntaxError%":j,"%ThrowTypeError%":y,"%TypedArray%":G,"%TypeError%":k,"%Uint8Array%":"undefined"==typeof Uint8Array?d:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?d:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?d:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?d:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?d:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?d:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?d:WeakSet,"%Function.prototype.call%":E,"%Function.prototype.apply%":D,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":B,"%Math.abs%":m,"%Math.floor%":n,"%Math.max%":o,"%Math.min%":p,"%Math.pow%":q,"%Math.round%":r,"%Math.sign%":s,"%Reflect.getPrototypeOf%":C};if(A)try{null.error}catch(a){var I=A(A(a));H["%Error.prototype%"]=I}var J=function a(b){var c;if("%AsyncFunction%"===b)c=u("async function () {}");else if("%GeneratorFunction%"===b)c=u("function* () {}");else if("%AsyncGeneratorFunction%"===b)c=u("async function* () {}");else if("%AsyncGenerator%"===b){var d=a("%AsyncGeneratorFunction%");d&&(c=d.prototype)}else if("%AsyncIteratorPrototype%"===b){var e=a("%AsyncGenerator%");e&&A&&(c=A(e.prototype))}return H[b]=c,c},K={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},L=c(99197),M=c(89303),N=L.call(E,Array.prototype.concat),O=L.call(D,Array.prototype.splice),P=L.call(E,String.prototype.replace),Q=L.call(E,String.prototype.slice),R=L.call(E,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,U=function(a){var b=Q(a,0,1),c=Q(a,-1);if("%"===b&&"%"!==c)throw new j("invalid intrinsic syntax, expected closing `%`");if("%"===c&&"%"!==b)throw new j("invalid intrinsic syntax, expected opening `%`");var d=[];return P(a,S,function(a,b,c,e){d[d.length]=c?P(e,T,"$1"):b||a}),d},V=function(a,b){var c,d=a;if(M(K,d)&&(d="%"+(c=K[d])[0]+"%"),M(H,d)){var e=H[d];if(e===F&&(e=J(d)),void 0===e&&!b)throw new k("intrinsic "+a+" exists, but is not available. Please file an issue!");return{alias:c,name:d,value:e}}throw new j("intrinsic "+a+" does not exist!")};a.exports=function(a,b){if("string"!=typeof a||0===a.length)throw new k("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof b)throw new k('"allowMissing" argument must be a boolean');if(null===R(/^%?[^%]*%?$/,a))throw new j("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var c=U(a),d=c.length>0?c[0]:"",e=V("%"+d+"%",b),f=e.name,g=e.value,h=!1,i=e.alias;i&&(d=i[0],O(c,N([0,1],i)));for(var l=1,m=!0;l<c.length;l+=1){var n=c[l],o=Q(n,0,1),p=Q(n,-1);if(('"'===o||"'"===o||"`"===o||'"'===p||"'"===p||"`"===p)&&o!==p)throw new j("property names with quotes must have matching quotes");if("constructor"!==n&&m||(h=!0),d+="."+n,M(H,f="%"+d+"%"))g=H[f];else if(null!=g){if(!(n in g)){if(!b)throw new k("base intrinsic for "+a+" exists, but the property is not available.");return}if(v&&l+1>=c.length){var q=v(g,n);g=(m=!!q)&&"get"in q&&!("originalValue"in q.get)?q.get:g[n]}else m=M(g,n),g=g[n];m&&!h&&(H[f]=g)}}return g}},38970:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(62818),b),e(c(52804),b)},39272:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListUsersOptions=void 0,b.serializeListUsersOptions=a=>({email:a.email,organization_id:a.organizationId,limit:a.limit,before:a.before,after:a.after,order:a.order})},39469:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=c(77598);Object.defineProperty(b,"default",{enumerable:!0,get:function(){return d.randomFillSync}})},39559:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},39676:(a,b)=>{"use strict";b.byteLength=function(a){var b=i(a),c=b[0],d=b[1];return(c+d)*3/4-d},b.toByteArray=function(a){var b,c,f=i(a),g=f[0],h=f[1],j=new e((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===h&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===h&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(function(a,b,d){for(var e,f=[],g=b;g<d;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,h=f.length;g<h;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function i(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}d[45]=62,d[95]=63},39701:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},39911:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},40253:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(56750),b),e(c(64597),b),e(c(62879),b),e(c(75356),b)},40283:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(39559),b),e(c(12998),b),e(c(13030),b),e(c(66466),b),e(c(75777),b),e(c(28453),b),e(c(20927),b),e(c(15515),b),e(c(23584),b),e(c(28103),b),e(c(42556),b),e(c(62479),b),e(c(5202),b),e(c(20716),b),e(c(33886),b),e(c(97494),b),e(c(6917),b),e(c(81853),b),e(c(48146),b),e(c(86469),b),e(c(6725),b),e(c(25896),b),e(c(70329),b),e(c(70265),b),e(c(17753),b),e(c(4584),b),e(c(66881),b),e(c(39911),b),e(c(17524),b),e(c(59418),b),e(c(33762),b),e(c(49456),b),e(c(94893),b),e(c(69091),b),e(c(63974),b),e(c(28654),b),e(c(11571),b),e(c(28168),b),e(c(78154),b),e(c(67682),b),e(c(8870),b),e(c(36903),b),e(c(43466),b),e(c(62686),b),e(c(28341),b),e(c(31981),b)},40333:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.CheckOp=void 0,function(a){a.AllOf="all_of",a.AnyOf="any_of"}(c||(b.CheckOp=c={}))},40659:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeUpdateObjectEntity=b.serializeCreateObjectEntity=b.desrializeListObjectVersions=b.deserializeListObjects=b.deserializeObject=b.deserializeObjectMetadata=void 0,b.deserializeObjectMetadata=a=>({context:a.context,environmentId:a.environment_id,id:a.id,keyId:a.key_id,updatedAt:new Date(Date.parse(a.updated_at)),updatedBy:a.updated_by,versionId:a.version_id}),b.deserializeObject=a=>({id:a.id,name:a.name,value:a.value,metadata:(0,b.deserializeObjectMetadata)(a.metadata)});let c=a=>({id:a.id,name:a.name,updatedAt:new Date(Date.parse(a.updated_at))});b.deserializeListObjects=a=>{var b,d;return{object:"list",data:a.data.map(c),listMetadata:{after:null!=(b=a.list_metadata.after)?b:void 0,before:null!=(d=a.list_metadata.before)?d:void 0}}},b.desrializeListObjectVersions=a=>a.data.map(d);let d=a=>({createdAt:new Date(Date.parse(a.created_at)),currentVersion:a.current_version,id:a.id});b.serializeCreateObjectEntity=a=>({name:a.name,value:a.value,key_context:a.context}),b.serializeUpdateObjectEntity=a=>({value:a.value,version_check:a.versionCheck})},41468:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},41605:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.WorkOS=void 0;let e=c(93443),f=c(94187),g=c(70667),h=c(65355),i=c(63871),j=c(66237),k=c(57965),l=c(9619),m=c(88745),n=c(87883),o=c(61483),p=c(4815),q=c(29579),r=c(88411),s=c(24384),t=c(95247),u=c(92394),v=c(80631),w=c(56099),x=c(12967),y=c(86790),z=c(73351),A="7.70.0",B="Idempotency-Key",C="Warrant-Token";class D{constructor(a,b={}){if(this.key=a,this.options=b,this.auditLogs=new o.AuditLogs(this),this.directorySync=new f.DirectorySync(this),this.organizations=new h.Organizations(this),this.organizationDomains=new i.OrganizationDomains(this),this.passwordless=new j.Passwordless(this),this.portal=new k.Portal(this),this.sso=new l.SSO(this),this.mfa=new n.Mfa(this),this.events=new g.Events(this),this.fga=new q.FGA(this),this.widgets=new v.Widgets(this),this.vault=new x.Vault(this),!a&&(this.key="undefined"!=typeof process?null==process?void 0:process.env.WORKOS_API_KEY:void 0,!this.key))throw new e.NoApiKeyProvidedException;void 0===this.options.https&&(this.options.https=!0),this.clientId=this.options.clientId,this.clientId||"undefined"==typeof process||(this.clientId=null==process?void 0:process.env.WORKOS_CLIENT_ID);let c=this.options.https?"https":"http",d=this.options.apiHostname||"api.workos.com",m=this.options.port;this.baseURL=`${c}://${d}`,m&&(this.baseURL=this.baseURL+`:${m}`);let r=`workos-node/${A}`;if(b.appInfo){let{name:a,version:c}=b.appInfo;r+=` ${a}: ${c}`}this.webhooks=this.createWebhookClient(),this.actions=this.createActionsClient(),this.userManagement=new p.UserManagement(this,this.createIronSessionProvider()),this.client=this.createHttpClient(b,r)}createWebhookClient(){return new m.Webhooks(this.getCryptoProvider())}createActionsClient(){return new w.Actions(this.getCryptoProvider())}getCryptoProvider(){return new t.SubtleCryptoProvider}createHttpClient(a,b){var c;return new u.FetchHttpClient(this.baseURL,Object.assign(Object.assign({},a.config),{timeout:a.timeout,headers:Object.assign(Object.assign({},null==(c=a.config)?void 0:c.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":b})}))}createIronSessionProvider(){throw Error("IronSessionProvider not implemented. Use WorkOSNode or WorkOSWorker instead.")}get version(){return A}post(a,b,c={}){return d(this,void 0,void 0,function*(){let d,e={};c.idempotencyKey&&(e[B]=c.idempotencyKey),c.warrantToken&&(e[C]=c.warrantToken);try{d=yield this.client.post(a,b,{params:c.query,headers:e})}catch(b){throw this.handleHttpError({path:a,error:b}),b}try{return{data:yield d.toJSON()}}catch(a){throw yield this.handleParseError(a,d),a}})}get(a,b={}){return d(this,void 0,void 0,function*(){let c,d={};b.accessToken&&(d.Authorization=`Bearer ${b.accessToken}`),b.warrantToken&&(d[C]=b.warrantToken);try{c=yield this.client.get(a,{params:b.query,headers:d})}catch(b){throw this.handleHttpError({path:a,error:b}),b}try{return{data:yield c.toJSON()}}catch(a){throw yield this.handleParseError(a,c),a}})}put(a,b,c={}){return d(this,void 0,void 0,function*(){let d,e={};c.idempotencyKey&&(e[B]=c.idempotencyKey);try{d=yield this.client.put(a,b,{params:c.query,headers:e})}catch(b){throw this.handleHttpError({path:a,error:b}),b}try{return{data:yield d.toJSON()}}catch(a){throw yield this.handleParseError(a,d),a}})}delete(a,b){return d(this,void 0,void 0,function*(){try{yield this.client.delete(a,{params:b})}catch(b){throw this.handleHttpError({path:a,error:b}),b}})}emitWarning(a){console.warn(`WorkOS: ${a}`)}handleParseError(a,b){var c;return d(this,void 0,void 0,function*(){if(a instanceof SyntaxError){let d=b.getRawResponse(),e=null!=(c=d.headers.get("X-Request-ID"))?c:"",f=d.status,g=yield d.text();throw new z.ParseError({message:a.message,rawBody:g,rawStatus:f,requestID:e})}})}handleHttpError({path:a,error:b}){var c;if(!(b instanceof s.HttpClientError))throw Error(`Unexpected error: ${b}`,{cause:b});let{response:d}=b;if(d){let{status:b,data:f,headers:g}=d,h=null!=(c=g["X-Request-ID"])?c:"",{code:i,error_description:j,error:k,errors:l,message:m}=f;switch(b){case 401:throw new e.UnauthorizedException(h);case 409:throw new y.ConflictException({requestID:h,message:m,error:k});case 422:throw new e.UnprocessableEntityException({code:i,errors:l,message:m,requestID:h});case 404:throw new e.NotFoundException({code:i,message:m,path:a,requestID:h});case 429:{let a=g.get("Retry-After");throw new e.RateLimitExceededException(f.message,h,a?Number(a):null)}default:if(k||j)throw new e.OauthException(b,h,k,j,f);if(i&&l)throw new r.BadRequestException({code:i,errors:l,message:m,requestID:h});throw new e.GenericServerException(b,f.message,f,h)}}}}b.WorkOS=D},42326:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeWarrant=void 0,b.deserializeWarrant=a=>({resourceType:a.resource_type,resourceId:a.resource_id,relation:a.relation,subject:{resourceType:a.subject.resource_type,resourceId:a.subject.resource_id,relation:a.subject.relation},policy:a.policy})},42556:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},42877:a=>{"use strict";a.exports=Number.isNaN||function(a){return a!=a}},43289:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},43460:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(23917),b),e(c(97496),b),e(c(71214),b),e(c(93229),b),e(c(90750),b),e(c(15049),b),e(c(19145),b),e(c(56988),b),e(c(90076),b),e(c(78921),b),e(c(57074),b),e(c(88606),b),e(c(24347),b),e(c(71619),b),e(c(47855),b),e(c(37702),b),e(c(49571),b),e(c(98546),b),e(c(44133),b),e(c(97608),b),e(c(43473),b),e(c(91156),b),e(c(32468),b),e(c(46074),b),e(c(55791),b)},43466:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},43473:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateUserOptions=void 0,b.serializeCreateUserOptions=a=>({email:a.email,password:a.password,password_hash:a.passwordHash,password_hash_type:a.passwordHashType,first_name:a.firstName,last_name:a.lastName,email_verified:a.emailVerified,external_id:a.externalId,metadata:a.metadata})},43988:a=>{"use strict";a.exports={extract:function(a,b,c,d){if(c<0||c>32)throw Error("Bad value for bitLength.");if(void 0===d)d=0;else if(0!==d&&1!==d)throw Error("Bad value for defaultBit.");var e=255*d,f=0,g=b+c,h=Math.floor(b/8),i=Math.floor(g/8),j=g%8;for(0!==j&&(f=k(i)&(1<<j)-1);i>h;)f=f<<8|k(--i);return f>>>b%8;function k(b){var c=a[b];return void 0===c?e:c}},inject:function(a,b,c,d){if(c<0||c>32)throw Error("Bad value for bitLength.");var e=Math.floor((b+c-1)/8);if(b<0||e>=a.length)throw Error("Index out of range.");for(var f=Math.floor(b/8),g=b%8;c>0;)1&d?a[f]|=1<<g:a[f]&=~(1<<g),d>>=1,c--,0==(g=(g+1)%8)&&f++},getSign:function(a){return a[a.length-1]>>>7},highOrder:function(a,b){for(var c=b.length,d=(1^a)*255;c>0&&b[c-1]===d;)c--;if(0===c)return -1;for(var e=b[c-1],f=8*c-1,g=7;g>0&&(e>>g&1)!==a;g--)f--;return f}}},44133:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeSendPasswordResetEmailOptions=void 0,b.serializeSendPasswordResetEmailOptions=a=>({email:a.email,password_reset_url:a.passwordResetUrl})},44326:(a,b,c)=>{"use strict";var d=c(38563),e=c(84444),f=e([d("%String.prototype.indexOf%")]);a.exports=function(a,b){var c=d(a,!!b);return"function"==typeof c&&f(a,".prototype.")>-1?e([c]):c}},44994:(a,b,c)=>{"use strict";var d=c(49050),e=c(50094),f=c(87943),g=Object.prototype.hasOwnProperty,h={brackets:function(a){return a+"[]"},comma:"comma",indices:function(a,b){return a+"["+b+"]"},repeat:function(a){return a}},i=Array.isArray,j=Array.prototype.push,k=function(a,b){j.apply(a,i(b)?b:[b])},l=Date.prototype.toISOString,m=f.default,n={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:m,formatter:f.formatters[m],indices:!1,serializeDate:function(a){return l.call(a)},skipNulls:!1,strictNullHandling:!1},o={},p=function a(b,c,f,g,h,j,l,m,p,q,r,s,t,u,v,w,x,y){for(var z,A,B=b,C=y,D=0,E=!1;void 0!==(C=C.get(o))&&!E;){var F=C.get(b);if(D+=1,void 0!==F)if(F===D)throw RangeError("Cyclic object value");else E=!0;void 0===C.get(o)&&(D=0)}if("function"==typeof q?B=q(c,B):B instanceof Date?B=t(B):"comma"===f&&i(B)&&(B=e.maybeMap(B,function(a){return a instanceof Date?t(a):a})),null===B){if(j)return p&&!w?p(c,n.encoder,x,"key",u):c;B=""}if("string"==typeof(z=B)||"number"==typeof z||"boolean"==typeof z||"symbol"==typeof z||"bigint"==typeof z||e.isBuffer(B))return p?[v(w?c:p(c,n.encoder,x,"key",u))+"="+v(p(B,n.encoder,x,"value",u))]:[v(c)+"="+v(String(B))];var G=[];if(void 0===B)return G;if("comma"===f&&i(B))w&&p&&(B=e.maybeMap(B,p)),A=[{value:B.length>0?B.join(",")||null:void 0}];else if(i(q))A=q;else{var H=Object.keys(B);A=r?H.sort(r):H}var I=m?String(c).replace(/\./g,"%2E"):String(c),J=g&&i(B)&&1===B.length?I+"[]":I;if(h&&i(B)&&0===B.length)return J+"[]";for(var K=0;K<A.length;++K){var L=A[K],M="object"==typeof L&&L&&void 0!==L.value?L.value:B[L];if(!l||null!==M){var N=s&&m?String(L).replace(/\./g,"%2E"):String(L),O=i(B)?"function"==typeof f?f(J,N):J:J+(s?"."+N:"["+N+"]");y.set(b,D);var P=d();P.set(o,y),k(G,a(M,O,f,g,h,j,l,m,"comma"===f&&w&&i(B)?null:p,q,r,s,t,u,v,w,x,P))}}return G},q=function(a){if(!a)return n;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.encodeDotInKeys&&"boolean"!=typeof a.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw TypeError("Encoder has to be a function.");var b,c=a.charset||n.charset;if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var d=f.default;if(void 0!==a.format){if(!g.call(f.formatters,a.format))throw TypeError("Unknown format option provided.");d=a.format}var e=f.formatters[d],j=n.filter;if(("function"==typeof a.filter||i(a.filter))&&(j=a.filter),b=a.arrayFormat in h?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":n.arrayFormat,"commaRoundTrip"in a&&"boolean"!=typeof a.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var k=void 0===a.allowDots?!0===a.encodeDotInKeys||n.allowDots:!!a.allowDots;return{addQueryPrefix:"boolean"==typeof a.addQueryPrefix?a.addQueryPrefix:n.addQueryPrefix,allowDots:k,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:n.allowEmptyArrays,arrayFormat:b,charset:c,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:n.charsetSentinel,commaRoundTrip:!!a.commaRoundTrip,delimiter:void 0===a.delimiter?n.delimiter:a.delimiter,encode:"boolean"==typeof a.encode?a.encode:n.encode,encodeDotInKeys:"boolean"==typeof a.encodeDotInKeys?a.encodeDotInKeys:n.encodeDotInKeys,encoder:"function"==typeof a.encoder?a.encoder:n.encoder,encodeValuesOnly:"boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:n.encodeValuesOnly,filter:j,format:d,formatter:e,serializeDate:"function"==typeof a.serializeDate?a.serializeDate:n.serializeDate,skipNulls:"boolean"==typeof a.skipNulls?a.skipNulls:n.skipNulls,sort:"function"==typeof a.sort?a.sort:null,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:n.strictNullHandling}};a.exports=function(a,b){var c,e=a,f=q(b);"function"==typeof f.filter?e=(0,f.filter)("",e):i(f.filter)&&(c=f.filter);var g=[];if("object"!=typeof e||null===e)return"";var j=h[f.arrayFormat],l="comma"===j&&f.commaRoundTrip;c||(c=Object.keys(e)),f.sort&&c.sort(f.sort);for(var m=d(),n=0;n<c.length;++n){var o=c[n],r=e[o];f.skipNulls&&null===r||k(g,p(r,o,j,l,f.allowEmptyArrays,f.strictNullHandling,f.skipNulls,f.encodeDotInKeys,f.encode?f.encoder:null,f.filter,f.sort,f.allowDots,f.serializeDate,f.format,f.formatter,f.encodeValuesOnly,f.charset,m))}var s=g.join(f.delimiter),t=!0===f.addQueryPrefix?"?":"";return f.charsetSentinel&&("iso-8859-1"===f.charset?t+="utf8=%26%2310003%3B&":t+="utf8=%E2%9C%93&"),s.length>0?t+s:""}},45234:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(37067),e=c(44708),f=c(78474),g=c(69817),h=c(74855);b.default=async(a,b,c)=>{let i;switch(a.protocol){case"https:":i=e.get;break;case"http:":i=d.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:j,headers:k}=c,l=i(a.href,{agent:j,timeout:b,headers:k}),[m]=await Promise.race([(0,f.once)(l,"response"),(0,f.once)(l,"timeout")]);if(!m)throw l.destroy(),new g.JWKSTimeout;if(200!==m.statusCode)throw new g.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let n=[];for await(let a of m)n.push(a);try{return JSON.parse(h.decoder.decode((0,h.concat)(...n)))}catch{throw new g.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}}},45235:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},45592:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decode=b.encode=void 0;let d=c(67040);b.encode=d.encode,b.decode=d.decode},45656:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},46074:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeUpdateUserPasswordOptions=void 0,b.serializeUpdateUserPasswordOptions=a=>({password:a.password})},46096:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeDecisionTreeNode=b.serializeCheckBatchOptions=b.serializeCheckOptions=void 0;let d=c(60189);b.serializeCheckOptions=a=>({op:a.op,checks:a.checks.map(e),debug:a.debug}),b.serializeCheckBatchOptions=a=>({op:"batch",checks:a.checks.map(e),debug:a.debug});let e=a=>{var b;return{resource_type:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,resource_id:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId?a.resource.resourceId:"",relation:a.relation,subject:(0,d.isSubject)(a.subject)?{resource_type:a.subject.resourceType,resource_id:a.subject.resourceId}:{resource_type:a.subject.getResourceType(),resource_id:a.subject.getResourceId()},context:null!=(b=a.context)?b:{}}};b.deserializeDecisionTreeNode=a=>({check:{resource:{resourceType:a.check.resource_type,resourceId:a.check.resource_id},relation:a.check.relation,subject:{resourceType:a.check.subject.resource_type,resourceId:a.check.subject.resource_id},context:a.check.context},policy:a.policy,decision:a.decision,processingTime:a.processing_time,children:a.children.map(b.deserializeDecisionTreeNode)})},46507:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.uint8ArrayToBase64=b.base64ToUint8Array=void 0,b.base64ToUint8Array=function(a){if("function"==typeof atob){let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}if("undefined"!=typeof Buffer)return new Uint8Array(Buffer.from(a,"base64"));throw Error("No base64 decoding implementation available")},b.uint8ArrayToBase64=function(a){if("function"==typeof btoa){let b="";for(let c=0;c<a.byteLength;c++)b+=String.fromCharCode(a[c]);return btoa(b)}if("undefined"!=typeof Buffer)return Buffer.from(a).toString("base64");throw Error("No base64 encoding implementation available")}},46542:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.WebIronSessionProvider=void 0;let e=c(59825),f=c(80177);class g extends f.IronSessionProvider{sealData(a,b){return d(this,void 0,void 0,function*(){let c=Object.assign(Object.assign({},b),{ttl:0});return(0,e.sealData)(a,c)})}unsealData(a,b){return d(this,void 0,void 0,function*(){return(0,e.unsealData)(a,b)})}}b.WebIronSessionProvider=g},46762:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decodeJwt=void 0;let d=c(45592),e=c(74855),f=c(16217),g=c(69817);b.decodeJwt=function(a){let b,c;if("string"!=typeof a)throw new g.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:h,length:i}=a.split(".");if(5===i)throw new g.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new g.JWTInvalid("Invalid JWT");if(!h)throw new g.JWTInvalid("JWTs must contain a payload");try{b=(0,d.decode)(h)}catch{throw new g.JWTInvalid("Failed to base64url decode the payload")}try{c=JSON.parse(e.decoder.decode(b))}catch{throw new g.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,f.default)(c))throw new g.JWTInvalid("Invalid JWT Claims Set");return c}},46830:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateOrganizationMembershipOptions=void 0,b.serializeCreateOrganizationMembershipOptions=a=>({organization_id:a.organizationId,user_id:a.userId,role_slug:a.roleSlug,role_slugs:a.roleSlugs})},46944:function(a,b){"use strict";var c=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},d=this&&this.__await||function(a){return this instanceof d?(this.v=a,this):new d(a)},e=this&&this.__asyncValues||function(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a="function"==typeof __values?__values(a):a[Symbol.iterator](),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}},f=this&&this.__asyncDelegator||function(a){var b,c;return b={},e("next"),e("throw",function(a){throw a}),e("return"),b[Symbol.iterator]=function(){return this},b;function e(e,f){b[e]=a[e]?function(b){return(c=!c)?{value:d(a[e](b)),done:!1}:f?f(b):b}:f}},g=this&&this.__asyncGenerator||function(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var e,f=c.apply(a,b||[]),g=[];return e={},h("next"),h("throw"),h("return"),e[Symbol.asyncIterator]=function(){return this},e;function h(a){f[a]&&(e[a]=function(b){return new Promise(function(c,d){g.push([a,b,c,d])>1||i(a,b)})})}function i(a,b){try{var c;(c=f[a](b)).value instanceof d?Promise.resolve(c.value.v).then(j,k):l(g[0][2],c)}catch(a){l(g[0][3],a)}}function j(a){i("next",a)}function k(a){i("throw",a)}function l(a,b){a(b),g.shift(),g.length&&i(g[0][0],g[0][1])}};Object.defineProperty(b,"__esModule",{value:!0}),b.AutoPaginatable=void 0;class h{constructor(a,b,c){this.list=a,this.apiCall=b,this.object="list",this.options=Object.assign({},c)}get data(){return this.list.data}get listMetadata(){return this.list.listMetadata}generatePages(a){return g(this,arguments,function*(){let b=yield d(this.apiCall(Object.assign(Object.assign({},this.options),{limit:100,after:a.after})));yield yield d(b.data),b.listMetadata.after&&(yield d(new Promise(a=>setTimeout(a,350))),yield d((yield*f(e(this.generatePages({after:b.listMetadata.after}))))))})}autoPagination(){var a,b,d,f;return c(this,void 0,void 0,function*(){if(this.options.limit)return this.data;let c=[];try{for(var g,h=!0,i=e(this.generatePages({after:this.options.after}));!(a=(g=yield i.next()).done);h=!0)f=g.value,h=!1,c.push(...f)}catch(a){b={error:a}}finally{try{!h&&!a&&(d=i.return)&&(yield d.call(i))}finally{if(b)throw b.error}}return c})}}b.AutoPaginatable=h},47170:(a,b,c)=>{"use strict";var d=c(1886),e=c(72662),f=c(79542);a.exports=d?function(a){return d(a)}:e?function(a){if(!a||"object"!=typeof a&&"function"!=typeof a)throw TypeError("getProto: not an object");return e(a)}:f?function(a){return f(a)}:null},47277:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(54669),b)},47365:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeBatchWriteResourcesResponse=b.deserializeResource=void 0,b.deserializeResource=a=>({resourceType:a.resource_type,resourceId:a.resource_id,meta:a.meta}),b.deserializeBatchWriteResourcesResponse=a=>a.data.map(a=>(0,b.deserializeResource)(a))},47648:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},47855:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListSessionsOptions=void 0,b.serializeListSessionsOptions=a=>Object.assign({},a)},48146:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},48350:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},48474:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},48856:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeFactorWithSecrets=b.deserializeFactor=void 0;let d=c(55034),e=c(14330);b.deserializeFactor=a=>Object.assign(Object.assign({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type},a.sms?{sms:(0,d.deserializeSms)(a.sms)}:{}),a.totp?{totp:(0,e.deserializeTotp)(a.totp)}:{}),b.deserializeFactorWithSecrets=a=>Object.assign(Object.assign({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type},a.sms?{sms:(0,d.deserializeSms)(a.sms)}:{}),a.totp?{totp:(0,e.deserializeTotpWithSecrets)(a.totp)}:{})},49050:(a,b,c)=>{"use strict";var d=c(70141),e=c(17213),f=c(53641),g=c(32057),h=c(78221)||g||f;a.exports=function(){var a,b={assert:function(a){if(!b.has(a))throw new d("Side channel does not contain "+e(a))},delete:function(b){return!!a&&a.delete(b)},get:function(b){return a&&a.get(b)},has:function(b){return!!a&&a.has(b)},set:function(b,c){a||(a=h()),a.set(b,c)}};return b}},49456:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},49565:function(a){a.exports=function(){var a=[],b=[],c={},d={},e={};function f(a){return"string"==typeof a?RegExp("^"+a+"$","i"):a}function g(a,b){return a===b?b:a===a.toLowerCase()?b.toLowerCase():a===a.toUpperCase()?b.toUpperCase():a[0]===a[0].toUpperCase()?b.charAt(0).toUpperCase()+b.substr(1).toLowerCase():b.toLowerCase()}function h(a,b,d){if(!a.length||c.hasOwnProperty(a))return b;for(var e=d.length;e--;){var f=d[e];if(f[0].test(b))return function(a,b){return a.replace(b[0],function(c,d){var e,f,h=(e=b[1],f=arguments,e.replace(/\$(\d{1,2})/g,function(a,b){return f[b]||""}));return""===c?g(a[d-1],h):g(c,h)})}(b,f)}return b}function i(a,b,c){return function(d){var e=d.toLowerCase();return b.hasOwnProperty(e)?g(d,e):a.hasOwnProperty(e)?g(d,a[e]):h(e,d,c)}}function j(a,b,c,d){return function(d){var e=d.toLowerCase();return!!b.hasOwnProperty(e)||!a.hasOwnProperty(e)&&h(e,e,c)===e}}function k(a,b,c){var d=1===b?k.singular(a):k.plural(a);return(c?b+" ":"")+d}return k.plural=i(e,d,a),k.isPlural=j(e,d,a),k.singular=i(d,e,b),k.isSingular=j(d,e,b),k.addPluralRule=function(b,c){a.push([f(b),c])},k.addSingularRule=function(a,c){b.push([f(a),c])},k.addUncountableRule=function(a){if("string"==typeof a){c[a.toLowerCase()]=!0;return}k.addPluralRule(a,"$0"),k.addSingularRule(a,"$0")},k.addIrregularRule=function(a,b){b=b.toLowerCase(),e[a=a.toLowerCase()]=b,d[b]=a},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(a){return k.addIrregularRule(a[0],a[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(a){return k.addPluralRule(a[0],a[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(a){return k.addSingularRule(a[0],a[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[e]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(k.addUncountableRule),k}()},49571:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializePasswordResetEvent=b.deserializePasswordReset=void 0,b.deserializePasswordReset=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,passwordResetToken:a.password_reset_token,passwordResetUrl:a.password_reset_url,expiresAt:a.expires_at,createdAt:a.created_at}),b.deserializePasswordResetEvent=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,createdAt:a.created_at})},50094:(a,b,c)=>{"use strict";var d=c(87943),e=Object.prototype.hasOwnProperty,f=Array.isArray,g=function(){for(var a=[],b=0;b<256;++b)a.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return a}(),h=function(a){for(;a.length>1;){var b=a.pop(),c=b.obj[b.prop];if(f(c)){for(var d=[],e=0;e<c.length;++e)void 0!==c[e]&&d.push(c[e]);b.obj[b.prop]=d}}},i=function(a,b){for(var c=b&&b.plainObjects?{__proto__:null}:{},d=0;d<a.length;++d)void 0!==a[d]&&(c[d]=a[d]);return c};a.exports={arrayToObject:i,assign:function(a,b){return Object.keys(b).reduce(function(a,c){return a[c]=b[c],a},a)},combine:function(a,b){return[].concat(a,b)},compact:function(a){for(var b=[{obj:{o:a},prop:"o"}],c=[],d=0;d<b.length;++d)for(var e=b[d],f=e.obj[e.prop],g=Object.keys(f),i=0;i<g.length;++i){var j=g[i],k=f[j];"object"==typeof k&&null!==k&&-1===c.indexOf(k)&&(b.push({obj:f,prop:j}),c.push(k))}return h(b),a},decode:function(a,b,c){var d=a.replace(/\+/g," ");if("iso-8859-1"===c)return d.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(d)}catch(a){return d}},encode:function(a,b,c,e,f){if(0===a.length)return a;var h=a;if("symbol"==typeof a?h=Symbol.prototype.toString.call(a):"string"!=typeof a&&(h=String(a)),"iso-8859-1"===c)return escape(h).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});for(var i="",j=0;j<h.length;j+=1024){for(var k=h.length>=1024?h.slice(j,j+1024):h,l=[],m=0;m<k.length;++m){var n=k.charCodeAt(m);if(45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||f===d.RFC1738&&(40===n||41===n)){l[l.length]=k.charAt(m);continue}if(n<128){l[l.length]=g[n];continue}if(n<2048){l[l.length]=g[192|n>>6]+g[128|63&n];continue}if(n<55296||n>=57344){l[l.length]=g[224|n>>12]+g[128|n>>6&63]+g[128|63&n];continue}m+=1,n=65536+((1023&n)<<10|1023&k.charCodeAt(m)),l[l.length]=g[240|n>>18]+g[128|n>>12&63]+g[128|n>>6&63]+g[128|63&n]}i+=l.join("")}return i},isBuffer:function(a){return!!a&&"object"==typeof a&&!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))},isRegExp:function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},maybeMap:function(a,b){if(f(a)){for(var c=[],d=0;d<a.length;d+=1)c.push(b(a[d]));return c}return b(a)},merge:function a(b,c,d){if(!c)return b;if("object"!=typeof c&&"function"!=typeof c){if(f(b))b.push(c);else{if(!b||"object"!=typeof b)return[b,c];(d&&(d.plainObjects||d.allowPrototypes)||!e.call(Object.prototype,c))&&(b[c]=!0)}return b}if(!b||"object"!=typeof b)return[b].concat(c);var g=b;return(f(b)&&!f(c)&&(g=i(b,d)),f(b)&&f(c))?(c.forEach(function(c,f){if(e.call(b,f)){var g=b[f];g&&"object"==typeof g&&c&&"object"==typeof c?b[f]=a(g,c,d):b.push(c)}else b[f]=c}),b):Object.keys(c).reduce(function(b,f){var g=c[f];return e.call(b,f)?b[f]=a(b[f],g,d):b[f]=g,b},g)}}},50120:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.NodeHttpClientResponse=b.NodeHttpClient=void 0;let h=c(24384),i=f(c(37067)),j=f(c(44708)),k=i.default||i,l=j.default||j;class m extends h.HttpClient{constructor(a,b){super(a,b),this.baseURL=a,this.options=b,this.httpAgent=new k.Agent({keepAlive:!0}),this.httpsAgent=new l.Agent({keepAlive:!0})}getClientName(){return"node"}static getBody(a){return null==a?null:a instanceof URLSearchParams?a.toString():JSON.stringify(a)}get(a,b){return g(this,void 0,void 0,function*(){let c=h.HttpClient.getResourceURL(this.baseURL,a,b.params);return a.startsWith("/fga/")?yield this.nodeRequestWithRetry(c,"GET",null,b.headers):yield this.nodeRequest(c,"GET",null,b.headers)})}post(a,b,c){return g(this,void 0,void 0,function*(){let d=h.HttpClient.getResourceURL(this.baseURL,a,c.params);return a.startsWith("/fga/")?yield this.nodeRequestWithRetry(d,"POST",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.nodeRequest(d,"POST",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers))})}put(a,b,c){return g(this,void 0,void 0,function*(){let d=h.HttpClient.getResourceURL(this.baseURL,a,c.params);return a.startsWith("/fga/")?yield this.nodeRequestWithRetry(d,"PUT",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.nodeRequest(d,"PUT",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers))})}delete(a,b){return g(this,void 0,void 0,function*(){let c=h.HttpClient.getResourceURL(this.baseURL,a,b.params);return a.startsWith("/fga/")?yield this.nodeRequestWithRetry(c,"DELETE",null,b.headers):yield this.nodeRequest(c,"DELETE",null,b.headers)})}nodeRequest(a,b,c,d){return g(this,void 0,void 0,function*(){return new Promise((e,f)=>{var i,j;let m=a.startsWith("https"),o=m?this.httpsAgent:this.httpAgent,p=m?l:k,{"User-Agent":q}=null==(i=this.options)?void 0:i.headers,r={method:b,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(j=this.options)?void 0:j.headers),d),{"User-Agent":this.addClientToUserAgent(q.toString())}),agent:o},s=p.request(a,r,a=>g(this,void 0,void 0,function*(){let b=new n(a);a.statusCode&&(a.statusCode<200||a.statusCode>299)&&f(new h.HttpClientError({message:a.statusMessage,response:{status:a.statusCode,headers:a.headers,data:yield b.toJSON()}})),e(b)}));s.on("error",a=>{f(Error(a.message))}),c&&(s.setHeader("Content-Length",Buffer.byteLength(c)),s.write(c)),s.end()})})}nodeRequestWithRetry(a,b,c,d){var e,f;return g(this,void 0,void 0,function*(){let i=a.startsWith("https"),j=i?this.httpsAgent:this.httpAgent,m=i?l:k,{"User-Agent":o}=null==(e=this.options)?void 0:e.headers,p={method:b,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(f=this.options)?void 0:f.headers),d),{"User-Agent":this.addClientToUserAgent(o.toString())}),agent:j},q=1,r=()=>g(this,void 0,void 0,function*(){return new Promise((b,d)=>{let e=m.request(a,p,a=>g(this,void 0,void 0,function*(){let c=new n(a);if(this.shouldRetryRequest(a,q))return q++,yield this.sleep(q),r().then(b).catch(d);a.statusCode&&(a.statusCode<200||a.statusCode>299)&&d(new h.HttpClientError({message:a.statusMessage,response:{status:a.statusCode,headers:a.headers,data:yield c.toJSON()}})),b(new n(a))}));e.on("error",a=>g(this,void 0,void 0,function*(){if(null!=a&&a instanceof TypeError)return q++,yield this.sleep(q),r().then(b).catch(d);d(Error(a.message))})),c&&(e.setHeader("Content-Length",Buffer.byteLength(c)),e.write(c)),e.end()})});return r()})}shouldRetryRequest(a,b){return!(b>this.MAX_RETRY_ATTEMPTS)&&!!(null!=a&&this.RETRY_STATUS_CODES.includes(a.statusCode))}}b.NodeHttpClient=m;class n extends h.HttpClientResponse{constructor(a){super(a.statusCode,a.headers||{}),this._res=a}getRawResponse(){return this._res}toJSON(){return new Promise((a,b)=>{let c=this._res.headers["content-type"];(null==c?void 0:c.includes("application/json"))||a(null);let d="";this._res.setEncoding("utf8"),this._res.on("data",a=>{d+=a}),this._res.once("end",()=>{try{a(JSON.parse(d))}catch(a){b(a)}})})}}b.NodeHttpClientResponse=n},50315:a=>{"use strict";a.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var a={},b=Symbol("test"),c=Object(b);if("string"==typeof b||"[object Symbol]"!==Object.prototype.toString.call(b)||"[object Symbol]"!==Object.prototype.toString.call(c))return!1;for(var d in a[b]=42,a)return!1;if("function"==typeof Object.keys&&0!==Object.keys(a).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(a).length)return!1;var e=Object.getOwnPropertySymbols(a);if(1!==e.length||e[0]!==b||!Object.prototype.propertyIsEnumerable.call(a,b))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var f=Object.getOwnPropertyDescriptor(a,b);if(42!==f.value||!0!==f.enumerable)return!1}return!0}},50628:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.unreachable=void 0,b.unreachable=(a,b=`Entered unreachable code. Received '${a}'.`)=>{throw TypeError(b)}},50965:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.GeneratePortalLinkIntent=void 0,function(a){a.AuditLogs="audit_logs",a.DomainVerification="domain_verification",a.DSync="dsync",a.LogStreams="log_streams",a.SSO="sso",a.CertificateRenewal="certificate_renewal"}(c||(b.GeneratePortalLinkIntent=c={}))},51089:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(30150),b),e(c(93098),b),e(c(78655),b)},51153:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let c=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;b.default=a=>{let b,d=c.exec(a);if(!d||d[4]&&d[1])throw TypeError("Invalid time period format");let e=parseFloat(d[2]);switch(d[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(e);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*e);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*e);break;case"day":case"days":case"d":b=Math.round(86400*e);break;case"week":case"weeks":case"w":b=Math.round(604800*e);break;default:b=Math.round(0x1e187e0*e)}return"-"===d[1]||"ago"===d[4]?-b:b}},51313:a=>{"use strict";a.exports=Error},51959:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(57975),f=c(88311),g=c(26274),h=c(5839),i=c(22896),j=(0,e.promisify)(d.verify);b.default=async(a,b,c,e)=>{let k=(0,i.default)(a,b,"verify");if(a.startsWith("HS")){let b=await (0,h.default)(a,k,e);try{return d.timingSafeEqual(c,b)}catch{return!1}}let l=(0,f.default)(a),m=(0,g.default)(a,k);try{return await j(l,e,m,c)}catch{return!1}}},52006:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuditLogExportOptions=void 0,b.serializeAuditLogExportOptions=a=>({actions:a.actions,actors:a.actors,actor_names:a.actorNames,actor_ids:a.actorIds,organization_id:a.organizationId,range_end:a.rangeEnd.toISOString(),range_start:a.rangeStart.toISOString(),targets:a.targets})},52302:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateOrganizationDomainOptions=void 0,b.serializeCreateOrganizationDomainOptions=a=>({domain:a.domain,organization_id:a.organizationId})},52315:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeQueryResult=void 0,b.deserializeQueryResult=a=>({resourceType:a.resource_type,resourceId:a.resource_id,relation:a.relation,warrant:{resourceType:a.warrant.resource_type,resourceId:a.warrant.resource_id,relation:a.warrant.relation,subject:{resourceType:a.warrant.subject.resource_type,resourceId:a.warrant.subject.resource_id,relation:a.warrant.subject.relation}},isImplicit:a.is_implicit,meta:a.meta})},52349:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817),e=c(25066);b.default=(a,b)=>{let c;switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":c=parseInt(a.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":c=parseInt(a.slice(1,4),10);break;default:throw new d.JOSENotSupported(`Content Encryption Algorithm ${a} is not supported either by JOSE or your javascript runtime`)}if(b instanceof Uint8Array){let a=b.byteLength<<3;if(a!==c)throw new d.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${a} bits`);return}if((0,e.default)(b)&&"secret"===b.type){let a=b.symmetricKeySize<<3;if(a!==c)throw new d.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${a} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},52738:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializePasswordlessSession=void 0,b.deserializePasswordlessSession=a=>({id:a.id,email:a.email,expiresAt:a.expires_at,link:a.link,object:a.object})},52804:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeList=void 0,b.deserializeList=(a,b)=>({object:"list",data:a.data.map(b),listMetadata:a.list_metadata})},53268:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a,b,c,e,f){let g;if(void 0!==f.crit&&e?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!e||void 0===e.crit)return new Set;if(!Array.isArray(e.crit)||0===e.crit.length||e.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let h of(g=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,e.crit)){if(!g.has(h))throw new d.JOSENotSupported(`Extension Header Parameter "${h}" is not recognized`);if(void 0===f[h])throw new a(`Extension Header Parameter "${h}" is missing`);if(g.get(h)&&void 0===e[h])throw new a(`Extension Header Parameter "${h}" MUST be integrity protected`)}return new Set(e.crit)}},53317:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},53557:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(6374),b),e(c(73103),b),e(c(41468),b),e(c(6347),b),e(c(92815),b),e(c(45235),b),e(c(39701),b),e(c(8465),b)},53641:(a,b,c)=>{"use strict";var d=c(17213),e=c(70141),f=function(a,b,c){for(var d,e=a;null!=(d=e.next);e=d)if(d.key===b)return e.next=d.next,c||(d.next=a.next,a.next=d),d},g=function(a,b){if(a){var c=f(a,b);return c&&c.value}},h=function(a,b,c){var d=f(a,b);d?d.value=c:a.next={key:b,next:a.next,value:c}},i=function(a,b){if(a)return f(a,b,!0)};a.exports=function(){var a,b={assert:function(a){if(!b.has(a))throw new e("Side channel does not contain "+d(a))},delete:function(b){var c=a&&a.next,d=i(a,b);return d&&c&&c===d&&(a=void 0),!!d},get:function(b){return g(a,b)},has:function(b){var c;return!!(c=a)&&!!f(c,b)},set:function(b,c){a||(a={next:void 0}),h(a,b,c)}};return b}},54669:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},54815:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(46096),b),e(c(17250),b),e(c(68233),b),e(c(89434),b),e(c(74296),b),e(c(10007),b),e(c(90244),b),e(c(52315),b),e(c(47365),b),e(c(80238),b),e(c(42326),b),e(c(17861),b),e(c(84977),b)},55034:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeSms=void 0,b.deserializeSms=a=>({phoneNumber:a.phone_number})},55307:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.flattenedDecrypt=void 0;let d=c(67040),e=c(36165),f=c(69817),g=c(1842),h=c(16217),i=c(7706),j=c(74855),k=c(2678),l=c(53268),m=c(35642);b.flattenedDecrypt=async function(a,b,c){let n,o,p,q,r,s,t;if(!(0,h.default)(a))throw new f.JWEInvalid("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new f.JWEInvalid("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new f.JWEInvalid("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new f.JWEInvalid("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new f.JWEInvalid("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new f.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new f.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new f.JWEInvalid("JWE AAD incorrect type");if(void 0!==a.header&&!(0,h.default)(a.header))throw new f.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!(0,h.default)(a.unprotected))throw new f.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=(0,d.decode)(a.protected);n=JSON.parse(j.decoder.decode(b))}catch{throw new f.JWEInvalid("JWE Protected Header is invalid")}if(!(0,g.default)(n,a.header,a.unprotected))throw new f.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...a.header,...a.unprotected};if((0,l.default)(f.JWEInvalid,new Map,c?.crit,n,u),void 0!==u.zip)throw new f.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:v,enc:w}=u;if("string"!=typeof v||!v)throw new f.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof w||!w)throw new f.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let x=c&&(0,m.default)("keyManagementAlgorithms",c.keyManagementAlgorithms),y=c&&(0,m.default)("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(x&&!x.has(v)||!x&&v.startsWith("PBES2"))throw new f.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(y&&!y.has(w))throw new f.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{o=(0,d.decode)(a.encrypted_key)}catch{throw new f.JWEInvalid("Failed to base64url decode the encrypted_key")}let z=!1;"function"==typeof b&&(b=await b(n,a),z=!0);try{p=await (0,i.default)(v,b,o,u,c)}catch(a){if(a instanceof TypeError||a instanceof f.JWEInvalid||a instanceof f.JOSENotSupported)throw a;p=(0,k.default)(w)}if(void 0!==a.iv)try{q=(0,d.decode)(a.iv)}catch{throw new f.JWEInvalid("Failed to base64url decode the iv")}if(void 0!==a.tag)try{r=(0,d.decode)(a.tag)}catch{throw new f.JWEInvalid("Failed to base64url decode the tag")}let A=j.encoder.encode(a.protected??"");s=void 0!==a.aad?(0,j.concat)(A,j.encoder.encode("."),j.encoder.encode(a.aad)):A;try{t=(0,d.decode)(a.ciphertext)}catch{throw new f.JWEInvalid("Failed to base64url decode the ciphertext")}let B={plaintext:await (0,e.default)(w,p,t,q,r,s)};if(void 0!==a.protected&&(B.protectedHeader=n),void 0!==a.aad)try{B.additionalAuthenticatedData=(0,d.decode)(a.aad)}catch{throw new f.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(B.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(B.unprotectedHeader=a.header),z)?{...B,key:b}:B}},55791:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeUser=void 0,b.deserializeUser=a=>{var b,c;return{object:a.object,id:a.id,email:a.email,emailVerified:a.email_verified,firstName:a.first_name,profilePictureUrl:a.profile_picture_url,lastName:a.last_name,lastSignInAt:a.last_sign_in_at,createdAt:a.created_at,updatedAt:a.updated_at,externalId:null!=(b=a.external_id)?b:null,metadata:null!=(c=a.metadata)?c:{}}}},56018:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SignatureVerificationException=void 0;class c extends Error{constructor(a){super(a||"Signature verification failed."),this.name="SignatureVerificationException"}}b.SignatureVerificationException=c},56099:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.Actions=void 0;let e=c(63494),f=c(50628),g=c(36890);class h{constructor(a){this.signatureProvider=new e.SignatureProvider(a)}get computeSignature(){return this.signatureProvider.computeSignature.bind(this.signatureProvider)}get verifyHeader(){return this.signatureProvider.verifyHeader.bind(this.signatureProvider)}serializeType(a){switch(a){case"authentication":return"authentication_action_response";case"user_registration":return"user_registration_action_response";default:return(0,f.unreachable)(a)}}signResponse(a,b){return d(this,void 0,void 0,function*(){let c,{verdict:d,type:e}=a;"Deny"===d&&a.errorMessage&&(c=a.errorMessage);let f=Object.assign({timestamp:Date.now(),verdict:d},"Deny"===d&&a.errorMessage&&{error_message:c});return{object:this.serializeType(e),payload:f,signature:yield this.computeSignature(f.timestamp,f,b)}})}constructAction({payload:a,sigHeader:b,secret:c,tolerance:e=3e4}){return d(this,void 0,void 0,function*(){return yield this.verifyHeader({payload:a,sigHeader:b,secret:c,tolerance:e}),(0,g.deserializeAction)(a)})}}b.Actions=h},56750:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},56988:function(a,b,c){"use strict";var d=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeAuthenticationResponse=void 0;let e=c(87954),f=c(55791);b.deserializeAuthenticationResponse=a=>{let{user:b,organization_id:c,access_token:g,refresh_token:h,authentication_method:i,impersonator:j,oauth_tokens:k}=a,l=d(a,["user","organization_id","access_token","refresh_token","authentication_method","impersonator","oauth_tokens"]);return Object.assign({user:(0,f.deserializeUser)(b),organizationId:c,accessToken:g,refreshToken:h,impersonator:j,authenticationMethod:i,oauthTokens:(0,e.deserializeOauthTokens)(k)},l)}},57074:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeEmailVerificationEvent=b.deserializeEmailVerification=void 0,b.deserializeEmailVerification=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,code:a.code,createdAt:a.created_at,updatedAt:a.updated_at}),b.deserializeEmailVerificationEvent=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,createdAt:a.created_at,updatedAt:a.updated_at})},57258:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.CookieSession=void 0;let e=c(91499),f=c(70043),g=c(40283);class h{constructor(a,b,c){if(!c)throw Error("cookiePassword is required");this.userManagement=a,this.ironSessionProvider=a.ironSessionProvider,this.cookiePassword=c,this.sessionData=b,this.jwks=this.userManagement.jwks}authenticate(){return d(this,void 0,void 0,function*(){let a;if(!this.sessionData)return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};try{a=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword})}catch(a){return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE}}if(!a.accessToken)return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(a.accessToken)))return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:b,org_id:c,role:d,roles:f,permissions:h,entitlements:i,feature_flags:j}=(0,e.decodeJwt)(a.accessToken);return{authenticated:!0,sessionId:b,organizationId:c,role:d,roles:f,permissions:h,entitlements:i,featureFlags:j,user:a.user,impersonator:a.impersonator,accessToken:a.accessToken}})}refresh(a={}){var b,c;return d(this,void 0,void 0,function*(){let d=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword});if(!d.refreshToken||!d.user)return{authenticated:!1,reason:g.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};let{org_id:h}=(0,e.decodeJwt)(d.accessToken);try{let f=null!=(b=a.cookiePassword)?b:this.cookiePassword,g=yield this.userManagement.authenticateWithRefreshToken({clientId:this.userManagement.clientId,refreshToken:d.refreshToken,organizationId:null!=(c=a.organizationId)?c:h,session:{sealSession:!0,cookiePassword:f}});a.cookiePassword&&(this.cookiePassword=a.cookiePassword),this.sessionData=g.sealedSession;let{sid:i,org_id:j,role:k,roles:l,permissions:m,entitlements:n,feature_flags:o}=(0,e.decodeJwt)(g.accessToken);return{authenticated:!0,sealedSession:g.sealedSession,session:g,sessionId:i,organizationId:j,role:k,roles:l,permissions:m,entitlements:n,featureFlags:o,user:d.user,impersonator:d.impersonator}}catch(a){if(a instanceof f.OauthException&&(a.error===g.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||a.error===g.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||a.error===g.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:a.error};throw a}})}getLogoutUrl({returnTo:a}={}){return d(this,void 0,void 0,function*(){let b=yield this.authenticate();if(!b.authenticated){let{reason:a}=b;throw Error(`Failed to extract session ID for logout URL: ${a}`)}return this.userManagement.getLogoutUrl({sessionId:b.sessionId,returnTo:a})})}isValidJwt(a){return d(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Missing client ID. Did you provide it when initializing WorkOS?");try{return yield(0,e.jwtVerify)(a,this.jwks),!0}catch(a){return!1}})}}b.CookieSession=h},57869:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},57965:function(a,b){"use strict";var c=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.Portal=void 0;class d{constructor(a){this.workos=a}generateLink({intent:a,organization:b,returnUrl:d,successUrl:e}){return c(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post("/portal/generate_link",{intent:a,organization:b,return_url:d,success_url:e});return c})}}b.Portal=d},58182:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(93677),b),e(c(98627),b),e(c(33595),b),e(c(86127),b)},59378:a=>{"use strict";a.exports=Math.pow},59418:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},59738:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=this&&this.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.NodeCryptoProvider=void 0;let h=f(c(55511)),i=c(34821);class j extends i.CryptoProvider{computeHMACSignature(a,b){return h.createHmac("sha256",b).update(a,"utf8").digest("hex")}computeHMACSignatureAsync(a,b){return g(this,void 0,void 0,function*(){return this.computeHMACSignature(a,b)})}secureCompare(a,b){return g(this,void 0,void 0,function*(){let c=this.encoder.encode(a),d=this.encoder.encode(b);if(c.length!==d.length)return!1;let e=h.randomBytes(32),f=h.createHmac("sha256",e).update(c).digest(),g=h.createHmac("sha256",e).update(d).digest();return h.timingSafeEqual(f,g)})}encrypt(a,b,c,d){return g(this,void 0,void 0,function*(){let e=c||h.randomBytes(32),f=h.createCipheriv("aes-256-gcm",b,e);d&&f.setAAD(Buffer.from(d));let g=Buffer.concat([f.update(Buffer.from(a)),f.final()]),i=f.getAuthTag();return{ciphertext:new Uint8Array(g),iv:new Uint8Array(e),tag:new Uint8Array(i)}})}decrypt(a,b,c,d,e){return g(this,void 0,void 0,function*(){let f=h.createDecipheriv("aes-256-gcm",b,c);return f.setAuthTag(Buffer.from(d)),e&&f.setAAD(Buffer.from(e)),new Uint8Array(Buffer.concat([f.update(Buffer.from(a)),f.final()]))})}randomBytes(a){return new Uint8Array(h.randomBytes(a))}}b.NodeCryptoProvider=j},59825:(a,b,c)=>{"use strict";var d=Object.create,e=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,j=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let h of g(b))i.call(a,h)||h===c||e(a,h,{get:()=>b[h],enumerable:!(d=f(b,h))||d.enumerable});return a},k=(a,b,c)=>(c=null!=a?d(h(a)):{},j(!b&&a&&a.__esModule?c:e(c,"default",{value:a,enumerable:!0}),a)),l={};((a,b)=>{for(var c in b)e(a,c,{get:b[c],enumerable:!0})})(l,{createGetIronSession:()=>q,createSealData:()=>t,createUnsealData:()=>s,getIronSession:()=>y,sealData:()=>x,unsealData:()=>w}),a.exports=j(e({},"__esModule",{value:!0}),l);var m=k(c(5296)),n=k(c(2914)),o=1296e3,p={ttl:o,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}};function q(a,b,c){return async(a,d,e)=>{if(!a||!d||!e||!e.cookieName||!e.password)throw Error('iron-session: Bad usage. Minimum usage is const session = await getIronSession(req, res, { cookieName: "...", password: "...". Check the usage here: https://github.com/vvo/iron-session');let f=u(e.password);Object.values(u(e.password)).forEach(a=>{if(a.length<32)throw Error("iron-session: Bad usage. Password must be at least 32 characters long.")});let g={...p,...e,cookieOptions:{...p.cookieOptions,...e.cookieOptions||{}}};0===g.ttl&&(g.ttl=0x7fffffff),e.cookieOptions&&"maxAge"in e.cookieOptions?void 0===e.cookieOptions.maxAge?g.ttl=0:g.cookieOptions.maxAge=e.cookieOptions.maxAge-60:g.cookieOptions.maxAge=g.ttl-60;let h=n.default.parse("credentials"in a?a.headers.get("cookie")||"":a.headers.cookie||"")[g.cookieName],i=void 0===h?{}:await b(h,{password:f,ttl:g.ttl});return Object.defineProperties(i,{save:{value:async function(){if("headersSent"in d&&!0===d.headersSent)throw Error("iron-session: Cannot set session cookie: session.save() was called after headers were sent. Make sure to call it before any res.send() or res.end()");let a=await c(i,{password:f,ttl:g.ttl}),b=n.default.serialize(g.cookieName,a,g.cookieOptions);if(b.length>4096)throw Error(`iron-session: Cookie length is too big ${b.length}, browsers will refuse it. Try to remove some data.`);r(b,d)}},destroy:{value:function(){Object.keys(i).forEach(a=>{delete i[a]}),r(n.default.serialize(g.cookieName,"",{...g.cookieOptions,maxAge:0}),d)}}}),i}}function r(a,b){var c;if("headers"in b)return void b.headers.append("set-cookie",a);let d=null!=(c=b.getHeader("set-cookie"))?c:[];"string"==typeof d&&(d=[d]),b.setHeader("set-cookie",[...d,a])}function s(a){return async(b,{password:c,ttl:d=o})=>{let e=u(c),{sealWithoutVersion:f,tokenVersion:g}=function(a){if("~"===a[a.length-2]){let[b,c]=a.split("~");return{sealWithoutVersion:b,tokenVersion:parseInt(c,10)}}return{sealWithoutVersion:a,tokenVersion:null}}(b);try{let b=await m.unseal(a,f,e,{...m.defaults,ttl:1e3*d})||{};if(2===g)return b;return{...b.persistent}}catch(a){if(a instanceof Error&&("Expired seal"===a.message||"Bad hmac value"===a.message||a.message.startsWith("Cannot find password: ")||"Incorrect number of sealed components"===a.message))return{};throw a}}}function t(a){return async(b,{password:c,ttl:d=o})=>{let e=u(c),f=Math.max(...Object.keys(e).map(a=>parseInt(a,10))),g={id:f.toString(),secret:e[f]},h=await m.seal(a,b,g,{...m.defaults,ttl:1e3*d});return`${h}~2`}}function u(a){return"string"==typeof a?{1:a}:a}var v=new(c(612)).Crypto,w=s(v),x=t(v),y=q(v,w,x)},59870:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.fetchAndDeserializeFGAList=void 0;let e=c(84977);b.fetchAndDeserializeFGAList=(a,b,c,f,g)=>d(void 0,void 0,void 0,function*(){let{data:d}=yield a.get(b,Object.assign({query:f},g));return(0,e.deserializeFGAList)(d,c)})},60189:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isResourceInterface=b.isSubject=void 0,b.isSubject=function(a){return Object.prototype.hasOwnProperty.call(a,"resourceType")&&Object.prototype.hasOwnProperty.call(a,"resourceId")},b.isResourceInterface=function(a){return!!a&&"object"==typeof a&&"getResouceType"in a&&"getResourceId"in a}},60237:(a,b,c)=>{"use strict";let d=c(39676),e=c(62505),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>0x7fffffff)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a){var d=a,e=b;if(("string"!=typeof e||""===e)&&(e="utf8"),!h.isEncoding(e))throw TypeError("Unknown encoding: "+e);let c=0|o(d,e),f=g(c),i=f.write(d,e);return i!==c&&(f=f.slice(0,i)),f}if(ArrayBuffer.isView(a)){var f=a;if(L(f,Uint8Array)){let a=new Uint8Array(f);return m(a.buffer,a.byteOffset,a.byteLength)}return l(f)}if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(L(a,ArrayBuffer)||a&&L(a.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(L(a,SharedArrayBuffer)||a&&L(a.buffer,SharedArrayBuffer)))return m(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let i=a.valueOf&&a.valueOf();if(null!=i&&i!==a)return h.from(i,b,c);let j=function(a){if(h.isBuffer(a)){let b=0|n(a.length),c=g(b);return 0===c.length||a.copy(c,0,0,b),c}return void 0!==a.length?"number"!=typeof a.length||function(a){return a!=a}(a.length)?g(0):l(a):"Buffer"===a.type&&Array.isArray(a.data)?l(a.data):void 0}(a);if(j)return j;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|n(a))}function l(a){let b=a.length<0?0:0|n(a.length),c=g(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a,b,c){let d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function n(a){if(a>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function o(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||L(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return I(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return J(a).length;default:if(e)return d?-1:I(a).length;b=(""+b).toLowerCase(),e=!0}}function p(a,b,c){let e=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0||(c>>>=0)<=(b>>>=0)))return"";for(a||(a="utf8");;)switch(a){case"hex":return function(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=M[a[d]];return e}(this,b,c);case"utf8":case"utf-8":return t(this,b,c);case"ascii":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}(this,b,c);case"latin1":case"binary":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}(this,b,c);case"base64":var f,g,h;return f=this,g=b,h=c,0===g&&h===f.length?d.fromByteArray(f):d.fromByteArray(f.slice(g,h));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(a,b,c){let d=a.slice(b,c),e="";for(let a=0;a<d.length-1;a+=2)e+=String.fromCharCode(d[a]+256*d[a+1]);return e}(this,b,c);default:if(e)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),e=!0}}function q(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function r(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>0x7fffffff?c=0x7fffffff:c<-0x80000000&&(c=-0x80000000),(f=c*=1)!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length)if(e)return -1;else c=a.length-1;else if(c<0)if(!e)return -1;else c=0;if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:s(a,b,c,d,e);if("number"==typeof b){if(b&=255,"function"==typeof Uint8Array.prototype.indexOf)if(e)return Uint8Array.prototype.indexOf.call(a,b,c);else return Uint8Array.prototype.lastIndexOf.call(a,b,c);return s(a,[b],c,d,e)}throw TypeError("val must be string, number or Buffer")}function s(a,b,c,d,e){let f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(e){let d=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===d?0:f-d)){if(-1===d&&(d=f),f-d+1===i)return d*g}else -1!==d&&(f-=f-d),d=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){let c=!0;for(let d=0;d<i;d++)if(j(a,f+d)!==j(b,d)){c=!1;break}if(c)return f}return -1}function t(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let b=a[e],f=null,g=b>239?4:b>223?3:b>191?2:1;if(e+g<=c){let c,d,h,i;switch(g){case 1:b<128&&(f=b);break;case 2:(192&(c=a[e+1]))==128&&(i=(31&b)<<6|63&c)>127&&(f=i);break;case 3:c=a[e+1],d=a[e+2],(192&c)==128&&(192&d)==128&&(i=(15&b)<<12|(63&c)<<6|63&d)>2047&&(i<55296||i>57343)&&(f=i);break;case 4:c=a[e+1],d=a[e+2],h=a[e+3],(192&c)==128&&(192&d)==128&&(192&h)==128&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h)>65535&&i<1114112&&(f=i)}}null===f?(f=65533,g=1):f>65535&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),e+=g}var f=d;let g=f.length;if(g<=4096)return String.fromCharCode.apply(String,f);let h="",i=0;for(;i<g;)h+=String.fromCharCode.apply(String,f.slice(i,i+=4096));return h}function u(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function v(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function w(a,b,c,d,e){E(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function x(a,b,c,d,e){E(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function y(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function z(a,b,c,d,f){return b*=1,c>>>=0,f||y(a,b,c,4,34028234663852886e22,-34028234663852886e22),e.write(a,b,c,d,23,4),c+4}function A(a,b,c,d,f){return b*=1,c>>>=0,f||y(a,b,c,8,17976931348623157e292,-17976931348623157e292),e.write(a,b,c,d,52,8),c+8}b.Buffer=h,b.SlowBuffer=function(a){return+a!=a&&(a=0),h.alloc(+a)},b.INSPECT_MAX_BYTES=50,b.kMaxLength=0x7fffffff,h.TYPED_ARRAY_SUPPORT=function(){try{let a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(a){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){return(j(a),a<=0)?g(a):void 0!==b?"string"==typeof c?g(a).fill(b,c):g(a).fill(b):g(a)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)},h.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(L(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),L(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:+(d<c)},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){let c;if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);if(void 0===b)for(c=0,b=0;c<a.length;++c)b+=a[c].length;let d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let b=a[c];if(L(b,Uint8Array))e+b.length>d.length?(h.isBuffer(b)||(b=h.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else if(h.isBuffer(b))b.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=b.length}return d},h.byteLength=o,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)q(this,b,b+1);return this},h.prototype.swap32=function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)q(this,b,b+3),q(this,b+1,b+2);return this},h.prototype.swap64=function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)q(this,b,b+7),q(this,b+1,b+6),q(this,b+2,b+5),q(this,b+3,b+4);return this},h.prototype.toString=function(){let a=this.length;return 0===a?"":0==arguments.length?t(this,0,a):p.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){let a="",c=b.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(L(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,g=c-b,i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let a=0;a<i;++a)if(j[a]!==k[a]){f=j[a],g=k[a];break}return f<g?-1:+(g<f)},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return r(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return r(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let m=this.length-b;if((void 0===c||c>m)&&(c=m),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let n=!1;for(;;)switch(d){case"hex":return function(a,b,c,d){let e;c=Number(c)||0;let f=a.length-c;d?(d=Number(d))>f&&(d=f):d=f;let g=b.length;for(d>g/2&&(d=g/2),e=0;e<d;++e){var h;let d=parseInt(b.substr(2*e,2),16);if((h=d)!=h)break;a[c+e]=d}return e}(this,a,b,c);case"utf8":case"utf-8":return e=b,f=c,K(I(a,this.length-e),this,e,f);case"ascii":case"latin1":case"binary":return g=b,h=c,K(function(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}(a),this,g,h);case"base64":return i=b,j=c,K(J(a),this,i,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k=b,l=c,K(function(a,b){let c,d,e=[];for(let f=0;f<a.length&&!((b-=2)<0);++f)d=(c=a.charCodeAt(f))>>8,e.push(c%256),e.push(d);return e}(a,this.length-k),this,k,l);default:if(n)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),n=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUintLE=h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUintBE=h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a+--b],e=1;for(;b>0&&(e*=256);)d+=this[a+--b]*e;return d},h.prototype.readUint8=h.prototype.readUInt8=function(a,b){return a>>>=0,b||u(a,1,this.length),this[a]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||u(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||u(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||u(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+0x1000000*this[a+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||u(a,4,this.length),0x1000000*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readBigUInt64LE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&G(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+0x1000000*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+0x1000000*c;return BigInt(d)+(BigInt(e)<<BigInt(32))}),h.prototype.readBigUInt64BE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&G(a,this.length-8);let d=0x1000000*b+65536*this[++a]+256*this[++a]+this[++a],e=0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return(a>>>=0,b||u(a,1,this.length),128&this[a])?-((255-this[a]+1)*1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||u(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||u(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||u(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||u(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readBigInt64LE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&G(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24))<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+0x1000000*this[++a])}),h.prototype.readBigInt64BE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&G(a,this.length-8),(BigInt((b<<24)+65536*this[++a]+256*this[++a]+this[++a])<<BigInt(32))+BigInt(0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c)}),h.prototype.readFloatLE=function(a,b){return a>>>=0,b||u(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||u(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||u(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||u(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;v(this,a,b,c,d,0)}let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;v(this,a,b,c,d,0)}let e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0xffffffff,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0xffffffff,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigUInt64LE=N(function(a,b=0){return w(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=N(function(a,b=0){return x(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);v(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)a<0&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);v(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;--e>=0&&(f*=256);)a<0&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0x7fffffff,-0x80000000),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0x7fffffff,-0x80000000),a<0&&(a=0xffffffff+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigInt64LE=N(function(a,b=0){return w(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=N(function(a,b=0){return x(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(a,b,c){return z(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return z(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return A(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return A(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},h.prototype.fill=function(a,b,c,d){let e;if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let b=a.charCodeAt(0);("utf8"===d&&b<128||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{let f=h.isBuffer(a)?a:h.from(a,d),g=f.length;if(0===g)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=f[e%g]}return this};let B={};function C(a,b,c){B[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function D(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function E(a,b,c,d,e,f){if(a>c||a<b){let d,e="bigint"==typeof b?"n":"";throw d=f>3?0===b||b===BigInt(0)?`>= 0${e} and < 2${e} ** ${(f+1)*8}${e}`:`>= -(2${e} ** ${(f+1)*8-1}${e}) and < 2 ** ${(f+1)*8-1}${e}`:`>= ${b}${e} and <= ${c}${e}`,new B.ERR_OUT_OF_RANGE("value",d,a)}F(e,"offset"),(void 0===d[e]||void 0===d[e+f])&&G(e,d.length-(f+1))}function F(a,b){if("number"!=typeof a)throw new B.ERR_INVALID_ARG_TYPE(b,"number",a)}function G(a,b,c){if(Math.floor(a)!==a)throw F(a,c),new B.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(b<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(c||"offset",`>= ${+!!c} and <= ${b}`,a)}C("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),C("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),C("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>0x100000000?e=D(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=D(e)),e+="n"),d+=` It must be ${b}. Received ${e}`},RangeError);let H=/[^+/0-9A-Za-z-_]/g;function I(a,b){let c;b=b||1/0;let d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function J(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function K(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length)&&!(e>=a.length);++e)b[e+c]=a[e];return e}function L(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}let M=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function N(a){return"undefined"==typeof BigInt?O:a}function O(){throw Error("BigInt not supported")}},61278:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(47648),b),e(c(86478),b),e(c(17382),b)},61324:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.fetchAndDeserialize=void 0;let e=c(38970);b.fetchAndDeserialize=(a,b,c,f,g)=>d(void 0,void 0,void 0,function*(){let{data:d}=yield a.get(b,Object.assign({query:Object.assign(Object.assign({},f),{order:(null==f?void 0:f.order)||"desc"})},g));return(0,e.deserializeList)(d,c)})},61483:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.AuditLogs=void 0;let e=c(79786);class f{constructor(a){this.workos=a}createEvent(a,b,c={}){return d(this,void 0,void 0,function*(){yield this.workos.post("/audit_logs/events",{event:(0,e.serializeCreateAuditLogEventOptions)(b),organization_id:a},c)})}createExport(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/audit_logs/exports",(0,e.serializeAuditLogExportOptions)(a));return(0,e.deserializeAuditLogExport)(b)})}getExport(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/audit_logs/exports/${a}`);return(0,e.deserializeAuditLogExport)(b)})}createSchema(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post(`/audit_logs/actions/${a.action}/schemas`,(0,e.serializeCreateAuditLogSchemaOptions)(a),b);return(0,e.deserializeAuditLogSchema)(c)})}}b.AuditLogs=f},61762:(a,b,c)=>{"use strict";var d=c(99197),e=c(81392),f=c(29926);a.exports=c(25425)||d.call(f,e)},62479:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},62505:(a,b)=>{b.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},b.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=5960464477539062e-23*(23===e),n=d?0:f-1,o=d?1:-1,p=+(b<0||0===b&&1/b<0);for(isNaN(b=Math.abs(b))||b===1/0?(h=+!!isNaN(b),g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),g+l>=1?b+=m/i:b+=m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},62564:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.jwtDecrypt=void 0;let d=c(8697),e=c(19267),f=c(69817);b.jwtDecrypt=async function(a,b,c){let g=await (0,d.compactDecrypt)(a,b,c),h=(0,e.default)(g.protectedHeader,g.plaintext,c),{protectedHeader:i}=g;if(void 0!==i.iss&&i.iss!==h.iss)throw new f.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',h,"iss","mismatch");if(void 0!==i.sub&&i.sub!==h.sub)throw new f.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',h,"sub","mismatch");if(void 0!==i.aud&&JSON.stringify(i.aud)!==JSON.stringify(h.aud))throw new f.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',h,"aud","mismatch");let j={payload:h,protectedHeader:i};return"function"==typeof b?{...j,key:g.key}:j}},62654:a=>{"use strict";a.exports=Object},62686:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},62818:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeEvent=void 0;let d=c(58182),e=c(51089),f=c(21330),g=c(43460),h=c(21650),i=c(78250),j=c(73706),k=c(97608),l=c(34003);b.deserializeEvent=a=>{let b={id:a.id,createdAt:a.created_at};switch(a.event){case"authentication.email_verification_succeeded":case"authentication.magic_auth_failed":case"authentication.magic_auth_succeeded":case"authentication.mfa_succeeded":case"authentication.oauth_failed":case"authentication.oauth_succeeded":case"authentication.password_failed":case"authentication.password_succeeded":case"authentication.sso_failed":case"authentication.sso_succeeded":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeAuthenticationEvent)(a.data)});case"authentication.radar_risk_detected":return Object.assign(Object.assign({},b),{event:a.event,data:(0,l.deserializeAuthenticationRadarRiskDetectedEvent)(a.data)});case"connection.activated":case"connection.deactivated":case"connection.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,f.deserializeConnection)(a.data)});case"dsync.activated":case"dsync.deactivated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeEventDirectory)(a.data)});case"dsync.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeDeletedEventDirectory)(a.data)});case"dsync.group.created":case"dsync.group.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeDirectoryGroup)(a.data)});case"dsync.group.updated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeUpdatedEventDirectoryGroup)(a.data)});case"dsync.group.user_added":case"dsync.group.user_removed":return Object.assign(Object.assign({},b),{event:a.event,data:{directoryId:a.data.directory_id,user:(0,d.deserializeDirectoryUser)(a.data.user),group:(0,d.deserializeDirectoryGroup)(a.data.group)}});case"dsync.user.created":case"dsync.user.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeDirectoryUser)(a.data)});case"dsync.user.updated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeUpdatedEventDirectoryUser)(a.data)});case"email_verification.created":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeEmailVerificationEvent)(a.data)});case"invitation.accepted":case"invitation.created":case"invitation.revoked":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeInvitationEvent)(a.data)});case"magic_auth.created":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeMagicAuthEvent)(a.data)});case"password_reset.created":case"password_reset.succeeded":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializePasswordResetEvent)(a.data)});case"user.created":case"user.updated":case"user.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeUser)(a.data)});case"organization_membership.added":case"organization_membership.created":case"organization_membership.deleted":case"organization_membership.updated":case"organization_membership.removed":return Object.assign(Object.assign({},b),{event:a.event,data:(0,i.deserializeOrganizationMembership)(a.data)});case"role.created":case"role.deleted":case"role.updated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,j.deserializeRoleEvent)(a.data)});case"session.created":case"session.revoked":return Object.assign(Object.assign({},b),{event:a.event,data:(0,k.deserializeSession)(a.data)});case"organization.created":case"organization.updated":case"organization.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,e.deserializeOrganization)(a.data)});case"organization_domain.verified":case"organization_domain.verification_failed":case"organization_domain.created":case"organization_domain.updated":case"organization_domain.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,h.deserializeOrganizationDomain)(a.data)})}}},62879:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},63021:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(2140),b),e(c(82767),b),e(c(77116),b),e(c(67561),b),e(c(2674),b),e(c(15927),b),e(c(45656),b),e(c(48350),b),e(c(32987),b),e(c(18652),b)},63216:a=>{"use strict";a.exports=ReferenceError},63494:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.SignatureProvider=void 0;let e=c(93443);class f{constructor(a){this.cryptoProvider=a}verifyHeader({payload:a,sigHeader:b,secret:c,tolerance:f=18e4}){return d(this,void 0,void 0,function*(){let[d,g]=this.getTimestampAndSignatureHash(b);if(!g||0===Object.keys(g).length)throw new e.SignatureVerificationException("No signature hash found with expected scheme v1");if(parseInt(d,10)<Date.now()-f)throw new e.SignatureVerificationException("Timestamp outside the tolerance zone");let h=yield this.computeSignature(d,a,c);if((yield this.cryptoProvider.secureCompare(h,g))===!1)throw new e.SignatureVerificationException("Signature hash does not match the expected signature hash for payload");return!0})}getTimestampAndSignatureHash(a){let[b,c]=a.split(",");if(void 0===b||void 0===c)throw new e.SignatureVerificationException("Signature or timestamp missing");let{1:d}=b.split("="),{1:f}=c.split("=");return[d,f]}computeSignature(a,b,c){return d(this,void 0,void 0,function*(){b=JSON.stringify(b);let d=`${a}.${b}`;return yield this.cryptoProvider.computeHMACSignatureAsync(d,c)})}}b.SignatureProvider=f},63871:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.OrganizationDomains=void 0;let e=c(52302),f=c(21650);class g{constructor(a){this.workos=a}get(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/organization_domains/${a}`);return(0,f.deserializeOrganizationDomain)(b)})}verify(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/organization_domains/${a}/verify`,{});return(0,f.deserializeOrganizationDomain)(b)})}create(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/organization_domains",(0,e.serializeCreateOrganizationDomainOptions)(a));return(0,f.deserializeOrganizationDomain)(b)})}delete(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/organization_domains/${a}`)})}}b.OrganizationDomains=g},63974:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},64597:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},65041:(a,b,c)=>{"use strict";var d=c(3135);if(d)try{d([],"length")}catch(a){d=null}a.exports=d},65355:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(b,"__esModule",{value:!0}),b.Organizations=void 0;let f=c(46944),g=c(51089),h=c(61324),i=c(69562),j=c(84738);class k{constructor(a){this.workos=a}listOrganizations(a){return d(this,void 0,void 0,function*(){return new f.AutoPaginatable((yield(0,h.fetchAndDeserialize)(this.workos,"/organizations",g.deserializeOrganization,a)),a=>(0,h.fetchAndDeserialize)(this.workos,"/organizations",g.deserializeOrganization,a),a)})}createOrganization(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post("/organizations",(0,g.serializeCreateOrganizationOptions)(a),b);return(0,g.deserializeOrganization)(c)})}deleteOrganization(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/organizations/${a}`)})}getOrganization(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/organizations/${a}`);return(0,g.deserializeOrganization)(b)})}getOrganizationByExternalId(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/organizations/external_id/${a}`);return(0,g.deserializeOrganization)(b)})}updateOrganization(a){return d(this,void 0,void 0,function*(){let{organization:b}=a,c=e(a,["organization"]),{data:d}=yield this.workos.put(`/organizations/${b}`,(0,g.serializeUpdateOrganizationOptions)(c));return(0,g.deserializeOrganization)(d)})}listOrganizationRoles(a){return d(this,void 0,void 0,function*(){let{organizationId:b}=a,{data:c}=yield this.workos.get(`/organizations/${b}/roles`);return{object:"list",data:c.data.map(a=>(0,i.deserializeRole)(a))}})}listOrganizationFeatureFlags(a){return d(this,void 0,void 0,function*(){let{organizationId:b}=a,c=e(a,["organizationId"]);return new f.AutoPaginatable((yield(0,h.fetchAndDeserialize)(this.workos,`/organizations/${b}/feature-flags`,j.deserializeFeatureFlag,c)),a=>(0,h.fetchAndDeserialize)(this.workos,`/organizations/${b}/feature-flags`,j.deserializeFeatureFlag,a),c)})}}b.Organizations=k},65435:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ResourceOp=void 0,function(a){a.Create="create",a.Delete="delete"}(c||(b.ResourceOp=c={}))},65560:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GeneralEncrypt=void 0;let d=c(93695),e=c(69817),f=c(2678),g=c(1842),h=c(70338),i=c(67040),j=c(53268);class k{parent;unprotectedHeader;key;options;constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addRecipient(...a){return this.parent.addRecipient(...a)}encrypt(...a){return this.parent.encrypt(...a)}done(){return this.parent}}class l{_plaintext;_recipients=[];_protectedHeader;_unprotectedHeader;_aad;constructor(a){this._plaintext=a}addRecipient(a,b){let c=new k(this,a,{crit:b?.crit});return this._recipients.push(c),c}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}async encrypt(){let a;if(!this._recipients.length)throw new e.JWEInvalid("at least one recipient must be added");if(1===this._recipients.length){let[a]=this._recipients,b=await new d.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(a.unprotectedHeader).encrypt(a.key,{...a.options}),c={ciphertext:b.ciphertext,iv:b.iv,recipients:[{}],tag:b.tag};return b.aad&&(c.aad=b.aad),b.protected&&(c.protected=b.protected),b.unprotected&&(c.unprotected=b.unprotected),b.encrypted_key&&(c.recipients[0].encrypted_key=b.encrypted_key),b.header&&(c.recipients[0].header=b.header),c}for(let b=0;b<this._recipients.length;b++){let c=this._recipients[b];if(!(0,g.default)(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new e.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let d={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:f}=d;if("string"!=typeof f||!f)throw new e.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===f||"ECDH-ES"===f)throw new e.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof d.enc||!d.enc)throw new e.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(a){if(a!==d.enc)throw new e.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else a=d.enc;if((0,j.default)(e.JWEInvalid,new Map,c.options.crit,this._protectedHeader,d),void 0!==d.zip)throw new e.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}let b=(0,f.default)(a),c={ciphertext:"",iv:"",recipients:[],tag:""};for(let e=0;e<this._recipients.length;e++){let f=this._recipients[e],g={};c.recipients.push(g);let j=({...this._protectedHeader,...this._unprotectedHeader,...f.unprotectedHeader}).alg.startsWith("PBES2")?2048+e:void 0;if(0===e){let a=await new d.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(b).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(f.unprotectedHeader).setKeyManagementParameters({p2c:j}).encrypt(f.key,{...f.options,[d.unprotected]:!0});c.ciphertext=a.ciphertext,c.iv=a.iv,c.tag=a.tag,a.aad&&(c.aad=a.aad),a.protected&&(c.protected=a.protected),a.unprotected&&(c.unprotected=a.unprotected),g.encrypted_key=a.encrypted_key,a.header&&(g.header=a.header);continue}let{encryptedKey:k,parameters:l}=await (0,h.default)(f.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,a,f.key,b,{p2c:j});g.encrypted_key=(0,i.encode)(k),(f.unprotectedHeader||l)&&(g.header={...f.unprotectedHeader,...l})}return c}}b.GeneralEncrypt=l},66237:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=this&&this.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(b,"__esModule",{value:!0}),b.Passwordless=void 0;let f=c(52738);class g{constructor(a){this.workos=a}createSession(a){var{redirectURI:b,expiresIn:c}=a,g=e(a,["redirectURI","expiresIn"]);return d(this,void 0,void 0,function*(){let{data:a}=yield this.workos.post("/passwordless/sessions",Object.assign(Object.assign({},g),{redirect_uri:b,expires_in:c}));return(0,f.deserializePasswordlessSession)(a)})}sendSession(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/passwordless/sessions/${a}/send`,{});return b})}}b.Passwordless=g},66466:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},66560:a=>{"use strict";a.exports=Math.abs},66840:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EmbeddedJWK=void 0;let d=c(80518),e=c(16217),f=c(69817);b.EmbeddedJWK=async function(a,b){let c={...a,...b?.header};if(!(0,e.default)(c.jwk))throw new f.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let g=await (0,d.importJWK)({...c.jwk,ext:!0},c.alg);if(g instanceof Uint8Array||"public"!==g.type)throw new f.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return g}},66881:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},67014:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.DomainDataState=void 0,function(a){a.Verified="verified",a.Pending="pending"}(c||(b.DomainDataState=c={}))},67040:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decode=b.encode=b.encodeBase64=b.decodeBase64=void 0;let d=c(4573),e=c(74855);b.encode=a=>d.Buffer.from(a).toString("base64url"),b.decodeBase64=a=>new Uint8Array(d.Buffer.from(a,"base64")),b.encodeBase64=a=>d.Buffer.from(a).toString("base64"),b.decode=a=>new Uint8Array(d.Buffer.from(function(a){let b=a;return b instanceof Uint8Array&&(b=e.decoder.decode(b)),b}(a),"base64"))},67310:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598);b.default=a=>(a.d?d.createPrivateKey:d.createPublicKey)({format:"jwk",key:a})},67561:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},67682:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},67962:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(33874),b)},68233:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateResourceOptions=void 0;let d=c(60189);b.serializeCreateResourceOptions=a=>({resource_type:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,resource_id:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId?a.resource.resourceId:"",meta:a.meta})},69091:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.RefreshAndSealSessionDataFailureReason=void 0,function(a){a.INVALID_SESSION_COOKE="invalid_session_cookie",a.INVALID_SESSION_COOKIE="invalid_session_cookie",a.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided",a.INVALID_GRANT="invalid_grant",a.MFA_ENROLLMENT="mfa_enrollment",a.SSO_REQUIRED="sso_required",a.ORGANIZATION_NOT_AUTHORIZED="organization_not_authorized"}(c||(b.RefreshAndSealSessionDataFailureReason=c={}))},69531:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FlattenedSign=void 0;let d=c(67040),e=c(5839),f=c(1842),g=c(69817),h=c(74855),i=c(84634),j=c(53268);class k{_payload;_protectedHeader;_unprotectedHeader;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=a}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}async sign(a,b){let c;if(!this._protectedHeader&&!this._unprotectedHeader)throw new g.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,f.default)(this._protectedHeader,this._unprotectedHeader))throw new g.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let k={...this._protectedHeader,...this._unprotectedHeader},l=(0,j.default)(g.JWSInvalid,new Map([["b64",!0]]),b?.crit,this._protectedHeader,k),m=!0;if(l.has("b64")&&"boolean"!=typeof(m=this._protectedHeader.b64))throw new g.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:n}=k;if("string"!=typeof n||!n)throw new g.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,i.default)(n,a,"sign");let o=this._payload;m&&(o=h.encoder.encode((0,d.encode)(o))),c=this._protectedHeader?h.encoder.encode((0,d.encode)(JSON.stringify(this._protectedHeader))):h.encoder.encode("");let p=(0,h.concat)(c,h.encoder.encode("."),o),q=await (0,e.default)(n,a,p),r={signature:(0,d.encode)(q),payload:""};return m&&(r.payload=h.decoder.decode(o)),this._unprotectedHeader&&(r.header=this._unprotectedHeader),this._protectedHeader&&(r.protected=h.decoder.decode(c)),r}}b.FlattenedSign=k},69558:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.weakMap=void 0;let d=c(77598),e=c(69817),f=c(72927),g=c(25066),h=c(94415),i=c(89722);b.weakMap=new WeakMap,b.default=(a,b)=>{let c;if((0,f.isCryptoKey)(a))c=d.KeyObject.from(a);else if((0,g.default)(a))c=a;else throw TypeError((0,h.default)(a,...i.types));if("secret"===c.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(c.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${c.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${c.asymmetricKeyType.slice(1)}`;case"ec":{let a=c.asymmetricKeyDetails.namedCurve;if(b)return a;switch(a){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new e.JOSENotSupported("Unsupported key curve for this operation")}}default:throw TypeError("Invalid asymmetric key type for this operation")}}},69562:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeRole=void 0,b.deserializeRole=a=>({object:a.object,id:a.id,name:a.name,slug:a.slug,description:a.description,permissions:a.permissions,type:a.type,createdAt:a.created_at,updatedAt:a.updated_at})},69817:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWSSignatureVerificationFailed=b.JWKSTimeout=b.JWKSMultipleMatchingKeys=b.JWKSNoMatchingKey=b.JWKSInvalid=b.JWKInvalid=b.JWTInvalid=b.JWSInvalid=b.JWEInvalid=b.JWEDecryptionFailed=b.JOSENotSupported=b.JOSEAlgNotAllowed=b.JWTExpired=b.JWTClaimValidationFailed=b.JOSEError=void 0;class c extends Error{static get code(){return"ERR_JOSE_GENERIC"}code="ERR_JOSE_GENERIC";constructor(a){super(a),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}b.JOSEError=c;class d extends c{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a),this.claim=c,this.reason=d,this.payload=b}}b.JWTClaimValidationFailed=d;class e extends c{static get code(){return"ERR_JWT_EXPIRED"}code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a),this.claim=c,this.reason=d,this.payload=b}}b.JWTExpired=e;class f extends c{static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}code="ERR_JOSE_ALG_NOT_ALLOWED"}b.JOSEAlgNotAllowed=f;class g extends c{static get code(){return"ERR_JOSE_NOT_SUPPORTED"}code="ERR_JOSE_NOT_SUPPORTED"}b.JOSENotSupported=g;class h extends c{static get code(){return"ERR_JWE_DECRYPTION_FAILED"}code="ERR_JWE_DECRYPTION_FAILED";message="decryption operation failed"}b.JWEDecryptionFailed=h;class i extends c{static get code(){return"ERR_JWE_INVALID"}code="ERR_JWE_INVALID"}b.JWEInvalid=i;class j extends c{static get code(){return"ERR_JWS_INVALID"}code="ERR_JWS_INVALID"}b.JWSInvalid=j;class k extends c{static get code(){return"ERR_JWT_INVALID"}code="ERR_JWT_INVALID"}b.JWTInvalid=k;class l extends c{static get code(){return"ERR_JWK_INVALID"}code="ERR_JWK_INVALID"}b.JWKInvalid=l;class m extends c{static get code(){return"ERR_JWKS_INVALID"}code="ERR_JWKS_INVALID"}b.JWKSInvalid=m;class n extends c{static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}code="ERR_JWKS_NO_MATCHING_KEY";message="no applicable key found in the JSON Web Key Set"}b.JWKSNoMatchingKey=n;class o extends c{[Symbol.asyncIterator];static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";message="multiple matching keys found in the JSON Web Key Set"}b.JWKSMultipleMatchingKeys=o;class p extends c{static get code(){return"ERR_JWKS_TIMEOUT"}code="ERR_JWKS_TIMEOUT";message="request timed out"}b.JWKSTimeout=p;class q extends c{static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";message="signature verification failed"}b.JWSSignatureVerificationFailed=q},69978:(a,b)=>{"use strict";function c(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function d(a,b){return a.name===b}function e(a){return parseInt(a.name.slice(4),10)}function f(a,b){if(b.length&&!b.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(b.length>2){let c=b.pop();a+=`one of ${b.join(", ")}, or ${c}.`}else 2===b.length?a+=`one of ${b[0]} or ${b[1]}.`:a+=`${b[0]}.`;throw TypeError(a)}}Object.defineProperty(b,"__esModule",{value:!0}),b.checkEncCryptoKey=b.checkSigCryptoKey=void 0,b.checkSigCryptoKey=function(a,b,...g){switch(b){case"HS256":case"HS384":case"HS512":{if(!d(a.algorithm,"HMAC"))throw c("HMAC");let f=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!d(a.algorithm,"RSASSA-PKCS1-v1_5"))throw c("RSASSA-PKCS1-v1_5");let f=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!d(a.algorithm,"RSA-PSS"))throw c("RSA-PSS");let f=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw c("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!d(a.algorithm,"ECDSA"))throw c("ECDSA");let e=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==e)throw c(e,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,g)},b.checkEncCryptoKey=function(a,b,...g){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if(!d(a.algorithm,"AES-GCM"))throw c("AES-GCM");let e=parseInt(b.slice(1,4),10);if(a.algorithm.length!==e)throw c(e,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!d(a.algorithm,"AES-KW"))throw c("AES-KW");let e=parseInt(b.slice(1,4),10);if(a.algorithm.length!==e)throw c(e,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw c("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!d(a.algorithm,"PBKDF2"))throw c("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!d(a.algorithm,"RSA-OAEP"))throw c("RSA-OAEP");let f=parseInt(b.slice(9),10)||1;if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,g)}},70043:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OauthException=void 0;class c extends Error{constructor(a,b,c,d,e){super(),this.status=a,this.requestID=b,this.error=c,this.errorDescription=d,this.rawData=e,this.name="OauthException",c&&d?this.message=`Error: ${c}
Error Description: ${d}`:c?this.message=`Error: ${c}`:this.message="An error has occurred."}}b.OauthException=c},70116:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeIdentities=void 0,b.deserializeIdentities=a=>a.map(a=>({idpId:a.idp_id,type:a.type,provider:a.provider}))},70141:a=>{"use strict";a.exports=TypeError},70265:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},70329:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},70338:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(98781),e=c(75598),f=c(90070),g=c(11434),h=c(67040),i=c(90939),j=c(2678),k=c(69817),l=c(94421),m=c(84634),n=c(37009);b.default=async function(a,b,c,o,p={}){let q,r,s;switch((0,m.default)(a,c,"encrypt"),c=await i.default.normalizePublicKey?.(c,a)||c,a){case"dir":s=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!e.ecdhAllowed(c))throw new k.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:f,apv:g}=p,{epk:i}=p;i||=(await e.generateEpk(c)).privateKey;let{x:m,y:n,crv:t,kty:u}=await (0,l.exportJWK)(i),v=await e.deriveKey(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?(0,j.bitLength)(b):parseInt(a.slice(-5,-2),10),f,g);if(r={epk:{x:m,crv:t,kty:u}},"EC"===u&&(r.epk.y=n),f&&(r.apu=(0,h.encode)(f)),g&&(r.apv=(0,h.encode)(g)),"ECDH-ES"===a){s=v;break}s=o||(0,j.default)(b);let w=a.slice(-6);q=await (0,d.wrap)(w,v,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=o||(0,j.default)(b),q=await (0,g.encrypt)(a,c,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=o||(0,j.default)(b);let{p2c:d,p2s:e}=p;({encryptedKey:q,...r}=await (0,f.encrypt)(a,c,s,d,e));break}case"A128KW":case"A192KW":case"A256KW":s=o||(0,j.default)(b),q=await (0,d.wrap)(a,c,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=o||(0,j.default)(b);let{iv:d}=p;({encryptedKey:q,...r}=await (0,n.wrap)(a,c,s,d));break}default:throw new k.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:q,parameters:r}}},70667:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.Events=void 0;let e=c(38970),f=c(67962);class g{constructor(a){this.workos=a}listEvents(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get("/events",{query:a?(0,f.serializeListEventOptions)(a):void 0});return(0,e.deserializeList)(b,e.deserializeEvent)})}}b.Events=g},71214:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithMagicAuthOptions=void 0,b.serializeAuthenticateWithMagicAuthOptions=a=>({grant_type:"urn:workos:oauth:grant-type:magic-auth:code",client_id:a.clientId,client_secret:a.clientSecret,code:a.code,email:a.email,invitation_token:a.invitationToken,link_authorization_code:a.linkAuthorizationCode,ip_address:a.ipAddress,user_agent:a.userAgent})},71619:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeInvitationEvent=b.deserializeInvitation=void 0,b.deserializeInvitation=a=>({object:a.object,id:a.id,email:a.email,state:a.state,acceptedAt:a.accepted_at,revokedAt:a.revoked_at,expiresAt:a.expires_at,organizationId:a.organization_id,inviterUserId:a.inviter_user_id,acceptedUserId:a.accepted_user_id,token:a.token,acceptInvitationUrl:a.accept_invitation_url,createdAt:a.created_at,updatedAt:a.updated_at}),b.deserializeInvitationEvent=a=>({object:a.object,id:a.id,email:a.email,state:a.state,acceptedAt:a.accepted_at,revokedAt:a.revoked_at,expiresAt:a.expires_at,organizationId:a.organization_id,inviterUserId:a.inviter_user_id,acceptedUserId:a.accepted_user_id,createdAt:a.created_at,updatedAt:a.updated_at})},72402:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createLocalJWKSet=b.LocalJWKSet=void 0;let d=c(80518),e=c(69817),f=c(16217);function g(a){return(0,f.default)(a)}function h(a){return"function"==typeof structuredClone?structuredClone(a):JSON.parse(JSON.stringify(a))}class i{_jwks;_cached=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(g)}(a))throw new e.JWKSInvalid("JSON Web Key Set malformed");this._jwks=h(a)}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},f=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new e.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(c),g=this._jwks.keys.filter(a=>{let b=f===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&"string"==typeof a.alg&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b&&"EdDSA"===c&&(b="Ed25519"===a.crv||"Ed448"===a.crv),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES256K":b="secp256k1"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv}return b}),{0:h,length:i}=g;if(0===i)throw new e.JWKSNoMatchingKey;if(1!==i){let a=new e.JWKSMultipleMatchingKeys,{_cached:b}=this;throw a[Symbol.asyncIterator]=async function*(){for(let a of g)try{yield await j(b,a,c)}catch{}},a}return j(this._cached,h,c)}}async function j(a,b,c){let f=a.get(b)||a.set(b,{}).get(b);if(void 0===f[c]){let a=await (0,d.importJWK)({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new e.JWKSInvalid("JSON Web Key Set members must be public keys");f[c]=a}return f[c]}b.LocalJWKSet=i,b.createLocalJWKSet=function(a){let b=new i(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>h(b._jwks),enumerable:!0,configurable:!1,writable:!1}}),c}},72662:(a,b,c)=>{"use strict";a.exports=c(62654).getPrototypeOf||null},72927:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isCryptoKey=void 0;let d=c(77598),e=c(57975);b.default=d.webcrypto,b.isCryptoKey=a=>e.types.isCryptoKey(a)},73103:(a,b)=>{"use strict";var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ConnectionType=void 0,function(a){a.ADFSSAML="ADFSSAML",a.AdpOidc="AdpOidc",a.AppleOAuth="AppleOAuth",a.Auth0SAML="Auth0SAML",a.AzureSAML="AzureSAML",a.CasSAML="CasSAML",a.ClassLinkSAML="ClassLinkSAML",a.CloudflareSAML="CloudflareSAML",a.CyberArkSAML="CyberArkSAML",a.DuoSAML="DuoSAML",a.GenericOIDC="GenericOIDC",a.GenericSAML="GenericSAML",a.GitHubOAuth="GitHubOAuth",a.GoogleOAuth="GoogleOAuth",a.GoogleSAML="GoogleSAML",a.JumpCloudSAML="JumpCloudSAML",a.KeycloakSAML="KeycloakSAML",a.LastPassSAML="LastPassSAML",a.LoginGovOidc="LoginGovOidc",a.MagicLink="MagicLink",a.MicrosoftOAuth="MicrosoftOAuth",a.MiniOrangeSAML="MiniOrangeSAML",a.NetIqSAML="NetIqSAML",a.OktaSAML="OktaSAML",a.OneLoginSAML="OneLoginSAML",a.OracleSAML="OracleSAML",a.PingFederateSAML="PingFederateSAML",a.PingOneSAML="PingOneSAML",a.RipplingSAML="RipplingSAML",a.SalesforceSAML="SalesforceSAML",a.ShibbolethGenericSAML="ShibbolethGenericSAML",a.ShibbolethSAML="ShibbolethSAML",a.SimpleSamlPhpSAML="SimpleSamlPhpSAML",a.VMwareSAML="VMwareSAML"}(c||(b.ConnectionType=c={}))},73351:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ParseError=void 0;class c extends Error{constructor({message:a,rawBody:b,rawStatus:c,requestID:d}){super(a),this.name="ParseError",this.status=500,this.rawBody=b,this.rawStatus=c,this.requestID=d}}b.ParseError=c},73706:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeRoleEvent=void 0,b.deserializeRoleEvent=a=>({object:"role",slug:a.slug,permissions:a.permissions,createdAt:a.created_at,updatedAt:a.updated_at})},73860:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NoApiKeyProvidedException=void 0;class c extends Error{constructor(){super(...arguments),this.status=500,this.name="NoApiKeyProvidedException",this.message='Missing API key. Pass it to the constructor (new WorkOS("sk_test_Sz3IQjepeSWaI4cMS4ms4sMuU")) or define it in the WORKOS_API_KEY environment variable.'}}b.NoApiKeyProvidedException=c},74296:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListResourceOptions=void 0,b.serializeListResourceOptions=a=>({resource_type:a.resourceType,search:a.search,limit:a.limit,before:a.before,after:a.after,order:a.order})},74855:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.concatKdf=b.lengthAndInput=b.uint32be=b.uint64be=b.p2s=b.concat=b.decoder=b.encoder=void 0;let d=c(28162);function e(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function f(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function g(a){let b=new Uint8Array(4);return f(b,a),b}b.encoder=new TextEncoder,b.decoder=new TextDecoder,b.concat=e,b.p2s=function(a,c){return e(b.encoder.encode(a),new Uint8Array([0]),c)},b.uint64be=function(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return f(c,b,0),f(c,a%0x100000000,4),c},b.uint32be=g,b.lengthAndInput=function(a){return e(g(a.length),a)},b.concatKdf=async function(a,b,c){let e=Math.ceil((b>>3)/32),f=new Uint8Array(32*e);for(let b=0;b<e;b++){let e=new Uint8Array(4+a.length+c.length);e.set(g(b+1)),e.set(a,4),e.set(c,4+a.length),f.set(await (0,d.default)("sha256",e),32*b)}return f.slice(0,b>>3)}},75007:a=>{"use strict";a.exports=Math.min},75129:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},75356:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},75598:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ecdhAllowed=b.generateEpk=b.deriveKey=void 0;let d=c(77598),e=c(57975),f=c(69558),g=c(74855),h=c(69817),i=c(72927),j=c(69978),k=c(25066),l=c(94415),m=c(89722),n=(0,e.promisify)(d.generateKeyPair);b.deriveKey=async function(a,b,c,e,f=new Uint8Array(0),h=new Uint8Array(0)){let n,o;if((0,i.isCryptoKey)(a))(0,j.checkEncCryptoKey)(a,"ECDH"),n=d.KeyObject.from(a);else if((0,k.default)(a))n=a;else throw TypeError((0,l.default)(a,...m.types));if((0,i.isCryptoKey)(b))(0,j.checkEncCryptoKey)(b,"ECDH","deriveBits"),o=d.KeyObject.from(b);else if((0,k.default)(b))o=b;else throw TypeError((0,l.default)(b,...m.types));let p=(0,g.concat)((0,g.lengthAndInput)(g.encoder.encode(c)),(0,g.lengthAndInput)(f),(0,g.lengthAndInput)(h),(0,g.uint32be)(e)),q=(0,d.diffieHellman)({privateKey:o,publicKey:n});return(0,g.concatKdf)(q,e,p)},b.generateEpk=async function(a){let b;if((0,i.isCryptoKey)(a))b=d.KeyObject.from(a);else if((0,k.default)(a))b=a;else throw TypeError((0,l.default)(a,...m.types));switch(b.asymmetricKeyType){case"x25519":return n("x25519");case"x448":return n("x448");case"ec":return n("ec",{namedCurve:(0,f.default)(b)});default:throw new h.JOSENotSupported("Invalid or unsupported EPK")}},b.ecdhAllowed=a=>["P-256","P-384","P-521","X25519","X448"].includes((0,f.default)(a))},75692:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GeneratePortalLinkIntent=void 0;var d=c(50965);Object.defineProperty(b,"GeneratePortalLinkIntent",{enumerable:!0,get:function(){return d.GeneratePortalLinkIntent}})},75777:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},77116:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},77356:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generalDecrypt=void 0;let d=c(55307),e=c(69817),f=c(16217);b.generalDecrypt=async function(a,b,c){if(!(0,f.default)(a))throw new e.JWEInvalid("General JWE must be an object");if(!Array.isArray(a.recipients)||!a.recipients.every(f.default))throw new e.JWEInvalid("JWE Recipients missing or incorrect type");if(!a.recipients.length)throw new e.JWEInvalid("JWE Recipients has no members");for(let e of a.recipients)try{return await (0,d.flattenedDecrypt)({aad:a.aad,ciphertext:a.ciphertext,encrypted_key:e.encrypted_key,header:e.header,iv:a.iv,protected:a.protected,tag:a.tag,unprotected:a.unprotected},b,c)}catch{}throw new e.JWEDecryptionFailed}},77443:(a,b,c)=>{a.exports=c(28354).inspect},77590:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},78109:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=c(77598).timingSafeEqual},78154:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},78221:(a,b,c)=>{"use strict";var d=c(38563),e=c(44326),f=c(17213),g=c(32057),h=c(70141),i=d("%WeakMap%",!0),j=e("WeakMap.prototype.get",!0),k=e("WeakMap.prototype.set",!0),l=e("WeakMap.prototype.has",!0),m=e("WeakMap.prototype.delete",!0);a.exports=i?function(){var a,b,c={assert:function(a){if(!c.has(a))throw new h("Side channel does not contain "+f(a))},delete:function(c){if(i&&c&&("object"==typeof c||"function"==typeof c)){if(a)return m(a,c)}else if(g&&b)return b.delete(c);return!1},get:function(c){return i&&c&&("object"==typeof c||"function"==typeof c)&&a?j(a,c):b&&b.get(c)},has:function(c){return i&&c&&("object"==typeof c||"function"==typeof c)&&a?l(a,c):!!b&&b.has(c)},set:function(c,d){i&&c&&("object"==typeof c||"function"==typeof c)?(a||(a=new i),k(a,c,d)):g&&(b||(b=g()),b.set(c,d))}};return c}:g},78250:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeOrganizationMembership=void 0,b.deserializeOrganizationMembership=a=>Object.assign({object:a.object,id:a.id,userId:a.user_id,organizationId:a.organization_id,organizationName:a.organization_name,status:a.status,createdAt:a.created_at,updatedAt:a.updated_at,role:a.role},a.roles&&{roles:a.roles})},78495:a=>{"use strict";var b=Object.prototype.toString,c=Math.max,d=function(a,b){for(var c=[],d=0;d<a.length;d+=1)c[d]=a[d];for(var e=0;e<b.length;e+=1)c[e+a.length]=b[e];return c},e=function(a,b){for(var c=[],d=b||0,e=0;d<a.length;d+=1,e+=1)c[e]=a[d];return c},f=function(a,b){for(var c="",d=0;d<a.length;d+=1)c+=a[d],d+1<a.length&&(c+=b);return c};a.exports=function(a){var g,h=this;if("function"!=typeof h||"[object Function]"!==b.apply(h))throw TypeError("Function.prototype.bind called on incompatible "+h);for(var i=e(arguments,1),j=c(0,h.length-i.length),k=[],l=0;l<j;l++)k[l]="$"+l;if(g=Function("binder","return function ("+f(k,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof g){var b=h.apply(this,d(i,arguments));return Object(b)===b?b:this}return h.apply(a,d(i,arguments))}),h.prototype){var m=function(){};m.prototype=h.prototype,g.prototype=new m,m.prototype=null}return g}},78655:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeUpdateOrganizationOptions=void 0,b.serializeUpdateOrganizationOptions=a=>({name:a.name,allow_profiles_outside_organization:a.allowProfilesOutsideOrganization,domain_data:a.domainData,domains:a.domains,stripe_customer_id:a.stripeCustomerId,external_id:a.externalId,metadata:a.metadata})},78921:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreatePasswordResetOptions=void 0,b.serializeCreatePasswordResetOptions=a=>({email:a.email})},79232:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.WorkOS=void 0;let f=c(59738),g=c(95247),h=c(92394),i=c(50120),j=c(56099),k=c(88745),l=c(41605),m=c(46542);e(c(91749),b),e(c(40253),b),e(c(93443),b),e(c(63021),b),e(c(46944),b),e(c(21329),b),e(c(88832),b),e(c(47277),b),e(c(13086),b),e(c(5340),b),e(c(24795),b),e(c(61278),b),e(c(75692),b),e(c(53557),b),e(c(40283),b),e(c(10891),b);class n extends l.WorkOS{createHttpClient(a,b){var c;let d=Object.assign(Object.assign({},a.config),{timeout:a.timeout,headers:Object.assign(Object.assign({},null==(c=a.config)?void 0:c.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":b})});return"undefined"!=typeof fetch||void 0!==a.fetchFn?new h.FetchHttpClient(this.baseURL,d,a.fetchFn):new i.NodeHttpClient(this.baseURL,d)}createWebhookClient(){return new k.Webhooks(this.getCryptoProvider())}getCryptoProvider(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle?new g.SubtleCryptoProvider:new f.NodeCryptoProvider}createActionsClient(){return new j.Actions(this.getCryptoProvider())}createIronSessionProvider(){return new m.WebIronSessionProvider}emitWarning(a){return process.emitWarning(a,"WorkOS")}}b.WorkOS=n},79542:(a,b,c)=>{"use strict";var d,e=c(84444),f=c(65041);try{d=[].__proto__===Array.prototype}catch(a){if(!a||"object"!=typeof a||!("code"in a)||"ERR_PROTO_ACCESS"!==a.code)throw a}var g=!!d&&f&&f(Object.prototype,"__proto__"),h=Object,i=h.getPrototypeOf;a.exports=g&&"function"==typeof g.get?e([g.get]):"function"==typeof i&&function(a){return i(null==a?a:h(a))}},79786:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(89055),b),e(c(52006),b),e(c(2813),b),e(c(37386),b),e(c(80011),b)},80011:(a,b)=>{"use strict";function c(a){if(!a||!a.properties)return{};let b={};return Object.keys(a.properties).forEach(c=>{a.properties&&(b[c]=a.properties[c].type)}),b}Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeAuditLogSchema=void 0,b.deserializeAuditLogSchema=a=>{var b;return{object:a.object,version:a.version,targets:a.targets.map(a=>({type:a.type,metadata:a.metadata?c(a.metadata):void 0})),actor:{metadata:c(null==(b=a.actor)?void 0:b.metadata)},metadata:a.metadata?c(a.metadata):void 0,createdAt:a.created_at}}},80177:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IronSessionProvider=void 0;class c{}b.IronSessionProvider=c},80238:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeWarrantToken=void 0,b.deserializeWarrantToken=a=>({warrantToken:a.warrant_token})},80518:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.importJWK=b.importPKCS8=b.importX509=b.importSPKI=void 0;let d=c(67040),e=c(6683),f=c(67310),g=c(69817),h=c(16217);b.importSPKI=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,e.fromSPKI)(a,b,c)},b.importX509=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,e.fromX509)(a,b,c)},b.importPKCS8=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,e.fromPKCS8)(a,b,c)},b.importJWK=async function(a,b){if(!(0,h.default)(a))throw TypeError("JWK must be an object");switch(b||=a.alg,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,d.decode)(a.k);case"RSA":if(void 0!==a.oth)throw new g.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,f.default)({...a,alg:b});default:throw new g.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}},80631:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.Widgets=void 0;let e=c(2099);class f{constructor(a){this.workos=a}getToken(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/widgets/token",(0,e.serializeGetTokenOptions)(a));return(0,e.deserializeGetTokenResponse)(b).token})}}b.Widgets=f},81392:a=>{"use strict";a.exports=Function.prototype.apply},81652:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeConnection=void 0,b.deserializeConnection=a=>({object:a.object,id:a.id,organizationId:a.organization_id,name:a.name,connectionType:a.connection_type,type:a.connection_type,state:a.state,domains:a.domains,createdAt:a.created_at,updatedAt:a.updated_at})},81853:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},82315:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},82767:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},82836:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},83498:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generalVerify=void 0;let d=c(93883),e=c(69817),f=c(16217);b.generalVerify=async function(a,b,c){if(!(0,f.default)(a))throw new e.JWSInvalid("General JWS must be an object");if(!Array.isArray(a.signatures)||!a.signatures.every(f.default))throw new e.JWSInvalid("JWS Signatures missing or incorrect type");for(let e of a.signatures)try{return await (0,d.flattenedVerify)({header:e.header,payload:a.payload,protected:e.protected,signature:e.signature},b,c)}catch{}throw new e.JWSSignatureVerificationFailed}},83820:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(77598),e=c(67040),f=c(69817),g=c(72927),h=c(25066),i=c(94415),j=c(89722);b.default=a=>{let b;if((0,g.isCryptoKey)(a)){if(!a.extractable)throw TypeError("CryptoKey is not extractable");b=d.KeyObject.from(a)}else if((0,h.default)(a))b=a;else if(a instanceof Uint8Array)return{kty:"oct",k:(0,e.encode)(a)};else throw TypeError((0,i.default)(a,...j.types,"Uint8Array"));if("secret"!==b.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(b.asymmetricKeyType))throw new f.JOSENotSupported("Unsupported key asymmetricKeyType");return b.export({format:"jwk"})}},84331:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeSendInvitationOptions=void 0,b.serializeSendInvitationOptions=a=>({email:a.email,organization_id:a.organizationId,expires_in_days:a.expiresInDays,inviter_user_id:a.inviterUserId,role_slug:a.roleSlug})},84444:(a,b,c)=>{"use strict";var d=c(99197),e=c(70141),f=c(29926),g=c(61762);a.exports=function(a){if(a.length<1||"function"!=typeof a[0])throw new e("a function is required");return g(d,f,a)}},84634:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(94415),e=c(89722),f=a=>a?.[Symbol.toStringTag];b.default=(a,b,c)=>{a.startsWith("HS")||"dir"===a||a.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(a)?((a,b)=>{if(!(b instanceof Uint8Array)){if(!(0,e.default)(b))throw TypeError((0,d.withAlg)(a,b,...e.types,"Uint8Array"));if("secret"!==b.type)throw TypeError(`${f(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b):((a,b,c)=>{if(!(0,e.default)(b))throw TypeError((0,d.withAlg)(a,b,...e.types));if("secret"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===c&&"public"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===c&&"public"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm decryption must be of type "private"`);if(b.algorithm&&"verify"===c&&"private"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm verifying must be of type "public"`);if(b.algorithm&&"encrypt"===c&&"private"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm encryption must be of type "public"`)})(a,b,c)}},84738:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeFeatureFlag=void 0,b.deserializeFeatureFlag=a=>({object:a.object,id:a.id,name:a.name,slug:a.slug,description:a.description,createdAt:a.created_at,updatedAt:a.updated_at})},84977:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeFGAList=void 0,b.deserializeFGAList=(a,b)=>({object:"list",data:a.data.map(b),listMetadata:a.list_metadata,warnings:a.warnings})},85400:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.jwtVerify=void 0;let d=c(85685),e=c(19267),f=c(69817);b.jwtVerify=async function(a,b,c){let g=await (0,d.compactVerify)(a,b,c);if(g.protectedHeader.crit?.includes("b64")&&!1===g.protectedHeader.b64)throw new f.JWTInvalid("JWTs MUST NOT use unencoded payload");let h={payload:(0,e.default)(g.protectedHeader,g.payload,c),protectedHeader:g.protectedHeader};return"function"==typeof b?{...h,key:g.key}:h}},85515:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},85685:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.compactVerify=void 0;let d=c(93883),e=c(69817),f=c(74855);b.compactVerify=async function(a,b,c){if(a instanceof Uint8Array&&(a=f.decoder.decode(a)),"string"!=typeof a)throw new e.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:g,1:h,2:i,length:j}=a.split(".");if(3!==j)throw new e.JWSInvalid("Invalid Compact JWS");let k=await (0,d.flattenedVerify)({payload:h,protected:g,signature:i},b,c),l={payload:k.payload,protectedHeader:k.protectedHeader};return"function"==typeof b?{...l,key:k.key}:l}},86127:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListDirectoriesOptions=void 0,b.serializeListDirectoriesOptions=a=>({organization_id:a.organizationId,search:a.search,limit:a.limit,before:a.before,after:a.after,order:a.order})},86469:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},86478:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},86490:a=>{"use strict";var b=[];function c(a,b){if(0===b)return!1;var c=b&-b,d=a+c;return d===a||d-c!==a}function d(a){var c=b[a];return c?b[a]=void 0:c=Buffer.alloc(a),c.fill(0),c}function e(a){var c=a.length;c<20&&(b[c]=a)}function f(a,b){if(a<0||a>0xfffffffffffff800)throw Error("Value out of range.");var c=Math.floor(a/0x100000000);b.writeUInt32LE(a%0x100000000,0),b.writeUInt32LE(c,4)}a.exports={alloc:d,free:e,readInt:function(a){var b=a.length,d=a[b-1]<128?0:-1,e=!1;if(b<7)for(var f=b-1;f>=0;f--)d=256*d+a[f];else for(var f=b-1;f>=0;f--){var g=a[f];c(d*=256,g)&&(e=!0),d+=g}return{value:d,lossy:e}},readUInt:function(a){var b=a.length,d=0,e=!1;if(b<7)for(var f=b-1;f>=0;f--)d=256*d+a[f];else for(var f=b-1;f>=0;f--){var g=a[f];c(d*=256,g)&&(e=!0),d+=g}return{value:d,lossy:e}},resize:function(a,b){if(b===a.length)return a;var c=d(b);return a.copy(c),e(a),c},writeInt64:function(a,b){if(a<-0x8000000000000000||a>0x7ffffffffffffc00)throw Error("Value out of range.");a<0&&(a+=0xffffffffffffffff),f(a,b)},writeUInt64:f}},86790:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ConflictException=void 0;class c extends Error{constructor({error:a,message:b,requestID:c}){super(),this.status=409,this.name="ConflictException",this.requestID=c,b?this.message=b:a?this.message=`Error: ${a}`:this.message="An conflict has occurred on the server."}}b.ConflictException=c},87635:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generateKeyPair=void 0;let d=c(10445);b.generateKeyPair=async function(a,b){return(0,d.generateKeyPair)(a,b)}},87883:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.Mfa=void 0;let e=c(32863);class f{constructor(a){this.workos=a}deleteFactor(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/auth/factors/${a}`)})}getFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/auth/factors/${a}`);return(0,e.deserializeFactor)(b)})}enrollFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/auth/factors/enroll",Object.assign({type:a.type},(()=>{switch(a.type){case"sms":return{phone_number:a.phoneNumber};case"totp":return{totp_issuer:a.issuer,totp_user:a.user};default:return{}}})()));return(0,e.deserializeFactorWithSecrets)(b)})}challengeFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/auth/factors/${a.authenticationFactorId}/challenge`,{sms_template:"smsTemplate"in a?a.smsTemplate:void 0});return(0,e.deserializeChallenge)(b)})}verifyFactor(a){return d(this,void 0,void 0,function*(){return this.verifyChallenge(a)})}verifyChallenge(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/auth/challenges/${a.authenticationChallengeId}/verify`,{code:a.code});return(0,e.deserializeVerifyResponse)(b)})}}b.Mfa=f},87943:a=>{"use strict";var b=String.prototype.replace,c=/%20/g,d={RFC1738:"RFC1738",RFC3986:"RFC3986"};a.exports={default:d.RFC3986,formatters:{RFC1738:function(a){return b.call(a,c,"+")},RFC3986:function(a){return String(a)}},RFC1738:d.RFC1738,RFC3986:d.RFC3986}},87954:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeOauthTokens=void 0,b.deserializeOauthTokens=a=>a?{accessToken:a.access_token,refreshToken:a.refresh_token,expiresAt:a.expires_at,scopes:a.scopes}:void 0},88311:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a){switch(a){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new d.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},88325:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeListConnectionsOptions=void 0,b.serializeListConnectionsOptions=a=>({connection_type:a.connectionType,domain:a.domain,organization_id:a.organizationId,limit:a.limit,before:a.before,after:a.after,order:a.order})},88408:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},88411:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BadRequestException=void 0;class c extends Error{constructor({code:a,errors:b,message:c,requestID:d}){super(),this.status=400,this.name="BadRequestException",this.message="Bad request",this.requestID=d,c&&(this.message=c),a&&(this.code=a),b&&(this.errors=b)}}b.BadRequestException=c},88606:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeEnrollAuthFactorOptions=void 0,b.serializeEnrollAuthFactorOptions=a=>({type:a.type,totp_issuer:a.totpIssuer,totp_user:a.totpUser,totp_secret:a.totpSecret})},88745:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.Webhooks=void 0;let e=c(38970),f=c(63494);class g{constructor(a){this.signatureProvider=new f.SignatureProvider(a)}get verifyHeader(){return this.signatureProvider.verifyHeader.bind(this.signatureProvider)}get computeSignature(){return this.signatureProvider.computeSignature.bind(this.signatureProvider)}get getTimestampAndSignatureHash(){return this.signatureProvider.getTimestampAndSignatureHash.bind(this.signatureProvider)}constructEvent({payload:a,sigHeader:b,secret:c,tolerance:f=18e4}){return d(this,void 0,void 0,function*(){return yield this.verifyHeader({payload:a,sigHeader:b,secret:c,tolerance:f}),(0,e.deserializeEvent)(a)})}}b.Webhooks=g},88832:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getPrimaryEmail=void 0,b.getPrimaryEmail=function(a){var b;let c=null==(b=a.emails)?void 0:b.find(a=>a.primary);return null==c?void 0:c.value}},89055:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeAuditLogExport=void 0,b.deserializeAuditLogExport=a=>({object:a.object,id:a.id,state:a.state,url:a.url,createdAt:a.created_at,updatedAt:a.updated_at})},89077:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeProfileAndToken=void 0;let d=c(87954),e=c(29409);b.deserializeProfileAndToken=a=>({accessToken:a.access_token,profile:(0,e.deserializeProfile)(a.profile),oauthTokens:(0,d.deserializeOauthTokens)(a.oauth_tokens)})},89303:(a,b,c)=>{"use strict";var d=Function.prototype.call,e=Object.prototype.hasOwnProperty;a.exports=c(99197).call(d,e)},89434:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeDeleteResourceOptions=void 0;let d=c(60189);b.serializeDeleteResourceOptions=a=>({resource_type:(0,d.isResourceInterface)(a)?a.getResourceType():a.resourceType,resource_id:(0,d.isResourceInterface)(a)?a.getResourceId():a.resourceId?a.resourceId:""})},89722:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.types=void 0;let d=c(72927),e=c(25066);b.default=a=>(0,e.default)(a)||(0,d.isCryptoKey)(a);let f=["KeyObject"];b.types=f,(globalThis.CryptoKey||d.default?.CryptoKey)&&f.push("CryptoKey")},90070:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decrypt=b.encrypt=void 0;let d=c(57975),e=c(77598),f=c(39469),g=c(74855),h=c(67040),i=c(98781),j=c(27067),k=c(72927),l=c(69978),m=c(25066),n=c(94415),o=c(89722),p=(0,d.promisify)(e.pbkdf2);function q(a,b){if((0,m.default)(a))return a.export();if(a instanceof Uint8Array)return a;if((0,k.isCryptoKey)(a))return(0,l.checkEncCryptoKey)(a,b,"deriveBits","deriveKey"),e.KeyObject.from(a).export();throw TypeError((0,n.default)(a,...o.types,"Uint8Array"))}b.encrypt=async(a,b,c,d=2048,e=(0,f.default)(new Uint8Array(16)))=>{(0,j.default)(e);let k=(0,g.p2s)(a,e),l=parseInt(a.slice(13,16),10)>>3,m=q(b,a),n=await p(m,k,d,l,`sha${a.slice(8,11)}`);return{encryptedKey:await (0,i.wrap)(a.slice(-6),n,c),p2c:d,p2s:(0,h.encode)(e)}},b.decrypt=async(a,b,c,d,e)=>{(0,j.default)(e);let f=(0,g.p2s)(a,e),h=parseInt(a.slice(13,16),10)>>3,k=q(b,a),l=await p(k,f,d,h,`sha${a.slice(8,11)}`);return(0,i.unwrap)(a.slice(-6),l,c)}},90076:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeCreateMagicAuthOptions=void 0,b.serializeCreateMagicAuthOptions=a=>({email:a.email,invitation_token:a.invitationToken})},90123:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},90244:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeQueryOptions=void 0,b.serializeQueryOptions=a=>({q:a.q,context:JSON.stringify(a.context),limit:a.limit,before:a.before,after:a.after,order:a.order})},90731:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generateSecret=void 0;let d=c(10445);b.generateSecret=async function(a,b){return(0,d.generateSecret)(a,b)}},90750:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithRefreshTokenOptions=void 0,b.serializeAuthenticateWithRefreshTokenOptions=a=>({grant_type:"refresh_token",client_id:a.clientId,client_secret:a.clientSecret,refresh_token:a.refreshToken,organization_id:a.organizationId,ip_address:a.ipAddress,user_agent:a.userAgent})},90939:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default={}},91156:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeSendMagicAuthCodeOptions=void 0,b.serializeSendMagicAuthCodeOptions=a=>({email:a.email})},91499:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.cryptoRuntime=b.base64url=b.generateSecret=b.generateKeyPair=b.errors=b.decodeJwt=b.decodeProtectedHeader=b.importJWK=b.importX509=b.importPKCS8=b.importSPKI=b.exportJWK=b.exportSPKI=b.exportPKCS8=b.UnsecuredJWT=b.experimental_jwksCache=b.createRemoteJWKSet=b.createLocalJWKSet=b.EmbeddedJWK=b.calculateJwkThumbprintUri=b.calculateJwkThumbprint=b.EncryptJWT=b.SignJWT=b.GeneralSign=b.FlattenedSign=b.CompactSign=b.FlattenedEncrypt=b.CompactEncrypt=b.jwtDecrypt=b.jwtVerify=b.generalVerify=b.flattenedVerify=b.compactVerify=b.GeneralEncrypt=b.generalDecrypt=b.flattenedDecrypt=b.compactDecrypt=void 0;var d=c(8697);Object.defineProperty(b,"compactDecrypt",{enumerable:!0,get:function(){return d.compactDecrypt}});var e=c(55307);Object.defineProperty(b,"flattenedDecrypt",{enumerable:!0,get:function(){return e.flattenedDecrypt}});var f=c(77356);Object.defineProperty(b,"generalDecrypt",{enumerable:!0,get:function(){return f.generalDecrypt}});var g=c(65560);Object.defineProperty(b,"GeneralEncrypt",{enumerable:!0,get:function(){return g.GeneralEncrypt}});var h=c(85685);Object.defineProperty(b,"compactVerify",{enumerable:!0,get:function(){return h.compactVerify}});var i=c(93883);Object.defineProperty(b,"flattenedVerify",{enumerable:!0,get:function(){return i.flattenedVerify}});var j=c(83498);Object.defineProperty(b,"generalVerify",{enumerable:!0,get:function(){return j.generalVerify}});var k=c(85400);Object.defineProperty(b,"jwtVerify",{enumerable:!0,get:function(){return k.jwtVerify}});var l=c(62564);Object.defineProperty(b,"jwtDecrypt",{enumerable:!0,get:function(){return l.jwtDecrypt}});var m=c(28481);Object.defineProperty(b,"CompactEncrypt",{enumerable:!0,get:function(){return m.CompactEncrypt}});var n=c(93695);Object.defineProperty(b,"FlattenedEncrypt",{enumerable:!0,get:function(){return n.FlattenedEncrypt}});var o=c(20578);Object.defineProperty(b,"CompactSign",{enumerable:!0,get:function(){return o.CompactSign}});var p=c(69531);Object.defineProperty(b,"FlattenedSign",{enumerable:!0,get:function(){return p.FlattenedSign}});var q=c(35254);Object.defineProperty(b,"GeneralSign",{enumerable:!0,get:function(){return q.GeneralSign}});var r=c(29300);Object.defineProperty(b,"SignJWT",{enumerable:!0,get:function(){return r.SignJWT}});var s=c(17152);Object.defineProperty(b,"EncryptJWT",{enumerable:!0,get:function(){return s.EncryptJWT}});var t=c(1945);Object.defineProperty(b,"calculateJwkThumbprint",{enumerable:!0,get:function(){return t.calculateJwkThumbprint}}),Object.defineProperty(b,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return t.calculateJwkThumbprintUri}});var u=c(66840);Object.defineProperty(b,"EmbeddedJWK",{enumerable:!0,get:function(){return u.EmbeddedJWK}});var v=c(72402);Object.defineProperty(b,"createLocalJWKSet",{enumerable:!0,get:function(){return v.createLocalJWKSet}});var w=c(91671);Object.defineProperty(b,"createRemoteJWKSet",{enumerable:!0,get:function(){return w.createRemoteJWKSet}}),Object.defineProperty(b,"experimental_jwksCache",{enumerable:!0,get:function(){return w.experimental_jwksCache}});var x=c(18923);Object.defineProperty(b,"UnsecuredJWT",{enumerable:!0,get:function(){return x.UnsecuredJWT}});var y=c(94421);Object.defineProperty(b,"exportPKCS8",{enumerable:!0,get:function(){return y.exportPKCS8}}),Object.defineProperty(b,"exportSPKI",{enumerable:!0,get:function(){return y.exportSPKI}}),Object.defineProperty(b,"exportJWK",{enumerable:!0,get:function(){return y.exportJWK}});var z=c(80518);Object.defineProperty(b,"importSPKI",{enumerable:!0,get:function(){return z.importSPKI}}),Object.defineProperty(b,"importPKCS8",{enumerable:!0,get:function(){return z.importPKCS8}}),Object.defineProperty(b,"importX509",{enumerable:!0,get:function(){return z.importX509}}),Object.defineProperty(b,"importJWK",{enumerable:!0,get:function(){return z.importJWK}});var A=c(26077);Object.defineProperty(b,"decodeProtectedHeader",{enumerable:!0,get:function(){return A.decodeProtectedHeader}});var B=c(46762);Object.defineProperty(b,"decodeJwt",{enumerable:!0,get:function(){return B.decodeJwt}}),b.errors=c(69817);var C=c(87635);Object.defineProperty(b,"generateKeyPair",{enumerable:!0,get:function(){return C.generateKeyPair}});var D=c(90731);Object.defineProperty(b,"generateSecret",{enumerable:!0,get:function(){return D.generateSecret}}),b.base64url=c(45592);var E=c(6032);Object.defineProperty(b,"cryptoRuntime",{enumerable:!0,get:function(){return E.default}})},91671:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),b.createRemoteJWKSet=b.experimental_jwksCache=void 0;let e=c(45234),f=c(69817),g=c(72402),h=c(16217);"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="jose/v5.6.3"),b.experimental_jwksCache=Symbol();class i{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(a,c){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(a.href),this._options={agent:c?.agent,headers:c?.headers},this._timeoutDuration="number"==typeof c?.timeoutDuration?c?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof c?.cooldownDuration?c?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof c?.cacheMaxAge?c?.cacheMaxAge:6e5,c?.[b.experimental_jwksCache]!==void 0&&(this._cache=c?.[b.experimental_jwksCache],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!(0,h.default)(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,h.default)}(c?.[b.experimental_jwksCache],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=(0,g.createLocalJWKSet)(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(a,b){this._local&&this.fresh()||await this.reload();try{return await this._local(a,b)}catch(c){if(c instanceof f.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(a,b);throw c}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let a=new Headers(this._options.headers);d&&!a.has("User-Agent")&&(a.set("User-Agent",d),this._options.headers=Object.fromEntries(a.entries())),this._pendingFetch||=(0,e.default)(this._url,this._timeoutDuration,this._options).then(a=>{this._local=(0,g.createLocalJWKSet)(a),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=a),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(a=>{throw this._pendingFetch=void 0,a}),await this._pendingFetch}}b.createRemoteJWKSet=function(a,b){let c=new i(a,b),d=async(a,b)=>c.getKey(a,b);return Object.defineProperties(d,{coolingDown:{get:()=>c.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>c.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>c.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!c._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>c._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),d}},91749:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(22842),b),e(c(94876),b)},92394:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.FetchHttpClientResponse=b.FetchHttpClient=void 0;let e=c(24384),f=c(73351);class g extends e.HttpClient{constructor(a,b,c){if(super(a,b),this.baseURL=a,this.options=b,!c){if(!globalThis.fetch)throw Error("Fetch function not defined in the global scope and no replacement was provided.");c=globalThis.fetch}this._fetchFn=c.bind(globalThis)}getClientName(){return"fetch"}get(a,b){return d(this,void 0,void 0,function*(){let c=e.HttpClient.getResourceURL(this.baseURL,a,b.params);return a.startsWith("/fga/")?yield this.fetchRequestWithRetry(c,"GET",null,b.headers):yield this.fetchRequest(c,"GET",null,b.headers)})}post(a,b,c){return d(this,void 0,void 0,function*(){let d=e.HttpClient.getResourceURL(this.baseURL,a,c.params);return a.startsWith("/fga/")?yield this.fetchRequestWithRetry(d,"POST",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.fetchRequest(d,"POST",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers))})}put(a,b,c){return d(this,void 0,void 0,function*(){let d=e.HttpClient.getResourceURL(this.baseURL,a,c.params);return a.startsWith("/fga/")?yield this.fetchRequestWithRetry(d,"PUT",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.fetchRequest(d,"PUT",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers))})}delete(a,b){return d(this,void 0,void 0,function*(){let c=e.HttpClient.getResourceURL(this.baseURL,a,b.params);return a.startsWith("/fga/")?yield this.fetchRequestWithRetry(c,"DELETE",null,b.headers):yield this.fetchRequest(c,"DELETE",null,b.headers)})}fetchRequest(a,b,c,g){var i,j,k,l,m;return d(this,void 0,void 0,function*(){let d,n,o="POST"===b||"PUT"===b||"PATCH"===b,{"User-Agent":p}=(null==(i=this.options)?void 0:i.headers)||{},q=null!=(k=null==(j=this.options)?void 0:j.timeout)?k:6e4;d=new AbortController,n=setTimeout(()=>{null==d||d.abort()},q);try{let i=yield this._fetchFn(a,{method:b,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(l=this.options)?void 0:l.headers),g),{"User-Agent":this.addClientToUserAgent((p||"workos-node").toString())}),body:c||(o?"":void 0),signal:null==d?void 0:d.signal});if(n&&clearTimeout(n),!i.ok){let a,b=null!=(m=i.headers.get("X-Request-ID"))?m:"",c=yield i.text();try{a=JSON.parse(c)}catch(a){if(a instanceof SyntaxError)throw new f.ParseError({message:a.message,rawBody:c,requestID:b,rawStatus:i.status});throw a}throw new e.HttpClientError({message:i.statusText,response:{status:i.status,headers:i.headers,data:a}})}return new h(i)}catch(a){if(n&&clearTimeout(n),a instanceof Error&&"AbortError"===a.name)throw new e.HttpClientError({message:`Request timeout after ${q}ms`,response:{status:408,headers:{},data:{error:"Request timeout"}}});throw a}})}fetchRequestWithRetry(a,b,c,e){return d(this,void 0,void 0,function*(){let f,g=1,h=()=>d(this,void 0,void 0,function*(){let d=null;try{f=yield this.fetchRequest(a,b,c,e)}catch(a){d=a}if(this.shouldRetryRequest(d,g))return g++,yield this.sleep(g),h();if(null!=d)throw d;return f});return h()})}shouldRetryRequest(a,b){return!(b>this.MAX_RETRY_ATTEMPTS)&&(!!(null!=a&&(a instanceof TypeError||a instanceof e.HttpClientError&&this.RETRY_STATUS_CODES.includes(a.response.status)))||!1)}}b.FetchHttpClient=g;class h extends e.HttpClientResponse{constructor(a){super(a.status,h._transformHeadersToObject(a.headers)),this._res=a}getRawResponse(){return this._res}toJSON(){let a=this._res.headers.get("content-type");return(null==a?void 0:a.includes("application/json"))?this._res.json():null}static _transformHeadersToObject(a){let b={};for(let c of Object.entries(a)){if(!Array.isArray(c)||2!==c.length)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");b[c[0]]=c[1]}return b}}b.FetchHttpClientResponse=h},92815:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},92930:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},93098:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeOrganization=void 0;let d=c(21650);b.deserializeOrganization=a=>{var b,c;return Object.assign(Object.assign({object:a.object,id:a.id,name:a.name,allowProfilesOutsideOrganization:a.allow_profiles_outside_organization,domains:a.domains.map(d.deserializeOrganizationDomain)},void 0===a.stripe_customer_id?void 0:{stripeCustomerId:a.stripe_customer_id}),{createdAt:a.created_at,updatedAt:a.updated_at,externalId:null!=(b=a.external_id)?b:null,metadata:null!=(c=a.metadata)?c:{}})}},93229:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithPasswordOptions=void 0,b.serializeAuthenticateWithPasswordOptions=a=>({grant_type:"password",client_id:a.clientId,client_secret:a.clientSecret,email:a.email,password:a.password,invitation_token:a.invitationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},93443:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(38383),b),e(c(88411),b),e(c(73860),b),e(c(16148),b),e(c(70043),b),e(c(10362),b),e(c(56018),b),e(c(18178),b),e(c(26604),b)},93561:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeUpdateOrganizationMembershipOptions=void 0,b.serializeUpdateOrganizationMembershipOptions=a=>({role_slug:a.roleSlug,role_slugs:a.roleSlugs})},93677:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeUpdatedEventDirectoryGroup=b.deserializeDirectoryGroup=void 0,b.deserializeDirectoryGroup=a=>({id:a.id,idpId:a.idp_id,directoryId:a.directory_id,organizationId:a.organization_id,name:a.name,createdAt:a.created_at,updatedAt:a.updated_at,rawAttributes:a.raw_attributes}),b.deserializeUpdatedEventDirectoryGroup=a=>({id:a.id,idpId:a.idp_id,directoryId:a.directory_id,organizationId:a.organization_id,name:a.name,createdAt:a.created_at,updatedAt:a.updated_at,rawAttributes:a.raw_attributes,previousAttributes:a.previous_attributes})},93695:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FlattenedEncrypt=b.unprotected=void 0;let d=c(67040),e=c(18013),f=c(70338),g=c(69817),h=c(1842),i=c(74855),j=c(53268);b.unprotected=Symbol();class k{_plaintext;_protectedHeader;_sharedUnprotectedHeader;_unprotectedHeader;_aad;_cek;_iv;_keyManagementParameters;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=a}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}async encrypt(a,c){let k,l,m,n,o;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new g.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,h.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new g.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let p={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,j.default)(g.JWEInvalid,new Map,c?.crit,this._protectedHeader,p),void 0!==p.zip)throw new g.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:q,enc:r}=p;if("string"!=typeof q||!q)throw new g.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof r||!r)throw new g.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===q||"ECDH-ES"===q))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${q}`);{let d;({cek:l,encryptedKey:k,parameters:d}=await (0,f.default)(q,r,a,this._cek,this._keyManagementParameters)),d&&(c&&b.unprotected in c?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...d}:this.setUnprotectedHeader(d):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...d}:this.setProtectedHeader(d))}n=this._protectedHeader?i.encoder.encode((0,d.encode)(JSON.stringify(this._protectedHeader))):i.encoder.encode(""),this._aad?(o=(0,d.encode)(this._aad),m=(0,i.concat)(n,i.encoder.encode("."),i.encoder.encode(o))):m=n;let{ciphertext:s,tag:t,iv:u}=await (0,e.default)(r,this._plaintext,l,this._iv,m),v={ciphertext:(0,d.encode)(s)};return u&&(v.iv=(0,d.encode)(u)),t&&(v.tag=(0,d.encode)(t)),k&&(v.encrypted_key=(0,d.encode)(k)),o&&(v.aad=o),this._protectedHeader&&(v.protected=i.decoder.decode(n)),this._sharedUnprotectedHeader&&(v.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(v.header=this._unprotectedHeader),v}}b.FlattenedEncrypt=k},93883:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.flattenedVerify=void 0;let d=c(67040),e=c(51959),f=c(69817),g=c(74855),h=c(1842),i=c(16217),j=c(84634),k=c(53268),l=c(35642);b.flattenedVerify=async function(a,b,c){let m,n;if(!(0,i.default)(a))throw new f.JWSInvalid("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new f.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new f.JWSInvalid("JWS Protected Header incorrect type");if(void 0===a.payload)throw new f.JWSInvalid("JWS Payload missing");if("string"!=typeof a.signature)throw new f.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==a.header&&!(0,i.default)(a.header))throw new f.JWSInvalid("JWS Unprotected Header incorrect type");let o={};if(a.protected)try{let b=(0,d.decode)(a.protected);o=JSON.parse(g.decoder.decode(b))}catch{throw new f.JWSInvalid("JWS Protected Header is invalid")}if(!(0,h.default)(o,a.header))throw new f.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let p={...o,...a.header},q=(0,k.default)(f.JWSInvalid,new Map([["b64",!0]]),c?.crit,o,p),r=!0;if(q.has("b64")&&"boolean"!=typeof(r=o.b64))throw new f.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=p;if("string"!=typeof s||!s)throw new f.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let t=c&&(0,l.default)("algorithms",c.algorithms);if(t&&!t.has(s))throw new f.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(r){if("string"!=typeof a.payload)throw new f.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new f.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let u=!1;"function"==typeof b&&(b=await b(o,a),u=!0),(0,j.default)(s,b,"verify");let v=(0,g.concat)(g.encoder.encode(a.protected??""),g.encoder.encode("."),"string"==typeof a.payload?g.encoder.encode(a.payload):a.payload);try{m=(0,d.decode)(a.signature)}catch{throw new f.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,e.default)(s,b,m,v))throw new f.JWSSignatureVerificationFailed;if(r)try{n=(0,d.decode)(a.payload)}catch{throw new f.JWSInvalid("Failed to base64url decode the payload")}else n="string"==typeof a.payload?g.encoder.encode(a.payload):a.payload;let w={payload:n};return(void 0!==a.protected&&(w.protectedHeader=o),void 0!==a.header&&(w.unprotectedHeader=a.header),u)?{...w,key:b}:w}},94187:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.DirectorySync=void 0;let e=c(46944),f=c(58182),g=c(61324);class h{constructor(a){this.workos=a}listDirectories(a){return d(this,void 0,void 0,function*(){return new e.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/directories",f.deserializeDirectory,a?(0,f.serializeListDirectoriesOptions)(a):void 0)),a=>(0,g.fetchAndDeserialize)(this.workos,"/directories",f.deserializeDirectory,a),a?(0,f.serializeListDirectoriesOptions)(a):void 0)})}getDirectory(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/directories/${a}`);return(0,f.deserializeDirectory)(b)})}deleteDirectory(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/directories/${a}`)})}listGroups(a){return d(this,void 0,void 0,function*(){return new e.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/directory_groups",f.deserializeDirectoryGroup,a)),a=>(0,g.fetchAndDeserialize)(this.workos,"/directory_groups",f.deserializeDirectoryGroup,a),a)})}listUsers(a){return d(this,void 0,void 0,function*(){return new e.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/directory_users",f.deserializeDirectoryUserWithGroups,a)),a=>(0,g.fetchAndDeserialize)(this.workos,"/directory_users",f.deserializeDirectoryUserWithGroups,a),a)})}getUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/directory_users/${a}`);return(0,f.deserializeDirectoryUserWithGroups)(b)})}getGroup(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/directory_groups/${a}`);return(0,f.deserializeDirectoryGroup)(b)})}}b.DirectorySync=h},94415:(a,b)=>{"use strict";function c(a,b,...d){if(d.length>2){let b=d.pop();a+=`one of type ${d.join(", ")}, or ${b}.`}else 2===d.length?a+=`one of type ${d[0]} or ${d[1]}.`:a+=`of type ${d[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}Object.defineProperty(b,"__esModule",{value:!0}),b.withAlg=void 0,b.default=(a,...b)=>c("Key must be ",a,...b),b.withAlg=function(a,b,...d){return c(`Key for the ${a} algorithm must be `,b,...d)}},94421:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.exportJWK=b.exportPKCS8=b.exportSPKI=void 0;let d=c(6683),e=c(6683),f=c(83820);b.exportSPKI=async function(a){return(0,d.toSPKI)(a)},b.exportPKCS8=async function(a){return(0,e.toPKCS8)(a)},b.exportJWK=async function(a){return(0,f.default)(a)}},94876:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},94893:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},95032:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.bitLength=void 0;let d=c(69817),e=c(39469);function f(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new d.JOSENotSupported(`Unsupported JWE Algorithm: ${a}`)}}b.bitLength=f,b.default=a=>(0,e.default)(new Uint8Array(f(a)>>3))},95119:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithEmailVerificationOptions=void 0,b.serializeAuthenticateWithEmailVerificationOptions=a=>({grant_type:"urn:workos:oauth:grant-type:email-verification:code",client_id:a.clientId,client_secret:a.clientSecret,pending_authentication_token:a.pendingAuthenticationToken,code:a.code,ip_address:a.ipAddress,user_agent:a.userAgent})},95247:function(a,b,c){"use strict";var d=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(b,"__esModule",{value:!0}),b.SubtleCryptoProvider=void 0;let e=c(34821);class f extends e.CryptoProvider{constructor(a){super(),this.subtleCrypto=a||crypto.subtle}computeHMACSignature(a,b){throw Error("SubleCryptoProvider cannot be used in a synchronous context.")}computeHMACSignatureAsync(a,b){return d(this,void 0,void 0,function*(){let c=new TextEncoder,d=yield this.subtleCrypto.importKey("raw",c.encode(b),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),e=new Uint8Array((yield this.subtleCrypto.sign("hmac",d,c.encode(a)))),f=Array(e.length);for(let a=0;a<e.length;a++)f[a]=g[e[a]];return f.join("")})}secureCompare(a,b){return d(this,void 0,void 0,function*(){let c=this.encoder.encode(a),d=this.encoder.encode(b);if(c.length!==d.length)return!1;let e={name:"HMAC",hash:"SHA-256"},f=yield crypto.subtle.generateKey(e,!1,["sign","verify"]),g=yield crypto.subtle.sign(e,f,c);return yield crypto.subtle.verify(e,f,g,d)})}encrypt(a,b,c,e){return d(this,void 0,void 0,function*(){let d=c||crypto.getRandomValues(new Uint8Array(32)),f=yield this.subtleCrypto.importKey("raw",b,{name:"AES-GCM"},!1,["encrypt"]),g={name:"AES-GCM",iv:d};e&&(g.additionalData=e);let h=new Uint8Array((yield this.subtleCrypto.encrypt(g,f,a))),i=h.length-16,j=h.slice(i);return{ciphertext:h.slice(0,i),iv:d,tag:j}})}decrypt(a,b,c,e,f){return d(this,void 0,void 0,function*(){let d=new Uint8Array(a.length+e.length);d.set(a,0),d.set(e,a.length);let g=yield this.subtleCrypto.importKey("raw",b,{name:"AES-GCM"},!1,["decrypt"]),h={name:"AES-GCM",iv:c};return f&&(h.additionalData=f),new Uint8Array((yield this.subtleCrypto.decrypt(h,g,d)))})}randomBytes(a){let b=new Uint8Array(a);return crypto.getRandomValues(b),b}}b.SubtleCryptoProvider=f;let g=Array(256);for(let a=0;a<g.length;a++)g[a]=a.toString(16).padStart(2,"0")},95581:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeDecryptDataKeyResponse=b.deserializeCreateDataKeyResponse=void 0,b.deserializeCreateDataKeyResponse=a=>({context:a.context,dataKey:{key:a.data_key,id:a.id},encryptedKeys:a.encrypted_keys}),b.deserializeDecryptDataKeyResponse=a=>({key:a.data_key,id:a.id})},97141:(a,b,c)=>{"use strict";var d="undefined"!=typeof Symbol&&Symbol,e=c(50315);a.exports=function(){return"function"==typeof d&&"function"==typeof Symbol&&"symbol"==typeof d("foo")&&"symbol"==typeof Symbol("bar")&&e()}},97272:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default="node:crypto"},97494:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},97496:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeAuthenticateWithCodeAndVerifierOptions=void 0,b.serializeAuthenticateWithCodeAndVerifierOptions=a=>({grant_type:"authorization_code",client_id:a.clientId,code:a.code,code_verifier:a.codeVerifier,invitation_token:a.invitationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},97608:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeSession=void 0,b.deserializeSession=a=>({object:"session",id:a.id,userId:a.user_id,ipAddress:a.ip_address,userAgent:a.user_agent,organizationId:a.organization_id,impersonator:a.impersonator,authMethod:a.auth_method,status:a.status,expiresAt:a.expires_at,endedAt:a.ended_at,createdAt:a.created_at,updatedAt:a.updated_at})},98479:a=>{"use strict";a.exports=EvalError},98546:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.serializeResetPasswordOptions=void 0,b.serializeResetPasswordOptions=a=>({token:a.token,new_password:a.newPassword})},98627:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deserializeUpdatedEventDirectoryUser=b.deserializeDirectoryUserWithGroups=b.deserializeDirectoryUser=void 0;let d=c(93677);b.deserializeDirectoryUser=a=>({object:a.object,id:a.id,directoryId:a.directory_id,organizationId:a.organization_id,rawAttributes:a.raw_attributes,customAttributes:a.custom_attributes,idpId:a.idp_id,firstName:a.first_name,email:a.email,emails:a.emails,username:a.username,lastName:a.last_name,jobTitle:a.job_title,state:a.state,role:a.role,createdAt:a.created_at,updatedAt:a.updated_at}),b.deserializeDirectoryUserWithGroups=a=>Object.assign(Object.assign({},(0,b.deserializeDirectoryUser)(a)),{groups:a.groups.map(d.deserializeDirectoryGroup)}),b.deserializeUpdatedEventDirectoryUser=a=>({object:"directory_user",id:a.id,directoryId:a.directory_id,organizationId:a.organization_id,rawAttributes:a.raw_attributes,customAttributes:a.custom_attributes,idpId:a.idp_id,firstName:a.first_name,email:a.email,emails:a.emails,username:a.username,lastName:a.last_name,jobTitle:a.job_title,state:a.state,role:a.role,createdAt:a.created_at,updatedAt:a.updated_at,previousAttributes:a.previous_attributes})},98781:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.unwrap=b.wrap=void 0;let d=c(4573),e=c(77598),f=c(69817),g=c(74855),h=c(72927),i=c(69978),j=c(25066),k=c(94415),l=c(11192),m=c(89722);function n(a,b){if(a.symmetricKeySize<<3!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function o(a,b,c){if((0,j.default)(a))return a;if(a instanceof Uint8Array)return(0,e.createSecretKey)(a);if((0,h.isCryptoKey)(a))return(0,i.checkEncCryptoKey)(a,b,c),e.KeyObject.from(a);throw TypeError((0,k.default)(a,...m.types,"Uint8Array"))}b.wrap=(a,b,c)=>{let h=parseInt(a.slice(1,4),10),i=`aes${h}-wrap`;if(!(0,l.default)(i))throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`);let j=o(b,a,"wrapKey");n(j,a);let k=(0,e.createCipheriv)(i,j,d.Buffer.alloc(8,166));return(0,g.concat)(k.update(c),k.final())},b.unwrap=(a,b,c)=>{let h=parseInt(a.slice(1,4),10),i=`aes${h}-wrap`;if(!(0,l.default)(i))throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`);let j=o(b,a,"unwrapKey");n(j,a);let k=(0,e.createDecipheriv)(i,j,d.Buffer.alloc(8,166));return(0,g.concat)(k.update(c),k.final())}},98973:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},99197:(a,b,c)=>{"use strict";var d=c(78495);a.exports=Function.prototype.bind||d}};