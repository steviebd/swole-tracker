(()=>{var a={};a.id=5189,a.ids=[5189],a.modules={1922:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ACTION_SUFFIX:function(){return o},APP_DIR_ALIAS:function(){return I},CACHE_ONE_YEAR:function(){return A},DOT_NEXT_ALIAS:function(){return G},ESLINT_DEFAULT_DIRS:function(){return aa},GSP_NO_RETURNED_VALUE:function(){return W},GSSP_COMPONENT_MEMBER_ERROR:function(){return Z},GSSP_NO_RETURNED_VALUE:function(){return X},HTML_CONTENT_TYPE_HEADER:function(){return d},INFINITE_CACHE:function(){return B},INSTRUMENTATION_HOOK_FILENAME:function(){return E},JSON_CONTENT_TYPE_HEADER:function(){return e},MATCHED_PATH_HEADER:function(){return h},MIDDLEWARE_FILENAME:function(){return C},MIDDLEWARE_LOCATION_REGEXP:function(){return D},NEXT_BODY_SUFFIX:function(){return r},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return z},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return t},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return u},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return y},NEXT_CACHE_TAGS_HEADER:function(){return s},NEXT_CACHE_TAG_MAX_ITEMS:function(){return w},NEXT_CACHE_TAG_MAX_LENGTH:function(){return x},NEXT_DATA_SUFFIX:function(){return p},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return g},NEXT_META_SUFFIX:function(){return q},NEXT_QUERY_PARAM_PREFIX:function(){return f},NEXT_RESUME_HEADER:function(){return v},NON_STANDARD_NODE_ENV:function(){return $},PAGES_DIR_ALIAS:function(){return F},PRERENDER_REVALIDATE_HEADER:function(){return i},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return j},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return Q},ROOT_DIR_ALIAS:function(){return H},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return P},RSC_ACTION_ENCRYPTION_ALIAS:function(){return O},RSC_ACTION_PROXY_ALIAS:function(){return L},RSC_ACTION_VALIDATE_ALIAS:function(){return K},RSC_CACHE_WRAPPER_ALIAS:function(){return M},RSC_DYNAMIC_IMPORT_WRAPPER_ALIAS:function(){return N},RSC_MOD_REF_PROXY_ALIAS:function(){return J},RSC_PREFETCH_SUFFIX:function(){return k},RSC_SEGMENTS_DIR_SUFFIX:function(){return l},RSC_SEGMENT_SUFFIX:function(){return m},RSC_SUFFIX:function(){return n},SERVER_PROPS_EXPORT_ERROR:function(){return V},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return S},SERVER_PROPS_SSG_CONFLICT:function(){return T},SERVER_RUNTIME:function(){return ab},SSG_FALLBACK_EXPORT_ERROR:function(){return _},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return R},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return U},TEXT_PLAIN_CONTENT_TYPE_HEADER:function(){return c},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return Y},WEBPACK_LAYERS:function(){return ad},WEBPACK_RESOURCE_QUERIES:function(){return ae}});let c="text/plain",d="text/html; charset=utf-8",e="application/json; charset=utf-8",f="nxtP",g="nxtI",h="x-matched-path",i="x-prerender-revalidate",j="x-prerender-revalidate-if-generated",k=".prefetch.rsc",l=".segments",m=".segment.rsc",n=".rsc",o=".action",p=".json",q=".meta",r=".body",s="x-next-cache-tags",t="x-next-revalidated-tags",u="x-next-revalidate-tag-token",v="next-resume",w=128,x=256,y=1024,z="_N_T_",A=31536e3,B=0xfffffffe,C="middleware",D=`(?:src/)?${C}`,E="instrumentation",F="private-next-pages",G="private-dot-next",H="private-next-root-dir",I="private-next-app-dir",J="private-next-rsc-mod-ref-proxy",K="private-next-rsc-action-validate",L="private-next-rsc-server-reference",M="private-next-rsc-cache-wrapper",N="private-next-rsc-track-dynamic-import",O="private-next-rsc-action-encryption",P="private-next-rsc-action-client-wrapper",Q="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",R="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",S="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",T="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",U="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",V="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",W="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",X="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",Y="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",Z="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",$='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',_="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",aa=["app","pages","components","lib","src"],ab={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},ac={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},ad={...ac,GROUP:{builtinReact:[ac.reactServerComponents,ac.actionBrowser],serverOnly:[ac.reactServerComponents,ac.actionBrowser,ac.instrument,ac.middleware],neutralTarget:[ac.apiNode,ac.apiEdge],clientOnly:[ac.serverSideRendering,ac.appPagesBrowser],bundled:[ac.reactServerComponents,ac.actionBrowser,ac.serverSideRendering,ac.appPagesBrowser,ac.shared,ac.instrument,ac.middleware],appPages:[ac.reactServerComponents,ac.serverSideRendering,ac.appPagesBrowser,ac.actionBrowser]}},ae={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},6240:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>o,default:()=>n,handler:()=>m});var e=c(29046),f=c(8667),g=c(33480),h=c(86435),i=c(80499),j=c(58112),k=c(18766),l=a([i]);i=(l.then?(await l)():l)[0];let n=(0,h.M)(i,"default"),o=(0,h.M)(i,"config"),p=new g.PagesAPIRouteModule({definition:{kind:f.A.PAGES_API,page:"/api/health",pathname:"/api/health",bundlePath:"",filename:""},userland:i,distDir:".next",relativeProjectDir:""});async function m(a,b,c){let d=await p.prepare(a,b,{srcPage:"/api/health"});if(!d){b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve());return}let{query:f,params:g,prerenderManifest:h,routerServerContext:i}=d;try{let c=a.method||"GET",d=(0,j.getTracer)(),e=d.getActiveScopeSpan(),l=p.instrumentationOnRequestError.bind(p),m=async e=>p.render(a,b,{query:{...f,...g},params:g,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:h.preview,propagateError:!1,dev:p.isDev,page:"/api/health",internalRevalidate:null==i?void 0:i.revalidate,onError:(...b)=>l(a,...b)}).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let f=d.getRootSpanAttributes();if(!f)return;if(f.get("next.span_type")!==k.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${f.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let g=f.get("next.route");if(g){let a=`${c} ${g}`;e.setAttributes({"next.route":g,"http.route":g,"next.span_name":a}),e.updateName(a)}else e.updateName(`${c} ${a.url}`)});e?await m(e):await d.withPropagatedContext(a.headers,()=>d.trace(k.BaseServerSpan.handleRequest,{spanName:`${c} ${a.url}`,kind:j.SpanKind.SERVER,attributes:{"http.method":c,"http.target":a.url}},m))}catch(a){if(p.isDev)throw a;(0,e.sendError)(b,500,"Internal Server Error")}finally{null==c.waitUntil||c.waitUntil.call(c,Promise.resolve())}}d()}catch(a){d(a)}})},8667:(a,b)=>{"use strict";Object.defineProperty(b,"A",{enumerable:!0,get:function(){return c}});var c=function(a){return a.PAGES="PAGES",a.PAGES_API="PAGES_API",a.APP_PAGE="APP_PAGE",a.APP_ROUTE="APP_ROUTE",a.IMAGE="IMAGE",a}({})},10437:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{aiSuggestionHistory:()=>F,aiSuggestionHistoryRelations:()=>R,createTable:()=>i,dailyJokes:()=>p,exerciseLinks:()=>u,exerciseLinksRelations:()=>N,externalWorkoutsWhoop:()=>r,externalWorkoutsWhoopRelations:()=>L,healthAdvice:()=>v,healthAdviceRelations:()=>O,masterExercises:()=>t,masterExercisesRelations:()=>M,oauthStates:()=>E,rateLimits:()=>s,sessionDebriefs:()=>w,sessionDebriefsRelations:()=>P,sessionExercises:()=>n,sessionExercisesRelations:()=>J,templateExercises:()=>m,templateExercisesRelations:()=>H,userIntegrations:()=>q,userIntegrationsRelations:()=>K,userPreferences:()=>o,users:()=>j,webhookEvents:()=>x,wellnessData:()=>y,wellnessDataRelations:()=>Q,whoopBodyMeasurement:()=>D,whoopBodyMeasurementRelations:()=>W,whoopCycles:()=>A,whoopCyclesRelations:()=>T,whoopProfile:()=>C,whoopProfileRelations:()=>V,whoopRecovery:()=>z,whoopRecoveryRelations:()=>S,whoopSleep:()=>B,whoopSleepRelations:()=>U,workoutSessions:()=>l,workoutSessionsRelations:()=>I,workoutTemplates:()=>k,workoutTemplatesRelations:()=>G});var e=c(11737),f=c(57238),g=a([e,f]);[e,f]=g.then?(await g)():g;let h=(0,f.customType)({dataType:()=>"text",toDriver:a=>a.toISOString(),fromDriver:a=>new Date(a)}),i=f.sqliteTable,j=i("user",{id:(0,f.text)().primaryKey(),email:(0,f.text)(),firstName:(0,f.text)(),lastName:(0,f.text)(),profilePictureUrl:(0,f.text)(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("user_email_idx").on(a.email)]),k=i("workout_template",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),name:(0,f.text)().notNull(),user_id:(0,f.text)().notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("template_user_id_idx").on(a.user_id),(0,f.index)("template_name_idx").on(a.name)]),l=i("workout_session",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),templateId:(0,f.integer)().references(()=>k.id,{onDelete:"set null"}),workoutDate:h().default((0,e.sql)`(datetime('now'))`).notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("workout_session_user_id_idx").on(a.user_id),(0,f.index)("workout_session_template_id_idx").on(a.templateId),(0,f.index)("workout_session_workout_date_idx").on(a.workoutDate),(0,f.index)("workout_session_user_date_idx").on(a.user_id,a.workoutDate)]),m=i("template_exercise",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),templateId:(0,f.integer)().notNull().references(()=>k.id,{onDelete:"cascade"}),exerciseName:(0,f.text)().notNull(),orderIndex:(0,f.integer)().notNull().default(0),linkingRejected:(0,f.integer)({mode:"boolean"}).notNull().default(!1),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull()},a=>[(0,f.index)("template_exercise_user_id_idx").on(a.user_id),(0,f.index)("template_exercise_template_id_idx").on(a.templateId),(0,f.index)("template_exercise_order_idx").on(a.templateId,a.orderIndex)]),n=i("session_exercise",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),sessionId:(0,f.integer)().notNull().references(()=>l.id,{onDelete:"cascade"}),templateExerciseId:(0,f.integer)().references(()=>m.id,{onDelete:"set null"}),exerciseName:(0,f.text)().notNull(),setOrder:(0,f.integer)().notNull().default(0),weight:(0,f.real)(),reps:(0,f.integer)(),sets:(0,f.integer)(),unit:(0,f.text)().notNull().default("kg"),rpe:(0,f.integer)(),rest_seconds:(0,f.integer)(),is_estimate:(0,f.integer)({mode:"boolean"}).notNull().default(!1),is_default_applied:(0,f.integer)({mode:"boolean"}).notNull().default(!1),one_rm_estimate:(0,f.real)(),volume_load:(0,f.real)(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull()},a=>[(0,f.index)("session_exercise_user_id_idx").on(a.user_id),(0,f.index)("session_exercise_session_id_idx").on(a.sessionId),(0,f.index)("session_exercise_template_exercise_id_idx").on(a.templateExerciseId),(0,f.index)("session_exercise_name_idx").on(a.exerciseName),(0,f.index)("session_exercise_user_exercise_idx").on(a.user_id,a.exerciseName),(0,f.index)("session_exercise_user_exercise_date_idx").on(a.user_id,a.exerciseName,a.sessionId),(0,f.index)("session_exercise_user_template_idx").on(a.user_id,a.templateExerciseId),(0,f.index)("session_exercise_user_weight_idx").on(a.user_id,a.weight),(0,f.index)("session_exercise_user_exercise_weight_idx").on(a.user_id,a.exerciseName,a.weight),(0,f.index)("session_exercise_user_one_rm_idx").on(a.user_id,a.one_rm_estimate),(0,f.index)("session_exercise_user_volume_idx").on(a.user_id,a.volume_load),(0,f.index)("session_exercise_user_exercise_one_rm_idx").on(a.user_id,a.exerciseName,a.one_rm_estimate),(0,f.index)("session_exercise_user_exercise_volume_idx").on(a.user_id,a.exerciseName,a.volume_load)]),o=i("user_preferences",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull().unique(),defaultWeightUnit:(0,f.text)().notNull().default("kg"),predictive_defaults_enabled:(0,f.integer)({mode:"boolean"}).notNull().default(!1),right_swipe_action:(0,f.text)().notNull().default("collapse_expand"),enable_manual_wellness:(0,f.integer)({mode:"boolean"}).notNull().default(!1),progression_type:(0,f.text)().notNull().default("adaptive"),linear_progression_kg:(0,f.real)().default(2.5),percentage_progression:(0,f.real)().default(2.5),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("user_preferences_user_id_idx").on(a.user_id)]),p=i("daily_joke",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),joke:(0,f.text)().notNull(),aiModel:(0,f.text)().notNull(),prompt:(0,f.text)().notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull()},a=>[(0,f.index)("daily_joke_user_id_idx").on(a.user_id),(0,f.index)("daily_joke_created_at_idx").on(a.createdAt),(0,f.index)("daily_joke_user_date_idx").on(a.user_id,a.createdAt)]),q=i("user_integration",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),provider:(0,f.text)().notNull(),accessToken:(0,f.text)().notNull(),refreshToken:(0,f.text)(),expiresAt:h(),scope:(0,f.text)(),isActive:(0,f.integer)({mode:"boolean"}).notNull().default(!0),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("user_integration_user_id_idx").on(a.user_id),(0,f.index)("user_integration_provider_idx").on(a.provider),(0,f.index)("user_integration_user_provider_idx").on(a.user_id,a.provider)]),r=i("whoop_workout",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),whoopWorkoutId:(0,f.text)().notNull().unique(),start:h().notNull(),end:h().notNull(),timezone_offset:(0,f.text)(),sport_name:(0,f.text)(),score_state:(0,f.text)(),score:(0,f.text)(),during:(0,f.text)(),zone_duration:(0,f.text)(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("external_workout_whoop_user_id_idx").on(a.user_id),(0,f.index)("external_workout_whoop_workout_id_idx").on(a.whoopWorkoutId),(0,f.index)("external_workout_whoop_start_idx").on(a.start),(0,f.index)("external_workout_whoop_user_start_idx").on(a.user_id,a.start),(0,f.index)("external_workout_whoop_user_workout_id_idx").on(a.user_id,a.whoopWorkoutId)]),s=i("rate_limit",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),endpoint:(0,f.text)().notNull(),requests:(0,f.integer)().notNull().default(0),windowStart:(0,f.text)().notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("rate_limit_user_endpoint_idx").on(a.user_id,a.endpoint),(0,f.index)("rate_limit_window_idx").on(a.windowStart)]),t=i("master_exercise",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),name:(0,f.text)().notNull(),normalizedName:(0,f.text)().notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("master_exercise_user_id_idx").on(a.user_id),(0,f.index)("master_exercise_name_idx").on(a.name),(0,f.index)("master_exercise_normalized_name_idx").on(a.normalizedName),(0,f.index)("master_exercise_user_normalized_idx").on(a.user_id,a.normalizedName)]),u=i("exercise_link",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),templateExerciseId:(0,f.integer)().notNull().references(()=>m.id,{onDelete:"cascade"}),masterExerciseId:(0,f.integer)().notNull().references(()=>t.id,{onDelete:"cascade"}),user_id:(0,f.text)().notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull()},a=>[(0,f.index)("exercise_link_template_exercise_idx").on(a.templateExerciseId),(0,f.index)("exercise_link_master_exercise_idx").on(a.masterExerciseId),(0,f.index)("exercise_link_user_id_idx").on(a.user_id)]),v=i("health_advice",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),sessionId:(0,f.integer)().notNull().references(()=>l.id,{onDelete:"cascade"}),request:(0,f.text)().notNull(),response:(0,f.text)().notNull(),readiness_rho:(0,f.real)(),overload_multiplier:(0,f.real)(),session_predicted_chance:(0,f.real)(),user_accepted_suggestions:(0,f.integer)().notNull().default(0),total_suggestions:(0,f.integer)().notNull(),response_time_ms:(0,f.integer)(),model_used:(0,f.text)(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull()},a=>[(0,f.index)("health_advice_user_id_idx").on(a.user_id),(0,f.index)("health_advice_session_id_idx").on(a.sessionId),(0,f.index)("health_advice_created_at_idx").on(a.createdAt),(0,f.index)("health_advice_user_created_idx").on(a.user_id,a.createdAt)]),w=i("session_debrief",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),sessionId:(0,f.integer)().notNull().references(()=>l.id,{onDelete:"cascade"}),version:(0,f.integer)().notNull().default(1),parentDebriefId:(0,f.integer)(),summary:(0,f.text)().notNull(),prHighlights:(0,f.text)(),adherenceScore:(0,f.real)(),focusAreas:(0,f.text)(),streakContext:(0,f.text)(),overloadDigest:(0,f.text)(),metadata:(0,f.text)(),isActive:(0,f.integer)({mode:"boolean"}).notNull().default(!0),viewedAt:h(),dismissedAt:h(),pinnedAt:h(),regenerationCount:(0,f.integer)().notNull().default(0),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("session_debrief_user_idx").on(a.user_id),(0,f.index)("session_debrief_session_idx").on(a.sessionId),(0,f.index)("session_debrief_created_idx").on(a.createdAt),(0,f.index)("session_debrief_user_created_idx").on(a.user_id,a.createdAt)]),x=i("webhook_event",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),provider:(0,f.text)().notNull(),eventType:(0,f.text)().notNull(),userId:(0,f.text)(),externalUserId:(0,f.text)(),externalEntityId:(0,f.text)(),payload:(0,f.text)(),headers:(0,f.text)(),status:(0,f.text)().notNull().default("received"),error:(0,f.text)(),processingTime:(0,f.integer)(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),processedAt:h()},a=>[(0,f.index)("webhook_event_provider_idx").on(a.provider),(0,f.index)("webhook_event_type_idx").on(a.eventType),(0,f.index)("webhook_event_user_id_idx").on(a.userId),(0,f.index)("webhook_event_external_user_id_idx").on(a.externalUserId),(0,f.index)("webhook_event_status_idx").on(a.status),(0,f.index)("webhook_event_created_at_idx").on(a.createdAt)]),y=i("wellness_data",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),sessionId:(0,f.integer)().references(()=>l.id,{onDelete:"cascade"}),date:h().notNull(),energy_level:(0,f.integer)(),sleep_quality:(0,f.integer)(),device_timezone:(0,f.text)(),submitted_at:h().default((0,e.sql)`(datetime('now'))`).notNull(),has_whoop_data:(0,f.integer)({mode:"boolean"}).notNull().default(!1),whoop_data:(0,f.text)(),notes:(0,f.text)(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("wellness_data_user_id_idx").on(a.user_id),(0,f.index)("wellness_data_user_date_idx").on(a.user_id,a.date),(0,f.index)("wellness_data_user_session_idx").on(a.user_id,a.sessionId),(0,f.index)("wellness_data_submitted_at_idx").on(a.user_id,a.submitted_at)]),z=i("whoop_recovery",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),whoop_recovery_id:(0,f.text)().notNull().unique(),cycle_id:(0,f.text)(),date:h().notNull(),recovery_score:(0,f.integer)(),hrv_rmssd_milli:(0,f.real)(),hrv_rmssd_baseline:(0,f.real)(),resting_heart_rate:(0,f.integer)(),resting_heart_rate_baseline:(0,f.integer)(),raw_data:(0,f.text)(),timezone_offset:(0,f.text)(),webhook_received_at:h().default((0,e.sql)`(datetime('now'))`).notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("whoop_recovery_user_id_idx").on(a.user_id),(0,f.index)("whoop_recovery_user_date_idx").on(a.user_id,a.date),(0,f.index)("whoop_recovery_whoop_id_idx").on(a.whoop_recovery_id),(0,f.index)("whoop_recovery_cycle_id_idx").on(a.cycle_id),(0,f.index)("whoop_recovery_user_received_idx").on(a.user_id,a.webhook_received_at)]),A=i("whoop_cycle",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),whoop_cycle_id:(0,f.text)().notNull().unique(),start:h().notNull(),end:h().notNull(),timezone_offset:(0,f.text)(),day_strain:(0,f.real)(),average_heart_rate:(0,f.integer)(),max_heart_rate:(0,f.integer)(),kilojoule:(0,f.real)(),raw_data:(0,f.text)(),webhook_received_at:h().default((0,e.sql)`(datetime('now'))`).notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("whoop_cycle_user_id_idx").on(a.user_id),(0,f.index)("whoop_cycle_user_start_idx").on(a.user_id,a.start),(0,f.index)("whoop_cycle_whoop_id_idx").on(a.whoop_cycle_id),(0,f.index)("whoop_cycle_strain_idx").on(a.user_id,a.day_strain)]),B=i("whoop_sleep",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),whoop_sleep_id:(0,f.text)().notNull().unique(),start:h().notNull(),end:h().notNull(),timezone_offset:(0,f.text)(),sleep_performance_percentage:(0,f.integer)(),total_sleep_time_milli:(0,f.integer)(),sleep_efficiency_percentage:(0,f.real)(),slow_wave_sleep_time_milli:(0,f.integer)(),rem_sleep_time_milli:(0,f.integer)(),light_sleep_time_milli:(0,f.integer)(),wake_time_milli:(0,f.integer)(),arousal_time_milli:(0,f.integer)(),disturbance_count:(0,f.integer)(),sleep_latency_milli:(0,f.integer)(),raw_data:(0,f.text)(),webhook_received_at:h().default((0,e.sql)`(datetime('now'))`).notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("whoop_sleep_user_id_idx").on(a.user_id),(0,f.index)("whoop_sleep_user_start_idx").on(a.user_id,a.start),(0,f.index)("whoop_sleep_whoop_id_idx").on(a.whoop_sleep_id),(0,f.index)("whoop_sleep_performance_idx").on(a.user_id,a.sleep_performance_percentage)]),C=i("whoop_profile",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),whoop_user_id:(0,f.text)().notNull(),email:(0,f.text)(),first_name:(0,f.text)(),last_name:(0,f.text)(),raw_data:(0,f.text)(),webhook_received_at:h().default((0,e.sql)`(datetime('now'))`).notNull(),last_updated:h().default((0,e.sql)`(datetime('now'))`).notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("whoop_profile_user_id_idx").on(a.user_id),(0,f.index)("whoop_profile_whoop_user_id_idx").on(a.whoop_user_id)]),D=i("whoop_body_measurement",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),whoop_measurement_id:(0,f.text)().notNull().unique(),height_meter:(0,f.real)(),weight_kilogram:(0,f.real)(),max_heart_rate:(0,f.integer)(),measurement_date:h(),raw_data:(0,f.text)(),webhook_received_at:h().default((0,e.sql)`(datetime('now'))`).notNull(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull(),updatedAt:h()},a=>[(0,f.index)("whoop_body_measurement_user_id_idx").on(a.user_id),(0,f.index)("whoop_body_measurement_date_idx").on(a.user_id,a.measurement_date),(0,f.index)("whoop_body_measurement_whoop_id_idx").on(a.whoop_measurement_id)]),E=i("oauth_state",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),state:(0,f.text)().notNull().unique(),user_id:(0,f.text)().notNull(),provider:(0,f.text)().notNull(),redirect_uri:(0,f.text)().notNull(),client_ip:(0,f.text)(),user_agent_hash:(0,f.text)(),expiresAt:h().notNull().default((0,e.sql)`(datetime('now', '+10 minutes'))`),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull()},a=>[(0,f.index)("oauth_state_user_id_idx").on(a.user_id),(0,f.index)("oauth_state_provider_idx").on(a.provider),(0,f.index)("oauth_state_expires_at_idx").on(a.expiresAt),(0,f.index)("oauth_state_user_provider_idx").on(a.user_id,a.provider)]),F=i("ai_suggestion_history",{id:(0,f.integer)().primaryKey({autoIncrement:!0}),user_id:(0,f.text)().notNull(),sessionId:(0,f.integer)().notNull().references(()=>l.id,{onDelete:"cascade"}),exerciseName:(0,f.text)().notNull(),setId:(0,f.text)().notNull(),setIndex:(0,f.integer)().notNull(),suggested_weight_kg:(0,f.real)(),suggested_reps:(0,f.integer)(),suggested_rest_seconds:(0,f.integer)(),suggestion_rationale:(0,f.text)(),action:(0,f.text)().notNull(),accepted_weight_kg:(0,f.real)(),accepted_reps:(0,f.integer)(),progression_type:(0,f.text)(),readiness_score:(0,f.real)(),plateau_detected:(0,f.integer)({mode:"boolean"}).notNull().default(!1),interaction_time_ms:(0,f.integer)(),createdAt:h().default((0,e.sql)`(datetime('now'))`).notNull()},a=>[(0,f.index)("ai_suggestion_history_user_id_idx").on(a.user_id),(0,f.index)("ai_suggestion_history_session_idx").on(a.sessionId),(0,f.index)("ai_suggestion_history_exercise_idx").on(a.exerciseName),(0,f.index)("ai_suggestion_history_action_idx").on(a.action),(0,f.index)("ai_suggestion_history_created_at_idx").on(a.createdAt),(0,f.index)("ai_suggestion_history_user_created_idx").on(a.user_id,a.createdAt)]),G=(0,e.relations)(k,({many:a})=>({exercises:a(m),sessions:a(l)})),H=(0,e.relations)(m,({one:a,many:b})=>({template:a(k,{fields:[m.templateId],references:[k.id]}),sessionExercises:b(n),exerciseLink:a(u,{fields:[m.id],references:[u.templateExerciseId]})})),I=(0,e.relations)(l,({one:a,many:b})=>({template:a(k,{fields:[l.templateId],references:[k.id]}),exercises:b(n),healthAdvice:a(v,{fields:[l.id],references:[v.sessionId]}),wellnessData:a(y,{fields:[l.id],references:[y.sessionId]})})),J=(0,e.relations)(n,({one:a})=>({session:a(l,{fields:[n.sessionId],references:[l.id]}),templateExercise:a(m,{fields:[n.templateExerciseId],references:[m.id]})})),K=(0,e.relations)(q,({many:a})=>({whoopWorkouts:a(r)})),L=(0,e.relations)(r,({one:a})=>({integration:a(q,{fields:[r.user_id],references:[q.user_id]})})),M=(0,e.relations)(t,({many:a})=>({exerciseLinks:a(u)})),N=(0,e.relations)(u,({one:a})=>({templateExercise:a(m,{fields:[u.templateExerciseId],references:[m.id]}),masterExercise:a(t,{fields:[u.masterExerciseId],references:[t.id]})})),O=(0,e.relations)(v,({one:a})=>({session:a(l,{fields:[v.sessionId],references:[l.id]})})),P=(0,e.relations)(w,({one:a,many:b})=>({session:a(l,{fields:[w.sessionId],references:[l.id]}),parent:a(w,{fields:[w.parentDebriefId],references:[w.id],relationName:"session_debrief_parent"}),versions:b(w,{relationName:"session_debrief_parent"})})),Q=(0,e.relations)(y,({one:a})=>({session:a(l,{fields:[y.sessionId],references:[l.id]})})),R=(0,e.relations)(F,({one:a})=>({session:a(l,{fields:[F.sessionId],references:[l.id]})})),S=(0,e.relations)(z,({one:a})=>({cycle:a(A,{fields:[z.cycle_id],references:[A.whoop_cycle_id]})})),T=(0,e.relations)(A,({many:a})=>({recoveries:a(z)})),U=(0,e.relations)(B,({})=>({})),V=(0,e.relations)(C,({})=>({})),W=(0,e.relations)(D,({})=>({}));d()}catch(a){d(a)}})},11737:a=>{"use strict";a.exports=import("drizzle-orm")},18766:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{AppRenderSpan:function(){return i},AppRouteRouteHandlersSpan:function(){return l},BaseServerSpan:function(){return c},LoadComponentsSpan:function(){return d},LogSpanAllowList:function(){return p},MiddlewareSpan:function(){return n},NextNodeServerSpan:function(){return f},NextServerSpan:function(){return e},NextVanillaSpanAllowlist:function(){return o},NodeSpan:function(){return k},RenderSpan:function(){return h},ResolveMetadataSpan:function(){return m},RouterSpan:function(){return j},StartServerSpan:function(){return g}});var c=function(a){return a.handleRequest="BaseServer.handleRequest",a.run="BaseServer.run",a.pipe="BaseServer.pipe",a.getStaticHTML="BaseServer.getStaticHTML",a.render="BaseServer.render",a.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",a.renderToResponse="BaseServer.renderToResponse",a.renderToHTML="BaseServer.renderToHTML",a.renderError="BaseServer.renderError",a.renderErrorToResponse="BaseServer.renderErrorToResponse",a.renderErrorToHTML="BaseServer.renderErrorToHTML",a.render404="BaseServer.render404",a}(c||{}),d=function(a){return a.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",a.loadComponents="LoadComponents.loadComponents",a}(d||{}),e=function(a){return a.getRequestHandler="NextServer.getRequestHandler",a.getServer="NextServer.getServer",a.getServerRequestHandler="NextServer.getServerRequestHandler",a.createServer="createServer.createServer",a}(e||{}),f=function(a){return a.compression="NextNodeServer.compression",a.getBuildId="NextNodeServer.getBuildId",a.createComponentTree="NextNodeServer.createComponentTree",a.clientComponentLoading="NextNodeServer.clientComponentLoading",a.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",a.generateStaticRoutes="NextNodeServer.generateStaticRoutes",a.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",a.generatePublicRoutes="NextNodeServer.generatePublicRoutes",a.generateImageRoutes="NextNodeServer.generateImageRoutes.route",a.sendRenderResult="NextNodeServer.sendRenderResult",a.proxyRequest="NextNodeServer.proxyRequest",a.runApi="NextNodeServer.runApi",a.render="NextNodeServer.render",a.renderHTML="NextNodeServer.renderHTML",a.imageOptimizer="NextNodeServer.imageOptimizer",a.getPagePath="NextNodeServer.getPagePath",a.getRoutesManifest="NextNodeServer.getRoutesManifest",a.findPageComponents="NextNodeServer.findPageComponents",a.getFontManifest="NextNodeServer.getFontManifest",a.getServerComponentManifest="NextNodeServer.getServerComponentManifest",a.getRequestHandler="NextNodeServer.getRequestHandler",a.renderToHTML="NextNodeServer.renderToHTML",a.renderError="NextNodeServer.renderError",a.renderErrorToHTML="NextNodeServer.renderErrorToHTML",a.render404="NextNodeServer.render404",a.startResponse="NextNodeServer.startResponse",a.route="route",a.onProxyReq="onProxyReq",a.apiResolver="apiResolver",a.internalFetch="internalFetch",a}(f||{}),g=function(a){return a.startServer="startServer.startServer",a}(g||{}),h=function(a){return a.getServerSideProps="Render.getServerSideProps",a.getStaticProps="Render.getStaticProps",a.renderToString="Render.renderToString",a.renderDocument="Render.renderDocument",a.createBodyResult="Render.createBodyResult",a}(h||{}),i=function(a){return a.renderToString="AppRender.renderToString",a.renderToReadableStream="AppRender.renderToReadableStream",a.getBodyResult="AppRender.getBodyResult",a.fetch="AppRender.fetch",a}(i||{}),j=function(a){return a.executeRoute="Router.executeRoute",a}(j||{}),k=function(a){return a.runHandler="Node.runHandler",a}(k||{}),l=function(a){return a.runHandler="AppRouteRouteHandlers.runHandler",a}(l||{}),m=function(a){return a.generateMetadata="ResolveMetadata.generateMetadata",a.generateViewport="ResolveMetadata.generateViewport",a}(m||{}),n=function(a){return a.execute="Middleware.execute",a}(n||{});let o=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],p=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},18905:a=>{"use strict";a.exports=import("drizzle-orm/d1")},23176:a=>{(()=>{"use strict";var b={491:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ContextAPI=void 0;let d=c(223),e=c(172),f=c(930),g="context",h=new d.NoopContextManager;class i{constructor(){}static getInstance(){return this._instance||(this._instance=new i),this._instance}setGlobalContextManager(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}active(){return this._getContextManager().active()}with(a,b,c,...d){return this._getContextManager().with(a,b,c,...d)}bind(a,b){return this._getContextManager().bind(a,b)}_getContextManager(){return(0,e.getGlobal)(g)||h}disable(){this._getContextManager().disable(),(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.ContextAPI=i},930:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagAPI=void 0;let d=c(56),e=c(912),f=c(957),g=c(172);class h{constructor(){function a(a){return function(...b){let c=(0,g.getGlobal)("diag");if(c)return c[a](...b)}}let b=this;b.setLogger=(a,c={logLevel:f.DiagLogLevel.INFO})=>{var d,h,i;if(a===b){let a=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(d=a.stack)?d:a.message),!1}"number"==typeof c&&(c={logLevel:c});let j=(0,g.getGlobal)("diag"),k=(0,e.createLogLevelDiagLogger)(null!=(h=c.logLevel)?h:f.DiagLogLevel.INFO,a);if(j&&!c.suppressOverrideMessage){let a=null!=(i=Error().stack)?i:"<failed to generate stacktrace>";j.warn(`Current logger will be overwritten from ${a}`),k.warn(`Current logger will overwrite one already registered from ${a}`)}return(0,g.registerGlobal)("diag",k,b,!0)},b.disable=()=>{(0,g.unregisterGlobal)("diag",b)},b.createComponentLogger=a=>new d.DiagComponentLogger(a),b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}static instance(){return this._instance||(this._instance=new h),this._instance}}b.DiagAPI=h},653:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.MetricsAPI=void 0;let d=c(660),e=c(172),f=c(930),g="metrics";class h{constructor(){}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalMeterProvider(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}getMeterProvider(){return(0,e.getGlobal)(g)||d.NOOP_METER_PROVIDER}getMeter(a,b,c){return this.getMeterProvider().getMeter(a,b,c)}disable(){(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.MetricsAPI=h},181:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.PropagationAPI=void 0;let d=c(172),e=c(874),f=c(194),g=c(277),h=c(369),i=c(930),j="propagation",k=new e.NoopTextMapPropagator;class l{constructor(){this.createBaggage=h.createBaggage,this.getBaggage=g.getBaggage,this.getActiveBaggage=g.getActiveBaggage,this.setBaggage=g.setBaggage,this.deleteBaggage=g.deleteBaggage}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalPropagator(a){return(0,d.registerGlobal)(j,a,i.DiagAPI.instance())}inject(a,b,c=f.defaultTextMapSetter){return this._getGlobalPropagator().inject(a,b,c)}extract(a,b,c=f.defaultTextMapGetter){return this._getGlobalPropagator().extract(a,b,c)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,d.unregisterGlobal)(j,i.DiagAPI.instance())}_getGlobalPropagator(){return(0,d.getGlobal)(j)||k}}b.PropagationAPI=l},997:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceAPI=void 0;let d=c(172),e=c(846),f=c(139),g=c(607),h=c(930),i="trace";class j{constructor(){this._proxyTracerProvider=new e.ProxyTracerProvider,this.wrapSpanContext=f.wrapSpanContext,this.isSpanContextValid=f.isSpanContextValid,this.deleteSpan=g.deleteSpan,this.getSpan=g.getSpan,this.getActiveSpan=g.getActiveSpan,this.getSpanContext=g.getSpanContext,this.setSpan=g.setSpan,this.setSpanContext=g.setSpanContext}static getInstance(){return this._instance||(this._instance=new j),this._instance}setGlobalTracerProvider(a){let b=(0,d.registerGlobal)(i,this._proxyTracerProvider,h.DiagAPI.instance());return b&&this._proxyTracerProvider.setDelegate(a),b}getTracerProvider(){return(0,d.getGlobal)(i)||this._proxyTracerProvider}getTracer(a,b){return this.getTracerProvider().getTracer(a,b)}disable(){(0,d.unregisterGlobal)(i,h.DiagAPI.instance()),this._proxyTracerProvider=new e.ProxyTracerProvider}}b.TraceAPI=j},277:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.deleteBaggage=b.setBaggage=b.getActiveBaggage=b.getBaggage=void 0;let d=c(491),e=(0,c(780).createContextKey)("OpenTelemetry Baggage Key");function f(a){return a.getValue(e)||void 0}b.getBaggage=f,b.getActiveBaggage=function(){return f(d.ContextAPI.getInstance().active())},b.setBaggage=function(a,b){return a.setValue(e,b)},b.deleteBaggage=function(a){return a.deleteValue(e)}},993:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.BaggageImpl=void 0;class c{constructor(a){this._entries=a?new Map(a):new Map}getEntry(a){let b=this._entries.get(a);if(b)return Object.assign({},b)}getAllEntries(){return Array.from(this._entries.entries()).map(([a,b])=>[a,b])}setEntry(a,b){let d=new c(this._entries);return d._entries.set(a,b),d}removeEntry(a){let b=new c(this._entries);return b._entries.delete(a),b}removeEntries(...a){let b=new c(this._entries);for(let c of a)b._entries.delete(c);return b}clear(){return new c}}b.BaggageImpl=c},830:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataSymbol=void 0,b.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataFromString=b.createBaggage=void 0;let d=c(930),e=c(993),f=c(830),g=d.DiagAPI.instance();b.createBaggage=function(a={}){return new e.BaggageImpl(new Map(Object.entries(a)))},b.baggageEntryMetadataFromString=function(a){return"string"!=typeof a&&(g.error(`Cannot create baggage metadata from unknown type: ${typeof a}`),a=""),{__TYPE__:f.baggageEntryMetadataSymbol,toString:()=>a}}},67:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.context=void 0,b.context=c(491).ContextAPI.getInstance()},223:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopContextManager=void 0;let d=c(780);class e{active(){return d.ROOT_CONTEXT}with(a,b,c,...d){return b.call(c,...d)}bind(a,b){return b}enable(){return this}disable(){return this}}b.NoopContextManager=e},780:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ROOT_CONTEXT=b.createContextKey=void 0,b.createContextKey=function(a){return Symbol.for(a)};class c{constructor(a){let b=this;b._currentContext=a?new Map(a):new Map,b.getValue=a=>b._currentContext.get(a),b.setValue=(a,d)=>{let e=new c(b._currentContext);return e._currentContext.set(a,d),e},b.deleteValue=a=>{let d=new c(b._currentContext);return d._currentContext.delete(a),d}}}b.ROOT_CONTEXT=new c},506:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.diag=void 0,b.diag=c(930).DiagAPI.instance()},56:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagComponentLogger=void 0;let d=c(172);class e{constructor(a){this._namespace=a.namespace||"DiagComponentLogger"}debug(...a){return f("debug",this._namespace,a)}error(...a){return f("error",this._namespace,a)}info(...a){return f("info",this._namespace,a)}warn(...a){return f("warn",this._namespace,a)}verbose(...a){return f("verbose",this._namespace,a)}}function f(a,b,c){let e=(0,d.getGlobal)("diag");if(e)return c.unshift(b),e[a](...c)}b.DiagComponentLogger=e},972:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagConsoleLogger=void 0;let c=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class d{constructor(){for(let a=0;a<c.length;a++)this[c[a].n]=function(a){return function(...b){if(console){let c=console[a];if("function"!=typeof c&&(c=console.log),"function"==typeof c)return c.apply(console,b)}}}(c[a].c)}}b.DiagConsoleLogger=d},912:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createLogLevelDiagLogger=void 0;let d=c(957);b.createLogLevelDiagLogger=function(a,b){function c(c,d){let e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<d.DiagLogLevel.NONE?a=d.DiagLogLevel.NONE:a>d.DiagLogLevel.ALL&&(a=d.DiagLogLevel.ALL),b=b||{},{error:c("error",d.DiagLogLevel.ERROR),warn:c("warn",d.DiagLogLevel.WARN),info:c("info",d.DiagLogLevel.INFO),debug:c("debug",d.DiagLogLevel.DEBUG),verbose:c("verbose",d.DiagLogLevel.VERBOSE)}}},957:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagLogLevel=void 0,function(a){a[a.NONE=0]="NONE",a[a.ERROR=30]="ERROR",a[a.WARN=50]="WARN",a[a.INFO=60]="INFO",a[a.DEBUG=70]="DEBUG",a[a.VERBOSE=80]="VERBOSE",a[a.ALL=9999]="ALL"}(b.DiagLogLevel||(b.DiagLogLevel={}))},172:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.unregisterGlobal=b.getGlobal=b.registerGlobal=void 0;let d=c(200),e=c(521),f=c(130),g=e.VERSION.split(".")[0],h=Symbol.for(`opentelemetry.js.api.${g}`),i=d._globalThis;b.registerGlobal=function(a,b,c,d=!1){var f;let g=i[h]=null!=(f=i[h])?f:{version:e.VERSION};if(!d&&g[a]){let b=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${a}`);return c.error(b.stack||b.message),!1}if(g.version!==e.VERSION){let b=Error(`@opentelemetry/api: Registration of version v${g.version} for ${a} does not match previously registered API v${e.VERSION}`);return c.error(b.stack||b.message),!1}return g[a]=b,c.debug(`@opentelemetry/api: Registered a global for ${a} v${e.VERSION}.`),!0},b.getGlobal=function(a){var b,c;let d=null==(b=i[h])?void 0:b.version;if(d&&(0,f.isCompatible)(d))return null==(c=i[h])?void 0:c[a]},b.unregisterGlobal=function(a,b){b.debug(`@opentelemetry/api: Unregistering a global for ${a} v${e.VERSION}.`);let c=i[h];c&&delete c[a]}},130:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.isCompatible=b._makeCompatibilityCheck=void 0;let d=c(521),e=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function f(a){let b=new Set([a]),c=new Set,d=a.match(e);if(!d)return()=>!1;let f={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=f.prerelease)return function(b){return b===a};function g(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;let d=a.match(e);if(!d)return g(a);let h={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=h.prerelease||f.major!==h.major)return g(a);if(0===f.major)return f.minor===h.minor&&f.patch<=h.patch?(b.add(a),!0):g(a);return f.minor<=h.minor?(b.add(a),!0):g(a)}}b._makeCompatibilityCheck=f,b.isCompatible=f(d.VERSION)},886:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.metrics=void 0,b.metrics=c(653).MetricsAPI.getInstance()},901:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ValueType=void 0,function(a){a[a.INT=0]="INT",a[a.DOUBLE=1]="DOUBLE"}(b.ValueType||(b.ValueType={}))},102:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createNoopMeter=b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=b.NOOP_OBSERVABLE_GAUGE_METRIC=b.NOOP_OBSERVABLE_COUNTER_METRIC=b.NOOP_UP_DOWN_COUNTER_METRIC=b.NOOP_HISTOGRAM_METRIC=b.NOOP_COUNTER_METRIC=b.NOOP_METER=b.NoopObservableUpDownCounterMetric=b.NoopObservableGaugeMetric=b.NoopObservableCounterMetric=b.NoopObservableMetric=b.NoopHistogramMetric=b.NoopUpDownCounterMetric=b.NoopCounterMetric=b.NoopMetric=b.NoopMeter=void 0;class c{constructor(){}createHistogram(a,c){return b.NOOP_HISTOGRAM_METRIC}createCounter(a,c){return b.NOOP_COUNTER_METRIC}createUpDownCounter(a,c){return b.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(a,c){return b.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(a,c){return b.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(a,c){return b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(a,b){}removeBatchObservableCallback(a){}}b.NoopMeter=c;class d{}b.NoopMetric=d;class e extends d{add(a,b){}}b.NoopCounterMetric=e;class f extends d{add(a,b){}}b.NoopUpDownCounterMetric=f;class g extends d{record(a,b){}}b.NoopHistogramMetric=g;class h{addCallback(a){}removeCallback(a){}}b.NoopObservableMetric=h;class i extends h{}b.NoopObservableCounterMetric=i;class j extends h{}b.NoopObservableGaugeMetric=j;class k extends h{}b.NoopObservableUpDownCounterMetric=k,b.NOOP_METER=new c,b.NOOP_COUNTER_METRIC=new e,b.NOOP_HISTOGRAM_METRIC=new g,b.NOOP_UP_DOWN_COUNTER_METRIC=new f,b.NOOP_OBSERVABLE_COUNTER_METRIC=new i,b.NOOP_OBSERVABLE_GAUGE_METRIC=new j,b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new k,b.createNoopMeter=function(){return b.NOOP_METER}},660:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NOOP_METER_PROVIDER=b.NoopMeterProvider=void 0;let d=c(102);class e{getMeter(a,b,c){return d.NOOP_METER}}b.NoopMeterProvider=e,b.NOOP_METER_PROVIDER=new e},200:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(46),b)},651:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b._globalThis=void 0,b._globalThis="object"==typeof globalThis?globalThis:global},46:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(651),b)},939:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.propagation=void 0,b.propagation=c(181).PropagationAPI.getInstance()},874:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTextMapPropagator=void 0;class c{inject(a,b){}extract(a,b){return a}fields(){return[]}}b.NoopTextMapPropagator=c},194:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.defaultTextMapSetter=b.defaultTextMapGetter=void 0,b.defaultTextMapGetter={get(a,b){if(null!=a)return a[b]},keys:a=>null==a?[]:Object.keys(a)},b.defaultTextMapSetter={set(a,b,c){null!=a&&(a[b]=c)}}},845:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.trace=void 0,b.trace=c(997).TraceAPI.getInstance()},403:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NonRecordingSpan=void 0;let d=c(476);class e{constructor(a=d.INVALID_SPAN_CONTEXT){this._spanContext=a}spanContext(){return this._spanContext}setAttribute(a,b){return this}setAttributes(a){return this}addEvent(a,b){return this}setStatus(a){return this}updateName(a){return this}end(a){}isRecording(){return!1}recordException(a,b){}}b.NonRecordingSpan=e},614:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracer=void 0;let d=c(491),e=c(607),f=c(403),g=c(139),h=d.ContextAPI.getInstance();class i{startSpan(a,b,c=h.active()){var d;if(null==b?void 0:b.root)return new f.NonRecordingSpan;let i=c&&(0,e.getSpanContext)(c);return"object"==typeof(d=i)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&(0,g.isSpanContextValid)(i)?new f.NonRecordingSpan(i):new f.NonRecordingSpan}startActiveSpan(a,b,c,d){let f,g,i;if(arguments.length<2)return;2==arguments.length?i=b:3==arguments.length?(f=b,i=c):(f=b,g=c,i=d);let j=null!=g?g:h.active(),k=this.startSpan(a,f,j),l=(0,e.setSpan)(j,k);return h.with(l,i,void 0,k)}}b.NoopTracer=i},124:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracerProvider=void 0;let d=c(614);class e{getTracer(a,b,c){return new d.NoopTracer}}b.NoopTracerProvider=e},125:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracer=void 0;let d=new(c(614)).NoopTracer;class e{constructor(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}startSpan(a,b,c){return this._getTracer().startSpan(a,b,c)}startActiveSpan(a,b,c,d){let e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)}_getTracer(){if(this._delegate)return this._delegate;let a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):d}}b.ProxyTracer=e},846:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracerProvider=void 0;let d=c(125),e=new(c(124)).NoopTracerProvider;class f{getTracer(a,b,c){var e;return null!=(e=this.getDelegateTracer(a,b,c))?e:new d.ProxyTracer(this,a,b,c)}getDelegate(){var a;return null!=(a=this._delegate)?a:e}setDelegate(a){this._delegate=a}getDelegateTracer(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)}}b.ProxyTracerProvider=f},996:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SamplingDecision=void 0,function(a){a[a.NOT_RECORD=0]="NOT_RECORD",a[a.RECORD=1]="RECORD",a[a.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(b.SamplingDecision||(b.SamplingDecision={}))},607:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getSpanContext=b.setSpanContext=b.deleteSpan=b.setSpan=b.getActiveSpan=b.getSpan=void 0;let d=c(780),e=c(403),f=c(491),g=(0,d.createContextKey)("OpenTelemetry Context Key SPAN");function h(a){return a.getValue(g)||void 0}function i(a,b){return a.setValue(g,b)}b.getSpan=h,b.getActiveSpan=function(){return h(f.ContextAPI.getInstance().active())},b.setSpan=i,b.deleteSpan=function(a){return a.deleteValue(g)},b.setSpanContext=function(a,b){return i(a,new e.NonRecordingSpan(b))},b.getSpanContext=function(a){var b;return null==(b=h(a))?void 0:b.spanContext()}},325:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceStateImpl=void 0;let d=c(564);class e{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,b){let c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c}unset(a){let b=this._clone();return b._internalState.delete(a),b}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,b)=>(a.push(b+"="+this.get(b)),a),[]).join(",")}_parse(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce((a,b)=>{let c=b.trim(),e=c.indexOf("=");if(-1!==e){let f=c.slice(0,e),g=c.slice(e+1,b.length);(0,d.validateKey)(f)&&(0,d.validateValue)(g)&&a.set(f,g)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new e;return a._internalState=new Map(this._internalState),a}}b.TraceStateImpl=e},564:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.validateValue=b.validateKey=void 0;let c="[_0-9a-z-*/]",d=`[a-z]${c}{0,255}`,e=`[a-z0-9]${c}{0,240}@[a-z]${c}{0,13}`,f=RegExp(`^(?:${d}|${e})$`),g=/^[ -~]{0,255}[!-~]$/,h=/,|=/;b.validateKey=function(a){return f.test(a)},b.validateValue=function(a){return g.test(a)&&!h.test(a)}},98:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createTraceState=void 0;let d=c(325);b.createTraceState=function(a){return new d.TraceStateImpl(a)}},476:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.INVALID_SPAN_CONTEXT=b.INVALID_TRACEID=b.INVALID_SPANID=void 0;let d=c(475);b.INVALID_SPANID="0000000000000000",b.INVALID_TRACEID="00000000000000000000000000000000",b.INVALID_SPAN_CONTEXT={traceId:b.INVALID_TRACEID,spanId:b.INVALID_SPANID,traceFlags:d.TraceFlags.NONE}},357:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanKind=void 0,function(a){a[a.INTERNAL=0]="INTERNAL",a[a.SERVER=1]="SERVER",a[a.CLIENT=2]="CLIENT",a[a.PRODUCER=3]="PRODUCER",a[a.CONSUMER=4]="CONSUMER"}(b.SpanKind||(b.SpanKind={}))},139:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.wrapSpanContext=b.isSpanContextValid=b.isValidSpanId=b.isValidTraceId=void 0;let d=c(476),e=c(403),f=/^([0-9a-f]{32})$/i,g=/^[0-9a-f]{16}$/i;function h(a){return f.test(a)&&a!==d.INVALID_TRACEID}function i(a){return g.test(a)&&a!==d.INVALID_SPANID}b.isValidTraceId=h,b.isValidSpanId=i,b.isSpanContextValid=function(a){return h(a.traceId)&&i(a.spanId)},b.wrapSpanContext=function(a){return new e.NonRecordingSpan(a)}},847:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.SpanStatusCode=void 0,function(a){a[a.UNSET=0]="UNSET",a[a.OK=1]="OK",a[a.ERROR=2]="ERROR"}(b.SpanStatusCode||(b.SpanStatusCode={}))},475:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceFlags=void 0,function(a){a[a.NONE=0]="NONE",a[a.SAMPLED=1]="SAMPLED"}(b.TraceFlags||(b.TraceFlags={}))},521:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VERSION=void 0,b.VERSION="1.6.0"}},c={};function d(a){var e=c[a];if(void 0!==e)return e.exports;var f=c[a]={exports:{}},g=!0;try{b[a].call(f.exports,f,f.exports,d),g=!1}finally{g&&delete c[a]}return f.exports}d.ab=__dirname+"/";var e={};(()=>{Object.defineProperty(e,"__esModule",{value:!0}),e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var a=d(369);Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return a.baggageEntryMetadataFromString}});var b=d(780);Object.defineProperty(e,"createContextKey",{enumerable:!0,get:function(){return b.createContextKey}}),Object.defineProperty(e,"ROOT_CONTEXT",{enumerable:!0,get:function(){return b.ROOT_CONTEXT}});var c=d(972);Object.defineProperty(e,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}});var f=d(957);Object.defineProperty(e,"DiagLogLevel",{enumerable:!0,get:function(){return f.DiagLogLevel}});var g=d(102);Object.defineProperty(e,"createNoopMeter",{enumerable:!0,get:function(){return g.createNoopMeter}});var h=d(901);Object.defineProperty(e,"ValueType",{enumerable:!0,get:function(){return h.ValueType}});var i=d(194);Object.defineProperty(e,"defaultTextMapGetter",{enumerable:!0,get:function(){return i.defaultTextMapGetter}}),Object.defineProperty(e,"defaultTextMapSetter",{enumerable:!0,get:function(){return i.defaultTextMapSetter}});var j=d(125);Object.defineProperty(e,"ProxyTracer",{enumerable:!0,get:function(){return j.ProxyTracer}});var k=d(846);Object.defineProperty(e,"ProxyTracerProvider",{enumerable:!0,get:function(){return k.ProxyTracerProvider}});var l=d(996);Object.defineProperty(e,"SamplingDecision",{enumerable:!0,get:function(){return l.SamplingDecision}});var m=d(357);Object.defineProperty(e,"SpanKind",{enumerable:!0,get:function(){return m.SpanKind}});var n=d(847);Object.defineProperty(e,"SpanStatusCode",{enumerable:!0,get:function(){return n.SpanStatusCode}});var o=d(475);Object.defineProperty(e,"TraceFlags",{enumerable:!0,get:function(){return o.TraceFlags}});var p=d(98);Object.defineProperty(e,"createTraceState",{enumerable:!0,get:function(){return p.createTraceState}});var q=d(139);Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return q.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return q.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return q.isValidSpanId}});var r=d(476);Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return r.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return r.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return r.INVALID_SPAN_CONTEXT}});let s=d(67);Object.defineProperty(e,"context",{enumerable:!0,get:function(){return s.context}});let t=d(506);Object.defineProperty(e,"diag",{enumerable:!0,get:function(){return t.diag}});let u=d(886);Object.defineProperty(e,"metrics",{enumerable:!0,get:function(){return u.metrics}});let v=d(939);Object.defineProperty(e,"propagation",{enumerable:!0,get:function(){return v.propagation}});let w=d(845);Object.defineProperty(e,"trace",{enumerable:!0,get:function(){return w.trace}}),e.default={context:s.context,diag:t.diag,metrics:u.metrics,propagation:v.propagation,trace:w.trace}})(),a.exports=e})()},29046:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ApiError:function(){return r},COOKIE_NAME_PRERENDER_BYPASS:function(){return l},COOKIE_NAME_PRERENDER_DATA:function(){return m},RESPONSE_LIMIT_DEFAULT:function(){return n},SYMBOL_CLEARED_COOKIES:function(){return p},SYMBOL_PREVIEW_DATA:function(){return o},checkIsOnDemandRevalidate:function(){return k},clearPreviewData:function(){return q},redirect:function(){return j},sendError:function(){return s},sendStatusCode:function(){return i},setLazyProp:function(){return t},wrapApiHandler:function(){return h}});let d=c(53459),e=c(1922),f=c(58112),g=c(18766);function h(a,b){return(...c)=>((0,f.getTracer)().setRootSpanAttribute("next.route",a),(0,f.getTracer)().trace(g.NodeSpan.runHandler,{spanName:`executing api route (pages) ${a}`},()=>b(...c)))}function i(a,b){return a.statusCode=b,a}function j(a,b,c){if("string"==typeof b&&(c=b,b=307),"number"!=typeof b||"string"!=typeof c)throw Object.defineProperty(Error("Invalid redirect arguments. Please use a single argument URL, e.g. res.redirect('/destination') or use a status code and URL, e.g. res.redirect(307, '/destination')."),"__NEXT_ERROR_CODE",{value:"E389",enumerable:!1,configurable:!0});return a.writeHead(b,{Location:c}),a.write(c),a.end(),a}function k(a,b){let c=d.HeadersAdapter.from(a.headers);return{isOnDemandRevalidate:c.get(e.PRERENDER_REVALIDATE_HEADER)===b.previewModeId,revalidateOnlyGenerated:c.has(e.PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER)}}let l="__prerender_bypass",m="__next_preview_data",n=4194304,o=Symbol(m),p=Symbol(l);function q(a,b={}){if(p in a)return a;let{serialize:d}=c(71254),e=a.getHeader("Set-Cookie");return a.setHeader("Set-Cookie",[..."string"==typeof e?[e]:Array.isArray(e)?e:[],d(l,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==b.path?{path:b.path}:void 0}),d(m,"",{expires:new Date(0),httpOnly:!0,sameSite:"none",secure:!0,path:"/",...void 0!==b.path?{path:b.path}:void 0})]),Object.defineProperty(a,p,{value:!0,enumerable:!1}),a}class r extends Error{constructor(a,b){super(b),this.statusCode=a}}function s(a,b,c){a.statusCode=b,a.statusMessage=c,a.end(c)}function t({req:a},b,c){let d={configurable:!0,enumerable:!0},e={...d,writable:!0};Object.defineProperty(a,b,{...d,get:()=>{let d=c();return Object.defineProperty(a,b,{...e,value:d}),d},set:c=>{Object.defineProperty(a,b,{...e,value:c})}})}},33480:(a,b,c)=>{"use strict";a.exports=c(75600)},42971:a=>{"use strict";a.exports=import("zod")},45139:(a,b,c)=>{"use strict";c.a(a,async(a,b)=>{try{var d=c(11737),e=c(98216),f=c(10437);c(63817);var g=a([d,e,f]);[d,e,f]=g.then?(await g)():g,b()}catch(a){b(a)}})},51518:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ReflectAdapter",{enumerable:!0,get:function(){return c}});class c{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},53459:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{HeadersAdapter:function(){return f},ReadonlyHeadersError:function(){return e}});let d=c(51518);class e extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new e}}class f extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,e){if("symbol"==typeof c)return d.ReflectAdapter.get(b,c,e);let f=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===f);if(void 0!==g)return d.ReflectAdapter.get(b,g,e)},set(b,c,e,f){if("symbol"==typeof c)return d.ReflectAdapter.set(b,c,e,f);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return d.ReflectAdapter.set(b,h??c,e,f)},has(b,c){if("symbol"==typeof c)return d.ReflectAdapter.has(b,c);let e=c.toLowerCase(),f=Object.keys(a).find(a=>a.toLowerCase()===e);return void 0!==f&&d.ReflectAdapter.has(b,f)},deleteProperty(b,c){if("symbol"==typeof c)return d.ReflectAdapter.deleteProperty(b,c);let e=c.toLowerCase(),f=Object.keys(a).find(a=>a.toLowerCase()===e);return void 0===f||d.ReflectAdapter.deleteProperty(b,f)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return e.callable;default:return d.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new f(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},56472:a=>{"use strict";a.exports=require("@opentelemetry/api")},57238:a=>{"use strict";a.exports=import("drizzle-orm/sqlite-core")},58112:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{BubbledError:function(){return m},SpanKind:function(){return k},SpanStatusCode:function(){return j},getTracer:function(){return u},isBubbledError:function(){return n}});let e=c(18766),f=c(89508);try{d=c(56472)}catch(a){d=c(23176)}let{context:g,propagation:h,trace:i,SpanStatusCode:j,SpanKind:k,ROOT_CONTEXT:l}=d;class m extends Error{constructor(a,b){super(),this.bubble=a,this.result=b}}function n(a){return"object"==typeof a&&null!==a&&a instanceof m}let o=(a,b)=>{n(b)&&b.bubble?a.setAttribute("next.bubble",!0):(b&&(a.recordException(b),a.setAttribute("error.type",b.name)),a.setStatus({code:j.ERROR,message:null==b?void 0:b.message})),a.end()},p=new Map,q=d.createContextKey("next.rootSpanId"),r=0,s={set(a,b,c){a.push({key:b,value:c})}};class t{getTracerInstance(){return i.getTracer("next.js","0.0.1")}getContext(){return g}getTracePropagationData(){let a=g.active(),b=[];return h.inject(a,b,s),b}getActiveScopeSpan(){return i.getSpan(null==g?void 0:g.active())}withPropagatedContext(a,b,c){let d=g.active();if(i.getSpanContext(d))return b();let e=h.extract(d,a,c);return g.with(e,b)}trace(...a){var b;let[c,d,h]=a,{fn:j,options:k}="function"==typeof d?{fn:d,options:{}}:{fn:h,options:{...d}},m=k.spanName??c;if(!e.NextVanillaSpanAllowlist.includes(c)&&"1"!==process.env.NEXT_OTEL_VERBOSE||k.hideSpan)return j();let n=this.getSpanContext((null==k?void 0:k.parentSpan)??this.getActiveScopeSpan()),s=!1;n?(null==(b=i.getSpanContext(n))?void 0:b.isRemote)&&(s=!0):(n=(null==g?void 0:g.active())??l,s=!0);let t=r++;return k.attributes={"next.span_name":m,"next.span_type":c,...k.attributes},g.with(n.setValue(q,t),()=>this.getTracerInstance().startActiveSpan(m,k,a=>{let b="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,d=()=>{p.delete(t),b&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&e.LogSpanAllowList.includes(c||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(c.split(".").pop()||"").replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}`,{start:b,end:performance.now()})};s&&p.set(t,new Map(Object.entries(k.attributes??{})));try{if(j.length>1)return j(a,b=>o(a,b));let b=j(a);if((0,f.isThenable)(b))return b.then(b=>(a.end(),b)).catch(b=>{throw o(a,b),b}).finally(d);return a.end(),d(),b}catch(b){throw o(a,b),d(),b}}))}wrap(...a){let b=this,[c,d,f]=3===a.length?a:[a[0],{},a[1]];return e.NextVanillaSpanAllowlist.includes(c)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let a=d;"function"==typeof a&&"function"==typeof f&&(a=a.apply(this,arguments));let e=arguments.length-1,h=arguments[e];if("function"!=typeof h)return b.trace(c,a,()=>f.apply(this,arguments));{let d=b.getContext().bind(g.active(),h);return b.trace(c,a,(a,b)=>(arguments[e]=function(a){return null==b||b(a),d.apply(this,arguments)},f.apply(this,arguments)))}}:f}startSpan(...a){let[b,c]=a,d=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(b,c,d)}getSpanContext(a){return a?i.setSpan(g.active(),a):void 0}getRootSpanAttributes(){let a=g.active().getValue(q);return p.get(a)}setRootSpanAttribute(a,b){let c=g.active().getValue(q),d=p.get(c);d&&d.set(a,b)}}let u=(()=>{let a=new t;return()=>a})()},63817:(a,b,c)=>{"use strict";c.d(b,{vF:()=>e});class d{shouldLog(a){return!this.isTest&&(!!this.isDevelopment||"warn"===a||"error"===a)}sanitizeContext(a){let b={...a};return delete b.accessToken,delete b.refreshToken,delete b.password,delete b.secret,this.isDevelopment||Object.keys(b).forEach(a=>{let c=b[a];"string"==typeof c&&c.length>100&&(b[a]=c.substring(0,97)+"...")}),b}debug(a,b){this.shouldLog("debug")&&console.log(`[DEBUG] ${a}`,b?this.sanitizeContext(b):{})}info(a,b){this.shouldLog("info")&&console.log(`[INFO] ${a}`,b?this.sanitizeContext(b):{})}warn(a,b){this.shouldLog("warn")&&console.warn(`[WARN] ${a}`,b?this.sanitizeContext(b):{})}error(a,b,c){if(!this.shouldLog("error"))return;let d=c?this.sanitizeContext(c):{};b instanceof Error?console.error(`[ERROR] ${a}`,{error:b.message,stack:this.isDevelopment?b.stack:void 0,...d}):console.error(`[ERROR] ${a}`,{error:b,...d})}webhook(a,b,c){if(this.isDevelopment){let d={...c,payload:b};this.debug(`Webhook: ${a}`,d)}else this.info(`Webhook: ${a}`,c)}timing(a,b,c){this.isDevelopment&&this.debug(`${a} took ${b}ms`,c)}security(a,b){(console.warn??console.log)(`[SECURITY] ${a}`,b?this.sanitizeContext(b):{})}constructor(){this.isDevelopment=!1,this.isTest=!1}}let e=new d},64038:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{_:()=>h});var e=c(81042),f=c(42971),g=a([e,f]);[e,f]=g.then?(await g)():g;let h=(0,e.createEnv)({server:{CLOUDFLARE_ACCOUNT_ID:f.z.string().optional(),CLOUDFLARE_API_TOKEN:f.z.string().optional(),DB:f.z.any().optional(),WORKOS_API_KEY:f.z.string().optional(),WORKOS_CLIENT_ID:f.z.string().optional(),WORKOS_REDIRECT_URI:f.z.string().url().optional(),WORKER_SESSION_SECRET:f.z.string().min(32).optional(),DATABASE_URL:f.z.string().url().optional(),NODE_ENV:f.z.enum(["development","test","production"]).default("development"),VERCEL_AI_GATEWAY_API_KEY:f.z.string().optional(),AI_GATEWAY_API_KEY:f.z.string().optional(),AI_GATEWAY_MODEL:f.z.string().default("xai/grok-3-mini"),AI_GATEWAY_PROMPT:f.z.string().default("Tell me a short, funny programming or tech joke. Keep it clean and under 100 words."),AI_GATEWAY_JOKE_MEMORY_NUMBER:f.z.coerce.number().default(3),AI_GATEWAY_MODEL_HEALTH:f.z.string().default("xai/grok-3-mini"),AI_DEBRIEF_MODEL:f.z.string().default("xai/grok-3-mini"),AI_DEBRIEF_TEMPERATURE:f.z.coerce.number().min(0).max(2).default(.7),WHOOP_CLIENT_ID:f.z.string().optional(),WHOOP_CLIENT_SECRET:f.z.string().optional(),WHOOP_REDIRECT_URI:f.z.string().url().optional(),WHOOP_SYNC_RATE_LIMIT_PER_HOUR:f.z.coerce.number().default(10),WHOOP_WEBHOOK_SECRET:f.z.string().optional(),RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR:f.z.coerce.number().default(100),RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR:f.z.coerce.number().default(200),RATE_LIMIT_API_CALLS_PER_MINUTE:f.z.coerce.number().default(60),RATE_LIMIT_ENABLED:f.z.coerce.boolean().default(!0),ENCRYPTION_MASTER_KEY:f.z.string().min(32).optional()},client:{NEXT_PUBLIC_SITE_URL:f.z.string().url().default("http://localhost:3000"),NEXT_PUBLIC_POSTHOG_KEY:f.z.string().default("phc_test_dummy"),NEXT_PUBLIC_POSTHOG_HOST:f.z.string().url().default("https://us.i.posthog.com")},runtimeEnv:{CLOUDFLARE_ACCOUNT_ID:process.env.CLOUDFLARE_ACCOUNT_ID,CLOUDFLARE_API_TOKEN:process.env.CLOUDFLARE_API_TOKEN,DB:process.env.DB,WORKOS_API_KEY:process.env.WORKOS_API_KEY,WORKOS_CLIENT_ID:process.env.WORKOS_CLIENT_ID,WORKOS_REDIRECT_URI:process.env.WORKOS_REDIRECT_URI,WORKER_SESSION_SECRET:process.env.WORKER_SESSION_SECRET,NEXT_PUBLIC_SITE_URL:"http://localhost:8787",NEXT_PUBLIC_POSTHOG_KEY:"phc_22bpojwvy9Gh9xx6cfDD0utukztzX6mbpkmQAN4tzQ2",NEXT_PUBLIC_POSTHOG_HOST:"https://us.i.posthog.com",DATABASE_URL:process.env.DATABASE_URL,NODE_ENV:"production",VERCEL_AI_GATEWAY_API_KEY:process.env.VERCEL_AI_GATEWAY_API_KEY,AI_GATEWAY_API_KEY:process.env.AI_GATEWAY_API_KEY,AI_GATEWAY_MODEL:process.env.AI_GATEWAY_MODEL,AI_GATEWAY_PROMPT:process.env.AI_GATEWAY_PROMPT,AI_GATEWAY_JOKE_MEMORY_NUMBER:process.env.AI_GATEWAY_JOKE_MEMORY_NUMBER,AI_GATEWAY_MODEL_HEALTH:process.env.AI_GATEWAY_MODEL_HEALTH,AI_DEBRIEF_MODEL:process.env.AI_DEBRIEF_MODEL,AI_DEBRIEF_TEMPERATURE:process.env.AI_DEBRIEF_TEMPERATURE,WHOOP_CLIENT_ID:process.env.WHOOP_CLIENT_ID,WHOOP_CLIENT_SECRET:process.env.WHOOP_CLIENT_SECRET,WHOOP_REDIRECT_URI:process.env.WHOOP_REDIRECT_URI,WHOOP_SYNC_RATE_LIMIT_PER_HOUR:process.env.WHOOP_SYNC_RATE_LIMIT_PER_HOUR,WHOOP_WEBHOOK_SECRET:process.env.WHOOP_WEBHOOK_SECRET,RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR:process.env.RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR,RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR:process.env.RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR,RATE_LIMIT_API_CALLS_PER_MINUTE:process.env.RATE_LIMIT_API_CALLS_PER_MINUTE,RATE_LIMIT_ENABLED:process.env.RATE_LIMIT_ENABLED,ENCRYPTION_MASTER_KEY:process.env.ENCRYPTION_MASTER_KEY},skipValidation:"preview"===process.env.VERCEL_ENV,emptyStringAsUndefined:!0});d()}catch(a){d(a)}})},71254:a=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var b={};(()=>{b.parse=function(b,c){if("string"!=typeof b)throw TypeError("argument str must be a string");for(var e={},f=b.split(d),g=(c||{}).decode||a,h=0;h<f.length;h++){var i=f[h],j=i.indexOf("=");if(!(j<0)){var k=i.substr(0,j).trim(),l=i.substr(++j,i.length).trim();'"'==l[0]&&(l=l.slice(1,-1)),void 0==e[k]&&(e[k]=function(a,b){try{return b(a)}catch(b){return a}}(l,g))}}return e},b.serialize=function(a,b,d){var f=d||{},g=f.encode||c;if("function"!=typeof g)throw TypeError("option encode is invalid");if(!e.test(a))throw TypeError("argument name is invalid");var h=g(b);if(h&&!e.test(h))throw TypeError("argument val is invalid");var i=a+"="+h;if(null!=f.maxAge){var j=f.maxAge-0;if(isNaN(j)||!isFinite(j))throw TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(j)}if(f.domain){if(!e.test(f.domain))throw TypeError("option domain is invalid");i+="; Domain="+f.domain}if(f.path){if(!e.test(f.path))throw TypeError("option path is invalid");i+="; Path="+f.path}if(f.expires){if("function"!=typeof f.expires.toUTCString)throw TypeError("option expires is invalid");i+="; Expires="+f.expires.toUTCString()}if(f.httpOnly&&(i+="; HttpOnly"),f.secure&&(i+="; Secure"),f.sameSite)switch("string"==typeof f.sameSite?f.sameSite.toLowerCase():f.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return i};var a=decodeURIComponent,c=encodeURIComponent,d=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),a.exports=b})()},71946:(a,b,c)=>{"use strict";c.d(b,{AD:()=>g});var d=c(63817);class e{trackQuery(a,b,c,e){let f={query:this.sanitizeQuery(a),duration:b,timestamp:new Date,success:c,error:e};this.metrics.totalQueries++,c||(this.metrics.errors++,d.vF.warn("Database query error",{query:f.query,error:e})),b>this.slowQueryThreshold&&(this.metrics.slowQueries++,d.vF.warn("Slow database query detected",{query:f.query,duration:b,threshold:this.slowQueryThreshold})),this.metrics.averageQueryTime=0===this.metrics.averageQueryTime?b:.9*this.metrics.averageQueryTime+.1*b,this.queryHistory.push(f),this.queryHistory.length>this.maxHistorySize&&this.queryHistory.shift(),this.metrics.totalQueries%100==0&&this.logPerformanceMetrics()}updateConnectionMetrics(a){this.metrics.activeConnections=a.active,this.metrics.idleConnections=a.idle,this.metrics.totalConnections=a.total,this.metrics.waitingQueries=a.waiting,a.waiting>5&&d.vF.warn("High number of waiting queries",{waiting:a.waiting}),a.active/a.total>.8&&d.vF.warn("High connection pool utilization",{utilization:`${Math.round(a.active/a.total*100)}%`,active:a.active,total:a.total})}getMetrics(){return{...this.metrics,uptime:Date.now()-this.metrics.uptime}}getQueryHistory(a=50){return this.queryHistory.slice(-a)}getSlowQueries(a=20){return this.queryHistory.filter(a=>a.duration>this.slowQueryThreshold).slice(-a)}getErrorQueries(a=20){return this.queryHistory.filter(a=>!a.success).slice(-a)}resetMetrics(){this.metrics={activeConnections:this.metrics.activeConnections,idleConnections:this.metrics.idleConnections,totalConnections:this.metrics.totalConnections,waitingQueries:this.metrics.waitingQueries,totalQueries:0,averageQueryTime:0,slowQueries:0,errors:0,uptime:Date.now()},this.queryHistory=[]}sanitizeQuery(a){return a.replace(/VALUES\s*\([^)]+\)/gi,"VALUES (...)").replace(/=\s*'[^']*'/gi,"= '[REDACTED]'").replace(/=\s*\$\d+/gi,"= $[PARAM]").substring(0,200)}logPerformanceMetrics(){let a=this.getMetrics(),b=this.getErrorQueries(10),c=this.getSlowQueries(10);d.vF.info("Database performance metrics",{totalQueries:a.totalQueries,averageQueryTime:Math.round(a.averageQueryTime),slowQueries:a.slowQueries,errors:a.errors,activeConnections:a.activeConnections,connectionUtilization:`${Math.round(a.activeConnections/a.totalConnections*100)}%`,uptime:Math.round(a.uptime/1e3/60)}),b.length>0&&d.vF.warn("Recent database errors",{count:b.length,errors:b.map(a=>({query:a.query,error:a.error}))}),c.length>0&&d.vF.warn("Recent slow queries",{count:c.length,queries:c.map(a=>({query:a.query,duration:a.duration}))})}constructor(){this.metrics={activeConnections:0,idleConnections:0,totalConnections:0,waitingQueries:0,totalQueries:0,averageQueryTime:0,slowQueries:0,errors:0,uptime:Date.now()},this.queryHistory=[],this.maxHistorySize=1e3,this.slowQueryThreshold=1e3}}let f=new e;async function g(a){let b=Date.now();try{await a.execute("SELECT 1");let c=Date.now()-b,d=f.getMetrics(),e=d.totalQueries>0?d.errors/d.totalQueries:0,g=d.totalQueries>0?d.slowQueries/d.totalQueries:0;return{healthy:c<500&&e<.1&&g<.2,metrics:d,latency:c}}catch(c){let a=Date.now()-b;return{healthy:!1,metrics:f.getMetrics(),latency:a,error:c instanceof Error?c.message:String(c)}}}},75600:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},80499:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>g});var e=c(98216),f=a([e]);async function g(a,b){if("GET"!==a.method)return b.status(405).json({error:"Method not allowed"});try{let{db:a}=await Promise.resolve().then(c.bind(c,98216)),d=await (0,e.AD)(a),f={status:d.healthy?"healthy":"unhealthy",timestamp:new Date().toISOString(),database:{healthy:d.healthy,latency:`${d.latency}ms`,error:d.error},metrics:{totalQueries:d.metrics.totalQueries,averageQueryTime:`${Math.round(d.metrics.averageQueryTime)}ms`,slowQueries:d.metrics.slowQueries,errors:d.metrics.errors,uptime:`${Math.round(d.metrics.uptime/1e3/60)}m`,connectionPool:{active:d.metrics.activeConnections,total:d.metrics.totalConnections,utilization:d.metrics.totalConnections>0?`${Math.round(d.metrics.activeConnections/d.metrics.totalConnections*100)}%`:"0%"}},performance:{slowQueryThreshold:"1000ms",slowQueryRate:d.metrics.totalQueries>0?`${Math.round(d.metrics.slowQueries/d.metrics.totalQueries*100)}%`:"0%",errorRate:d.metrics.totalQueries>0?`${Math.round(d.metrics.errors/d.metrics.totalQueries*100)}%`:"0%"}},g=d.healthy?200:503;return b.status(g).json(f)}catch(a){return b.status(500).json({status:"error",timestamp:new Date().toISOString(),error:a instanceof Error?a.message:"Unknown error"})}}e=(f.then?(await f)():f)[0],d()}catch(a){d(a)}})},81042:a=>{"use strict";a.exports=import("@t3-oss/env-nextjs")},86435:(a,b)=>{"use strict";Object.defineProperty(b,"M",{enumerable:!0,get:function(){return function a(b,c){return c in b?b[c]:"then"in b&&"function"==typeof b.then?b.then(b=>a(b,c)):"function"==typeof b&&"default"===c?b:void 0}}})},89508:(a,b)=>{"use strict";function c(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isThenable",{enumerable:!0,get:function(){return c}})},98216:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{let k,l;c.d(b,{AD:()=>h.AD,db:()=>n});var e=c(18905),f=c(64038),g=c(10437),h=c(71946),i=c(45139),j=a([e,f,g,i]);[e,f,g,i]=j.then?(await j)():j;let m=Symbol.for("__cloudflare-context__"),n=new Proxy({},{get(a,b,c){let d=function(){let a=function(){let a=globalThis[m];return a?.env}(),b=a?.DB??f._.DB;if("object"!=typeof b||null===b||"function"!=typeof b.prepare)throw Error("Cloudflare D1 binding `DB` is not available. Ensure wrangler.toml binds the database and requests run through the Workers runtime.");return k&&b===l||(k=(0,e.drizzle)(b,{schema:g}),l=b),k}(),h=Reflect.get(d,b,c);return"function"==typeof h?h.bind(d):h}});d()}catch(a){d(a)}})}};var b=require("../../webpack-api-runtime.js");b.C(a);var c=b(b.s=6240);module.exports=c})();