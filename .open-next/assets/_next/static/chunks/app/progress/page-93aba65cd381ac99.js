(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9316],{14240:(e,s,t)=>{"use strict";t.r(s),t.d(s,{ProgressDashboard:()=>M});var r=t(95155),a=t(12115),l=t(52619),n=t.n(l),c=t(64269);function o(e){let{title:s,description:t,actions:a,breadcrumb:l,backHref:o,backLabel:i="Back",className:d,contentClassName:x,children:m}=e;return(0,r.jsx)("main",{className:(0,c.cn)("min-h-screen bg-transparent",d),children:(0,r.jsxs)("div",{className:"mx-auto w-full max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-4 border-b border-border/50 pb-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex min-w-0 flex-col gap-3",children:[l&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground/80",children:l}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[o?(0,r.jsx)(n(),{href:o,className:"inline-flex h-9 items-center justify-center rounded-full border border-border/50 px-3 text-xs font-medium text-muted-foreground transition hover:border-primary/50 hover:text-foreground",children:i}):null,(0,r.jsxs)("div",{className:"min-w-0 space-y-1",children:[(0,r.jsx)("h1",{className:"truncate text-lg font-semibold text-foreground sm:text-xl md:text-2xl",children:s}),t&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:t})]})]})]}),a&&(0,r.jsx)("div",{className:"flex flex-shrink-0 flex-wrap items-center gap-2",children:a})]}),(0,r.jsx)("section",{className:(0,c.cn)("py-6",x),children:m})]})})}var i=t(11647),d=t(3998),x=t(80842),m=t(64053);function h(e){let{isOpen:s,onClose:t,timeRange:a}=e,{theme:l,resolvedTheme:n}=(0,m.W)(),c="system"!==l||"system"===l&&"dark"===n,{data:o,isLoading:i}=x.F.progress.getConsistencyStats.useQuery({timeRange:a},{enabled:s}),{data:d,isLoading:h}=x.F.progress.getWorkoutDates.useQuery({timeRange:a},{enabled:s});if(!s)return null;let g="text-sm font-medium mb-2 ".concat(c?"text-gray-300":"text-gray-700 dark:text-gray-300"),u=(()=>{let e=new Date,s=[];if("week"===a){let t=new Date(e);t.setDate(e.getDate()-e.getDay());let r=[];for(let e=0;e<7;e++){let s=new Date(t);s.setDate(t.getDate()+e),r.push(s)}s.push({label:"This Week",days:r,monthYear:e.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}else if("month"===a){let t=e.getFullYear(),r=e.getMonth(),a=new Date(t,r,1),l=new Date(t,r+1,0).getDate(),n=a.getDay(),c=[];for(let e=0;e<n;e++)c.push(null);for(let e=1;e<=l;e++)c.push(new Date(t,r,e));s.push({label:e.toLocaleDateString("en-US",{month:"long",year:"numeric"}),days:c,monthYear:e.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}else for(let t=11;t>=0;t--){let r=new Date(e.getFullYear(),e.getMonth()-t,1),a=r.getFullYear(),l=r.getMonth(),n=new Date(a,l,1),c=new Date(a,l+1,0).getDate(),o=n.getDay(),i=[];for(let e=0;e<o;e++)i.push(null);for(let e=1;e<=c;e++)i.push(new Date(a,l,e));s.push({label:r.toLocaleDateString("en-US",{month:"short",year:"numeric"}),days:i,monthYear:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return s})(),p=new Set((d||[]).map(e=>new Date(e).toDateString())),v=new Date,j=(()=>{if(!o||!d)return null;let e=d.reduce((e,s)=>{let t=new Date(s).getDay();return e[t]=(e[t]||0)+1,e},{}),s=Object.entries(e).sort((e,s)=>{let[,t]=e,[,r]=s;return r-t})[0],t=s?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][parseInt(s[0])]:"None",r={morning:Math.floor(.4*d.length),afternoon:Math.floor(.35*d.length),evening:Math.floor(.25*d.length)},l="week"===a?1:"month"===a?4:52,n=3*l,c=o.totalWorkouts||0,i=Math.min(c/n*100,100),x=d.map(e=>new Date(e)).sort((e,s)=>s.getTime()-e.getTime()),m=[],h=0,g=0;for(let e=0;e<x.length-1;e++){let s=x[e],t=x[e+1];2>=Math.floor((s.getTime()-t.getTime())/864e5)?h++:(h>0&&m.push(h+1),g=Math.max(g,h+1),h=0)}return h>0&&m.push(h+1),{workoutsByDayOfWeek:e,mostActiveDayName:t,workoutsByHour:r,targetProgress:i,actualWorkouts:c,targetWorkouts:n,streaks:m,longestStreakCalculated:g=Math.max(g,h+1),avgWorkoutsPerWeek:o.frequency,totalRestDays:Math.max(0,7*l-c)}})();return(0,r.jsx)("div",{className:"bg-opacity-50 fixed inset-0 z-50 flex items-center justify-center bg-black p-4",children:(0,r.jsxs)("div",{className:"max-h-[90vh] w-full max-w-6xl overflow-y-auto rounded-xl ".concat("transition-all duration-300 rounded-xl border shadow-sm ".concat(c?"bg-gray-900 border-gray-800 shadow-lg":"bg-white border-gray-200 dark:bg-gray-900 dark:border-gray-800")," p-6"),children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4 ".concat(c?"text-background":"text-gray-900 dark:text-background"),children:"Detailed Consistency Analysis"}),(0,r.jsxs)("p",{className:g,children:[a.charAt(0).toUpperCase()+a.slice(1)," View - Complete Training Patterns"]})]}),(0,r.jsx)("button",{onClick:t,className:"rounded-lg px-4 py-2 text-sm font-medium transition-all duration-200 ".concat(c?"border border-gray-700 bg-gray-800 text-gray-300 hover:bg-gray-700":"border border-gray-200 bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"✕ Close"})]}),i||h?(0,r.jsx)("div",{className:"space-y-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"h-32 animate-pulse rounded-lg bg-gray-200 dark:bg-gray-700"},s))}):o&&j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:g,children:"Consistency Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-5",children:[(0,r.jsxs)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCC5"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(c?"text-gray-400":"text-gray-600"),children:"Total Workouts"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:j.actualWorkouts}),(0,r.jsxs)("p",{className:"text-xs ".concat(c?"text-gray-500":"text-gray-600"),children:["of ",j.targetWorkouts," target"]})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDD25"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(c?"text-gray-400":"text-gray-600"),children:"Current Streak"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:o.currentStreak}),(0,r.jsx)("p",{className:"text-xs ".concat(c?"text-gray-500":"text-gray-600"),children:"days"})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFC6"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(c?"text-gray-400":"text-gray-600"),children:"Best Streak"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-500",children:o.longestStreak}),(0,r.jsx)("p",{className:"text-xs ".concat(c?"text-gray-500":"text-gray-600"),children:"days"})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCC8"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(c?"text-gray-400":"text-gray-600"),children:"Weekly Avg"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-500",children:j.avgWorkoutsPerWeek}),(0,r.jsx)("p",{className:"text-xs ".concat(c?"text-gray-500":"text-gray-600"),children:"workouts"})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"⭐"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(c?"text-gray-400":"text-gray-600"),children:"Score"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold ".concat(o.consistencyScore>=80?"text-green-500":o.consistencyScore>=60?"text-yellow-500":"text-red-500"),children:o.consistencyScore}),(0,r.jsx)("p",{className:"text-xs ".concat(c?"text-gray-500":"text-gray-600"),children:"out of 100"})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:g,children:"Training Patterns"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsxs)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsx)("h5",{className:"mb-3 text-sm font-semibold ".concat(c?"text-gray-200":"text-gray-800"),children:"Workouts by Day of Week"}),(0,r.jsx)("div",{className:"space-y-2",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((e,s)=>{let t=j.workoutsByDayOfWeek[s]||0,a=Math.max(...Object.values(j.workoutsByDayOfWeek)),l=a>0?t/a*100:0;return(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"w-12 text-xs ".concat(c?"text-gray-300":"text-gray-700"),children:e.slice(0,3)}),(0,r.jsx)("div",{className:"h-4 flex-1 rounded-full ".concat(c?"bg-gray-700":"bg-gray-200"),children:(0,r.jsx)("div",{className:"h-4 rounded-full bg-blue-500 transition-all duration-500",style:{width:"".concat(l,"%")}})}),(0,r.jsx)("span",{className:"w-6 text-right text-xs ".concat(c?"text-gray-300":"text-gray-700"),children:t})]},e)})}),(0,r.jsxs)("p",{className:"mt-3 text-xs ".concat(c?"text-gray-400":"text-gray-600"),children:["Most active day:"," ",(0,r.jsx)("span",{className:"font-semibold text-blue-500",children:j.mostActiveDayName})]})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsx)("h5",{className:"mb-3 text-sm font-semibold ".concat(c?"text-gray-200":"text-gray-800"),children:"Preferred Training Times"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDF05"}),(0,r.jsx)("span",{className:"text-sm ".concat(c?"text-gray-300":"text-gray-700"),children:"Morning (6-11 AM)"})]}),(0,r.jsx)("span",{className:"text-lg font-bold ".concat(c?"text-background":"text-foreground"),children:j.workoutsByHour.morning})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"☀️"}),(0,r.jsx)("span",{className:"text-sm ".concat(c?"text-gray-300":"text-gray-700"),children:"Afternoon (11-5 PM)"})]}),(0,r.jsx)("span",{className:"text-lg font-bold ".concat(c?"text-background":"text-foreground"),children:j.workoutsByHour.afternoon})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDF06"}),(0,r.jsx)("span",{className:"text-sm ".concat(c?"text-gray-300":"text-gray-700"),children:"Evening (5-10 PM)"})]}),(0,r.jsx)("span",{className:"text-lg font-bold ".concat(c?"text-background":"text-foreground"),children:j.workoutsByHour.evening})]})]})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:g,children:"Complete Training Calendar"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:u.map((e,s)=>(0,r.jsxs)("div",{className:"rounded-lg p-3 ".concat(c?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsx)("h5",{className:"mb-2 text-center text-xs font-semibold ".concat(c?"text-gray-200":"text-gray-800"),children:e.label}),"week"!==a&&(0,r.jsx)("div",{className:"mb-1 grid grid-cols-7 gap-1",children:["S","M","T","W","T","F","S"].map((e,s)=>(0,r.jsx)("div",{className:"p-1 text-center text-xs font-medium ".concat(c?"text-gray-400":"text-gray-600"),children:e},"".concat(e,"-").concat(s)))}),(0,r.jsx)("div",{className:"grid ".concat("grid-cols-7"," gap-1"),children:e.days.map((e,s)=>(0,r.jsx)("div",{className:"aspect-square",children:e?(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded text-xs transition-all ".concat(e.toDateString()===v.toDateString()?"ring-1 ring-blue-500 ".concat(c?"bg-blue-900 text-blue-300":"bg-blue-100 text-blue-800"):p.has(e.toDateString())?"bg-green-500 font-semibold text-white":c?"text-gray-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-200"),children:"week"===a?e.toLocaleDateString("en-US",{weekday:"short",day:"numeric"}):e.getDate()}):(0,r.jsx)("div",{className:"h-full w-full"})},s))})]},s))}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-center space-x-6 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"h-3 w-3 rounded bg-green-500"}),(0,r.jsx)("span",{className:c?"text-gray-400":"text-gray-600",children:"Workout Day"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"h-3 w-3 rounded border border-blue-500 ".concat(c?"bg-blue-900":"bg-blue-100")}),(0,r.jsx)("span",{className:c?"text-gray-400":"text-gray-600",children:"Today"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"h-3 w-3 rounded ".concat(c?"bg-gray-700":"bg-gray-200")}),(0,r.jsx)("span",{className:c?"text-gray-400":"text-gray-600",children:"Rest Day"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:g,children:"Progress Insights & Recommendations"}),(0,r.jsx)("div",{className:"rounded-lg p-4 ".concat(c?"bg-gray-800":"bg-gray-50"),children:(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("span",{className:"".concat(j.targetProgress>=100?"text-green-500":"text-yellow-500"),children:j.targetProgress>=100?"\uD83C\uDFAF":"\uD83D\uDCCA"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:c?"text-gray-200":"text-gray-800",children:["Target Achievement:"," "]}),(0,r.jsxs)("span",{className:"font-semibold ".concat(j.targetProgress>=100?"text-green-500":"text-yellow-500"),children:[j.targetProgress.toFixed(0),"%"]}),(0,r.jsx)("p",{className:"mt-1 text-xs ".concat(c?"text-gray-400":"text-gray-600"),children:j.targetProgress>=100?"Excellent! You've exceeded your workout target.":"You need ".concat(j.targetWorkouts-j.actualWorkouts," more workouts to reach your target.")})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("span",{className:"".concat(o.currentStreak>=7?"text-green-500":"text-blue-500"),children:o.currentStreak>=7?"\uD83D\uDD25":"\uD83D\uDCC8"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:c?"text-gray-200":"text-gray-800",children:["Streak Analysis:"," "]}),(0,r.jsx)("span",{className:"font-semibold ".concat(o.currentStreak>=7?"text-green-500":"text-blue-500"),children:o.currentStreak>=7?"Strong":"Building"}),(0,r.jsx)("p",{className:"mt-1 text-xs ".concat(c?"text-gray-400":"text-gray-600"),children:o.currentStreak>=7?"Your streak is solid! Keep up the momentum.":"".concat(7-o.currentStreak," more consecutive days to build a strong streak.")})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("span",{className:"".concat(j.avgWorkoutsPerWeek>=3?"text-green-500":"text-orange-500"),children:j.avgWorkoutsPerWeek>=3?"✅":"⚠️"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:c?"text-gray-200":"text-gray-800",children:["Weekly Consistency:"," "]}),(0,r.jsx)("span",{className:"font-semibold ".concat(j.avgWorkoutsPerWeek>=3?"text-green-500":"text-orange-500"),children:j.avgWorkoutsPerWeek>=3?"On Track":"Below Target"}),(0,r.jsx)("p",{className:"mt-1 text-xs ".concat(c?"text-gray-400":"text-gray-600"),children:j.avgWorkoutsPerWeek>=3?"Great job maintaining 3+ workouts per week!":"Average ".concat(j.avgWorkoutsPerWeek.toFixed(1),"/week. Aim for 3+ for optimal results.")})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("span",{className:"text-purple-500",children:"\uD83D\uDCA1"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("span",{className:c?"text-gray-200":"text-gray-800",children:["Best Training Day:"," "]}),(0,r.jsx)("span",{className:"font-semibold text-purple-500",children:j.mostActiveDayName}),(0,r.jsx)("p",{className:"mt-1 text-xs ".concat(c?"text-gray-400":"text-gray-600"),children:"Consider scheduling important workouts on your most consistent day."})]})]})]})})]})]}):(0,r.jsxs)("div",{className:"py-12 text-center",children:[(0,r.jsx)("svg",{className:"mx-auto mb-4 h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("p",{className:"mb-2 text-lg font-medium ".concat(c?"text-gray-300":"text-gray-700"),children:"No consistency data available"}),(0,r.jsx)("p",{className:"text-sm ".concat(c?"text-gray-400":"text-gray-600"),children:"Complete some workouts to see detailed consistency analysis."})]})]})})}function g(){let[e,s]=(0,a.useState)("month"),[t,l]=(0,a.useState)(!1),{data:n,isLoading:c}=x.F.progress.getConsistencyStats.useQuery({timeRange:e}),{data:o,isLoading:i}=x.F.progress.getWorkoutDates.useQuery({timeRange:e}),d="text-sm font-medium mb-2 text-[var(--color-text-secondary)]",m=(()=>{let e=new Date,s=e.getFullYear(),t=e.getMonth(),r=new Date(s,t,1),a=new Date(s,t+1,0).getDate(),l=r.getDay(),n=[];for(let e=0;e<l;e++)n.push(null);for(let e=1;e<=a;e++)n.push(new Date(s,t,e));return n})(),g=new Set((o||[]).map(e=>new Date(e).toDateString())),u=new Date,p=3*("week"===e?1:"month"===e?4:52),v=(null==n?void 0:n.totalWorkouts)||0,j=Math.min(v/p*100,100);return(0,r.jsxs)("div",{className:"transition-all duration-300 rounded-xl border shadow-sm glass-surface p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-[var(--color-text)]",children:"Consistency Tracker"}),(0,r.jsx)("div",{className:"flex space-x-1 bg-[var(--color-bg-surface)] rounded-lg p-1 border border-[var(--color-border)]",children:["week","month","year"].map(t=>(0,r.jsx)("button",{onClick:()=>s(t),className:"px-2 py-1 text-xs font-medium rounded-md transition-all ".concat(e===t?"bg-[var(--color-primary)] text-background shadow-sm":"text-[var(--color-text-muted)] hover:text-[var(--color-text)]"),children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),c||i?(0,r.jsx)("div",{className:"space-y-6",children:[void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"animate-pulse bg-[var(--color-bg-surface)] h-32 rounded-lg"},s))}):n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD25"}),(0,r.jsx)("h3",{className:d,children:"Current Streak"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-[var(--color-warning)]",children:n.currentStreak}),(0,r.jsx)("p",{className:"text-xs text-[var(--color-text-muted)]",children:"days"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFC6"}),(0,r.jsx)("h3",{className:d,children:"Best Streak"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-[var(--color-warning)]",children:n.longestStreak}),(0,r.jsx)("p",{className:"text-xs text-[var(--color-text-muted)]",children:"days"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC8"}),(0,r.jsx)("h3",{className:d,children:"Frequency"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-[var(--color-primary)]",children:n.frequency}),(0,r.jsx)("p",{className:"text-xs text-[var(--color-text-muted)]",children:"per week"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"⭐"}),(0,r.jsx)("h3",{className:d,children:"Score"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold ".concat(n.consistencyScore>=80?"text-[var(--color-success)]":n.consistencyScore>=60?"text-[var(--color-warning)]":"text-[var(--color-danger)]"),children:n.consistencyScore}),(0,r.jsx)("p",{className:"text-xs text-[var(--color-text-muted)]",children:"out of 100"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:d,suppressHydrationWarning:!0,children:["Workout Calendar - ",new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{className:"text-center text-xs font-medium p-2 text-[var(--color-text-muted)]",children:e},e))}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1",children:m.map((e,s)=>(0,r.jsx)("div",{className:"aspect-square",children:e?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-sm rounded-md transition-all ".concat(e.toDateString()===u.toDateString()?"ring-2 ring-[var(--color-primary)] bg-[var(--color-primary)] text-white font-semibold":g.has(e.toDateString())?"bg-[var(--color-success)] text-background font-semibold":"text-[var(--color-text-secondary)] hover:bg-[var(--color-bg-surface)] hover:bg-opacity-80"),children:e.getDate()}):(0,r.jsx)("div",{className:"w-full h-full"})},s))}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4 mt-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-[var(--color-success)] rounded"}),(0,r.jsx)("span",{className:"text-[var(--color-text-muted)]",children:"Workout"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded border-2 border-[var(--color-primary)] bg-[var(--color-primary)] bg-opacity-20"}),(0,r.jsx)("span",{className:"text-[var(--color-text-muted)]",children:"Today"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:d,children:"3x/Week Target Progress"}),(0,r.jsx)("button",{onClick:()=>l(!0),className:"btn-secondary",children:"View Details"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)] space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm text-[var(--color-text-secondary)]",children:"Progress"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-[var(--color-text)]",children:[v,"/",p," workouts"]})]}),(0,r.jsx)("div",{className:"w-full h-3 rounded-full bg-[var(--color-border)]",children:(0,r.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(j>=100?"bg-[var(--color-success)]":j>=70?"bg-[var(--color-warning)]":"bg-[var(--color-danger)]"),style:{width:"".concat(j,"%")}})}),(0,r.jsxs)("p",{className:"text-xs mt-1 text-[var(--color-text-muted)]",children:[j.toFixed(0),"% of target achieved"]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-[var(--color-text)]",children:"Consistency Insights"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"".concat(n.frequency>=3?"text-[var(--color-success)]":"text-[var(--color-warning)]"),children:n.frequency>=3?"✅":"⚠️"}),(0,r.jsx)("span",{className:"text-[var(--color-text-secondary)]",children:n.frequency>=3?"Meeting weekly target":"".concat((3-n.frequency).toFixed(1)," workouts behind target")})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"".concat(n.currentStreak>=3?"text-[var(--color-success)]":"text-[var(--color-text-muted)]"),children:n.currentStreak>=3?"\uD83D\uDD25":"\uD83D\uDCAD"}),(0,r.jsx)("span",{className:"text-[var(--color-text-secondary)]",children:n.currentStreak>=3?"Strong streak going!":"Build a longer streak"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"".concat(n.consistencyScore>=80?"text-[var(--color-success)]":n.consistencyScore>=60?"text-[var(--color-warning)]":"text-[var(--color-danger)]"),children:n.consistencyScore>=80?"\uD83C\uDF1F":n.consistencyScore>=60?"\uD83D\uDCC8":"\uD83D\uDCC9"}),(0,r.jsx)("span",{className:"text-[var(--color-text-secondary)]",children:n.consistencyScore>=80?"Excellent consistency!":n.consistencyScore>=60?"Good, can improve more":"Needs consistency work"})]})]})]})]})]})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 text-[var(--color-text-secondary)]",children:"No consistency data found"}),(0,r.jsx)("p",{className:"text-sm text-[var(--color-text-muted)]",children:"Complete some workouts to track your consistency and build streaks."})]}),(0,r.jsx)(h,{isOpen:t,onClose:()=>l(!1),timeRange:e})]})}function u(){var e,s;let[t,l]=(0,a.useState)(""),[n,c]=(0,a.useState)("1RM"),[o,i]=(0,a.useState)("quarter"),[d,m]=(0,a.useState)(!1),{data:h,isLoading:g}=x.F.progress.getTopExercises.useQuery({limit:20,timeRange:"year"}),u=(null==h||null==(e=h[0])?void 0:e.exerciseName)||"",p=t||u,{data:v,isLoading:j}=x.F.progress.getExerciseStrengthProgression.useQuery({exerciseName:p,timeRange:o},{enabled:!!p&&"1RM"===n}),{data:b,isLoading:y}=x.F.progress.getExerciseVolumeProgression.useQuery({exerciseName:p,timeRange:o},{enabled:!!p&&"Volume"===n}),{data:N,isLoading:f}=x.F.progress.getExerciseRecentPRs.useQuery({exerciseName:p,timeRange:o},{enabled:!!p}),{data:w,isLoading:k}=x.F.progress.getExerciseTopSets.useQuery({exerciseName:p,timeRange:o},{enabled:!!p}),D=(0,a.useMemo)(()=>"Volume"===n&&(null==b?void 0:b.volumeByWeek)?b.volumeByWeek.map(e=>({date:e.weekStart,value:e.totalVolume,label:"".concat(e.totalVolume,"kg")})):"1RM"===n&&v?[{date:new Date().toISOString().split("T")[0],value:v.currentOneRM,label:"".concat(v.currentOneRM,"kg")}]:[],[n,v,b]),S="1RM"===n?v:b,C="1RM"===n?j:y,R="1RM"===n?(null==v?void 0:v.progressionTrend)||0:(null==b?void 0:b.volumeChangePercent)||0,M=R>2?{status:"improving",color:"text-green-500",icon:"\uD83D\uDFE2",text:"Improving",description:"Great progress! Keep up the current training approach."}:R<-2?{status:"declining",color:"text-red-500",icon:"\uD83D\uDD34",text:"Declining",description:"Performance is declining. Consider adjusting training variables."}:{status:"maintaining",color:"text-yellow-500",icon:"\uD83D\uDFE1",text:"Maintaining",description:"Steady performance. Progress may come in waves."},P="text-sm font-medium mb-2 text-[var(--color-text-secondary)]",W="px-3 py-2 text-sm rounded-lg border transition-colors bg-[var(--color-bg-surface)] border-[var(--color-border)] text-[var(--color-text)] focus:border-[var(--color-primary)]";return(0,r.jsxs)("div",{className:"transition-all duration-300 rounded-xl border shadow-sm glass-surface p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-[var(--color-text)] mb-0",children:"Volume by Exercise"}),(0,r.jsxs)("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-lg text-sm font-medium hover:from-purple-600 hover:to-blue-600 transition-all duration-200 flex items-center space-x-2 shadow-sm",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),(0,r.jsx)("span",{children:"AI Insights"}),(0,r.jsx)("span",{className:"px-1.5 py-0.5 bg-black/20 rounded text-xs",children:"Beta"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"exercise-select",className:P,children:"Exercise"}),(0,r.jsx)("select",{id:"exercise-select",value:t,onChange:e=>l(e.target.value),className:W+" w-full",disabled:g,children:null==h?void 0:h.map(e=>(0,r.jsx)("option",{value:e.exerciseName,children:e.exerciseName},e.exerciseName))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"focus-select",className:P,children:"Focus"}),(0,r.jsxs)("select",{id:"focus-select",value:n,onChange:e=>c(e.target.value),className:W+" w-full",children:[(0,r.jsx)("option",{value:"1RM",children:"1RM"}),(0,r.jsx)("option",{value:"Volume",children:"Volume"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"time-range-select",className:P,children:"Time Range"}),(0,r.jsxs)("select",{id:"time-range-select",value:o,onChange:e=>i(e.target.value),className:W+" w-full",children:[(0,r.jsx)("option",{value:"week",children:"Week"}),(0,r.jsx)("option",{value:"month",children:"Month"}),(0,r.jsx)("option",{value:"quarter",children:"Quarter"}),(0,r.jsx)("option",{value:"year",children:"Year"})]})]})]})]}),(C||g)&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"animate-pulse bg-[var(--color-bg-surface)] h-24 rounded-lg"}),(0,r.jsx)("div",{className:"animate-pulse bg-[var(--color-bg-surface)] h-64 rounded-lg"}),(0,r.jsx)("div",{className:"animate-pulse bg-[var(--color-bg-surface)] h-32 rounded-lg"})]}),!C&&!g&&p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsxs)("p",{className:P,children:["Current ","1RM"===n?"1RM":"Total Volume"]}),(0,r.jsx)("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:"1RM"===n?"".concat((null==v?void 0:v.currentOneRM)||0,"kg ").concat((null==v?void 0:v.oneRMChange)?"(".concat(v.oneRMChange>0?"+":"").concat(v.oneRMChange,"kg)"):""):"".concat((null==b||null==(s=b.currentVolume)?void 0:s.toLocaleString())||0,"kg")})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsx)("p",{className:P,children:"Progression Status"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:M.icon}),(0,r.jsx)("p",{className:"text-lg font-bold ".concat(M.color),children:M.text})]}),(0,r.jsxs)("p",{className:"text-lg font-bold ".concat(M.color),children:[R>0?"+":"",R.toFixed(1),"%",R>0?" ↗":R<0?" ↘":" →"]})]}),(0,r.jsx)("p",{className:"text-xs text-[var(--color-text-secondary)]",children:M.description})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsx)("p",{className:P,children:"Sessions"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-[var(--color-info)]",children:[(null==S?void 0:S.sessionCount)||0,(null==S?void 0:S.frequency)?" (".concat(S.frequency.toFixed(1),"x/week)"):"",(null==S?void 0:S.frequency)&&S.frequency>=2?" ✓":""]})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:P,children:[n," Progression Over Time"]}),(0,r.jsx)("div",{className:"relative h-64 p-6 rounded-lg border border-[var(--color-border)]",style:{background:"color-mix(in srgb, var(--card) 98%, var(--primary) 2%)"},children:D.length>0?(0,r.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 200",preserveAspectRatio:"xMidYMid meet",children:[(0,r.jsx)("defs",{children:(0,r.jsx)("pattern",{id:"progression-grid",width:"40",height:"20",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 40 0 L 0 0 0 20",fill:"none",stroke:"var(--color-border)",strokeWidth:"0.5"})})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"url(#progression-grid)"}),D.map((e,s)=>{let t=Math.max(...D.map(e=>e.value)),a=Math.min(...D.map(e=>e.value)),l=t-a||1,n=.1*l,c=s/Math.max(1,D.length-1)*350+25,o=180-(e.value-a+n)/(l+2*n)*160;return(0,r.jsxs)("g",{children:[s<D.length-1&&(0,r.jsx)("line",{x1:c,y1:o,x2:(s+1)/Math.max(1,D.length-1)*350+25,y2:180-(D[s+1].value-a+n)/(l+2*n)*160,stroke:"var(--color-primary)",strokeWidth:"2"}),(0,r.jsx)("circle",{cx:c,cy:o,r:"4",fill:"var(--color-primary)",className:"hover:r-6 cursor-pointer transition-all"}),(0,r.jsx)("text",{x:c,y:Math.max(o-15,15),textAnchor:"middle",className:"text-xs font-medium opacity-0 hover:opacity-100 transition-opacity",fill:"var(--color-text)",children:e.label})]},s)})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("p",{className:"text-sm text-[var(--color-text-muted)]",children:"No progression data available for selected period"})})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:P,children:"Recent PRs"}),f?(0,r.jsx)("div",{className:"animate-pulse bg-[var(--color-bg-surface)] h-20 rounded-lg"}):(null==N?void 0:N.recentPRs)&&N.recentPRs.length>0?(0,r.jsx)("div",{className:"space-y-2",children:N.recentPRs.slice(0,3).map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-lg",children:"1RM"===e.type?"\uD83C\uDFC6":"Volume"===e.type?"\uD83D\uDCAA":"⭐"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-[var(--color-text)]",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,r.jsxs)("p",{className:"text-xs text-[var(--color-text-secondary)]",children:[e.weight,"kg x ",e.reps," ","1RM"===e.type?"(New 1RM!)":"(Volume PR)"]})]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm font-bold text-[var(--color-primary)]",children:[(null==(t=e.oneRMPercentage)?void 0:t.toFixed(0))||0,"% of 1RM"]})})]},s)})}):(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsx)("p",{className:"text-sm text-[var(--color-text-muted)]",children:"No recent PRs in selected time range"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:P,children:"Top Recent Sets"}),k?(0,r.jsx)("div",{className:"animate-pulse bg-[var(--color-bg-surface)] h-24 rounded-lg"}):(null==w?void 0:w.topSets)&&w.topSets.length>0?(0,r.jsx)("div",{className:"space-y-2",children:w.topSets.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-[var(--color-bg-surface)] border border-[var(--color-border)]",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-[var(--color-text)]",children:[e.weight,"kg x ",e.reps]}),(0,r.jsx)("p",{className:"text-xs text-[var(--color-text-secondary)]",children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm font-bold text-[var(--color-primary)]",children:[e.oneRMPercentage.toFixed(0),"% of 1RM"]})})]},s))}):(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsx)("p",{className:"text-sm text-[var(--color-text-muted)]",children:"No recent sets data available"})})]})]}),!C&&!g&&(!p||h&&0===h.length)&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"var(--color-text-muted)",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 text-[var(--color-text-secondary)]",children:"No exercise data found"}),(0,r.jsx)("p",{className:"text-sm text-[var(--color-text-muted)]",children:"Complete some workouts to track your exercise progression."})]}),d&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&m(!1)},children:(0,r.jsxs)("div",{className:"bg-[var(--color-bg-card)] rounded-xl shadow-xl max-w-md w-full max-h-[80vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-[var(--color-border)]",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-[var(--color-text)]",children:"AI Training Insights"}),(0,r.jsx)("p",{className:"text-sm text-[var(--color-text-secondary)]",children:"Powered by advanced analytics"})]})]}),(0,r.jsx)("button",{onClick:()=>m(!1),className:"p-2 hover:bg-[var(--color-bg-surface)] rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-[var(--color-text-secondary)]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[p&&(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border border-blue-200 dark:border-blue-800",children:[(0,r.jsxs)("h4",{className:"font-semibold text-[var(--color-text)] mb-2",children:[p," Analysis"]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-[var(--color-text-secondary)]",children:[(null==v?void 0:v.currentOneRM)&&(0,r.jsxs)("p",{children:["• You're working with a ",v.currentOneRM,"kg 1RM - excellent foundation!"]}),"improving"===M.status&&(0,r.jsxs)("p",{children:["• Your ",R.toFixed(1),"% improvement shows great consistency!"]}),"maintaining"===M.status&&(0,r.jsx)("p",{children:"• Steady performance indicates good training stability."}),"declining"===M.status&&(0,r.jsx)("p",{children:"• Consider a deload week to recover and reset your progress."}),(null==S?void 0:S.frequency)&&S.frequency>=2&&(0,r.jsxs)("p",{children:["• Training ",S.frequency.toFixed(1),"x per week shows excellent frequency!"]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"font-semibold text-[var(--color-text)]",children:"Smart Recommendations"}),(0,r.jsx)("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-green-500 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-green-800 dark:text-green-200",children:"Progressive Overload"}),(0,r.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Aim for 2.5-5kg increases when hitting 8+ reps consistently"})]})]})}),(0,r.jsx)("div",{className:"p-3 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-yellow-500 font-bold",children:"!"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Recovery Focus"}),(0,r.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Sleep 7-9 hours and eat sufficient protein for optimal gains"})]})]})}),(0,r.jsx)("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("span",{className:"text-blue-500 font-bold",children:"\uD83D\uDCA1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Form Check"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Record your lifts to ensure consistent technique as weight increases"})]})]})})]}),(0,r.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-gradient-to-r from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 border border-purple-200 dark:border-purple-800",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full inline-block mb-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,r.jsx)("h4",{className:"font-bold text-[var(--color-text)] mb-2",children:"More AI Features Coming Soon!"}),(0,r.jsx)("p",{className:"text-sm text-[var(--color-text-secondary)] mb-3",children:"We're developing advanced AI that will provide personalized training recommendations based on your unique progress patterns."}),(0,r.jsxs)("div",{className:"text-xs text-[var(--color-text-muted)]",children:[(0,r.jsx)("p",{children:"• Personalized programming suggestions"}),(0,r.jsx)("p",{children:"• Injury prevention alerts"}),(0,r.jsx)("p",{children:"• Competition readiness tracking"}),(0,r.jsx)("p",{children:"• Recovery optimization tips"})]})]})})]}),(0,r.jsx)("div",{className:"p-6 border-t border-[var(--color-border)] bg-[var(--color-bg-surface)] rounded-b-xl",children:(0,r.jsx)("button",{onClick:()=>m(!1),className:"w-full px-4 py-2 bg-[var(--color-primary)] text-white rounded-lg font-medium hover:bg-[var(--color-primary)]/90 transition-colors",children:"Got it!"})})]})})]})}function p(e){let{isOpen:s,onClose:t,exerciseName:l}=e,{theme:n,resolvedTheme:c}=(0,m.W)(),[o,i]=(0,a.useState)("all"),[d,h]=(0,a.useState)("both"),[g,u]=(0,a.useState)(l||""),p="system"!==n||"system"===n&&"dark"===c,{data:v,isLoading:j}=x.F.progress.getPersonalRecords.useQuery({timeRange:"all"===o?"year":o,recordType:d},{enabled:s}),b=v?Array.from(new Set(v.map(e=>e.exerciseName))).sort():[],y=(null==v?void 0:v.filter(e=>{let s=!g||e.exerciseName===g;if("all"===o)return s;let t=new Date(e.workoutDate),r=new Date,a=!0;return"week"===o?a=t>=new Date(r.getTime()-6048e5):"month"===o?a=t>=new Date(r.getFullYear(),r.getMonth()-1,r.getDate()):"year"===o&&(a=t>=new Date(r.getFullYear()-1,r.getMonth(),r.getDate())),s&&a}))||[];if(!s)return null;let N="text-sm font-medium mb-2 ".concat(p?"text-gray-300":"text-gray-700 dark:text-gray-300"),f=y.reduce((e,s)=>{let t=s.exerciseName;return e[t]||(e[t]={weight:[],volume:[]}),e[t][s.recordType].push(s),e},{}),w=(()=>{let e=y.filter(e=>"weight"===e.recordType),s=y.filter(e=>"volume"===e.recordType),t=Object.entries(f).map(e=>{let[s,t]=e,r=t.weight.sort((e,s)=>new Date(e.workoutDate).getTime()-new Date(s.workoutDate).getTime()),a=t.volume.sort((e,s)=>new Date(e.workoutDate).getTime()-new Date(s.workoutDate).getTime()),l=0,n=0;if(r.length>=2){let e=r[0];l=r[r.length-1].weight-e.weight}if(a.length>=2){let e=a[0],s=a[a.length-1];n=s.weight*s.reps-e.weight*e.reps}return{exercise:s,weightImprovement:l,volumeImprovement:n,totalPRs:t.weight.length+t.volume.length}}).sort((e,s)=>s.totalPRs-e.totalPRs),r=new Date(Date.now()-2592e6),a=y.filter(e=>new Date(e.workoutDate)>=r);return{totalPRs:y.length,weightPRs:e.length,volumePRs:s.length,exercisesWithPRs:Object.keys(f).length,improvements:t,recentPRs:a.length,avgPRsPerExercise:Object.keys(f).length>0?(y.length/Object.keys(f).length).toFixed(1):0}})();return(0,r.jsx)("div",{className:"fixed inset-0 bg-background bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"max-w-6xl w-full max-h-[90vh] overflow-y-auto rounded-xl ".concat("transition-all duration-300 rounded-xl border shadow-sm ".concat(p?"bg-gray-900 border-gray-800 shadow-lg":"bg-background border-gray-200 dark:bg-gray-900 dark:border-gray-800")," p-6"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4 ".concat(p?"text-background":"text-gray-900 dark:text-background"),children:"Complete PR History"}),(0,r.jsxs)("p",{className:N,children:[g?"".concat(g," - "):"","Personal Records Timeline & Analysis"]})]}),(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ".concat(p?"bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-200"),children:"✕ Close"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-xs font-medium ".concat(p?"text-gray-300":"text-gray-700"),children:"Exercise:"}),(0,r.jsxs)("select",{value:g,onChange:e=>u(e.target.value),className:"ml-2 px-3 py-1 text-sm rounded-md border transition-all ".concat(p?"bg-gray-800 border-gray-600 text-white":"bg-background border-gray-300 text-gray-900"),children:[(0,r.jsx)("option",{value:"",children:"All Exercises"}),b.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsx)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:["both","weight","volume"].map(e=>(0,r.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 text-xs font-medium rounded-md transition-all ".concat(d===e?"bg-background dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:"both"===e?"All Types":e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,r.jsx)("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:["all","year","month","week"].map(e=>(0,r.jsx)("button",{onClick:()=>i(e),className:"px-3 py-1 text-xs font-medium rounded-md transition-all ".concat(o===e?"bg-background dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"),children:"all"===e?"All Time":e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),j?(0,r.jsx)("div",{className:"space-y-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-32 rounded-lg"},s))}):y.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:N,children:"PR Statistics"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(p?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFC6"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(p?"text-gray-400":"text-gray-600"),children:"Total PRs"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-500",children:w.totalPRs}),(0,r.jsx)("p",{className:"text-xs ".concat(p?"text-gray-500":"text-gray-600"),children:"records set"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(p?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFCB️"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(p?"text-gray-400":"text-gray-600"),children:"Weight PRs"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:w.weightPRs}),(0,r.jsx)("p",{className:"text-xs ".concat(p?"text-gray-500":"text-gray-600"),children:"max weight"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(p?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCA"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(p?"text-gray-400":"text-gray-600"),children:"Volume PRs"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-500",children:w.volumePRs}),(0,r.jsx)("p",{className:"text-xs ".concat(p?"text-gray-500":"text-gray-600"),children:"total volume"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(p?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAF"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(p?"text-gray-400":"text-gray-600"),children:"Exercises"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:w.exercisesWithPRs}),(0,r.jsx)("p",{className:"text-xs ".concat(p?"text-gray-500":"text-gray-600"),children:"with PRs"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(p?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDD25"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(p?"text-gray-400":"text-gray-600"),children:"Recent"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-500",children:w.recentPRs}),(0,r.jsx)("p",{className:"text-xs ".concat(p?"text-gray-500":"text-gray-600"),children:"last 30 days"})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:N,children:"Top Performing Exercises"}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:w.improvements.slice(0,3).map((e,s)=>(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(p?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h5",{className:"font-semibold ".concat(p?"text-background":"text-foreground"),children:e.exercise}),(0,r.jsx)("span",{className:"text-2xl ".concat(0===s?"\uD83E\uDD47":1===s?"\uD83E\uDD48":"\uD83E\uDD49")})]}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:p?"text-gray-400":"text-gray-600",children:"Total PRs:"}),(0,r.jsx)("span",{className:"font-semibold ".concat(p?"text-background":"text-foreground"),children:e.totalPRs})]}),e.weightImprovement>0&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:p?"text-gray-400":"text-gray-600",children:"Weight gain:"}),(0,r.jsxs)("span",{className:"font-semibold text-blue-500",children:["+",e.weightImprovement,"kg"]})]}),e.volumeImprovement>0&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:p?"text-gray-400":"text-gray-600",children:"Volume gain:"}),(0,r.jsxs)("span",{className:"font-semibold text-green-500",children:["+",e.volumeImprovement,"kg"]})]})]})]},e.exercise))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:N,children:"Complete PR Timeline"}),(0,r.jsx)("div",{className:"rounded-lg border ".concat(p?"border-gray-700":"border-gray-200"," max-h-96 overflow-y-auto mobile-table-container"),children:(0,r.jsxs)("div",{className:"mobile-table",children:[(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2 sm:gap-4 px-2 sm:px-4 py-3 text-xs font-medium border-b sticky top-0 ".concat(p?"text-gray-400 border-gray-700 bg-gray-800":"text-gray-600 border-gray-200 bg-gray-50"),children:[(0,r.jsx)("div",{children:"Date"}),(0,r.jsx)("div",{children:"Exercise"}),(0,r.jsx)("div",{children:"Type"}),(0,r.jsx)("div",{children:"Weight"}),(0,r.jsx)("div",{children:"Reps"}),(0,r.jsx)("div",{children:"Volume"}),(0,r.jsx)("div",{children:"1RM Est."})]}),y.sort((e,s)=>new Date(s.workoutDate).getTime()-new Date(e.workoutDate).getTime()).map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-2 sm:gap-4 px-2 sm:px-4 py-3 text-xs sm:text-sm ".concat(s!==y.length-1?"border-b ".concat(p?"border-gray-700":"border-gray-200"):""," ").concat(new Date(e.workoutDate)>new Date(Date.now()-6048e5)?p?"bg-green-900/20":"bg-green-50":""),children:[(0,r.jsx)("div",{className:p?"text-gray-300":"text-gray-700",children:("string"==typeof(t=e.workoutDate)?new Date(t):t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,r.jsx)("div",{className:"font-medium ".concat(p?"text-background":"text-foreground"),children:e.exerciseName}),(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"weight":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"volume":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";default:return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}})(e.recordType)),children:"weight"===e.recordType?"Weight":"Volume"})}),(0,r.jsxs)("div",{className:"font-medium ".concat(p?"text-background":"text-foreground"),children:[e.weight,"kg"]}),(0,r.jsx)("div",{className:p?"text-gray-300":"text-gray-700",children:e.reps}),(0,r.jsxs)("div",{className:"font-medium ".concat(p?"text-background":"text-foreground"),children:[(e.weight*e.reps).toLocaleString(),"kg"]}),(0,r.jsx)("div",{className:"font-medium ".concat(p?"text-background":"text-foreground"),children:e.oneRMEstimate||"-"})]},s)})]})})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 ".concat(p?"text-gray-300":"text-gray-700"),children:"No personal records found"}),(0,r.jsx)("p",{className:"text-sm ".concat(p?"text-gray-400":"text-gray-600"),children:g?"No PRs found for ".concat(g," in the selected time range."):"Complete some workouts to start achieving personal records."})]})]})})}function v(){let[e,s]=(0,a.useState)("month"),[t,l]=(0,a.useState)("both"),[n,c]=(0,a.useState)(!1),{data:o,isLoading:i}=x.F.progress.getPersonalRecords.useQuery({timeRange:e,recordType:t}),d="text-sm font-medium mb-2 text-theme-secondary";return(0,r.jsxs)("div",{className:"transition-all duration-300 rounded-xl border shadow-sm bg-card border-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-theme-primary",children:"Personal Records"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("div",{className:"flex space-x-1 bg-muted rounded-lg p-1",children:["both","weight","volume"].map(e=>(0,r.jsx)("button",{onClick:()=>l(e),className:"px-2 py-1 text-xs font-medium rounded-md transition-all ".concat(t===e?"bg-card text-foreground shadow-sm":"text-theme-secondary hover:text-theme-primary"),children:"both"===e?"All":e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,r.jsx)("div",{className:"flex space-x-1 bg-muted rounded-lg p-1",children:["week","month","year"].map(t=>(0,r.jsx)("button",{onClick:()=>s(t),className:"px-2 py-1 text-xs font-medium rounded-md transition-all ".concat(e===t?"bg-card text-foreground shadow-sm":"text-theme-secondary hover:text-theme-primary"),children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})]}),i?(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"animate-pulse bg-muted h-20 rounded-lg"},s))}):o&&o.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFC6"}),(0,r.jsx)("h3",{className:d,children:"Total PRs"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-500",children:o.length}),(0,r.jsxs)("p",{className:"text-xs text-theme-muted",children:["this ",e]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFCB️"}),(0,r.jsx)("h3",{className:d,children:"Weight PRs"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:o.filter(e=>"weight"===e.recordType).length}),(0,r.jsx)("p",{className:"text-xs text-theme-muted",children:"max weight"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,r.jsx)("h3",{className:d,children:"Volume PRs"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-500",children:o.filter(e=>"volume"===e.recordType).length}),(0,r.jsx)("p",{className:"text-xs text-theme-muted",children:"total volume"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h3",{className:d,children:"Recent Achievements Timeline"}),(0,r.jsx)("button",{onClick:()=>c(!0),className:"btn-secondary",children:"View All History"})]}),(0,r.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border transition-all hover:shadow-md bg-surface border-border hover:border-primary",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case"weight":return"\uD83C\uDFCB️";case"volume":return"\uD83D\uDCCA";default:return"\uD83C\uDFC6"}})(e.recordType)})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("h4",{className:"font-semibold text-theme-primary",children:e.exerciseName}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(e){case"weight":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"volume":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";default:return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}})(e.recordType)),children:"weight"===e.recordType?"Weight PR":"Volume PR"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,r.jsxs)("span",{className:"font-bold text-theme-primary",children:[e.weight,"kg \xd7 ",e.reps]}),"weight"===e.recordType&&e.oneRMEstimate&&(0,r.jsxs)("span",{className:"px-2 py-1 rounded bg-info-muted text-info",children:["~",e.oneRMEstimate,"kg 1RM"]}),"volume"===e.recordType&&(0,r.jsxs)("span",{className:"px-2 py-1 rounded bg-success-muted text-success",children:[(e.weight*e.reps).toLocaleString(),"kg volume"]})]})]})]}),(0,r.jsxs)("div",{className:"text-right flex-shrink-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-theme-secondary",children:new Date(e.workoutDate.toISOString()).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),new Date(e.workoutDate)>new Date(Date.now()-6048e5)&&(0,r.jsx)("div",{className:"flex items-center justify-end mt-1",children:(0,r.jsx)("span",{className:"text-xs text-success font-medium animate-pulse",children:"\uD83C\uDF89 New!"})})]})]},s))})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 text-theme-secondary",children:"No personal records found"}),(0,r.jsxs)("p",{className:"text-sm text-theme-muted",children:["Keep training to achieve new personal records for this ",e,"."]})]}),(0,r.jsx)(p,{isOpen:n,onClose:()=>c(!1)})]})}function j(){let{data:e,isLoading:s}=x.F.progress.getPersonalRecords.useQuery({timeRange:"month",recordType:"both"}),{data:t,isLoading:a}=x.F.progress.getConsistencyStats.useQuery({timeRange:"month"}),{data:l,isLoading:n}=x.F.progress.getVolumeProgression.useQuery({timeRange:"month"}),c="text-sm font-medium mb-2 text-theme-secondary",o=(()=>{if(!t||!e||!l)return null;let s=e.length,r=t.currentStreak,a=l.reduce((e,s)=>e+s.totalVolume,0);return s>=3?{emoji:"\uD83D\uDE80",title:"On Fire!",message:"".concat(s," new PRs this month! You're crushing it!"),color:"text-green-500"}:r>=7?{emoji:"\uD83D\uDD25",title:"Streak Master!",message:"".concat(r," day streak! Consistency is key!"),color:"text-orange-500"}:a>1e4?{emoji:"\uD83D\uDCAA",title:"Volume Beast!",message:"".concat(a.toLocaleString(),"kg moved this month!"),color:"text-blue-500"}:{emoji:"\uD83C\uDFAF",title:"Keep Going!",message:"Every workout counts. You're building something great!",color:"text-purple-500"}})(),i=[];if(e&&e.length>0&&i.push({category:"pr",level:e.length>=5?"gold":e.length>=3?"silver":"bronze",title:"".concat(e.length," New PRs"),description:"Personal records this month",value:e.length}),(null==t?void 0:t.currentStreak)&&t.currentStreak>=3&&i.push({category:"streak",level:t.currentStreak>=14?"gold":t.currentStreak>=7?"silver":"bronze",title:"".concat(t.currentStreak," Day Streak"),description:"Consecutive workout days",value:t.currentStreak}),(null==t?void 0:t.frequency)&&t.frequency>=3&&i.push({category:"consistency",level:"gold",title:"Consistency Master",description:"".concat(t.frequency,"x per week average"),value:t.frequency}),l){let e=l.reduce((e,s)=>e+s.totalVolume,0);e>5e3&&i.push({category:"volume",level:e>=2e4?"gold":e>=1e4?"silver":"bronze",title:"Volume Champion",description:"".concat(e.toLocaleString(),"kg total volume"),value:e})}let d=s||a||n;return(0,r.jsxs)("div",{className:"transition-all duration-300 rounded-xl border shadow-sm bg-card border-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-theme-primary",children:"This Month's Achievements"}),(0,r.jsxs)("p",{className:c,suppressHydrationWarning:!0,children:["Your progress highlights for ",new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),o&&(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:o.emoji}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold ".concat(o.color),children:o.title}),(0,r.jsx)("p",{className:"text-xs text-theme-muted",children:"Keep it up!"})]})]})})]}),d?(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"animate-pulse bg-muted h-20 rounded-lg"},s))}):(0,r.jsxs)(r.Fragment,{children:[o&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-lg border-l-4 ".concat(o.color.includes("green")?"border-green-500 bg-green-50 dark:bg-green-900/20":o.color.includes("orange")?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":o.color.includes("blue")?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-purple-500 bg-purple-50 dark:bg-purple-900/20"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-3xl",children:o.emoji}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold ".concat(o.color),children:o.title}),(0,r.jsx)("p",{className:"text-theme-secondary",children:o.message})]})]})}),i.length>0?(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:c,children:"Achievement Badges"}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((e,s)=>(0,r.jsxs)("div",{className:"relative p-4 rounded-xl border transition-all duration-200 hover:scale-105 border-border bg-surface",children:[(0,r.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 rounded-full bg-gradient-to-br ".concat((e=>{switch(e){case"gold":return"from-yellow-400 to-yellow-600";case"silver":return"from-gray-300 to-gray-500";case"bronze":return"from-orange-400 to-orange-600"}})(e.level)," flex items-center justify-center shadow-lg"),children:(0,r.jsx)("span",{className:"text-background text-xs font-bold",children:"gold"===e.level?"\uD83E\uDD47":"silver"===e.level?"\uD83E\uDD48":"\uD83E\uDD49"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case"strength":return"\uD83C\uDFCB️";case"consistency":return"\uD83D\uDD25";case"volume":return"\uD83D\uDCC8";case"pr":return"\uD83C\uDFC6";case"streak":return"⚡";default:return"⭐"}})(e.category)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-theme-primary",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-theme-secondary",children:e.description})]})]})]},s))})]}):null,e&&e.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:c,children:"Recent Personal Records"}),(0,r.jsx)("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:e.slice(0,5).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-all bg-surface hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-xl",children:"weight"===e.recordType?"\uD83C\uDFCB️":"\uD83D\uDCCA"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-theme-primary",children:e.exerciseName}),(0,r.jsx)("p",{className:"text-sm text-theme-secondary",children:"weight"===e.recordType?"Weight PR":"Volume PR"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-bold text-theme-primary",children:[e.weight,"kg \xd7 ",e.reps]}),new Date(e.workoutDate)>new Date(Date.now()-6048e5)&&(0,r.jsx)("span",{className:"text-xs text-success animate-pulse",children:"\uD83C\uDD95 New!"})]})]},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:c,children:"Monthly Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAF"}),(0,r.jsx)("h4",{className:"text-xs font-medium text-theme-secondary",children:"Workouts"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-500",children:(null==t?void 0:t.totalWorkouts)||0})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFC6"}),(0,r.jsx)("h4",{className:"text-xs font-medium text-theme-secondary",children:"New PRs"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-500",children:(null==e?void 0:e.length)||0})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDD25"}),(0,r.jsx)("h4",{className:"text-xs font-medium text-theme-secondary",children:"Streak"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:(null==t?void 0:t.currentStreak)||0}),(0,r.jsx)("p",{className:"text-xs text-theme-muted",children:"days"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCAA"}),(0,r.jsx)("h4",{className:"text-xs font-medium text-theme-secondary",children:"Volume"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-purple-500",children:[l?Math.round(l.reduce((e,s)=>e+s.totalVolume,0)/1e3):0,"k"]}),(0,r.jsx)("p",{className:"text-xs text-theme-muted",children:"kg moved"})]})]})]})]}),!d&&0===i.length&&(!e||0===e.length)&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 text-theme-secondary",children:"Start Your Achievement Journey"}),(0,r.jsx)("p",{className:"text-sm text-theme-muted",children:"Complete workouts this month to unlock achievements and track your progress."})]})]})}function b(e){var s,t;let{isOpen:a,onClose:l,exerciseName:n,timeRange:c}=e,{theme:o,resolvedTheme:i}=(0,m.W)(),d="system"!==o||"system"===o&&"dark"===i,{data:h,isLoading:g}=x.F.progress.getStrengthProgression.useQuery({exerciseName:n,timeRange:c},{enabled:!!n&&a});if(!a)return null;let u="text-sm font-medium mb-2 ".concat(d?"text-gray-300":"text-gray-700 dark:text-gray-300"),p=(()=>{if(!h||0===h.length)return null;let e=h.map(e=>e.weight),s=h.map(e=>e.oneRMEstimate),t=Math.max(...e),r=Math.max(...e),a=e.reduce((e,s)=>e+s,0)/e.length,l=Math.max(...s),n=h[h.length-1],c=h[0],o=n&&c?c.weight-n.weight:0,i=n?o/n.weight*100:0,d=h.reduce((e,s)=>e+s.weight*s.reps*s.sets,0),x=d/h.length,m=h.length,g=h.reduce((e,s)=>e+s.sets,0),u=h.reduce((e,s)=>e+s.reps*s.sets,0),p=Math.ceil((h.length>1?new Date(h[0].workoutDate).getTime()-new Date(h[h.length-1].workoutDate).getTime():0)/864e5);return{currentMax:t,allTimeMax:r,averageWeight:Math.round(10*a)/10,bestOneRM:l,totalProgress:Math.round(10*o)/10,progressPercentage:Math.round(10*i)/10,totalVolume:Math.round(d),avgVolumePerSession:Math.round(x),totalSessions:m,totalSets:g,totalReps:u,sessionsPerWeek:Math.round(10*(p>0?m/p*7:0))/10,daysSpanned:p}})();return(0,r.jsx)("div",{className:"fixed inset-0 bg-background bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)("div",{className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-xl ".concat("transition-all duration-300 rounded-xl border shadow-sm ".concat(d?"bg-gray-900 border-gray-800 shadow-lg":"bg-background border-gray-200 dark:bg-gray-900 dark:border-gray-800")," p-6"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4 ".concat(d?"text-foreground":"text-foreground dark:text-foreground"),children:"Detailed Strength Analysis"}),(0,r.jsxs)("p",{className:u,children:[n," - ",c.charAt(0).toUpperCase()+c.slice(1)," View"]})]}),(0,r.jsx)("button",{onClick:l,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200 ".concat(d?"bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700":"bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-200"),children:"✕ Close"})]}),g?(0,r.jsx)("div",{className:"space-y-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-32 rounded-lg"},s))}):p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:u,children:"Performance Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFCB️"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Current Max"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-blue-500",children:[p.currentMax,"kg"]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83C\uDFAF"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Best 1RM Est."})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-500",children:[p.bestOneRM,"kg"]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:(s=p.progressPercentage)>10?"\uD83D\uDE80":s>0?"\uD83D\uDCC8":s>-5?"\uD83D\uDCCA":"\uD83D\uDCC9"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Total Progress"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold ".concat((t=p.progressPercentage)>10?"text-green-500":t>0?"text-blue-500":t>-5?"text-yellow-500":"text-red-500"),children:[p.totalProgress>0?"+":"",p.totalProgress,"kg"]}),(0,r.jsxs)("p",{className:"text-xs ".concat(d?"text-gray-500":"text-gray-600"),children:["(",p.progressPercentage>0?"+":"",p.progressPercentage,"%)"]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCA"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Avg Weight"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-purple-500",children:[p.averageWeight,"kg"]})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:u,children:"Volume Analysis"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCC8"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Total Volume"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-orange-500",children:[p.totalVolume.toLocaleString(),"kg"]}),(0,r.jsx)("p",{className:"text-xs mt-1 ".concat(d?"text-gray-500":"text-gray-600"),children:"across all sessions"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"⚡"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Avg per Session"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-cyan-500",children:[p.avgVolumePerSession.toLocaleString(),"kg"]}),(0,r.jsx)("p",{className:"text-xs mt-1 ".concat(d?"text-gray-500":"text-gray-600"),children:"volume per workout"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDD22"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Total Reps"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-indigo-500",children:p.totalReps.toLocaleString()}),(0,r.jsxs)("p",{className:"text-xs mt-1 ".concat(d?"text-gray-500":"text-gray-600"),children:["in ",p.totalSets," sets"]})]})]})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h4",{className:u,children:"Training Consistency"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCC5"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Total Sessions"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold text-emerald-500",children:p.totalSessions}),(0,r.jsxs)("p",{className:"text-xs mt-1 ".concat(d?"text-gray-500":"text-gray-600"),children:["over ",p.daysSpanned," days"]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCA"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Frequency"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-teal-500",children:[p.sessionsPerWeek,"x"]}),(0,r.jsx)("p",{className:"text-xs mt-1 ".concat(d?"text-gray-500":"text-gray-600"),children:"per week average"})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg ".concat(d?"bg-gray-800":"bg-gray-50"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"text-xl",children:"⭐"}),(0,r.jsx)("h5",{className:"text-xs font-medium ".concat(d?"text-gray-400":"text-gray-600"),children:"Consistency"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold ".concat(p.sessionsPerWeek>=2?"text-green-500":p.sessionsPerWeek>=1?"text-yellow-500":"text-red-500"),children:p.sessionsPerWeek>=2?"Great":p.sessionsPerWeek>=1?"Good":"Low"}),(0,r.jsx)("p",{className:"text-xs mt-1 ".concat(d?"text-gray-500":"text-gray-600"),children:"training regularity"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:u,children:"Complete Session History"}),(0,r.jsx)("div",{className:"rounded-lg border ".concat(d?"border-gray-700":"border-gray-200"," overflow-hidden max-h-64 overflow-y-auto mobile-table-container"),children:(0,r.jsxs)("div",{className:"mobile-table",children:[(0,r.jsxs)("div",{className:"grid grid-cols-6 gap-2 sm:gap-4 px-2 sm:px-4 py-3 text-xs font-medium border-b sticky top-0 ".concat(d?"text-gray-400 border-gray-700 bg-gray-800":"text-gray-600 border-gray-200 bg-gray-50"),children:[(0,r.jsx)("div",{children:"Date"}),(0,r.jsx)("div",{children:"Weight"}),(0,r.jsx)("div",{children:"Reps"}),(0,r.jsx)("div",{children:"Sets"}),(0,r.jsx)("div",{children:"Volume"}),(0,r.jsx)("div",{children:"1RM Est."})]}),null==h?void 0:h.map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"grid grid-cols-6 gap-2 sm:gap-4 px-2 sm:px-4 py-3 text-xs sm:text-sm ".concat(s!==(null!=(t=null==h?void 0:h.length)?t:0)-1?"border-b ".concat(d?"border-gray-700":"border-gray-200"):""," ").concat(0===s?d?"bg-blue-900/20":"bg-blue-50":""),children:[(0,r.jsx)("div",{className:d?"text-gray-300":"text-gray-700",children:new Date(e.workoutDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,r.jsxs)("div",{className:"font-medium ".concat("text-foreground"),children:[e.weight,"kg"]}),(0,r.jsx)("div",{className:d?"text-gray-300":"text-gray-700",children:e.reps}),(0,r.jsx)("div",{className:d?"text-gray-300":"text-gray-700",children:e.sets}),(0,r.jsxs)("div",{className:"font-medium ".concat("text-foreground"),children:[(e.weight*e.reps*e.sets).toLocaleString(),"kg"]}),(0,r.jsxs)("div",{className:"font-medium ".concat("text-foreground"),children:[e.oneRMEstimate,"kg"]})]},s)})]})})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 ".concat(d?"text-gray-300":"text-gray-700"),children:"No strength data found"}),(0,r.jsxs)("p",{className:"text-sm ".concat(d?"text-gray-400":"text-gray-600"),children:["Complete some workouts with ",n," to see detailed analysis."]})]})]})})}function y(){let[e,s]=(0,a.useState)(""),[t,l]=(0,a.useState)("month"),[n,c]=(0,a.useState)(!1),{data:o,isLoading:i}=x.F.progress.getExerciseList.useQuery(),{data:d,isLoading:m}=x.F.progress.getStrengthProgression.useQuery({exerciseName:e,timeRange:t},{enabled:!!e}),h="text-sm font-medium mb-2 text-content-secondary",g=d?Math.max(...d.map(e=>e.weight)):0,u=d?Math.min(...d.map(e=>e.weight)):0,p=g-u||1,v=d?[...d].reverse():[];return(0,r.jsxs)("div",{className:"transition-all duration-300 rounded-xl border shadow-sm glass-surface p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-content-primary",children:"Strength Progression"}),(0,r.jsx)("div",{className:"flex space-x-1 bg-surface-secondary rounded-lg p-1 border border-default",children:["week","month","year"].map(e=>(0,r.jsx)("button",{onClick:()=>l(e),className:"px-2 py-1 text-xs font-medium rounded-md transition-all ".concat(t===e?"bg-[var(--color-primary)] text-background shadow-sm":"text-content-muted hover:text-content-primary"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"exercise-select",className:h,children:"Select Exercise"}),i?(0,r.jsx)("div",{className:"animate-pulse bg-surface-secondary h-10 rounded-lg"}):(0,r.jsxs)("select",{id:"exercise-select",value:e,onChange:e=>s(e.target.value),className:"px-3 py-2 text-sm rounded-lg border transition-colors bg-surface-secondary border-default text-content-primary focus:border-interactive-primary w-full",children:[(0,r.jsx)("option",{value:"",children:"Choose an exercise..."}),null==o?void 0:o.map(e=>(0,r.jsx)("option",{value:e.exerciseName,children:e.exerciseName},e.exerciseName))]})]}),e?(0,r.jsx)(r.Fragment,{children:m?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"animate-pulse bg-surface-secondary h-64 rounded-lg"}),(0,r.jsx)("div",{className:"animate-pulse bg-surface-secondary h-32 rounded-lg"})]}):d&&d.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:h,children:"Top Set Weight Progress"}),(0,r.jsx)("div",{className:"relative h-64 p-4 rounded-lg bg-surface-secondary border border-default",children:(0,r.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 200",children:[(0,r.jsx)("defs",{children:(0,r.jsx)("pattern",{id:"grid",width:"40",height:"20",patternUnits:"userSpaceOnUse",children:(0,r.jsx)("path",{d:"M 40 0 L 0 0 0 20",fill:"none",stroke:"var(--color-border)",strokeWidth:"0.5"})})}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),v.map((e,s)=>{let t=s/Math.max(1,v.length-1)*360+20,a=180-(e.weight-u)/p*160;return(0,r.jsxs)("g",{children:[s<v.length-1&&(0,r.jsx)("line",{x1:t,y1:a,x2:(s+1)/Math.max(1,v.length-1)*360+20,y2:180-(v[s+1].weight-u)/p*160,stroke:"var(--color-chart-1)",strokeWidth:"3",opacity:"0.8"}),(0,r.jsx)("circle",{cx:t,cy:a,r:"4",fill:"var(--color-chart-1)",stroke:"white",strokeWidth:"2",className:"hover:r-6 cursor-pointer transition-all",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.1))"}}),(0,r.jsxs)("text",{x:t,y:a-10,textAnchor:"middle",className:"text-xs font-medium",fill:"var(--color-text)",children:[e.weight,"kg"]})]},s)}),(0,r.jsxs)("text",{x:"10",y:"20",className:"text-xs font-medium",fill:"var(--color-text-secondary)",children:[g,"kg"]}),(0,r.jsxs)("text",{x:"10",y:"190",className:"text-xs font-medium",fill:"var(--color-text-secondary)",children:[u,"kg"]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface-secondary border border-default",children:[(0,r.jsx)("p",{className:h,children:"Current Max"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-[var(--color-primary)]",children:[Math.max(...d.map(e=>e.weight)),"kg"]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface-secondary border border-default",children:[(0,r.jsx)("p",{className:h,children:"Best 1RM Est."}),(0,r.jsxs)("p",{className:"text-xl font-bold text-[var(--color-success)]",children:[Math.max(...d.map(e=>e.oneRMEstimate)),"kg"]})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface-secondary border border-default",children:[(0,r.jsx)("p",{className:h,children:"Sessions"}),(0,r.jsx)("p",{className:"text-xl font-bold text-[var(--color-info)]",children:d.length})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-surface-secondary border border-default",children:[(0,r.jsx)("p",{className:h,children:"Progress"}),(0,r.jsx)("p",{className:"text-xl font-bold ".concat(d.length>=2&&d[0].weight>d[d.length-1].weight?"text-[var(--color-success)]":d.length>=2&&d[0].weight<d[d.length-1].weight?"text-[var(--color-danger)]":"text-content-muted"),children:d.length>=2?"".concat(d[0].weight>d[d.length-1].weight?"+":"").concat((d[0].weight-d[d.length-1].weight).toFixed(1),"kg"):"N/A"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:h,children:"Recent Sessions"}),(0,r.jsx)("button",{onClick:()=>c(!0),className:"btn-secondary",children:"View Details"})]}),(0,r.jsx)("div",{className:"rounded-lg border border-default overflow-hidden mobile-table-container",children:(0,r.jsxs)("div",{className:"mobile-table",children:[(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-2 sm:gap-4 px-2 sm:px-4 py-3 text-xs sm:text-sm font-medium border-b border-default bg-surface-secondary text-content-muted",children:[(0,r.jsx)("div",{children:"Date"}),(0,r.jsx)("div",{children:"Weight"}),(0,r.jsx)("div",{children:"Reps"}),(0,r.jsx)("div",{children:"Sets"}),(0,r.jsx)("div",{children:"1RM Est."})]}),d.slice(0,5).map((e,s)=>(0,r.jsxs)("div",{className:"grid grid-cols-5 gap-2 sm:gap-4 px-2 sm:px-4 py-3 text-xs sm:text-sm ".concat(s!==Math.min(4,d.length-1)?"border-b border-default":""),children:[(0,r.jsx)("div",{className:"text-content-secondary",children:new Date(e.workoutDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,r.jsxs)("div",{className:"font-medium text-content-primary",children:[e.weight,"kg"]}),(0,r.jsx)("div",{className:"text-content-secondary",children:e.reps}),(0,r.jsx)("div",{className:"text-content-secondary",children:e.sets}),(0,r.jsxs)("div",{className:"font-medium text-content-primary",children:[e.oneRMEstimate,"kg"]})]},s))]})})]})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 text-content-secondary",children:"No data found"}),(0,r.jsx)("p",{className:"text-sm text-content-muted",children:"Complete some workouts with this exercise to see your strength progression."})]})}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,r.jsx)("p",{className:"text-lg font-medium mb-2 text-content-secondary",children:"Select an Exercise"}),(0,r.jsx)("p",{className:"text-sm text-content-muted",children:"Choose an exercise from the dropdown to view your strength progression."})]}),(0,r.jsx)(b,{isOpen:n,onClose:()=>c(!1),exerciseName:e,timeRange:t})]})}function N(e){var s,t,l,n,c;let{timeRange:o="month"}=e,[i,d]=(0,a.useState)(!1),{data:m}=x.F.preferences.get.useQuery(),h=null!=(c=null==m?void 0:m.enable_manual_wellness)&&c,g=e=>{switch(e){case"week":return 7;case"month":default:return 30;case"year":return 365}},{data:u,isLoading:p}=x.F.wellness.getHistory.useQuery({limit:50,offset:0,startDate:new Date(Date.now()-24*g(o)*36e5),endDate:new Date},{enabled:h}),{data:v,isLoading:j}=x.F.wellness.getStats.useQuery({days:g(o)},{enabled:h});if(!h)return null;let b=(null==u?void 0:u.map(e=>({date:e.date.toISOString(),energyLevel:e.energy_level||0,sleepQuality:e.sleep_quality||0,hasNotes:!!(e.notes&&e.notes.trim().length>0)})))||[],y=e=>{if(e.length<2)return"stable";let s=e.slice(-3).reduce((e,s)=>e+s,0)/Math.min(3,e.length)-e.slice(0,-3).reduce((e,s)=>e+s,0)/Math.max(1,e.length-3);return s>.5?"improving":s<-.5?"declining":"stable"},N=y(b.map(e=>e.energyLevel)),f=y(b.map(e=>e.sleepQuality)),w=e=>{switch(e){case"improving":return"\uD83D\uDCC8";case"declining":return"\uD83D\uDCC9";default:return"➡️"}},k=e=>{switch(e){case"improving":return"var(--color-success)";case"declining":return"var(--color-danger)";default:return"var(--color-text-muted)"}};return(0,r.jsxs)("div",{className:"transition-all duration-300 glass-surface p-6",children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",style:{color:"var(--color-text)"},children:"\uD83C\uDFAF Wellness Tracking"}),(0,r.jsx)("button",{onClick:()=>d(!i),className:"rounded-lg px-3 py-1 text-sm transition-colors",style:{backgroundColor:"var(--color-bg-surface)",borderColor:"var(--color-border)",color:"var(--color-text)"},children:i?"Hide Details":"Show Details"})]}),(0,r.jsxs)("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--color-bg-surface)"},children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",style:{color:"var(--color-text-secondary)"},children:"Avg Energy Level"}),(0,r.jsx)("span",{style:{color:k(N)},children:w(N)})]}),j?(0,r.jsx)("div",{className:"h-6 w-12 animate-pulse rounded",style:{backgroundColor:"var(--color-border)"}}):(0,r.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:(null==v||null==(s=v.period.avgEnergyLevel)?void 0:s.toFixed(1))||"0.0"}),(0,r.jsx)("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"/10"})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs",style:{color:"var(--color-text-muted)"},children:["Recent: ",(null==v||null==(t=v.recent.avgEnergyLevel)?void 0:t.toFixed(1))||"0.0"]})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--color-bg-surface)"},children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",style:{color:"var(--color-text-secondary)"},children:"Avg Sleep Quality"}),(0,r.jsx)("span",{style:{color:k(f)},children:w(f)})]}),j?(0,r.jsx)("div",{className:"h-6 w-12 animate-pulse rounded",style:{backgroundColor:"var(--color-border)"}}):(0,r.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:(null==v||null==(l=v.period.avgSleepQuality)?void 0:l.toFixed(1))||"0.0"}),(0,r.jsx)("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"/10"})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs",style:{color:"var(--color-text-muted)"},children:["Recent: ",(null==v||null==(n=v.recent.avgSleepQuality)?void 0:n.toFixed(1))||"0.0"]})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4",style:{backgroundColor:"var(--color-bg-surface)"},children:[(0,r.jsx)("h3",{className:"mb-2 text-sm font-medium",style:{color:"var(--color-text-secondary)"},children:"Wellness Entries"}),j?(0,r.jsx)("div",{className:"h-6 w-8 animate-pulse rounded",style:{backgroundColor:"var(--color-border)"}}):(0,r.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,r.jsx)("span",{className:"text-2xl font-bold",style:{color:"var(--color-text)"},children:(null==v?void 0:v.period.totalEntries)||0}),(0,r.jsx)("span",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"entries"})]}),(0,r.jsxs)("div",{className:"mt-1 text-xs",style:{color:"var(--color-text-muted)"},children:["Recent week: ",(null==v?void 0:v.recent.totalEntries)||0]})]})]}),i&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"mb-4 text-lg font-semibold",style:{color:"var(--color-text)"},children:"Recent Wellness History"}),p?(0,r.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"h-16 animate-pulse rounded",style:{backgroundColor:"var(--color-border)"}},s))}):b.length>0?(0,r.jsx)("div",{className:"max-h-80 space-y-3 overflow-y-auto",children:b.slice(0,10).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg p-4",style:{backgroundColor:"var(--color-bg-surface)"},children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"text-sm font-medium",style:{color:"var(--color-text)"},children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.hasNotes&&(0,r.jsx)("span",{className:"rounded px-2 py-1 text-xs",style:{backgroundColor:"color-mix(in oklab, var(--color-primary) 10%, var(--color-bg-surface))",color:"var(--color-primary)"},children:"\uD83D\uDCDD Notes"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-1 text-xs",style:{color:"var(--color-text-muted)"},children:"Energy"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{className:"text-lg font-bold",style:{color:"var(--color-text)"},children:e.energyLevel}),(0,r.jsx)("span",{className:"text-xs",style:{color:"var(--color-text-muted)"},children:"/10"})]}),(0,r.jsx)("div",{className:"mt-1 h-2 w-16 rounded-full",style:{backgroundColor:"var(--color-border)"},children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all",style:{width:"".concat(e.energyLevel/10*100,"%"),backgroundColor:e.energyLevel>=7?"var(--color-success)":e.energyLevel>=4?"var(--color-warning)":"var(--color-danger)"}})})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-1 text-xs",style:{color:"var(--color-text-muted)"},children:"Sleep"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("span",{className:"text-lg font-bold",style:{color:"var(--color-text)"},children:e.sleepQuality}),(0,r.jsx)("span",{className:"text-xs",style:{color:"var(--color-text-muted)"},children:"/10"})]}),(0,r.jsx)("div",{className:"mt-1 h-2 w-16 rounded-full",style:{backgroundColor:"var(--color-border)"},children:(0,r.jsx)("div",{className:"h-full rounded-full transition-all",style:{width:"".concat(e.sleepQuality/10*100,"%"),backgroundColor:e.sleepQuality>=7?"var(--color-success)":e.sleepQuality>=4?"var(--color-warning)":"var(--color-danger)"}})})]})]})]},s))}):(0,r.jsxs)("div",{className:"py-8 text-center",children:[(0,r.jsx)("div",{className:"mb-4 text-4xl",children:"\uD83C\uDFAF"}),(0,r.jsx)("p",{className:"mb-2 text-lg font-medium",style:{color:"var(--color-text)"},children:"No wellness data yet"}),(0,r.jsx)("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:"Start logging your wellness during workouts to see trends and insights here."})]})]}),!i&&b.length>0&&(0,r.jsxs)("div",{className:"mt-4 rounded-lg p-4",style:{backgroundColor:"color-mix(in oklab, var(--color-primary) 5%, var(--color-bg-surface))",borderColor:"var(--color-primary)"},children:[(0,r.jsx)("h4",{className:"mb-2 text-sm font-medium",style:{color:"var(--color-text)"},children:"\uD83D\uDCA1 Quick Insights"}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",style:{color:"var(--color-text-muted)"},children:[(0,r.jsxs)("div",{children:["Energy trend:"," ",(0,r.jsxs)("span",{style:{color:k(N)},children:[w(N)," ",N]})]}),(0,r.jsxs)("div",{children:["Sleep trend:"," ",(0,r.jsxs)("span",{style:{color:k(f)},children:[w(f)," ",f]})]}),(0,r.jsxs)("div",{children:["Latest entry:"," ",b.length>0&&b[0]?new Date(b[0].date).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"None"]})]})]})]})}var f=t(18332),w=t(20243);let k="text-sm font-medium mb-2 text-theme-secondary",D=[{key:"zone_zero_milli",label:"Zone 0",description:"Idle / warm-up",color:"var(--color-chart-1)"},{key:"zone_one_milli",label:"Zone 1",description:"50-60% (Recovery)",color:"var(--color-chart-2)"},{key:"zone_two_milli",label:"Zone 2",description:"60-70% (Base)",color:"var(--color-chart-3)"},{key:"zone_three_milli",label:"Zone 3",description:"70-80% (Aerobic)",color:"var(--color-chart-4)"},{key:"zone_four_milli",label:"Zone 4",description:"80-90% (Threshold)",color:"var(--color-chart-5)"},{key:"zone_five_milli",label:"Zone 5",description:"90-100% (Max)",color:"var(--color-chart-6, var(--color-chart-1))"}],S=e=>{if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&e.trim().length>0){let s=Number(e);return Number.isFinite(s)?s:null}return null},C=e=>null===e?"--":"".concat(Math.round(e),"%");function R(){var e,s,t,a,l,c,o,i,m;let{data:h,isLoading:g}=x.F.whoop.getIntegrationStatus.useQuery(),u=null!=(a=null==h?void 0:h.isConnected)&&a,p=x.F.whoop.getLatestRecoveryData.useQuery(void 0,{enabled:u,retry:0}),v=x.F.whoop.getWorkouts.useQuery(void 0,{enabled:u}),j=p.data,b=null!=(l=v.data)?l:[],y=b[0],N=S(null==j?void 0:j.recovery_score),R=S(null==j?void 0:j.sleep_performance),M=S(null==j?void 0:j.hrv_now_ms),P=S(null==j?void 0:j.hrv_baseline_ms),W=S(null==j?void 0:j.rhr_now_bpm),F=S(null==j?void 0:j.rhr_baseline_bpm),L=null!=(c=(e=>{if(!e||"object"!=typeof e)return null;let s=e.score;return s&&"object"==typeof s?S(s.strain):null})(y))?c:null,T=(e=>{if(!e||"object"!=typeof e)return null;let s=e.score;if(s&&"object"==typeof s){let e=S(s.average_heart_rate);if(null!==e)return e}let t=e.during;return t&&"object"==typeof t?S(t.average_heart_rate):null})(y),A=(e=>{if(!(null==e?void 0:e.start)||!(null==e?void 0:e.end))return null;let s="string"==typeof e.start?new Date(e.start):e.start,t=("string"==typeof e.end?new Date(e.end):e.end).getTime()-s.getTime();return t>0?t/6e4:null})(y),V=(e=>{if(!e||"object"!=typeof e)return[];let s=D.map(s=>{var t;let r=null!=(t=S(e[s.key]))?t:0;return{...s,milliseconds:r}}),t=s.reduce((e,s)=>e+s.milliseconds,0);return 0===t?[]:s.map(e=>({label:e.label,description:e.description,color:e.color,percentage:Math.round(e.milliseconds/t*100)}))})(null!=(o=null==y?void 0:y.zone_duration)?o:null),E=u&&(p.isLoading||v.isLoading),O=null==(s=p.error)||null==(e=s.data)?void 0:e.code,B=null==(t=v.error)?void 0:t.message,H=!!((null==h?void 0:h.isExpired)||"UNAUTHORIZED"===O),_=!E&&!H&&u&&!j&&(0===b.length||"NOT_FOUND"===O),Q=null===N?{emoji:"⚪️",color:"var(--color-muted)",message:"No recovery data yet"}:N>=67?{emoji:"\uD83D\uDFE2",color:"var(--color-success)",message:"You're primed for a hard session"}:N>=34?{emoji:"\uD83D\uDFE1",color:"var(--color-warning)",message:"Dial intensity to a manageable level"}:{emoji:"\uD83D\uDD34",color:"var(--color-danger)",message:"Prioritise recovery work today"},z=null===N?"We need fresh recovery data to tailor training intensity. Run a WHOOP sync to update.":N>=67?"Recovery is in the green. Plan heavy strength or high-intensity work while you’re fresh.":N>=34?"Recovery is moderate. Keep today's work controlled and focus on quality movement.":"Recovery is in the red. Prioritise mobility, zone-2 cardio, or complete rest.",q=((e,s)=>{if(null===e||null===s)return"HRV trend is unavailable. A fresh sync will surface readiness signals.";if(0===s)return"Baseline HRV hasn’t been established yet. Keep syncing to calibrate.";let t=(e-s)/s*100;return t>=5?"HRV is ".concat(t.toFixed(1),"% above baseline — your nervous system is handling the load well."):t<=-5?"HRV is ".concat(Math.abs(t).toFixed(1),"% below baseline — back off volume to recover fully."):"HRV is tracking near baseline. Stay consistent with sleep and hydration to keep it stable."})(M,P),U=((e,s)=>{if(null===e||null===s)return"Resting heart rate baseline not available yet.";let t=e-s;return t<=-2?"Resting HR is ".concat(Math.abs(t).toFixed(1)," bpm below baseline — excellent recovery trend."):t>=3?"Resting HR is ".concat(t.toFixed(1)," bpm above baseline — watch fatigue and consider an easier day."):"Resting HR is holding steady, which supports your current training load."})(W,F);return(0,r.jsxs)("div",{className:"".concat("glass-surface transition-all duration-300 rounded-xl"," p-6"),children:[(0,r.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-theme-primary",children:"WHOOP Integration"}),(0,r.jsx)("p",{className:k,children:"Recovery and performance insights"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"h-3 w-3 rounded-full ".concat(u?"bg-success":"bg-muted"," ").concat(g?"animate-pulse":"")}),(0,r.jsx)("span",{className:"text-theme-secondary text-sm font-medium",children:g?"Checking...":u?H?"Re-auth required":"Connected":"Not Connected"})]})]}),u?(0,r.jsxs)("div",{className:"space-y-8",children:[H&&(0,r.jsx)(f.Fc,{variant:"destructive",children:(0,r.jsxs)(f.TN,{className:"flex flex-col gap-2 text-sm",children:[(0,r.jsx)("span",{children:"Your WHOOP session has expired. Reconnect to resume syncing and keep recovery scores fresh."}),(0,r.jsx)(d.Button,{asChild:!0,size:"sm",variant:"secondary",className:"self-start",children:(0,r.jsx)(n(),{href:"/connect-whoop",children:"Reconnect WHOOP"})})]})}),E?(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-4",children:Array.from({length:4}).map((e,s)=>(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsx)(w.EA,{className:"mb-2 h-4 w-16"}),(0,r.jsx)(w.EA,{className:"h-6 w-24"}),(0,r.jsx)(w.EA,{className:"mt-3 h-3 w-20"})]},s))}):(0,r.jsxs)(r.Fragment,{children:[j&&!H&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:k,children:"Today's Recovery"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:Q.emoji}),(0,r.jsx)("h4",{className:"text-theme-secondary text-xs font-medium",children:"Recovery"})]}),(0,r.jsx)("p",{className:"text-2xl font-bold",style:{color:Q.color},children:C(N)}),(0,r.jsx)("p",{className:"text-theme-muted text-xs",children:Q.message})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:null===L?"\uD83D\uDE0C":L>=18?"\uD83D\uDD25":L>=14?"⚡":L>=10?"\uD83D\uDCAA":"\uD83D\uDE42"}),(0,r.jsx)("h4",{className:"text-theme-secondary text-xs font-medium",children:"Latest Strain"})]}),(0,r.jsx)("p",{className:"text-warning text-2xl font-bold",children:null!==L?L.toFixed(1):"--"}),(0,r.jsx)("p",{className:"text-theme-muted text-xs",children:T?"".concat(Math.round(T)," bpm avg HR"):"Awaiting synced workout"})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDE34"}),(0,r.jsx)("h4",{className:"text-theme-secondary text-xs font-medium",children:"Sleep Performance"})]}),(0,r.jsx)("p",{className:"text-info text-2xl font-bold",children:C(R)}),(0,r.jsx)("p",{className:"text-theme-muted text-xs",children:null!==R?"Relative to WHOOP target":"Sync sleep data to populate"})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"mb-1 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCA"}),(0,r.jsx)("h4",{className:"text-theme-secondary text-xs font-medium",children:"HRV (ms)"})]}),(0,r.jsx)("p",{className:"text-primary text-2xl font-bold",children:null!==M?Math.round(M):"--"}),(0,r.jsxs)("p",{className:"text-theme-muted text-xs",children:["Baseline"," ",null!==P?Math.round(P):"--"]})]})]})]}),_&&(0,r.jsx)("div",{className:"bg-surface text-theme-secondary rounded-lg p-6 text-center text-sm",children:"No cached WHOOP data yet. Run a sync from the workouts page to pull your latest recovery metrics."}),y&&!H&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:k,children:"Latest WHOOP Workout"}),(0,r.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-theme-secondary text-xs",children:"Sport"}),(0,r.jsx)("p",{className:"text-theme-primary text-lg font-semibold",children:null!=(i=y.sport_name)?i:"Workout"})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-theme-secondary text-xs",children:"When"}),(0,r.jsx)("p",{className:"text-theme-primary text-lg font-semibold",children:(e=>{if(!e)return"--";let s="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-GB",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}).format(s)})(null!=(m=null==y?void 0:y.start)?m:null)})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-theme-secondary text-xs",children:"Duration"}),(0,r.jsx)("p",{className:"text-theme-primary text-lg font-semibold",children:(e=>{if(null===e)return"--";let s=Math.round(e),t=Math.floor(s/60),r=s%60;return t>0?"".concat(t,"h ").concat(r,"m"):"".concat(r,"m")})(A)})]})]})]}),V.length>0&&!H&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:k,children:"Heart Rate Zones (last workout)"}),(0,r.jsx)("div",{className:"bg-surface rounded-lg p-4",children:(0,r.jsx)("div",{className:"space-y-3",children:V.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-1 items-center space-x-3",children:[(0,r.jsx)("div",{className:"h-4 w-4 rounded",style:{backgroundColor:e.color}}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-theme-primary text-sm font-medium",children:e.label}),(0,r.jsx)("p",{className:"text-theme-secondary text-xs",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"bg-muted h-2 w-24 rounded-full",children:(0,r.jsx)("div",{className:"h-2 rounded-full",style:{width:"".concat(e.percentage,"%"),backgroundColor:e.color}})}),(0,r.jsxs)("span",{className:"text-theme-secondary w-10 text-right text-sm font-medium",children:[e.percentage,"%"]})]})]},e.label))})})]}),B&&!H&&(0,r.jsx)(f.Fc,{variant:"destructive",children:(0,r.jsxs)(f.TN,{className:"text-sm",children:["Failed to load WHOOP workouts: ",B]})}),!H&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"border-l-success bg-surface rounded-lg border-l-4 p-4",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCA1"}),(0,r.jsx)("h4",{className:"text-theme-primary font-medium",children:"Training Recommendation"})]}),(0,r.jsx)("p",{className:"text-theme-secondary text-sm",children:z})]}),(0,r.jsxs)("div",{className:"border-l-info bg-surface rounded-lg border-l-4 p-4",children:[(0,r.jsxs)("div",{className:"mb-2 flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"\uD83D\uDCC8"}),(0,r.jsx)("h4",{className:"text-theme-primary font-medium",children:"Recovery Signals"})]}),(0,r.jsx)("p",{className:"text-theme-secondary mb-2 text-sm",children:q}),(0,r.jsx)("p",{className:"text-theme-muted text-xs",children:U})]})]})]})]}):(0,r.jsxs)("div",{className:"py-12 text-center",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-pink-500",children:(0,r.jsx)("span",{className:"text-background text-2xl font-bold",children:"W"})}),(0,r.jsx)("h3",{className:"text-theme-primary mb-2 text-lg font-semibold",children:"Connect Your WHOOP Device"}),(0,r.jsx)("p",{className:"text-theme-secondary mb-6 text-sm",children:"Sync recovery, strain, and sleep data to unlock personalised coaching."})]}),(0,r.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsx)("div",{className:"mb-2 text-2xl",children:"\uD83D\uDCA4"}),(0,r.jsx)("h4",{className:"text-theme-primary font-medium",children:"Sleep Tracking"}),(0,r.jsx)("p",{className:"text-theme-secondary text-xs",children:"Monitor sleep quality and recovery"})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsx)("div",{className:"mb-2 text-2xl",children:"❤️"}),(0,r.jsx)("h4",{className:"text-theme-primary font-medium",children:"Heart Rate Zones"}),(0,r.jsx)("p",{className:"text-theme-secondary text-xs",children:"Optimise training intensity"})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,r.jsx)("div",{className:"mb-2 text-2xl",children:"\uD83D\uDD0B"}),(0,r.jsx)("h4",{className:"text-theme-primary font-medium",children:"Recovery Insights"}),(0,r.jsx)("p",{className:"text-theme-secondary text-xs",children:"Know when to push or recover"})]})]}),(0,r.jsx)(n(),{href:"/connect-whoop",className:"text-background inline-block rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 font-medium shadow-lg transition-all hover:scale-105 hover:from-purple-600 hover:to-pink-600",children:"Connect WHOOP"})]})]})}function M(){var e,s,t,l,n,m;let[h,p]=(0,a.useState)("month"),{data:b,isLoading:f}=x.F.progress.getVolumeProgression.useQuery({timeRange:h}),{data:w,isLoading:k}=x.F.progress.getConsistencyStats.useQuery({timeRange:h}),{data:D,isLoading:S}=x.F.progress.getExerciseList.useQuery(),C="bg-card/90 border border-border rounded-lg shadow-sm transition-all duration-300 card-interactive hover:-translate-y-1 hover:shadow-xl",M=(0,a.useMemo)(()=>b?b.reduce((e,s)=>{var t;return e+(null!=(t=s.totalVolume)?t:0)},0):0,[b]),P=(0,a.useMemo)(()=>{var e,s,t,r;if(!b||b.length<2)return 0;let a=null!=(t=null==(e=b[0])?void 0:e.totalVolume)?t:0;return(null!=(r=null==(s=b[b.length-1])?void 0:s.totalVolume)?r:0)-a},[b]),W=(null!=(e=null==w?void 0:w.frequency)?e:0)-3,F=(0,r.jsx)("div",{className:"flex items-center gap-2 rounded-full bg-muted/40 p-1",children:["week","month","year"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>p(e),"aria-pressed":h===e,className:(0,c.cn)("rounded-full px-3 py-1.5 text-xs font-semibold uppercase tracking-wide transition-colors",h===e?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:bg-primary/10"),children:e},e))});return(0,r.jsxs)(o,{title:"Progress Dashboard",description:"Readiness, PRs, and habits that keep your training on track.",backHref:"/",backLabel:"Dashboard",actions:F,contentClassName:"space-y-10",children:[(0,r.jsx)("nav",{className:"flex flex-wrap gap-2","aria-label":"Progress sections",children:[{href:"#achievements",label:"Achievements"},{href:"#personal-records",label:"PRs"},{href:"#consistency",label:"Consistency"},{href:"#wellness",label:"Wellness"},{href:"#whoop",label:"Whoop"}].map(e=>(0,r.jsx)("a",{href:e.href,className:(0,c.cn)((0,d.r)({variant:"ghost",size:"sm"}),"rounded-full border border-border/50 text-xs uppercase tracking-wide text-muted-foreground hover:border-primary/40 hover:text-primary"),children:e.label},e.href))}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:C+" p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2 text-[var(--color-card-heading)]",children:"Total Volume"}),f?(0,r.jsx)("div",{className:"animate-pulse h-8 w-20 rounded bg-border"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"text-2xl font-serif font-black text-foreground",children:[M.toLocaleString()," kg"]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:P>=0?"+".concat(Math.round(P)," kg vs. start of ").concat(h):"".concat(Math.round(P)," kg vs. start of ").concat(h)})]})]}),(0,r.jsxs)("div",{className:C+" p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2 text-[var(--color-card-heading)]",children:"Workouts"}),k?(0,r.jsx)("div",{className:"animate-pulse h-8 w-12 rounded bg-border"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-2xl font-serif font-black text-foreground",children:null!=(s=null==w?void 0:w.totalWorkouts)?s:0}),(0,r.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"".concat("week"===h?"This week":"Last ".concat(h)," you logged ").concat(null!=(t=null==w?void 0:w.totalWorkouts)?t:0," sessions.")})]})]}),(0,r.jsxs)("div",{className:C+" p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2 text-[var(--color-card-heading)]",children:"Weekly Frequency"}),k?(0,r.jsx)("div",{className:"animate-pulse h-8 w-16 rounded bg-border"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"text-2xl font-serif font-black text-foreground",children:[null!=(l=null==w?void 0:w.frequency)?l:0,"x"]}),(0,r.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"".concat(W>=0?"+":"").concat(W.toFixed(1)," vs. target of ").concat(3,"/week")})]})]}),(0,r.jsxs)("div",{className:C+" p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium mb-2 text-[var(--color-card-heading)]",children:"Current Streak"}),k?(0,r.jsx)("div",{className:"animate-pulse h-8 w-12 rounded bg-border"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"text-2xl font-serif font-black text-foreground",children:[null!=(n=null==w?void 0:w.currentStreak)?n:0," days"]}),(0,r.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground",children:["Longest streak: ",null!=(m=null==w?void 0:w.longestStreak)?m:0," days"]})]})]})]}),(0,r.jsxs)("section",{id:"achievements",className:"space-y-4",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Recent achievements"}),(0,r.jsxs)(i.E,{variant:"secondary",className:"bg-primary/10 text-primary",children:["Last ",h]})]}),(0,r.jsx)(j,{})]}),(0,r.jsxs)("section",{className:C+" p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-serif font-black mb-4 gradient-text-accent",children:"Your Exercises"}),S?(0,r.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"animate-pulse h-12 rounded bg-border"},s))}):D&&D.length>0?(0,r.jsx)("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:D.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted hover:bg-primary/5 transition-colors",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-foreground",children:e.exerciseName}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last used: ",new Date(e.lastUsed).toLocaleDateString()]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsxs)("p",{className:"text-sm font-medium text-muted-foreground",children:[e.totalSets," sets"]})})]},s))}):(0,r.jsx)("p",{className:"text-center py-8 text-muted-foreground",children:"No exercises found. Complete some workouts to see your progress!"})]}),(0,r.jsx)("section",{id:"personal-records",children:(0,r.jsx)(v,{})}),(0,r.jsx)("section",{id:"volume",children:(0,r.jsx)(y,{})}),(0,r.jsx)("section",{children:(0,r.jsx)(u,{})}),(0,r.jsx)("section",{id:"consistency",children:(0,r.jsx)(g,{})}),(0,r.jsx)("section",{id:"wellness",children:(0,r.jsx)(N,{timeRange:h})}),(0,r.jsx)("section",{id:"whoop",children:(0,r.jsx)(R,{})})]})}},52235:(e,s,t)=>{Promise.resolve().then(t.bind(t,14240))},64053:(e,s,t)=>{"use strict";t.d(s,{ThemeProvider:()=>o,W:()=>i});var r=t(95155),a=t(12115);let l=(0,a.createContext)(void 0),n="theme";function c(e,s){let t=document.documentElement,r="system"===e?s?"dark":"light":e;t.dataset.theme=r,t.dataset.themeMode=e,t.classList.toggle("dark","dark"===r)}function o(e){let{children:s}=e,[t,o]=(0,a.useState)("system"),[i,d]=(0,a.useState)(()=>{var e,s,t,r;return null!=(r=null==(s=(t=window).matchMedia)||null==(e=s.call(t,"(prefers-color-scheme: dark)"))?void 0:e.matches)&&r}),x=(0,a.useMemo)(()=>"system"===t?i?"dark":"light":t,[t,i]);(0,a.useEffect)(()=>{var e,s;let t=null!=(s=localStorage.getItem(n))?s:"system";o(t);let r=window.matchMedia("(prefers-color-scheme: dark)"),a=r.matches;d(a),c(t,a);let l=e=>{d(e.matches)};return null==(e=r.addEventListener)||e.call(r,"change",l),()=>{var e;return null==(e=r.removeEventListener)?void 0:e.call(r,"change",l)}},[]),(0,a.useEffect)(()=>{c(t,i)},[t,i]);let m=(0,a.useCallback)(e=>{o(e);try{localStorage.setItem(n,e)}catch(e){}c(e,i)},[i]),h=(0,a.useCallback)(()=>{m("dark"===t?"light":"dark")},[t,m]),g=(0,a.useMemo)(()=>({theme:t,resolvedTheme:x,setTheme:m,toggle:h}),[t,x,m,h]);return(0,r.jsx)(l.Provider,{value:g,children:s})}function i(){let e=a.useContext(l);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}}},e=>{e.O(0,[274,8096,126,842,8441,7358],()=>e(e.s=52235)),_N_E=e.O()}]);