(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3814],{45834:(e,t,s)=>{"use strict";s.d(t,{TemplatesList:()=>N});var a=s(95155),r=s(52619),l=s.n(r),i=s(12115),n=s(27830),o=s(86651),d=s(66630),c=s(3998),m=s(65142),u=s(11186),h=s(64269);let p={recent:"Recently created",lastUsed:"Last used",mostUsed:"Most used",name:"Name A-Z"};function x(e){var t;let{value:s,onChange:r,className:l,tags:i}=e;return(0,a.jsxs)("div",{className:(0,h.cn)("flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",l),children:[(0,a.jsxs)("div",{className:"flex w-full items-center gap-2 sm:max-w-sm",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(o.A,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(m.p,{value:s.search,onChange:e=>r({...s,search:e.target.value}),placeholder:"Search templates","aria-label":"Search templates",className:"pl-9"})]}),s.search&&(0,a.jsx)(c.Button,{variant:"ghost",size:"icon","aria-label":"Clear search",onClick:()=>r({...s,search:""}),children:"\xd7"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(u.l6,{value:s.sort,onValueChange:e=>r({...s,sort:e}),children:[(0,a.jsx)(u.bq,{className:"w-48",children:(0,a.jsx)(u.yv,{placeholder:"Sort"})}),(0,a.jsx)(u.gC,{children:Object.entries(p).map(e=>{let[t,s]=e;return(0,a.jsx)(u.eb,{value:t,children:s},t)})})]}),i&&i.length>0?(0,a.jsxs)(u.l6,{value:null!=(t=s.tag)?t:"all",onValueChange:e=>r({...s,tag:"all"===e?null:e}),children:[(0,a.jsx)(u.bq,{className:"w-40",children:(0,a.jsx)(u.yv,{placeholder:"Focus"})}),(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(u.eb,{value:"all",children:"All focuses"}),i.map(e=>(0,a.jsx)(u.eb,{value:e,children:e},e))]})]}):(0,a.jsx)(c.Button,{variant:"outline",size:"icon",className:"sm:hidden","aria-label":"Additional filters",disabled:!0,children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]})]})}var g=s(73401),f=s(11647),v=s(86948),j=s(20243),w=s(60080),y=s(80842);let b=[{tag:"Upper body",keywords:/(bench|press|row|pull|push|curl|dip|shoulder|chest)/i},{tag:"Lower body",keywords:/(squat|deadlift|leg|lunge|glute|hamstring|quad|calf)/i},{tag:"Posterior chain",keywords:/(deadlift|row|pull|hip thrust|hinge|romanian)/i},{tag:"Core",keywords:/(core|abs|plank|crunch|rollout|hollow)/i},{tag:"Conditioning",keywords:/(cardio|interval|bike|rower|erg|sprint|hiit|conditioning)/i},{tag:"Olympic",keywords:/(clean|snatch|jerk)/i}];function N(){let[e,t]=(0,i.useState)({search:"",sort:"recent",tag:null}),s=(0,i.useMemo)(()=>({search:e.search,sort:e.sort}),[e.search,e.sort]),{data:r,isLoading:o}=y.F.templates.getAll.useQuery(s),d=(0,i.useMemo)(()=>{if(r)return r.filter((e,t,s)=>s.findIndex(t=>t.id===e.id)===t).map(e=>{var t,s;let a=function(e){let t=new Set;for(let s of e)for(let{tag:e,keywords:a}of b)a.test(s)&&t.add(e);return 0===t.size&&t.add("General"),Array.from(t)}(null!=(s=null==(t=e.exercises)?void 0:t.map(e=>e.exerciseName))?s:[]);return{...e,tags:a,lastUsedDisplay:e.lastUsed?(0,n.m)(new Date(e.lastUsed),{addSuffix:!0}):null}})},[r]),m=(0,i.useMemo)(()=>{if(!d)return[];let e=new Set;for(let t of d)for(let s of t.tags)"General"!==s&&e.add(s);return Array.from(e).sort((e,t)=>e.localeCompare(t))},[d]),u=(0,i.useMemo)(()=>d?e.tag?d.filter(t=>t.tags.includes(e.tag)):d:[],[d,e.tag]),h=(0,i.useMemo)(()=>{let e=new Map;for(let s of u){var t;let a=null!=(t=s.tags.find(e=>"General"!==e))?t:"General",r=e.get(a);r?r.push(s):e.set(a,[s])}return Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0]))},[u]),p=y.F.useUtils(),N=y.F.templates.delete.useMutation({onMutate:async e=>{await p.templates.getAll.cancel();let t=p.templates.getAll.getData(s);return p.templates.getAll.setData(s,t=>{var s;return null!=(s=null==t?void 0:t.filter(t=>t.id!==e.id))?s:[]}),{previousTemplates:t}},onError:(e,t,a)=>{(null==a?void 0:a.previousTemplates)&&p.templates.getAll.setData(s,a.previousTemplates)},onSettled:()=>{p.templates.getAll.invalidate()}}),S=y.F.templates.duplicate.useMutation({onSuccess:()=>{p.templates.getAll.invalidate()}}),D=async(e,t)=>{if(window.confirm('Delete the template "'.concat(t,'"?')))try{await N.mutateAsync({id:e}),w.z.templateDeleted(e.toString())}catch(t){console.error("Error deleting template:",t),w.z.error(t,{context:"template_delete",templateId:e.toString()})}},C=async e=>{try{await S.mutateAsync({id:e}),w.z.templateDuplicated(e.toString())}catch(t){console.error("Error duplicating template",t),w.z.error(t,{context:"template_duplicate",templateId:e.toString()})}};return o?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(x,{value:e,onChange:t,tags:m}),Array.from({length:3}).map((e,t)=>(0,a.jsx)(v.Zp,{padding:"md",className:"bg-card/90",children:(0,a.jsx)(v.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(j.EA,{className:"h-4 w-1/3"}),(0,a.jsx)(j.EA,{className:"h-3 w-2/3"}),(0,a.jsx)(j.EA,{className:"h-8 w-24"})]})})},t))]}):(null==d?void 0:d.length)?0===u.length?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(x,{value:e,onChange:t,tags:m}),(0,a.jsx)(g.p,{icon:(0,a.jsx)("span",{"aria-hidden":!0,className:"text-5xl",children:"\uD83E\uDDED"}),title:"No templates match those filters",description:"Try a different focus or clear the search to see all templates again.",action:{label:"Clear filters",onClick:()=>t({search:"",sort:"recent",tag:null}),variant:"outline"}})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x,{value:e,onChange:t,tags:m}),h.map(e=>{let[t,s]=e;return(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsxs)("header",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-muted-foreground text-sm font-semibold tracking-wide uppercase",children:t}),"General"!==t&&(0,a.jsx)(f.E,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Focus"})]}),(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>{var t,s;return(0,a.jsxs)(v.Zp,{padding:"md",className:"bg-card/90",children:[(0,a.jsx)(v.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(v.ZB,{className:"text-lg font-semibold",children:e.name}),(0,a.jsx)("div",{className:"text-muted-foreground flex flex-wrap items-center gap-2 text-xs",children:e.tags.map(e=>(0,a.jsx)(f.E,{variant:"outline",className:"text-muted-foreground",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[e.lastUsedDisplay?(0,a.jsxs)(f.E,{variant:"secondary",className:"bg-primary/10 text-primary",children:["Last used ",e.lastUsedDisplay]}):(0,a.jsx)(f.E,{variant:"outline",className:"text-muted-foreground",children:"Not used yet"}),(0,a.jsxs)(f.E,{variant:"outline",className:"text-muted-foreground",children:[e.totalSessions," sessions"]}),(0,a.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>void C(e.id),disabled:S.isPending,children:"Duplicate"}),(0,a.jsx)(c.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)(l(),{href:"/templates/".concat(e.id,"/edit"),children:"Edit"})}),(0,a.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:()=>void D(e.id,e.name),disabled:N.isPending,className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:"Delete"})]})]})}),(0,a.jsxs)(v.Wu,{className:"pb-3",children:[(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:e.exercises&&0!==e.exercises.length?(0,a.jsxs)(a.Fragment,{children:[e.exercises.length," exercise",1!==e.exercises.length?"s":"",":"," ",e.exercises.map(e=>e.exerciseName).join(", ")]}):"No exercises"}),(0,a.jsxs)("div",{className:"text-muted-foreground mt-3 flex flex-wrap items-center gap-3 text-xs",children:[(0,a.jsxs)("span",{children:["Exercises planned: ",null!=(s=null==(t=e.exercises)?void 0:t.length)?s:0]}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,a.jsx)("span",{children:"Avg session: —"})]})]}),(0,a.jsxs)(v.wL,{className:"flex flex-wrap gap-2 pt-0",children:[(0,a.jsx)(c.Button,{size:"sm",asChild:!0,children:(0,a.jsx)(l(),{href:"/workout/start?templateId=".concat(e.id),children:"Start workout"})}),(0,a.jsx)(c.Button,{size:"sm",variant:"outline",asChild:!0,children:(0,a.jsx)(l(),{href:"/templates/".concat(e.id,"/edit"),children:"Customize"})})]})]},e.id)})})]},t)})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(x,{value:e,onChange:t,tags:m}),(0,a.jsx)(g.p,{icon:(0,a.jsx)("span",{"aria-hidden":!0,className:"text-5xl",children:"\uD83D\uDCCB"}),title:"No templates yet",description:"Create your first template or adjust your filters.",action:{label:"Create template",href:"/templates/new"}})]})}},54189:(e,t,s)=>{Promise.resolve().then(s.bind(s,87958)),Promise.resolve().then(s.bind(s,33742)),Promise.resolve().then(s.bind(s,99776)),Promise.resolve().then(s.bind(s,47785)),Promise.resolve().then(s.bind(s,25979)),Promise.resolve().then(s.bind(s,59441)),Promise.resolve().then(s.bind(s,80549)),Promise.resolve().then(s.bind(s,1043)),Promise.resolve().then(s.bind(s,11515)),Promise.resolve().then(s.bind(s,53455)),Promise.resolve().then(s.bind(s,45339)),Promise.resolve().then(s.bind(s,5947)),Promise.resolve().then(s.bind(s,86639)),Promise.resolve().then(s.t.bind(s,52619,23)),Promise.resolve().then(s.bind(s,45834)),Promise.resolve().then(s.bind(s,3998)),Promise.resolve().then(s.bind(s,71586))},60080:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var a=s(26614);let r=(e,t)=>{try{if("undefined"==typeof navigator||!0!==navigator.onLine)return;a.Ay.capture(e,null!=t?t:{})}catch(e){}},l={pageView:(e,t)=>{try{let s=window.location.href;r("$pageview",{$current_url:s,page:e,...t})}catch(e){}},workoutStarted:(e,t)=>{r("workout_started",{templateId:e,templateName:t,timestamp:new Date().toISOString()})},workoutCompleted:(e,t,s)=>{r("workout_completed",{sessionId:e,duration:t,exerciseCount:s,timestamp:new Date().toISOString()})},exerciseLogged:(e,t,s,a)=>{r("exercise_logged",{exerciseId:e,exerciseName:t,sets:s,weight:a,timestamp:new Date().toISOString()})},templateCreated:(e,t)=>{r("template_created",{templateId:e,exerciseCount:t,timestamp:new Date().toISOString()})},templateDeleted:e=>{r("template_deleted",{templateId:e,timestamp:new Date().toISOString()})},templateEdited:(e,t)=>{r("template_edited",{templateId:e,exerciseCount:t,timestamp:new Date().toISOString()})},templateDuplicated:e=>{r("template_duplicated",{templateId:e,timestamp:new Date().toISOString()})},weightUnitChanged:e=>{r("weight_unit_changed",{unit:e,timestamp:new Date().toISOString()})},error:(e,t)=>{r("error",{error:e.message,stack:e.stack,context:t,timestamp:new Date().toISOString()})},featureUsed:(e,t)=>{r("feature_used",{feature:e,...t,timestamp:new Date().toISOString()})},aiDebriefViewed:(e,t,s)=>{r("ai_debrief.viewed",{sessionId:e,version:t,streakLength:s,timestamp:new Date().toISOString()})},aiDebriefRegenerated:(e,t,s)=>{r("ai_debrief.regenerated",{sessionId:e,version:t,reason:s,timestamp:new Date().toISOString()})},aiDebriefDismissed:(e,t,s)=>{r("ai_debrief.dismissed",{sessionId:e,version:t,pinned:s,timestamp:new Date().toISOString()})}}},71586:(e,t,s)=>{"use strict";s.d(t,{default:()=>o});var a=s(95155),r=s(12115),l=s(31461),i=s(99776),n=s(87958);function o(e){let{children:t,state:s}=e,[o]=(0,r.useState)(()=>new l.E({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1}}}));return(0,a.jsx)(i.QueryClientProvider,{client:o,children:(0,a.jsx)(n.HydrationBoundary,{state:s,children:t})})}}},e=>{e.O(0,[8229,274,8096,126,842,8441,7358],()=>e(e.s=54189)),_N_E=e.O()}]);