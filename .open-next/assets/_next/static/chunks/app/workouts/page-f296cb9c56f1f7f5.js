(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9347],{22406:(e,s,t)=>{Promise.resolve().then(t.bind(t,87958)),Promise.resolve().then(t.bind(t,33742)),Promise.resolve().then(t.bind(t,99776)),Promise.resolve().then(t.bind(t,47785)),Promise.resolve().then(t.bind(t,25979)),Promise.resolve().then(t.bind(t,59441)),Promise.resolve().then(t.bind(t,80549)),Promise.resolve().then(t.bind(t,1043)),Promise.resolve().then(t.bind(t,11515)),Promise.resolve().then(t.bind(t,53455)),Promise.resolve().then(t.bind(t,45339)),Promise.resolve().then(t.bind(t,5947)),Promise.resolve().then(t.bind(t,86639)),Promise.resolve().then(t.t.bind(t,52619,23)),Promise.resolve().then(t.bind(t,35346))},35346:(e,s,t)=>{"use strict";t.d(s,{WorkoutHistory:()=>m});var n=t(95155),r=t(12115),i=t(52619),a=t.n(i),l=t(80842),c=t(78730),d=t(86948),o=t(3998),h=t(87270),x=t(20243);function m(){let[e,s]=(0,r.useState)("cards"),{data:t,isLoading:i}=l.F.workouts.getRecent.useQuery({limit:50}),{isFetching:m,refetch:u}=(0,c.aF)();return i?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(x.EA,{className:"h-9 w-16"}),(0,n.jsx)(x.EA,{className:"h-9 w-16"})]}),(0,n.jsx)(x.EA,{className:"h-9 w-24"})]}),"cards"===e?(0,n.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,s)=>(0,n.jsxs)(d.Zp,{className:"animate-pulse",children:[(0,n.jsx)(d.aR,{className:"pb-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(x.EA,{className:"h-6 w-1/3"}),(0,n.jsx)(x.EA,{className:"h-4 w-20"})]})}),(0,n.jsx)(d.Wu,{className:"py-3",children:(0,n.jsx)(x.EA,{className:"h-4 w-1/2"})}),(0,n.jsx)(d.wL,{className:"pt-3",children:(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)(x.EA,{className:"h-9 w-16"}),(0,n.jsx)(x.EA,{className:"h-9 w-20"})]})})]},s))}):(0,n.jsx)(d.Zp,{children:(0,n.jsxs)(h.XI,{children:[(0,n.jsx)(h.A0,{children:(0,n.jsxs)(h.Hj,{children:[(0,n.jsx)(h.nd,{children:(0,n.jsx)(x.EA,{className:"h-4 w-20"})}),(0,n.jsx)(h.nd,{children:(0,n.jsx)(x.EA,{className:"h-4 w-16"})}),(0,n.jsx)(h.nd,{children:(0,n.jsx)(x.EA,{className:"h-4 w-24"})}),(0,n.jsx)(h.nd,{children:(0,n.jsx)(x.EA,{className:"h-4 w-20"})}),(0,n.jsx)(h.nd,{children:(0,n.jsx)(x.EA,{className:"h-4 w-16"})})]})}),(0,n.jsx)(h.BF,{children:Array.from({length:5}).map((e,s)=>(0,n.jsxs)(h.Hj,{children:[(0,n.jsx)(h.nA,{children:(0,n.jsx)(x.EA,{className:"h-4 w-24"})}),(0,n.jsx)(h.nA,{children:(0,n.jsx)(x.EA,{className:"h-4 w-16"})}),(0,n.jsx)(h.nA,{children:(0,n.jsx)(x.EA,{className:"h-4 w-20"})}),(0,n.jsx)(h.nA,{children:(0,n.jsx)(x.EA,{className:"h-4 w-16"})}),(0,n.jsx)(h.nA,{children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(x.EA,{className:"h-8 w-12"}),(0,n.jsx)(x.EA,{className:"h-8 w-16"})]})})]},s))})]})})]}):(null==t?void 0:t.length)?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-muted-foreground text-sm font-medium",children:"View:"}),(0,n.jsxs)("div",{className:"border-border bg-muted/30 flex items-center rounded-lg border p-1",children:[(0,n.jsx)(o.Button,{size:"sm",variant:"cards"===e?"default":"ghost",onClick:()=>s("cards"),className:"h-8 px-3 text-xs",children:"Cards"}),(0,n.jsx)(o.Button,{size:"sm",variant:"table"===e?"default":"ghost",onClick:()=>s("table"),className:"h-8 px-3 text-xs",children:"Table"})]})]}),(0,n.jsx)(o.Button,{variant:"outline",onClick:async()=>{var e,s,t,n,r;let i=await u(),a=null==(e=i.data)?void 0:e.content,l=null!=(n=null==(s=i.data)?void 0:s.filename)?n:"workouts_export.csv";if(!a)return;let c=new Blob([a],{type:null!=(r=null==(t=i.data)?void 0:t.mimeType)?r:"text/csv"}),d=URL.createObjectURL(c),o=document.createElement("a");o.href=d,o.download=l,document.body.appendChild(o),o.click(),o.remove(),URL.revokeObjectURL(d)},disabled:m,className:"gap-2",children:m?"Preparing...":"\uD83D\uDCC1 Export CSV"})]}),"cards"===e?(0,n.jsx)(j,{workouts:t}):(0,n.jsx)(w,{workouts:t})]}):(0,n.jsxs)("div",{className:"py-12 text-center",children:[(0,n.jsx)("div",{className:"mb-4 text-6xl",children:"\uD83C\uDFCB️"}),(0,n.jsx)("h3",{className:"text-foreground mb-2 text-xl font-semibold",children:"No workouts yet"}),(0,n.jsx)("p",{className:"text-muted-foreground mb-6",children:"Start your first workout to see your history here"}),(0,n.jsx)(a(),{href:"/workout/start",children:(0,n.jsx)(o.Button,{size:"lg",className:"gap-2",children:"\uD83D\uDE80 Start First Workout"})})]})}function u(e){let s=new Date(e.workoutDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),t="Quick workout",n="No exercises";if(e.exercises.length>0){let s=new Map;e.exercises.forEach(e=>{s.has(e.exerciseName)||s.set(e.exerciseName,[]),s.get(e.exerciseName).push(e)});let i=0;for(let[e,t]of s.entries()){let e=t.reduce((e,s)=>(s.weight?parseFloat(s.weight.toString()):0)>(e.weight?parseFloat(e.weight.toString()):0)?s:e),s=e.weight?parseFloat(e.weight.toString()):0;s>i&&(i=s)}let a=s.size;if(t="".concat(a," exercise").concat(1!==a?"s":""),i>0){var r;let e=Array.from(s.values()).flat().find(e=>e.weight&&parseFloat(e.weight.toString())===i);n="Best: ".concat(i).concat(null!=(r=null==e?void 0:e.unit)?r:"lbs")}else n="".concat(a," exercise").concat(1!==a?"s":""," logged")}return{workoutTime:s,duration:t,bestMetric:n}}function j(e){let{workouts:s}=e;return(0,n.jsx)("div",{className:"space-y-4",children:s.map(e=>{let{workoutTime:s,duration:t,bestMetric:r}=u(e);return(0,n.jsxs)(d.Zp,{className:"transition-shadow hover:shadow-md",children:[(0,n.jsx)(d.aR,{className:"pb-3",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsx)("h3",{className:"text-foreground line-clamp-1 font-semibold",children:e.template.name}),(0,n.jsx)("time",{className:"text-muted-foreground shrink-0 text-sm",dateTime:new Date(e.workoutDate).toISOString(),children:new Date(e.workoutDate).toLocaleDateString()})]})}),(0,n.jsx)(d.Wu,{className:"py-3",children:(0,n.jsxs)("div",{className:"text-muted-foreground flex items-center gap-2 text-sm",children:[(0,n.jsx)("span",{children:s}),(0,n.jsx)("span",{children:"•"}),(0,n.jsx)("span",{children:t}),(0,n.jsx)("span",{children:"•"}),(0,n.jsx)("span",{children:r})]})}),(0,n.jsx)(d.wL,{className:"pt-3",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(a(),{href:"/workout/session/".concat(e.id),children:(0,n.jsx)(o.Button,{variant:"outline",size:"sm",children:"View"})}),(0,n.jsx)(a(),{href:"/workouts/".concat(e.id),children:(0,n.jsx)(o.Button,{variant:"secondary",size:"sm",children:"Debrief"})}),(0,n.jsx)(a(),{href:"/workout/start?templateId=".concat(e.templateId),children:(0,n.jsx)(o.Button,{size:"sm",children:"Repeat"})})]})})]},e.id)})})}function w(e){let{workouts:s}=e;return(0,n.jsx)(d.Zp,{children:(0,n.jsxs)(h.XI,{children:[(0,n.jsx)(h.A0,{children:(0,n.jsxs)(h.Hj,{children:[(0,n.jsx)(h.nd,{children:"Workout"}),(0,n.jsx)(h.nd,{children:"Date"}),(0,n.jsx)(h.nd,{children:"Time"}),(0,n.jsx)(h.nd,{children:"Exercises"}),(0,n.jsx)(h.nd,{children:"Best Lift"}),(0,n.jsx)(h.nd,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(h.BF,{children:s.map(e=>{let{workoutTime:s,duration:t,bestMetric:r}=u(e);return(0,n.jsxs)(h.Hj,{className:"hover:bg-muted/50",children:[(0,n.jsx)(h.nA,{className:"font-medium",children:e.template.name}),(0,n.jsx)(h.nA,{children:(0,n.jsx)("time",{dateTime:new Date(e.workoutDate).toISOString(),children:new Date(e.workoutDate).toLocaleDateString()})}),(0,n.jsx)(h.nA,{className:"text-muted-foreground",children:s}),(0,n.jsx)(h.nA,{className:"text-muted-foreground",children:t}),(0,n.jsx)(h.nA,{className:"text-muted-foreground",children:r}),(0,n.jsx)(h.nA,{className:"text-right",children:(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(a(),{href:"/workout/session/".concat(e.id),children:(0,n.jsx)(o.Button,{variant:"outline",size:"sm",children:"View"})}),(0,n.jsx)(a(),{href:"/workouts/".concat(e.id),children:(0,n.jsx)(o.Button,{variant:"secondary",size:"sm",children:"Debrief"})}),(0,n.jsx)(a(),{href:"/workout/start?templateId=".concat(e.templateId),children:(0,n.jsx)(o.Button,{size:"sm",children:"Repeat"})})]})})]},e.id)})})]})})}},78730:(e,s,t)=>{"use strict";t.d(s,{Rf:()=>i,aF:()=>a});var n=t(12115),r=t(80842);function i(e){let{exerciseName:s,templateExerciseId:t,unit:i="kg",limitSessions:a=10,excludeSessionId:l}=e,c=r.F.insights.getExerciseInsights.useQuery({exerciseName:s,templateExerciseId:t,unit:i,limitSessions:a,excludeSessionId:l},{enabled:!!s,staleTime:3e4}),d=(0,n.useMemo)(()=>{var e;return null!=(e=c.data)?e:{unit:i,bestSet:void 0,best1RM:void 0,volumeSparkline:[],recommendation:void 0,suggestions:[]}},[c.data,i]);return{...c,data:d}}function a(e){var s;let t=null==e?void 0:e.since,n=null!=(s=null==e?void 0:e.limit)?s:50;return r.F.insights.exportWorkoutsCSV.useQuery({since:t,limit:n},{enabled:!0,staleTime:0,refetchOnWindowFocus:!1})}}},e=>{e.O(0,[274,8096,126,842,8441,7358],()=>e(e.s=22406)),_N_E=e.O()}]);