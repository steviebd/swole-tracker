(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{648:(e,r,a)=>{"use strict";function t(e){return null==e||Number.isNaN(e)?{label:"Awaiting data",tone:"warning",message:"Complete a workout or sync Whoop to unlock readiness insights."}:e>=.8?{label:"High readiness",tone:"success",message:"Prime to push volume or intensity today."}:e>=.6?{label:"Ready to train",tone:"info",message:"Solid recovery. Maintain planned progression."}:e>=.4?{label:"Monitor fatigue",tone:"warning",message:"Keep sets quality high and taper accessories if you need it."}:{label:"Recover & recharge",tone:"danger",message:"Dial back intensity and prioritise mobility or recovery work."}}a.d(r,{L:()=>t})},3965:(e,r,a)=>{"use strict";a.d(r,{PostHogProvider:()=>m});var t=a(95155),n=a(26614),s=a(26302),i=a(12115),o=a(64863),l=a(2651),c=a(91807),d=a(95704);let f=(0,o.w)({server:{CLOUDFLARE_ACCOUNT_ID:l.Yj().optional(),CLOUDFLARE_API_TOKEN:l.Yj().optional(),DB:l.bz().optional(),WORKOS_API_KEY:l.Yj().optional(),WORKOS_CLIENT_ID:l.Yj().optional(),WORKOS_REDIRECT_URI:l.Yj().url().optional(),WORKER_SESSION_SECRET:l.Yj().min(32).optional(),DATABASE_URL:l.Yj().url().optional(),NODE_ENV:l.k5(["development","test","production"]).default("development"),VERCEL_AI_GATEWAY_API_KEY:l.Yj().optional(),AI_GATEWAY_API_KEY:l.Yj().optional(),AI_GATEWAY_MODEL:l.Yj().default("xai/grok-3-mini"),AI_GATEWAY_PROMPT:l.Yj().default("Tell me a short, funny programming or tech joke. Keep it clean and under 100 words."),AI_GATEWAY_JOKE_MEMORY_NUMBER:c.ai().default(3),AI_GATEWAY_MODEL_HEALTH:l.Yj().default("xai/grok-3-mini"),AI_DEBRIEF_MODEL:l.Yj().default("xai/grok-3-mini"),AI_DEBRIEF_TEMPERATURE:c.ai().min(0).max(2).default(.7),WHOOP_CLIENT_ID:l.Yj().optional(),WHOOP_CLIENT_SECRET:l.Yj().optional(),WHOOP_REDIRECT_URI:l.Yj().url().optional(),WHOOP_SYNC_RATE_LIMIT_PER_HOUR:c.ai().default(10),WHOOP_WEBHOOK_SECRET:l.Yj().optional(),RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR:c.ai().default(100),RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR:c.ai().default(200),RATE_LIMIT_API_CALLS_PER_MINUTE:c.ai().default(60),RATE_LIMIT_ENABLED:c.zM().default(!0),ENCRYPTION_MASTER_KEY:l.Yj().min(32).optional()},client:{NEXT_PUBLIC_SITE_URL:l.Yj().url().default("http://localhost:3000"),NEXT_PUBLIC_POSTHOG_KEY:l.Yj().default("phc_test_dummy"),NEXT_PUBLIC_POSTHOG_HOST:l.Yj().url().default("https://us.i.posthog.com")},runtimeEnv:{CLOUDFLARE_ACCOUNT_ID:d.env.CLOUDFLARE_ACCOUNT_ID,CLOUDFLARE_API_TOKEN:d.env.CLOUDFLARE_API_TOKEN,DB:d.env.DB,WORKOS_API_KEY:d.env.WORKOS_API_KEY,WORKOS_CLIENT_ID:d.env.WORKOS_CLIENT_ID,WORKOS_REDIRECT_URI:d.env.WORKOS_REDIRECT_URI,WORKER_SESSION_SECRET:d.env.WORKER_SESSION_SECRET,NEXT_PUBLIC_SITE_URL:"http://localhost:8787",NEXT_PUBLIC_POSTHOG_KEY:"phc_22bpojwvy9Gh9xx6cfDD0utukztzX6mbpkmQAN4tzQ2",NEXT_PUBLIC_POSTHOG_HOST:"https://us.i.posthog.com",DATABASE_URL:d.env.DATABASE_URL,NODE_ENV:"production",VERCEL_AI_GATEWAY_API_KEY:d.env.VERCEL_AI_GATEWAY_API_KEY,AI_GATEWAY_API_KEY:d.env.AI_GATEWAY_API_KEY,AI_GATEWAY_MODEL:d.env.AI_GATEWAY_MODEL,AI_GATEWAY_PROMPT:d.env.AI_GATEWAY_PROMPT,AI_GATEWAY_JOKE_MEMORY_NUMBER:d.env.AI_GATEWAY_JOKE_MEMORY_NUMBER,AI_GATEWAY_MODEL_HEALTH:d.env.AI_GATEWAY_MODEL_HEALTH,AI_DEBRIEF_MODEL:d.env.AI_DEBRIEF_MODEL,AI_DEBRIEF_TEMPERATURE:d.env.AI_DEBRIEF_TEMPERATURE,WHOOP_CLIENT_ID:d.env.WHOOP_CLIENT_ID,WHOOP_CLIENT_SECRET:d.env.WHOOP_CLIENT_SECRET,WHOOP_REDIRECT_URI:d.env.WHOOP_REDIRECT_URI,WHOOP_SYNC_RATE_LIMIT_PER_HOUR:d.env.WHOOP_SYNC_RATE_LIMIT_PER_HOUR,WHOOP_WEBHOOK_SECRET:d.env.WHOOP_WEBHOOK_SECRET,RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR:d.env.RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR,RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR:d.env.RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR,RATE_LIMIT_API_CALLS_PER_MINUTE:d.env.RATE_LIMIT_API_CALLS_PER_MINUTE,RATE_LIMIT_ENABLED:d.env.RATE_LIMIT_ENABLED,ENCRYPTION_MASTER_KEY:d.env.ENCRYPTION_MASTER_KEY},skipValidation:"preview"===d.env.VERCEL_ENV,emptyStringAsUndefined:!0});var u=a(22642);function m(e){let{children:r}=e,{user:o}=(0,u.A)(),l=(0,i.useRef)(null),c=(0,i.useMemo)(()=>{let e=f.NEXT_PUBLIC_POSTHOG_KEY,r=f.NEXT_PUBLIC_POSTHOG_HOST,a=["localhost","127.0.0.1","0.0.0.0","::1"].includes(window.location.hostname);if(!e||"phc_test_dummy"===e||a)return null;let t=r.replace(".i.posthog.com",".posthog.com");return{key:e,options:{api_host:r,ui_host:t,defaults:"2025-05-24",capture_exceptions:!0,debug:!1,capture_pageview:!1}}},[]);return(0,i.useEffect)(()=>c?(n.Ay.init(c.key,c.options),()=>{var e;null==(e=n.Ay.shutdown)||e.call(n.Ay),n.Ay.reset()}):void n.Ay.reset(),[c]),(0,i.useEffect)(()=>{if(!c){null!==l.current&&(n.Ay.reset(),l.current=null);return}if(o){if(l.current!==o.id){var e;n.Ay.identify(o.id,{email:o.email,name:(null==(e=o.user_metadata)?void 0:e.display_name)||(o.first_name||o.last_name?"".concat(o.first_name||""," ").concat(o.last_name||"").trim():o.email),first_name:o.first_name,last_name:o.last_name}),n.Ay.capture("user_signed_in",{userId:o.id,email:o.email}),l.current=o.id}}else null!==l.current&&(n.Ay.reset(),l.current=null,Promise.resolve().then(a.bind(a,88843)).then(e=>{let{getCacheAnalytics:r}=e,a=r();a&&a.recordCacheCleared("logout")}))},[c,o]),(0,t.jsx)(s.so,{client:n.Ay,children:r})}},17262:(e,r,a)=>{Promise.resolve().then(a.bind(a,50751)),Promise.resolve().then(a.bind(a,95932)),Promise.resolve().then(a.bind(a,22642)),Promise.resolve().then(a.bind(a,3965)),Promise.resolve().then(a.bind(a,64053)),Promise.resolve().then(a.t.bind(a,93836,23)),Promise.resolve().then(a.bind(a,80842))},22642:(e,r,a)=>{"use strict";a.d(r,{A:()=>d,AuthProvider:()=>c});var t=a(95155),n=a(12115),s=a(20063),i=a(41444);let o=(0,n.createContext)(void 0);async function l(){try{let e=await fetch("/api/auth/session",{credentials:"include"});if(e.ok)return await e.json();return{user:null}}catch(e){return i.vF.error("Failed to fetch session",e),{user:null}}}function c(e){let{children:r}=e,[c,d]=(0,n.useState)(null),[f,u]=(0,n.useState)(!0),m=(0,s.useRouter)();(0,n.useEffect)(()=>{(async()=>{i.vF.debug("Getting initial WorkOS session");let{user:e}=await l();d(e),u(!1)})()},[]);let h=(0,n.useCallback)(async()=>{try{let{clearAllOfflineData:e}=await Promise.resolve().then(a.bind(a,98635));await e(),await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),d(null),i.vF.info("User signed out and cache cleared")}catch(e){i.vF.error("Error during sign out",e)}finally{m.push("/")}},[m]),b=(0,n.useMemo)(()=>({user:c,isLoading:f,signOut:h}),[c,f,h]);return(0,t.jsx)(o.Provider,{value:b,children:r})}function d(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}window.debugAuth={checkAuth:async()=>{let e=await fetch("/api/auth/session",{credentials:"include"}),r=await e.json();return console.log("Current WorkOS session:",r),r}}},41444:(e,r,a)=>{"use strict";a.d(r,{vF:()=>n});class t{shouldLog(e){return!this.isTest&&(!!this.isDevelopment||"warn"===e||"error"===e)}sanitizeContext(e){let r={...e};return delete r.accessToken,delete r.refreshToken,delete r.password,delete r.secret,this.isDevelopment||Object.keys(r).forEach(e=>{let a=r[e];"string"==typeof a&&a.length>100&&(r[e]=a.substring(0,97)+"...")}),r}debug(e,r){if(!this.shouldLog("debug"))return;let a=r?this.sanitizeContext(r):{};console.log("[DEBUG] ".concat(e),a)}info(e,r){if(!this.shouldLog("info"))return;let a=r?this.sanitizeContext(r):{};console.log("[INFO] ".concat(e),a)}warn(e,r){if(!this.shouldLog("warn"))return;let a=r?this.sanitizeContext(r):{};console.warn("[WARN] ".concat(e),a)}error(e,r,a){if(!this.shouldLog("error"))return;let t=a?this.sanitizeContext(a):{};r instanceof Error?console.error("[ERROR] ".concat(e),{error:r.message,stack:this.isDevelopment?r.stack:void 0,...t}):console.error("[ERROR] ".concat(e),{error:r,...t})}webhook(e,r,a){if(this.isDevelopment){let t={...a,payload:r};this.debug("Webhook: ".concat(e),t)}else this.info("Webhook: ".concat(e),a)}timing(e,r,a){this.isDevelopment&&this.debug("".concat(e," took ").concat(r,"ms"),a)}security(e,r){var a;let t=r?this.sanitizeContext(r):{};(null!=(a=console.warn)?a:console.log)("[SECURITY] ".concat(e),t)}constructor(){this.isDevelopment=!1,this.isTest=!1}}let n=new t},50751:(e,r,a)=>{"use strict";a.d(r,{DashboardHeader:()=>eh});var t=a(95155),n=a(12115),s=a(52619),i=a.n(s),o=a(20063),l=a(59384),c=a(64982),d=a(82214),f=a(79397),u=a(50906),m=a(59427),h=a(37494),b=a(9540),p=a(15870),x=a(85998),g=a(71408),y=a(35528),v=a(80842),j=a(83960),E=a(64053),N=a(3998),_=a(95412),w=a(49396),C=a(64269);let S=JSON.parse('{"generatedAt":"2025-10-01T01:20:01.779Z","tones":[0,10,20,30,40,50,60,70,80,90,95,99,100],"themes":{"light":{"palettes":{"primary":{"0":"#000000","10":"#3c1902","20":"#632a03","30":"#9f4404","40":"#c05005","50":"#f96a06","60":"#fa8838","70":"#fbab74","80":"#fdc9a6","90":"#f4e3d7","95":"#fbf4ef","99":"#fdfbf9","100":"#ffffff"},"secondary":{"0":"#000000","10":"#051538","20":"#09235d","30":"#0e3895","40":"#124ac4","50":"#1558ea","60":"#4479ee","70":"#7ca1f3","80":"#abc3f7","90":"#d9e1f2","95":"#f0f3fa","99":"#f9fafd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#093419","20":"#0f572a","30":"#188b42","40":"#177a36","50":"#26d968","60":"#51e186","70":"#85eaaa","80":"#b1f1c9","90":"#dbf0e3","95":"#f0f9f4","99":"#fafdfb","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1c1e21","20":"#2f3237","30":"#4b4f58","40":"#636874","50":"#757c8a","60":"#9196a1","70":"#b2b6bd","80":"#cdd0d5","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#221e1b","20":"#39322d","30":"#5b4f48","40":"#78685e","50":"#8f7c70","60":"#a5968d","70":"#c0b6af","80":"#d7d0cc","90":"#e7e5e4","95":"#f6f5f4","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#350808","20":"#580e0e","30":"#8d1717","40":"#b81e1e","50":"#dc2323","60":"#e34f4f","70":"#eb8484","80":"#f2b0b0","90":"#f1dada","95":"#f9f0f0","99":"#fdfafa","100":"#ffffff"}},"schemes":{"light":{"primary":"#c05005","onPrimary":"#ffffff","primaryContainer":"#f4e3d7","onPrimaryContainer":"#3c1902","secondary":"#124ac4","onSecondary":"#ffffff","secondaryContainer":"#d9e1f2","onSecondaryContainer":"#051538","tertiary":"#177a36","onTertiary":"#ffffff","tertiaryContainer":"#dbf0e3","onTertiaryContainer":"#093419","error":"#b81e1e","onError":"#ffffff","errorContainer":"#f1dada","onErrorContainer":"#350808","background":"#fbfbfb","onBackground":"#1c1e21","surface":"#fbfbfb","onSurface":"#1c1e21","surfaceVariant":"#e7e5e4","onSurfaceVariant":"#5b4f48","outline":"#8f7c70","outlineVariant":"#d7d0cc","shadow":"#000000","scrim":"#000000","inverseSurface":"#2f3237","inverseOnSurface":"#f4f5f5","inversePrimary":"#fdc9a6","surfaceTint":"#c05005"},"dark":{"primary":"#fdc9a6","onPrimary":"#632a03","primaryContainer":"#9f4404","onPrimaryContainer":"#f4e3d7","secondary":"#abc3f7","onSecondary":"#09235d","secondaryContainer":"#0e3895","onSecondaryContainer":"#d9e1f2","tertiary":"#b1f1c9","onTertiary":"#0f572a","tertiaryContainer":"#188b42","onTertiaryContainer":"#dbf0e3","error":"#f2b0b0","onError":"#580e0e","errorContainer":"#8d1717","onErrorContainer":"#f1dada","background":"#1c1e21","onBackground":"#e4e5e7","surface":"#1c1e21","onSurface":"#e4e5e7","surfaceVariant":"#5b4f48","onSurfaceVariant":"#d7d0cc","outline":"#a5968d","outlineVariant":"#5b4f48","shadow":"#000000","scrim":"#000000","inverseSurface":"#e4e5e7","inverseOnSurface":"#1c1e21","inversePrimary":"#d15905","surfaceTint":"#fdc9a6"}},"base":{"primary":{"color":"#f97316"},"secondary":{"color":"#2563eb"},"tertiary":{"color":"#22c55e"},"neutral":{"color":"#6b7280","saturation":0.08},"neutralVariant":{"color":"#7f5b45","saturation":0.12},"error":{"color":"#dc2626"}}},"dark":{"palettes":{"primary":{"0":"#000000","10":"#3d1500","20":"#662300","30":"#a33900","40":"#d64a00","50":"#ff5800","60":"#ff7a33","70":"#ffa270","80":"#ffc3a3","90":"#f5e1d6","95":"#fbf3ef","99":"#fdfaf9","100":"#ffffff"},"secondary":{"0":"#000000","10":"#043239","20":"#07535f","30":"#0a6c79","40":"#0fafc7","50":"#12d0ed","60":"#42d9f0","70":"#7ae5f5","80":"#aaeef8","90":"#d8eff3","95":"#f0f9fa","99":"#f9fdfd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#1f033a","20":"#340561","30":"#53079c","40":"#6e0acd","50":"#820bf4","60":"#9b3cf6","70":"#b977f9","80":"#d2a7fb","90":"#e6d8f3","95":"#f5effa","99":"#fbf9fd","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1d1e20","20":"#303236","30":"#4d5156","40":"#656a72","50":"#787e87","60":"#93989f","70":"#b3b7bc","80":"#ced1d4","90":"#e5e5e6","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#1c1e22","20":"#2e3338","30":"#49515a","40":"#606a76","50":"#737f8c","60":"#8f98a3","70":"#b0b7bf","80":"#cdd1d6","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#3a0303","20":"#610505","30":"#9c0808","40":"#cc0a0a","50":"#f30c0c","60":"#f53d3d","70":"#f87777","80":"#fba8a8","90":"#f3d8d8","95":"#faefef","99":"#fdf9f9","100":"#ffffff"}},"schemes":{"light":{"primary":"#d64a00","onPrimary":"#ffffff","primaryContainer":"#f5e1d6","onPrimaryContainer":"#3d1500","secondary":"#0fafc7","onSecondary":"#ffffff","secondaryContainer":"#d8eff3","onSecondaryContainer":"#043239","tertiary":"#6e0acd","onTertiary":"#ffffff","tertiaryContainer":"#e6d8f3","onTertiaryContainer":"#1f033a","error":"#cc0a0a","onError":"#ffffff","errorContainer":"#f3d8d8","onErrorContainer":"#3a0303","background":"#fbfbfb","onBackground":"#1d1e20","surface":"#fbfbfb","onSurface":"#1d1e20","surfaceVariant":"#e4e5e7","onSurfaceVariant":"#49515a","outline":"#737f8c","outlineVariant":"#cdd1d6","shadow":"#000000","scrim":"#000000","inverseSurface":"#303236","inverseOnSurface":"#f4f5f5","inversePrimary":"#ffc3a3","surfaceTint":"#d64a00"},"dark":{"primary":"#ffc3a3","onPrimary":"#662300","primaryContainer":"#a33900","onPrimaryContainer":"#f5e1d6","secondary":"#aaeef8","onSecondary":"#07535f","secondaryContainer":"#0a6c79","onSecondaryContainer":"#d8eff3","tertiary":"#d2a7fb","onTertiary":"#340561","tertiaryContainer":"#53079c","onTertiaryContainer":"#e6d8f3","error":"#fba8a8","onError":"#610505","errorContainer":"#9c0808","onErrorContainer":"#f3d8d8","background":"#1d1e20","onBackground":"#e5e5e6","surface":"#1d1e20","onSurface":"#e5e5e6","surfaceVariant":"#49515a","onSurfaceVariant":"#cdd1d6","outline":"#8f98a3","outlineVariant":"#49515a","shadow":"#000000","scrim":"#000000","inverseSurface":"#e5e5e6","inverseOnSurface":"#1d1e20","inversePrimary":"#d64a00","surfaceTint":"#ffc3a3"}},"base":{"primary":{"color":"#ff8a4c"},"secondary":{"color":"#22d3ee"},"tertiary":{"color":"#a855f7"},"neutral":{"color":"#1f2937","saturation":0.06},"neutralVariant":{"color":"#324152","saturation":0.1},"error":{"color":"#f87171"}}},"cool":{"palettes":{"primary":{"0":"#000000","10":"#3d1000","20":"#661a00","30":"#a32a00","40":"#d63700","50":"#ff4200","60":"#ff6733","70":"#ff9570","80":"#ffbba3","90":"#f5ded6","95":"#fbf2ef","99":"#fdfaf9","100":"#ffffff"},"secondary":{"0":"#000000","10":"#022a3b","20":"#034563","30":"#066f9e","40":"#0792cf","50":"#09adf6","60":"#3abef8","70":"#75d1fa","80":"#a6e2fc","90":"#d7ebf4","95":"#eff7fb","99":"#f9fcfd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#021c3b","20":"#032e63","30":"#054a9e","40":"#0761d0","50":"#0873f7","60":"#398ff9","70":"#75b1fb","80":"#a6cdfc","90":"#d7e4f4","95":"#eff4fb","99":"#f9fbfd","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1c1d21","20":"#2f3137","30":"#4b4e58","40":"#636674","50":"#757a8a","60":"#9194a1","70":"#b2b4bd","80":"#cdcfd5","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#1b1d22","20":"#2d3039","30":"#484c5b","40":"#5e6478","50":"#70778f","60":"#8d93a5","70":"#afb3c0","80":"#ccced7","90":"#e4e5e7","95":"#f4f4f6","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#3a0303","20":"#610505","30":"#9c0808","40":"#cc0a0a","50":"#f30c0c","60":"#f53d3d","70":"#f87777","80":"#fba8a8","90":"#f3d8d8","95":"#faefef","99":"#fdf9f9","100":"#ffffff"}},"schemes":{"light":{"primary":"#d63700","onPrimary":"#ffffff","primaryContainer":"#f5ded6","onPrimaryContainer":"#3d1000","secondary":"#0792cf","onSecondary":"#ffffff","secondaryContainer":"#d7ebf4","onSecondaryContainer":"#022a3b","tertiary":"#0761d0","onTertiary":"#ffffff","tertiaryContainer":"#d7e4f4","onTertiaryContainer":"#021c3b","error":"#cc0a0a","onError":"#ffffff","errorContainer":"#f3d8d8","onErrorContainer":"#3a0303","background":"#fbfbfb","onBackground":"#1c1d21","surface":"#fbfbfb","onSurface":"#1c1d21","surfaceVariant":"#e4e5e7","onSurfaceVariant":"#484c5b","outline":"#70778f","outlineVariant":"#ccced7","shadow":"#000000","scrim":"#000000","inverseSurface":"#2f3137","inverseOnSurface":"#f4f5f5","inversePrimary":"#ffbba3","surfaceTint":"#d63700"},"dark":{"primary":"#ffbba3","onPrimary":"#661a00","primaryContainer":"#a32a00","onPrimaryContainer":"#f5ded6","secondary":"#a6e2fc","onSecondary":"#034563","secondaryContainer":"#066f9e","onSecondaryContainer":"#d7ebf4","tertiary":"#a6cdfc","onTertiary":"#032e63","tertiaryContainer":"#054a9e","onTertiaryContainer":"#d7e4f4","error":"#fba8a8","onError":"#610505","errorContainer":"#9c0808","onErrorContainer":"#f3d8d8","background":"#1c1d21","onBackground":"#e4e5e7","surface":"#1c1d21","onSurface":"#e4e5e7","surfaceVariant":"#484c5b","onSurfaceVariant":"#ccced7","outline":"#8d93a5","outlineVariant":"#484c5b","shadow":"#000000","scrim":"#000000","inverseSurface":"#e4e5e7","inverseOnSurface":"#1c1d21","inversePrimary":"#d63700","surfaceTint":"#ffbba3"}},"base":{"primary":{"color":"#ff7d50"},"secondary":{"color":"#38bdf8"},"tertiary":{"color":"#60a5fa"},"neutral":{"color":"#1c1f2a","saturation":0.08},"neutralVariant":{"color":"#2f3340","saturation":0.12},"error":{"color":"#f87171"}}},"warm":{"palettes":{"primary":{"0":"#000000","10":"#331d0a","20":"#553011","30":"#884c1b","40":"#a8581d","50":"#d4772b","60":"#dd9255","70":"#e7b388","80":"#f0ceb3","90":"#f0e5db","95":"#f9f4f1","99":"#fdfbfa","100":"#ffffff"},"secondary":{"0":"#000000","10":"#210a33","20":"#371056","30":"#571a89","40":"#7323b4","50":"#8929d6","60":"#a054de","70":"#bd87e8","80":"#d4b2f0","90":"#e7dbf0","95":"#f5f1f9","99":"#fbfafd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#3c2102","20":"#633603","30":"#9f5704","40":"#a45708","50":"#f88807","60":"#faa038","70":"#fbbc74","80":"#fdd4a6","90":"#f4e7d7","95":"#fbf5ef","99":"#fdfbf9","100":"#ffffff"},"neutral":{"0":"#000000","10":"#221e1b","20":"#39322d","30":"#5b4f48","40":"#78685e","50":"#8f7c70","60":"#a5968d","70":"#c0b6af","80":"#d7d0cc","90":"#e7e5e4","95":"#f6f5f4","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#231d1a","20":"#3b312b","30":"#5f4e45","40":"#7c665a","50":"#94796b","60":"#a99489","70":"#c3b4ac","80":"#d8cfca","90":"#e8e5e3","95":"#f6f5f4","99":"#fcfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#350c08","20":"#59140d","30":"#8e2015","40":"#ba291c","50":"#de3121","60":"#e45a4e","70":"#ec8c83","80":"#f3b5af","90":"#f1dcda","95":"#f9f1f0","99":"#fdfaf9","100":"#ffffff"}},"schemes":{"light":{"primary":"#a8581d","onPrimary":"#ffffff","primaryContainer":"#f0e5db","onPrimaryContainer":"#331d0a","secondary":"#7323b4","onSecondary":"#ffffff","secondaryContainer":"#e7dbf0","onSecondaryContainer":"#210a33","tertiary":"#a45708","onTertiary":"#ffffff","tertiaryContainer":"#f4e7d7","onTertiaryContainer":"#3c2102","error":"#ba291c","onError":"#ffffff","errorContainer":"#f1dcda","onErrorContainer":"#350c08","background":"#fbfbfb","onBackground":"#221e1b","surface":"#fbfbfb","onSurface":"#221e1b","surfaceVariant":"#e8e5e3","onSurfaceVariant":"#5f4e45","outline":"#94796b","outlineVariant":"#d8cfca","shadow":"#000000","scrim":"#000000","inverseSurface":"#39322d","inverseOnSurface":"#f6f5f4","inversePrimary":"#f0ceb3","surfaceTint":"#a8581d"},"dark":{"primary":"#f0ceb3","onPrimary":"#553011","primaryContainer":"#884c1b","onPrimaryContainer":"#f0e5db","secondary":"#d4b2f0","onSecondary":"#371056","secondaryContainer":"#571a89","onSecondaryContainer":"#e7dbf0","tertiary":"#fdd4a6","onTertiary":"#633603","tertiaryContainer":"#9f5704","onTertiaryContainer":"#f4e7d7","error":"#f3b5af","onError":"#59140d","errorContainer":"#8e2015","onErrorContainer":"#f1dcda","background":"#221e1b","onBackground":"#e7e5e4","surface":"#221e1b","onSurface":"#e7e5e4","surfaceVariant":"#5f4e45","onSurfaceVariant":"#d8cfca","outline":"#a99489","outlineVariant":"#5f4e45","shadow":"#000000","scrim":"#000000","inverseSurface":"#e7e5e4","inverseOnSurface":"#221e1b","inversePrimary":"#b26424","surfaceTint":"#f0ceb3"}},"base":{"primary":{"color":"#c26d27"},"secondary":{"color":"#9d4edd"},"tertiary":{"color":"#d97706"},"neutral":{"color":"#594437","saturation":0.12},"neutralVariant":{"color":"#6e5243","saturation":0.16},"error":{"color":"#e4584b"}}},"neutral":{"palettes":{"primary":{"0":"#000000","10":"#1a1e23","20":"#2c323a","30":"#46505d","40":"#5c697a","50":"#6e7d91","60":"#8b97a7","70":"#aeb6c1","80":"#cbd0d7","90":"#e3e5e8","95":"#f4f5f6","99":"#fbfbfb","100":"#ffffff"},"secondary":{"0":"#000000","10":"#050638","20":"#080a5e","30":"#0d1096","40":"#1215c5","50":"#1519ea","60":"#4447ee","70":"#7c7ef3","80":"#abacf7","90":"#d9d9f2","95":"#f0f0fa","99":"#f9f9fd","100":"#ffffff"},"tertiary":{"0":"#000000","10":"#063732","20":"#0a5c53","30":"#109385","40":"#108071","50":"#19e6cf","60":"#47ebd9","70":"#7ef1e4","80":"#acf6ee","90":"#d9f2ef","95":"#f0faf9","99":"#f9fdfd","100":"#ffffff"},"neutral":{"0":"#000000","10":"#1d1e20","20":"#303336","30":"#4e5156","40":"#666a70","50":"#797e86","60":"#94989e","70":"#b4b7bb","80":"#cfd1d3","90":"#e5e5e6","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"neutralVariant":{"0":"#000000","10":"#1c1e21","20":"#2f3337","30":"#4b5158","40":"#636b74","50":"#757f8a","60":"#9199a1","70":"#b2b7bd","80":"#cdd1d5","90":"#e4e5e7","95":"#f4f5f5","99":"#fbfbfb","100":"#ffffff"},"error":{"0":"#000000","10":"#330b0b","20":"#541212","30":"#871c1c","40":"#b12525","50":"#d22d2d","60":"#db5757","70":"#e68989","80":"#efb3b3","90":"#efdcdc","95":"#f9f1f1","99":"#fdfafa","100":"#ffffff"}},"schemes":{"light":{"primary":"#5c697a","onPrimary":"#ffffff","primaryContainer":"#e3e5e8","onPrimaryContainer":"#1a1e23","secondary":"#1215c5","onSecondary":"#ffffff","secondaryContainer":"#d9d9f2","onSecondaryContainer":"#050638","tertiary":"#108071","onTertiary":"#ffffff","tertiaryContainer":"#d9f2ef","onTertiaryContainer":"#063732","error":"#b12525","onError":"#ffffff","errorContainer":"#efdcdc","onErrorContainer":"#330b0b","background":"#fbfbfb","onBackground":"#1d1e20","surface":"#fbfbfb","onSurface":"#1d1e20","surfaceVariant":"#e4e5e7","onSurfaceVariant":"#4b5158","outline":"#757f8a","outlineVariant":"#cdd1d5","shadow":"#000000","scrim":"#000000","inverseSurface":"#303336","inverseOnSurface":"#f4f5f5","inversePrimary":"#cbd0d7","surfaceTint":"#5c697a"},"dark":{"primary":"#cbd0d7","onPrimary":"#2c323a","primaryContainer":"#46505d","onPrimaryContainer":"#e3e5e8","secondary":"#abacf7","onSecondary":"#080a5e","secondaryContainer":"#0d1096","onSecondaryContainer":"#d9d9f2","tertiary":"#acf6ee","onTertiary":"#0a5c53","tertiaryContainer":"#109385","onTertiaryContainer":"#d9f2ef","error":"#efb3b3","onError":"#541212","errorContainer":"#871c1c","onErrorContainer":"#efdcdc","background":"#1d1e20","onBackground":"#e5e5e6","surface":"#1d1e20","onSurface":"#e5e5e6","surfaceVariant":"#4b5158","onSurfaceVariant":"#cdd1d5","outline":"#9199a1","outlineVariant":"#4b5158","shadow":"#000000","scrim":"#000000","inverseSurface":"#e5e5e6","inverseOnSurface":"#1d1e20","inversePrimary":"#5c697a","surfaceTint":"#cbd0d7"}},"base":{"primary":{"color":"#4b5563"},"secondary":{"color":"#6366f1"},"tertiary":{"color":"#14b8a6"},"neutral":{"color":"#4b5563","saturation":0.05},"neutralVariant":{"color":"#4f5964","saturation":0.08},"error":{"color":"#d32f2f"}}}}}'),O={light:"light",dark:"dark",cool:"dark",warm:"light",neutral:"light"},T={50:"99",100:"95",200:"90",300:"80",400:"70",500:"60",600:"50",700:"40",800:"30",900:"20",950:"10"};function A(e){let r=parseInt(e.replace("#",""),16);return{r:r>>16&255,g:r>>8&255,b:255&r}}function k(e,r,a){let t=A(e),n=A(r),s=(e,r)=>e+(r-e)*a;return function(e){let{r,g:a,b:t}=e,n=e=>Math.round(e).toString(16).padStart(2,"0");return"#".concat(n(Math.min(Math.max(r,0),255))).concat(n(Math.min(Math.max(a,0),255))).concat(n(Math.min(Math.max(t,0),255)))}({r:s(t.r,n.r),g:s(t.g,n.g),b:s(t.b,n.b)})}function R(e){return Object.fromEntries(Object.entries(T).map(r=>{var a;let[t,n]=r;return[Number(t),null!=(a=e[n])?a:e["60"]]}))}function P(e,r){var a,t,n,s,i,o,l;let c=e.palettes.neutral,d=e.schemes[r],f=e=>{var r;return null!=(r=c[String(e)])?r:d.surface};if("light"===r){let e=f(99),r=null!=(a=f(95))?a:k(e,f(90),.35),i=null!=(t=f(90))?t:k(r,f(80),.35);return{surface:e,surfaceDim:k(i,e,.2),surfaceBright:k(e,c["100"],.25),surfaceContainerLowest:null!=(n=f(100))?n:c["100"],surfaceContainerLow:k(r,f(100),.35),surfaceContainer:k(r,i,.5),surfaceContainerHigh:k(i,r,.25),surfaceContainerHighest:k(i,r,.1),surfaceVariant:d.surfaceVariant,surfaceInverse:d.inverseSurface,outline:d.outline,outlineVariant:null!=(s=d.outlineVariant)?s:k(d.surfaceVariant,e,.35),surfaceTint:d.surfaceTint}}let u=null!=(i=f(10))?i:d.surface,m=null!=(o=f(20))?o:k(u,f(30),.35),h=k(u,c["0"],.65);return{surface:u,surfaceDim:k(u,m,.3),surfaceBright:k(u,c["100"],.12),surfaceContainerLowest:h,surfaceContainerLow:k(u,m,.55),surfaceContainer:k(u,m,.7),surfaceContainerHigh:k(u,m,.85),surfaceContainerHighest:k(m,d.surface,.4),surfaceVariant:d.surfaceVariant,surfaceInverse:d.inverseSurface,outline:d.outline,outlineVariant:null!=(l=d.outlineVariant)?l:k(d.surfaceVariant,u,.4),surfaceTint:d.surfaceTint}}let I=S.themes,L=Object.fromEntries(Object.entries(I).map(e=>{let[r,a]=e;return[r,a.schemes]})),D=Object.fromEntries(Object.entries(I).map(e=>{let[r,a]=e;return[r,{light:P(a,"light"),dark:P(a,"dark")}]})),M=I.light;R(M.palettes.primary),R(M.palettes.secondary),R(M.palettes.tertiary),R(M.palettes.neutralVariant),R(M.palettes.neutral),M.schemes.light.tertiary,k(M.schemes.light.tertiary,M.schemes.light.surface,.3),M.schemes.light.secondary,k(M.schemes.light.secondary,M.schemes.light.primary,.35),M.schemes.light.error,k(M.schemes.light.error,"#8b1a1a",.35),L.dark.dark.error,S.tones;let W=Array.from(["light","dark","cool","warm","neutral"]).reduce((e,r)=>{let a=function(e,r){let a=I[e],t=O[e];return{scheme:a.schemes[t],surfaces:D[e][t]}}(r);return e[r]={surface:a.surfaces.surface,surfaceContainer:a.surfaces.surfaceContainer,outline:a.surfaces.outline,primary:a.scheme.primary,secondary:a.scheme.secondary,tertiary:a.scheme.tertiary,onSurface:a.scheme.onSurface},e},{}),B=[{value:"system",label:"System",description:"Follows your device settings",preview:"\uD83D\uDDA5️"},{value:"light",label:"Light",description:"Classic bright theme",preview:"☀️"},{value:"dark",label:"Dark",description:"Easy on the eyes",preview:"\uD83C\uDF19"},{value:"cool",label:"Cool",description:"Warm coffee-inspired dark",preview:"☕"},{value:"warm",label:"Warm",description:"Earth tones and beiges",preview:"\uD83C\uDF3E"},{value:"neutral",label:"Neutral",description:"Clean and minimal grays",preview:"⚪"}];function Y(e){let{className:r,variant:a="grid",showDescription:s=!0}=e,{theme:i,resolvedTheme:o,setTheme:l}=(0,E.W)(),c=(0,w.Ib)(),[d,f]=n.useState(null),u=n.useCallback(e=>{var r,a;return"system"===e?null!=(r=W[null!=o?o:"light"])?r:W.light:null!=(a=W[e])?a:W.light},[o]),m=n.useCallback(e=>{l(e.value);let r=Date.now(),a=(()=>{let e=null!=o?o:"light";return e.charAt(0).toUpperCase()+e.slice(1)})();f({id:r,message:"system"===e.value?"System theme selected; currently following ".concat(a," mode"):"".concat(e.label," theme selected")})},[o,l]);return n.useEffect(()=>{if(!d)return;let e=window.setTimeout(()=>{f(null)},750);return()=>window.clearTimeout(e)},[d]),(0,t.jsxs)("div",{className:(0,C.cn)("space-y-3",r),role:"radiogroup","aria-labelledby":"theme-selector-label",children:[d?(0,t.jsx)("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:d.message},d.id):null,(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{id:"theme-selector-label",className:"text-foreground leading-none font-medium",children:"Appearance"}),s&&(0,t.jsx)("div",{className:"text-muted-foreground text-sm leading-relaxed",children:"Choose your preferred color theme for the app"})]}),(0,t.jsx)("div",{className:(0,C.cn)("grid gap-2","grid"===a?"grid-cols-2 sm:grid-cols-3":"grid-cols-1"),children:B.map(e=>{let r=i===e.value,n="system"===i&&"system"===e.value,l=u(e.value);return(0,t.jsx)(y.P.div,{whileTap:{scale:c?1:.98},whileHover:{scale:c?1:1.02},transition:{duration:.15},children:(0,t.jsxs)(N.Button,{variant:r?"default":"outline",size:"sm",onClick:()=>m(e),className:(0,C.cn)("flex h-auto w-full flex-col gap-3 py-3 text-xs font-medium transition-all","relative overflow-hidden hover:shadow-md active:scale-95","border-2",r?"border-primary/50 ring-primary/20 shadow-lg ring-1":"border-border/50 hover:border-border"),role:"radio","aria-checked":r,haptic:!0,children:[(0,t.jsxs)("div",{className:"relative z-10 flex w-full flex-col items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg leading-none","aria-hidden":"true",children:e.preview}),(0,t.jsx)("div",{className:"border-border/30 h-3 w-3 rounded-full border",style:{backgroundColor:l.primary},"aria-hidden":"true"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("span",{className:"leading-none font-medium",children:e.label}),n&&(0,t.jsxs)("span",{className:"mt-0.5 block text-xs capitalize opacity-70",children:["(",o,")"]}),s&&"list"===a&&(0,t.jsx)("span",{className:"mt-1 block text-xs opacity-70",children:e.description})]})]}),l&&(0,t.jsxs)("div",{className:"relative z-10 flex w-full flex-col gap-2 rounded-md border px-2 py-2 text-left",style:{backgroundColor:l.surfaceContainer,borderColor:l.outline,color:l.onSurface},"aria-hidden":"true",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)("div",{className:"h-2 flex-1 rounded-full",style:{background:"linear-gradient(135deg, ".concat(l.primary," 0%, ").concat(l.secondary," 100%)")}}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:[l.primary,l.secondary,l.tertiary].map(e=>(0,t.jsx)("span",{className:"block h-3 w-3 rounded-sm shadow-sm",style:{backgroundColor:e,boxShadow:"0 0 0 1px ".concat(function(e,r){if(!e.startsWith("#")||!r.startsWith("#"))return e;let a=parseInt(e.replace("#",""),16),t=parseInt(r.replace("#",""),16),n=Math.round((a>>16&255)*.8+(t>>16&255)*.2),s=Math.round((a>>8&255)*.8+(t>>8&255)*.2),i=Math.round((255&a)*.8+(255&t)*.2);return"rgba(".concat(n,", ").concat(s,", ").concat(i,", 0.65)")}(e,l.onSurface))}},e))})]}),(0,t.jsx)("div",{className:"h-1 w-full rounded-full",style:{background:"linear-gradient(90deg, ".concat(l.primary," 0%, ").concat(l.tertiary," 100%)")}})]}),r&&(0,t.jsx)(y.P.div,{className:"bg-primary absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2*!c,ease:[.4,0,.2,1]},children:(0,t.jsx)("div",{className:"bg-primary-foreground h-1.5 w-1.5 rounded-full"})})]})},e.value)})})]})}function U(e){let{open:r,onClose:a}=e,s=v.F.useUtils(),{data:i,isLoading:o}=v.F.preferences.get.useQuery(void 0,{enabled:r});(0,E.W)();let l=(0,w.Ib)(),[c,d]=(0,n.useState)(!1),[f,u]=(0,n.useState)("collapse_expand"),[m,h]=(0,n.useState)("kg"),[b,p]=(0,n.useState)("120"),[x,S]=(0,n.useState)("120"),[O,T]=(0,n.useState)(!1),A=v.F.preferences.update.useMutation({onSuccess:async()=>{await s.preferences.get.invalidate(),a()},onError:e=>{console.error("Failed to save preferences",e),alert("Failed to save preferences. Please try again.")},onSettled:()=>{T(!1)}});(0,n.useEffect)(()=>{if(!o&&i){var e,r,a,t,n;d("predictive_defaults_enabled"in i&&!!(null!=(e=i.predictive_defaults_enabled)&&e)),u("right_swipe_action"in i&&null!=(r=i.right_swipe_action)?r:"collapse_expand"),h("defaultWeightUnit"in i&&null!=(a=i.defaultWeightUnit)?a:"kg"),p("leftSwipeThreshold"in i?String(null!=(t=i.leftSwipeThreshold)?t:120):"120"),S("rightSwipeThreshold"in i?String(null!=(n=i.rightSwipeThreshold)?n:120):"120")}},[o,i]);let k=(0,n.useMemo)(()=>{var e,r,a,t,n;if(O)return!0;if(!i)return!1;let s="predictive_defaults_enabled"in i&&!!(null!=(e=i.predictive_defaults_enabled)&&e),o="right_swipe_action"in i&&null!=(r=i.right_swipe_action)?r:"collapse_expand",l="defaultWeightUnit"in i&&null!=(a=i.defaultWeightUnit)?a:"kg",d="leftSwipeThreshold"in i?String(null!=(t=i.leftSwipeThreshold)?t:120):"120",u="rightSwipeThreshold"in i?String(null!=(n=i.rightSwipeThreshold)?n:120):"120";return s===c&&o===f&&l===m&&d===b&&u===x},[i,c,f,m,b,x,O]),{restoreFocus:R}=(0,j.G)(),P=(0,n.useRef)(null);return r?(0,t.jsx)(g.N,{children:(0,t.jsx)(y.P.div,{role:"dialog","aria-modal":"true","aria-labelledby":"preferences-title","aria-describedby":"preferences-description",className:(0,C.cn)("fixed inset-0 z-[50000] flex min-h-screen items-center justify-center","bg-background/95 backdrop-blur-md backdrop-saturate-150","p-4 md:p-6"),onClick:()=>{R(),a()},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2*!l,ease:"easeOut"},children:(0,t.jsx)(j.s,{onEscape:()=>{R(),a()},initialFocusRef:P,preventScroll:!0,children:(0,t.jsx)(y.P.div,{className:"w-full max-w-md max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3*!l,ease:[.4,0,.2,1]},children:(0,t.jsx)(_.o,{className:(0,C.cn)("glass-hero shadow-2xl rounded-xl border","bg-card/95 backdrop-blur-xl backdrop-saturate-150","border-border/50 overflow-hidden"),as:"div",children:(0,t.jsxs)("div",{className:"max-h-[90vh] overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-border/30",children:[(0,t.jsx)("div",{className:"border-b border-border/50 px-6 py-5 bg-gradient-to-r from-card/50 to-card/80",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-4 h-4 rounded-sm bg-primary/60"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{id:"preferences-title",className:"text-xl font-bold text-foreground leading-none",children:"Preferences"}),(0,t.jsx)("p",{id:"preferences-description",className:"text-sm text-muted-foreground mt-1",children:"Customise your workout tracking experience"})]})]})}),(0,t.jsxs)("div",{className:"space-y-8 px-6 py-6",children:[(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-foreground leading-none",children:"Predictive defaults"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Prefill new sets with your most recent values for each exercise"})]}),(0,t.jsxs)(y.P.button,{type:"button",role:"switch","aria-checked":c,"aria-describedby":"predictive-description",onClick:()=>d(e=>!e),className:(0,C.cn)("relative inline-flex h-8 w-14 items-center rounded-full transition-all duration-200","focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2","hover:shadow-md touch-target",c?"bg-primary":"bg-muted"),whileTap:{scale:l?1:.95},children:[(0,t.jsx)(y.P.span,{className:"inline-block h-6 w-6 transform rounded-full bg-background shadow-sm",animate:{x:c?28:4},transition:{type:"spring",stiffness:500,damping:30,duration:l?0:void 0}}),(0,t.jsxs)("span",{className:"sr-only",children:[c?"Disable":"Enable"," predictive defaults"]})]})]}),(0,t.jsx)("div",{id:"predictive-description",className:"sr-only",children:"When enabled, new exercise sets will be pre-filled with your most recent weight, reps, and other values for that exercise"})]}),(0,t.jsx)(Y,{variant:"grid",showDescription:!0}),(0,t.jsxs)("section",{className:"space-y-3",role:"radiogroup","aria-labelledby":"weight-unit-label",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{id:"weight-unit-label",className:"font-medium text-foreground leading-none",children:"Default Weight Unit"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Choose your preferred unit for displaying exercise weights"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"kg",label:"Kilograms",short:"kg",icon:"⚖️"},{value:"lbs",label:"Pounds",short:"lbs",icon:"\uD83C\uDFCB️"}].map(e=>{let{value:r,label:a,short:n,icon:s}=e;return(0,t.jsxs)(N.Button,{variant:m===r?"default":"outline",size:"sm",onClick:()=>h(r),className:(0,C.cn)("flex flex-col gap-1 h-auto py-3 text-sm transition-all","hover:shadow-md active:scale-95"),role:"radio","aria-checked":m===r,haptic:!0,children:[(0,t.jsx)("span",{className:"text-lg leading-none",children:s}),(0,t.jsx)("span",{className:"font-medium leading-none",children:a}),(0,t.jsxs)("span",{className:"text-xs opacity-70 leading-none",children:["(",n,")"]})]},r)})})]}),(0,t.jsxs)("section",{className:"space-y-3",role:"radiogroup","aria-labelledby":"swipe-action-label",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{id:"swipe-action-label",className:"font-medium text-foreground leading-none",children:"Right-swipe Action"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Choose what happens when you right-swipe an exercise card"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{value:"collapse_expand",label:"Collapse/Expand",icon:"\uD83D\uDCCB",description:"Toggle exercise details"},{value:"none",label:"None",icon:"\uD83D\uDEAB",description:"No action"}].map(e=>{let{value:r,label:a,icon:n,description:s}=e;return(0,t.jsxs)(N.Button,{variant:f===r?"default":"outline",size:"sm",onClick:()=>u(r),className:(0,C.cn)("flex flex-col gap-1 h-auto py-3 text-sm transition-all","hover:shadow-md active:scale-95"),role:"radio","aria-checked":f===r,haptic:!0,children:[(0,t.jsx)("span",{className:"text-lg leading-none",children:n}),(0,t.jsx)("span",{className:"font-medium leading-none",children:a}),(0,t.jsx)("span",{className:"text-xs opacity-70 leading-none text-center",children:s})]},r)})})]}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium text-foreground leading-none",children:"Swipe Sensitivity"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Configure swipe distance thresholds for triggering actions"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"left-swipe-threshold",className:"block text-sm font-medium text-foreground leading-none",children:"Left swipe (px)"}),(0,t.jsx)("input",{id:"left-swipe-threshold",type:"number",min:"50",max:"300",step:"10",value:b,onChange:e=>p(e.target.value),className:(0,C.cn)("w-full px-3 py-2.5 rounded-md border transition-all","bg-input text-foreground border-border","focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2","hover:border-border/80 focus-visible:border-ring","touch-target"),"aria-describedby":"swipe-threshold-help"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"right-swipe-threshold",className:"block text-sm font-medium text-foreground leading-none",children:"Right swipe (px)"}),(0,t.jsx)("input",{id:"right-swipe-threshold",type:"number",min:"50",max:"300",step:"10",value:x,onChange:e=>S(e.target.value),className:(0,C.cn)("w-full px-3 py-2.5 rounded-md border transition-all","bg-input text-foreground border-border","focus-visible:outline-2 focus-visible:outline-ring focus-visible:outline-offset-2","hover:border-border/80 focus-visible:border-ring","touch-target"),"aria-describedby":"swipe-threshold-help"})]})]}),(0,t.jsx)("div",{id:"swipe-threshold-help",className:"text-xs text-muted-foreground leading-relaxed bg-muted/30 rounded-lg px-3 py-2",children:"\uD83D\uDCA1 Default: 120px. Higher values require longer swipes to trigger actions."})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium text-foreground leading-none flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-6 h-6 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"W"}),"WHOOP Integration"]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground leading-relaxed",children:"Connect your WHOOP device to sync recovery and strain data"})]}),(0,t.jsx)(N.Button,{variant:"outline",size:"sm",asChild:!0,className:"w-full justify-start hover:shadow-md transition-all",haptic:!0,children:(0,t.jsxs)("a",{href:"/connect-whoop",className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-lg",children:"\uD83D\uDD17"}),"Connect WHOOP"]})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 border-t border-border/50 px-6 py-5 bg-gradient-to-r from-card/30 to-card/50",children:[(0,t.jsx)(N.Button,{ref:P,variant:"outline",size:"default",onClick:()=>{R(),a()},disabled:O,className:"sm:w-auto hover:shadow-md transition-all",children:"Cancel"}),(0,t.jsx)(N.Button,{variant:"default",size:"default",onClick:()=>void(()=>{if(k&&!O)return a();T(!0);let e={predictive_defaults_enabled:c,right_swipe_action:f,defaultWeightUnit:m,leftSwipeThreshold:parseInt(b,10),rightSwipeThreshold:parseInt(x,10)};A.mutate(e)})(),disabled:O||k,"aria-busy":O?"true":"false",className:"sm:w-auto hover:shadow-md transition-all",haptic:!0,children:O?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.P.div,{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),"Saving…"]}):(0,t.jsx)(t.Fragment,{children:"Save Preferences"})})]})]})})})})})}):null}var H=a(69152),V=a(13804),K=a(35299),F=a(33738),G=a(52056),z=a(40374);function q(){let[e,r]=(0,n.useState)(!0),[a,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if("undefined"==typeof navigator)return;r(navigator.onLine),t(!0);let e=()=>{r(!0)},a=()=>{r(!1)};return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}},[]),!a||e}function X(){let[e,r]=(0,n.useState)([]),[a,s]=(0,n.useState)([]),[i,o]=(0,n.useState)(!0),l=q();(0,n.useEffect)(()=>{c()},[]);let c=async()=>{try{let[e,a]=await Promise.all([z.Hi.getActiveSessions(),z.Hi.getCompletedSessions()]);r(e),s(a)}catch(e){console.error("Failed to load offline sessions:",e)}finally{o(!1)}},d=async e=>{try{await z.Hi.completeSession(e),await c()}catch(e){console.error("Failed to complete session:",e)}},f=async e=>{try{await z.Hi.deleteSession(e),await c()}catch(e){console.error("Failed to delete session:",e)}},u=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i?(0,t.jsxs)("div",{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"animate-spin h-6 w-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-content-secondary",children:"Loading offline sessions..."})]}):e.length>0||a.length>0?(0,t.jsxs)("div",{className:"space-y-4",children:[e.length>0&&(0,t.jsxs)("div",{className:"bg-[var(--color-info-muted)] border border-[var(--color-info)]/30 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"font-medium text-[var(--color-info)]",children:"Active Workout Sessions"}),(0,t.jsxs)("span",{className:"text-xs bg-[var(--color-info)]/20 text-[var(--color-info)] px-2 py-1 rounded",children:[e.length," active"]})]}),(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-surface-primary rounded p-3 border border-interactive-primary",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:"Workout Session"}),(0,t.jsxs)("p",{className:"text-xs text-content-secondary",children:["Started: ",u(e.startTime)," • Duration: ",(e=>{let r=Math.floor((Date.now()-e)/6e4);if(r<60)return"".concat(r,"m");let a=Math.floor(r/60);return"".concat(a,"h ").concat(r%60,"m")})(e.startTime)]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>d(e.id),className:"text-xs bg-[var(--color-success)] text-white px-2 py-1 rounded hover:bg-[var(--color-success)]/80",children:"Complete"}),(0,t.jsx)("button",{onClick:()=>f(e.id),className:"text-xs bg-[var(--color-danger)] text-white px-2 py-1 rounded hover:bg-[var(--color-danger)]/80",children:"Delete"})]})]}),e.exercises.length>0&&(0,t.jsxs)("div",{className:"text-xs text-content-secondary",children:[(0,t.jsxs)("p",{children:[e.exercises.length," exercises"]}),(0,t.jsxs)("p",{children:[e.exercises.reduce((e,r)=>e+r.sets.filter(e=>e.completed).length,0)," sets completed"]})]})]},e.id))})]}),a.length>0&&(0,t.jsxs)("div",{className:"bg-[var(--color-warning-muted)] border border-[var(--color-warning)]/30 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"font-medium text-yellow-900",children:"Pending Sync"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:[a.length," pending"]}),!l&&(0,t.jsx)("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:"Offline"})]})]}),(0,t.jsx)("div",{className:"space-y-2",children:a.map(e=>(0,t.jsx)("div",{className:"bg-surface-primary rounded p-3 border border-status-warning",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:"Completed Workout"}),(0,t.jsxs)("p",{className:"text-xs text-content-secondary",children:["Completed: ",u(e.lastSaved)]}),(0,t.jsxs)("p",{className:"text-xs text-content-secondary",children:[e.exercises.length," exercises, ",e.exercises.reduce((e,r)=>e+r.sets.filter(e=>e.completed).length,0)," sets"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs text-yellow-600",children:l?"Syncing...":"Will sync when online"}),(0,t.jsx)("button",{onClick:()=>f(e.id),className:"mt-1 text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Delete"})]})]})},e.id))}),!l&&(0,t.jsx)("div",{className:"mt-3 text-xs text-yellow-700 bg-yellow-100 p-2 rounded",children:"These workouts will automatically sync when you're back online."})]})]}):null}var Q=a(11647),J=a(20243),Z=a(27063),$=a(59441),ee=a(1043),er=a(98635);let ea={pendingOperations:0,failedOperations:0,lastSync:void 0,nextRetry:void 0},et={idle:"success",syncing:"info",saving:"info",offline:"warning",error:"danger"},en={idle:"All changes are synced and ready.",syncing:"Syncing queued updates with the server.",saving:"Saving updates locally before syncing.",offline:"You're offline. We'll queue updates until you're back online.",error:"Some updates need attention. Retry sync when you're ready."};var es=a(648),ei=a(22642);let eo={success:"bg-emerald-500/10 text-emerald-100 hover:bg-emerald-500/20 border border-emerald-400/40",info:"bg-sky-500/10 text-sky-100 hover:bg-sky-500/20 border border-sky-400/40",warning:"bg-amber-500/10 text-amber-100 hover:bg-amber-500/20 border border-amber-400/40",danger:"bg-rose-500/10 text-rose-100 hover:bg-rose-500/20 border border-rose-400/40"},el={idle:H.A,syncing:V.A,saving:K.A,offline:F.A,error:G.A},ec={success:"text-emerald-300",info:"text-sky-300",warning:"text-amber-300",danger:"text-rose-300"};function ed(e){if(!e)return"never";let r=e instanceof Date?e.getTime():new Date(e).getTime();if(Number.isNaN(r))return"unknown";let a=Math.max(0,Math.floor((Date.now()-r)/1e3));return a<60?"just now":a<3600?"".concat(Math.floor(a/60),"m ago"):a<86400?"".concat(Math.floor(a/3600),"h ago"):"".concat(Math.floor(a/86400),"d ago")}function ef(){let{user:e}=(0,ei.A)(),r=function(){let[e,r]=(0,n.useState)(ea),a=(0,$.useIsFetching)(),t=(0,ee.useIsMutating)(),s=q();(0,n.useEffect)(()=>(0,er.vp)(e=>{e&&r(r=>{var a,t,n,s,i,o;return{pendingOperations:null!=(t=null!=(a=e.pendingOperations)?a:r.pendingOperations)?t:0,failedOperations:null!=(s=null!=(n=e.failedOperations)?n:r.failedOperations)?s:0,lastSync:null!=(i=e.lastSync)?i:r.lastSync,nextRetry:null!=(o=e.nextRetry)?o:r.nextRetry}})}),[]);let i=(0,n.useMemo)(()=>{let r="idle",n=!1;return s?t>0?(r="saving",n=!0):a>0||e.pendingOperations>0?(r="syncing",n=!0):e.failedOperations>0&&(r="error",n=!0):(r="offline",n=!0),{status:r,isActive:n}},[s,t,a,e.pendingOperations,e.failedOperations]),o=(0,n.useMemo)(()=>{let{status:r}=i;switch(r){case"offline":return e.pendingOperations>0?"Offline (".concat(e.pendingOperations,")"):"Offline";case"error":return e.failedOperations>0?"".concat(e.failedOperations," to retry"):"Needs attention";case"saving":return"Saving...";case"syncing":return e.pendingOperations>0?"Syncing (".concat(e.pendingOperations,")"):"Syncing...";default:return"All synced"}},[i,e.pendingOperations,e.failedOperations]),l=(0,n.useCallback)(async()=>{s&&await (0,er.Ik)()},[s]),c=(0,n.useMemo)(()=>!!s&&!["syncing","saving"].includes(i.status),[i.status,s]);return{...{status:i.status,isActive:i.isActive,tone:et[i.status],badgeText:o,description:en[i.status],pendingOperations:e.pendingOperations,failedOperations:e.failedOperations,lastSync:e.lastSync,nextRetry:e.nextRetry,isOnline:s,isBusy:["syncing","saving"].includes(i.status)},manualSync:l,canManualSync:c}}(),{data:a,isLoading:s}=v.F.healthAdvice.getHistory.useQuery({limit:1},{enabled:!!e}),i=null==a?void 0:a[0],o=(null==i?void 0:i.readiness_rho)?Number(i.readiness_rho):null,l=(0,n.useMemo)(()=>(0,es.L)(Number.isFinite(o)?o:null),[o]),c=null!=o&&o>=.6?u.A:G.A,d=el[r.status];return e?(0,t.jsxs)(Z.cj,{children:[(0,t.jsx)(Z.CG,{asChild:!0,children:(0,t.jsxs)(N.Button,{variant:"ghost",className:(0,C.cn)("flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-medium transition-all",eo[r.tone]),"aria-label":"Open sync and readiness status",children:[(0,t.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,t.jsx)("span",{className:(0,C.cn)("absolute inline-flex h-full w-full rounded-full opacity-75","danger"===r.tone?"bg-rose-400 animate-ping":"warning"===r.tone?"bg-amber-400 animate-pulse":"bg-sky-400 animate-ping",r.isBusy?"":"animate-none")}),(0,t.jsx)("span",{className:(0,C.cn)("relative inline-flex h-2 w-2 rounded-full","danger"===r.tone?"bg-rose-300":"warning"===r.tone?"bg-amber-300":"info"===r.tone?"bg-sky-300":"bg-emerald-300")})]}),(0,t.jsx)(d,{className:(0,C.cn)("h-3.5 w-3.5","saving"===r.status&&"animate-spin"),"aria-hidden":!0}),(0,t.jsx)("span",{children:r.badgeText})]})}),(0,t.jsx)(Z.h,{side:"bottom",className:"h-[80vh] overflow-y-auto rounded-t-3xl bg-gradient-to-b from-background/80 via-background to-background/95 px-5 pb-10 pt-6 sm:left-1/2 sm:top-auto sm:max-w-md sm:-translate-x-1/2","aria-label":"Sync and readiness status drawer",children:(0,t.jsxs)("div",{className:"mx-auto flex h-full max-w-xl flex-col gap-6",children:[(0,t.jsxs)("header",{className:"space-y-1",children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground/80",children:"Session health"}),(0,t.jsx)("h2",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-xl font-semibold text-transparent",children:"Sync & Readiness"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:r.description})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-border/60 bg-card/80 p-4 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)(Q.E,{variant:"outline",className:"border-border/50 text-xs uppercase tracking-wide",children:r.isOnline?"Online":"Offline"}),r.pendingOperations>0&&(0,t.jsxs)(Q.E,{className:"bg-sky-500/10 text-sky-200",children:[r.pendingOperations," pending"]}),r.failedOperations>0&&(0,t.jsxs)(Q.E,{className:"bg-rose-500/15 text-rose-200",children:[r.failedOperations," retry"]}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Last sync ",ed(r.lastSync)]})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-col gap-3 sm:flex-row",children:[(0,t.jsx)(N.Button,{onClick:()=>void r.manualSync(),disabled:!r.canManualSync,className:"flex-1 bg-primary text-primary-foreground hover:bg-primary/90",children:r.isBusy?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2 text-sm",children:[(0,t.jsx)(K.A,{className:"h-4 w-4 animate-spin"}),"Syncing"]}):(0,t.jsx)("span",{className:"text-sm",children:"Sync now"})}),(0,t.jsx)(N.Button,{variant:"outline",className:"flex-1 border-dashed border-border/60 text-sm",onClick:()=>void r.manualSync(),disabled:!r.isOnline||r.isBusy,children:"Refresh status"})]})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-border/60 bg-card/70 p-4 backdrop-blur",children:[(0,t.jsxs)("header",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground/70",children:"Readiness snapshot"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c,{className:(0,C.cn)("h-4 w-4",ec[l.tone]),"aria-hidden":!0}),(0,t.jsx)("h3",{className:(0,C.cn)("text-base font-semibold",ec[l.tone]),children:l.label})]})]}),null!=o&&(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"text-2xl font-semibold text-foreground",children:(100*o).toFixed(0)}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:" /100"})]})]}),(0,t.jsx)("div",{className:"mt-3 text-sm text-muted-foreground",children:s?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(J.EA,{className:"h-4 w-40"}),(0,t.jsx)(J.EA,{className:"h-3 w-24"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:l.message}),(0,t.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground/80",children:["Updated ",ed(null==i?void 0:i.createdAt)]})]})})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-border/60 bg-card/70 p-4 backdrop-blur",children:[(0,t.jsxs)("header",{className:"mb-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-wide text-muted-foreground/70",children:"Offline queue"}),(0,t.jsx)("h3",{className:"text-base font-semibold text-foreground",children:"Pending sessions"})]}),!r.isOnline&&(0,t.jsx)(Q.E,{className:"bg-amber-500/20 text-amber-200",children:"Offline"})]}),(0,t.jsx)(X,{})]})]})})]}):null}var eu=a(85897);let em=[{label:"Dashboard",href:"/",icon:l.A,requiresAuth:!0},{label:"Workouts",href:"/workouts",icon:c.A,requiresAuth:!0},{label:"Progress",href:"/progress",icon:d.A,requiresAuth:!0},{label:"Templates",href:"/templates",icon:f.A,requiresAuth:!0},{label:"Whoop",href:"/connect-whoop",icon:u.A,requiresAuth:!0}];function eh(){let e=(0,o.usePathname)(),{toggle:r,resolvedTheme:a}=(0,E.W)(),{user:s,isLoading:l,signOut:c}=(0,ei.A)(),[d,f]=(0,n.useState)(!1),[u,g]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),[j,_]=(0,n.useState)(!1);(0,n.useEffect)(()=>{f(!0)},[]),(0,n.useEffect)(()=>{v(!1),_(!1)},[e]);let w=(0,n.useMemo)(()=>s?em.filter(e=>!e.requiresAuth||!!s):[],[s]),S=w.length>0,O=(0,n.useMemo)(()=>{var e,r,a;if(!s)return"";let t=null==(e=s.user_metadata)?void 0:e.first_name;if("string"==typeof t&&t.trim().length>0)return t.trim();let n=null==(r=s.user_metadata)?void 0:r.display_name;if("string"==typeof n&&n.trim().length>0)return n.trim();let i=null==(a=s.email)?void 0:a.split("@")[0];return i&&i.length>0?i:"Athlete"},[s]),T=(0,n.useMemo)(()=>{var e;return s?(null!=(e=(O||s.email||"").match(/\b\w/g))?e:[]).slice(0,2).join("").toUpperCase()||"S":""},[O,s]),A=r=>!!e&&("/"===r?"/"===e:e.startsWith(r)),k=d?"dark"===a?(0,t.jsx)(m.A,{className:"h-5 w-5"}):(0,t.jsx)(h.A,{className:"h-5 w-5"}):(0,t.jsx)(h.A,{className:"h-5 w-5 opacity-0"}),R=async()=>{await c(),v(!1)},P=(0,t.jsxs)(i(),{href:"/",className:"flex items-center gap-2","aria-label":"Swole Tracker home",children:[(0,t.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-gradient-to-br from-primary via-primary/60 to-accent text-lg font-black text-primary-foreground shadow-sm",children:"S"}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-lg font-semibold text-transparent",children:"Swole Tracker"}),s&&(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Welcome back, ",O]})]})]});return(0,t.jsxs)("header",{className:"sticky top-0 z-50 border-b border-border/60 bg-background/75 backdrop-blur-xl",children:[(0,t.jsxs)("div",{className:"mx-auto flex h-16 w-full max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[S?(0,t.jsxs)(Z.cj,{open:j,onOpenChange:_,children:[(0,t.jsx)(Z.CG,{asChild:!0,children:(0,t.jsx)(N.Button,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Open navigation menu",children:(0,t.jsx)(b.A,{className:"h-5 w-5"})})}),(0,t.jsx)(Z.h,{side:"left",className:"w-full max-w-xs border-r border-border/40 bg-background/95 px-5 py-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)("div",{children:P}),(0,t.jsx)("nav",{className:"space-y-1","aria-label":"Primary",children:w.map(e=>(0,t.jsxs)(i(),{href:e.href,onClick:()=>_(!1),className:(0,C.cn)("flex items-center justify-between rounded-xl border border-transparent px-3 py-3 text-sm font-medium transition-colors",A(e.href)?"border-primary/40 bg-primary/10 text-foreground":"text-muted-foreground hover:border-border/50 hover:bg-muted/50 hover:text-foreground"),children:[(0,t.jsxs)("span",{className:"flex items-center gap-3",children:[(0,t.jsx)(e.icon,{className:"h-4 w-4","aria-hidden":!0}),e.label]}),A(e.href)&&(0,t.jsx)("span",{className:"text-xs text-primary",children:"Active"})]},e.href))}),(0,t.jsxs)("div",{className:"space-y-3 border-t border-border/40 pt-4",children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground/80",children:"Quick controls"}),(0,t.jsx)("div",{onClick:()=>_(!1),children:(0,t.jsx)(ef,{})}),(0,t.jsxs)(N.Button,{variant:"outline",className:"justify-start gap-3",onClick:()=>{r(),_(!1)},children:[d&&"dark"===a?(0,t.jsx)(m.A,{className:"h-4 w-4","aria-hidden":!0}):(0,t.jsx)(h.A,{className:"h-4 w-4","aria-hidden":!0}),"Toggle theme"]}),(0,t.jsxs)(N.Button,{variant:"outline",className:"justify-start gap-3",onClick:()=>{g(!0),_(!1)},children:[(0,t.jsx)(p.A,{className:"h-4 w-4","aria-hidden":!0})," Preferences"]})]})]})})]}):null,(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[P,S&&(0,t.jsx)("nav",{className:"hidden md:flex items-center gap-1","aria-label":"Primary",children:w.map(e=>{let r=e.icon,a=A(e.href);return(0,t.jsxs)(i(),{href:e.href,className:(0,C.cn)("group flex items-center gap-2 rounded-full px-3 py-2 text-sm transition-all",a?"bg-gradient-to-r from-primary/20 to-accent/20 text-foreground shadow-sm":"text-muted-foreground hover:bg-muted/60 hover:text-foreground"),children:[(0,t.jsx)(r,{className:(0,C.cn)("h-4 w-4",a&&"text-primary"),"aria-hidden":!0}),(0,t.jsx)("span",{className:"hidden lg:inline",children:e.label}),(0,t.jsx)("span",{className:"lg:hidden",children:e.label})]},e.href)})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[s&&(0,t.jsx)(ef,{}),(0,t.jsx)(N.Button,{variant:"ghost",size:"icon","aria-label":"Toggle theme",onClick:r,className:"hidden sm:inline-flex",children:k}),(0,t.jsx)(N.Button,{variant:"ghost",size:"icon","aria-label":"Notifications",className:"hidden sm:inline-flex",children:(0,t.jsx)(x.A,{className:"h-5 w-5"})}),(0,t.jsx)(N.Button,{variant:"ghost",size:"icon","aria-label":"Open preferences",onClick:()=>g(!0),className:"hidden sm:inline-flex",children:(0,t.jsx)(p.A,{className:"h-5 w-5"})}),s?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{type:"button",onClick:()=>v(e=>!e),className:"flex h-9 w-9 items-center justify-center rounded-full border border-border/60 bg-card/80 transition-colors hover:border-primary/40","aria-label":"Account menu","aria-haspopup":"menu","aria-expanded":y,children:(0,t.jsxs)(eu.eu,{className:"h-8 w-8",children:[(0,t.jsx)(eu.BK,{src:"/fitness-user-avatar.png",alt:"".concat(O,"'s avatar")}),(0,t.jsx)(eu.q5,{className:"bg-primary/20 text-sm font-semibold text-primary",children:T})]})}),y&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-52 overflow-hidden rounded-2xl border border-border/60 bg-card/95 shadow-xl backdrop-blur",children:[(0,t.jsx)("div",{className:"border-b border-border/50 px-4 py-3 text-sm text-muted-foreground",children:s.email}),(0,t.jsxs)("button",{type:"button",onClick:R,className:"flex w-full items-center justify-between px-4 py-3 text-sm font-medium text-foreground transition-colors hover:bg-muted/60",children:["Sign out",(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"↩"})]})]})]}):!l&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i(),{href:"/auth/login",className:"rounded-full border border-border/60 px-4 py-2 text-sm font-medium text-foreground transition hover:border-primary/50 hover:bg-primary/10",children:"Sign in"}),(0,t.jsx)(N.Button,{className:"rounded-full bg-gradient-to-r from-primary to-accent px-4 py-2 text-sm font-semibold text-primary-foreground shadow-sm hover:opacity-90",asChild:!0,children:(0,t.jsx)(i(),{href:"/auth/register",children:"Create account"})})]})]})]}),(0,t.jsx)(U,{open:u,onClose:()=>g(!1)})]})}},64053:(e,r,a)=>{"use strict";a.d(r,{ThemeProvider:()=>l,W:()=>c});var t=a(95155),n=a(12115);let s=(0,n.createContext)(void 0),i="theme";function o(e,r){let a=document.documentElement,t="system"===e?r?"dark":"light":e;a.dataset.theme=t,a.dataset.themeMode=e,a.classList.toggle("dark","dark"===t)}function l(e){let{children:r}=e,[a,l]=(0,n.useState)("system"),[c,d]=(0,n.useState)(()=>{var e,r,a,t;return null!=(t=null==(r=(a=window).matchMedia)||null==(e=r.call(a,"(prefers-color-scheme: dark)"))?void 0:e.matches)&&t}),f=(0,n.useMemo)(()=>"system"===a?c?"dark":"light":a,[a,c]);(0,n.useEffect)(()=>{var e,r;let a=null!=(r=localStorage.getItem(i))?r:"system";l(a);let t=window.matchMedia("(prefers-color-scheme: dark)"),n=t.matches;d(n),o(a,n);let s=e=>{d(e.matches)};return null==(e=t.addEventListener)||e.call(t,"change",s),()=>{var e;return null==(e=t.removeEventListener)?void 0:e.call(t,"change",s)}},[]),(0,n.useEffect)(()=>{o(a,c)},[a,c]);let u=(0,n.useCallback)(e=>{l(e);try{localStorage.setItem(i,e)}catch(e){}o(e,c)},[c]),m=(0,n.useCallback)(()=>{u("dark"===a?"light":"dark")},[a,u]),h=(0,n.useMemo)(()=>({theme:a,resolvedTheme:f,setTheme:u,toggle:m}),[a,f,u,m]);return(0,t.jsx)(s.Provider,{value:h,children:r})}function c(){let e=n.useContext(s);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},83960:(e,r,a)=>{"use strict";a.d(r,{G:()=>o,s:()=>i});var t=a(95155),n=a(12115);function s(e){return e?Array.from(e.querySelectorAll("a[href],button:not([disabled]),textarea:not([disabled]),input:not([disabled]),select:not([disabled]),[tabindex]:not([tabindex='-1']),[contenteditable='true']")).filter(e=>{let r=window.getComputedStyle(e);return!("hidden"===r.visibility||"none"===r.display||e.hasAttribute("disabled"))}):[]}function i(e){let{children:r,onEscape:a,initialFocusRef:i,preventScroll:o}=e,l=(0,n.useRef)(null);return(0,n.useLayoutEffect)(()=>{var e;let r=l.current;if(!r)return;let a=null;o&&"undefined"!=typeof document&&(a=document.body.style.overflow,document.body.style.overflow="hidden");let t=null!=(e=null==i?void 0:i.current)?e:s(r)[0];if(t&&"function"==typeof t.focus)try{t.focus()}catch(e){}return()=>{o&&"undefined"!=typeof document&&null!==a&&(document.body.style.overflow=a)}},[i,o]),(0,n.useEffect)(()=>{let e=l.current;if(!e)return;let r=r=>{if("Escape"===r.key){a&&(r.stopPropagation(),r.preventDefault(),a());return}if("Tab"!==r.key)return;let t=s(e);if(0===t.length){var n;r.preventDefault(),null==(n=e.focus)||n.call(e);return}let i=document.activeElement,o=t[0],l=t[t.length-1];r.shiftKey?(!i||o&&i===o)&&(r.preventDefault(),l&&l.focus()):(!i||l&&i===l)&&(r.preventDefault(),o&&o.focus())};return e.addEventListener("keydown",r),()=>{e.removeEventListener("keydown",r)}},[a]),(0,t.jsx)("div",{ref:l,tabIndex:-1,children:r})}function o(){let e=(0,n.useRef)(null);return(0,n.useEffect)(()=>{try{let r=document.activeElement;r&&(e.current=r)}catch(e){}},[]),{triggerRef:e,restoreFocus:()=>{try{let r=e.current;r&&"function"==typeof r.focus&&r.focus()}catch(e){}}}}},93836:()=>{},95932:(e,r,a)=>{"use strict";a.d(r,{ErrorBoundary:()=>i});var t=a(95155),n=a(12115);let s=e=>{let{error:r,retry:a}=e;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8 text-center",children:[(0,t.jsx)("div",{className:"text-xl font-semibold text-foreground mb-2",children:"Something went wrong"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-4",children:(null==r?void 0:r.message)||"An unexpected error occurred"}),(0,t.jsx)("button",{onClick:a,className:"px-4 py-2 bg-primary text-primary-foreground rounded hover:opacity-90 transition-opacity",children:"Try again"})]})};class i extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,r){console.error("ErrorBoundary caught an error:",e,r)}render(){if(this.state.hasError){let e=this.props.fallback||s;return(0,t.jsx)(e,{error:this.state.error,retry:this.handleRetry})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:void 0})},this.state={hasError:!1}}}}},e=>{e.O(0,[5475,8229,274,8096,126,842,8441,7358],()=>e(e.s=17262)),_N_E=e.O()}]);