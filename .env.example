# ------------------------------
# Shared secrets (managed via Infisical)
# Populate these per environment (dev/staging/prod) before running the app.
# ------------------------------

# WorkOS authentication (Console → API Keys & Credentials)
WORKOS_API_KEY=
WORKOS_CLIENT_ID=

# Worker session management (generate 32+ char random string)
# Example: `openssl rand -base64 48` → paste into Infisical per environment.
WORKER_SESSION_SECRET=

# Encryption key for secure storage (32+ chars, stored in Infisical)
# Example: `node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"`
ENCRYPTION_MASTER_KEY=

# Whoop integration (Whoop Developer Portal)
WHOOP_CLIENT_ID=
WHOOP_CLIENT_SECRET=
WHOOP_WEBHOOK_SECRET=
WHOOP_SYNC_RATE_LIMIT_PER_HOUR=10

# AI Gateway (Vercel AI Gateway console)
VERCEL_AI_GATEWAY_API_KEY=
AI_GATEWAY_API_KEY=
AI_GATEWAY_MODEL=xai/grok-3-mini
AI_GATEWAY_PROMPT=Tell me a short, funny programming or tech joke. Keep it clean and under 100 words.
AI_GATEWAY_JOKE_MEMORY_NUMBER=3
AI_GATEWAY_MODEL_HEALTH=xai/grok-3-mini
AI_DEBRIEF_MODEL=xai/grok-3-mini
AI_DEBRIEF_TEMPERATURE=0.7

# PostHog analytics (Project → Setup page)
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com

# Rate limiting knobs (tune per environment)
RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR=100
RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR=200
RATE_LIMIT_API_CALLS_PER_MINUTE=60
RATE_LIMIT_ENABLED=true

# Database (legacy Postgres connection; remove once D1 migration completes)
DATABASE_URL=

# Cloudflare deployment (Cloudflare Dashboard → Overview & API Tokens)
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_API_TOKEN=

# Infisical integration for CI/CD pipelines
# - Create a Machine Identity (Infisical → Project Settings → Machine Identities)
# - Grant it access to the dev/staging/prod environments you need
# - Store the Machine Identity Client ID / Client Secret as GitHub repository secrets
#   (e.g., `INFISICAL_CLIENT_ID`, `INFISICAL_CLIENT_SECRET`)
# - Use these only in GitHub Actions; they are not required in local `.env`
INFISICAL_CLIENT_ID=
INFISICAL_CLIENT_SECRET=
INFISICAL_WORKSPACE_SLUG=

# Optional extras (safe defaults)
DEBUG_SQL=false
MONITOR_DB=false

# ------------------------------
# Environment-specific overrides
# Keep the following grouped blocks to mirror Infisical environments.
# ------------------------------

# --- dev ---
# Local Workers preview + WorkOS/Whoop redirect URIs
NEXT_PUBLIC_SITE_URL=http://localhost:3000
WORKOS_REDIRECT_URI=http://localhost:3000/api/auth/callback
WHOOP_REDIRECT_URI=http://localhost:3000/api/auth/whoop/callback

# --- staging ---
# Cloudflare Workers staging @ preview.stevenduong.com
NEXT_PUBLIC_SITE_URL=https://preview.stevenduong.com
WORKOS_REDIRECT_URI=https://preview.stevenduong.com/api/auth/callback
WHOOP_REDIRECT_URI=https://preview.stevenduong.com/api/auth/whoop/callback

# --- production ---
# Cloudflare Workers production @ workout.stevenduong.com
NEXT_PUBLIC_SITE_URL=https://workout.stevenduong.com
WORKOS_REDIRECT_URI=https://workout.stevenduong.com/api/auth/callback
WHOOP_REDIRECT_URI=https://workout.stevenduong.com/api/auth/whoop/callback
