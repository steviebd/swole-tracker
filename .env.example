# ==============================================================================
# SWOLE TRACKER - ENVIRONMENT VARIABLES
# ==============================================================================
# 
# This file contains ALL environment variables needed for the Swole Tracker app.
# Copy this file to .env.local and fill in your actual values.
#
# BUILD-TIME VS. RUNTIME VARIABLES:
#
# 1. BUILD-TIME VARIABLES (NON-SECRET):
#    - These are used during the build process to generate the wrangler.toml file.
#    - They are safe to be stored in .env.local for local development.
#    - For CI/CD (GitHub Actions), they should be set as Environment Variables in the Cloudflare project settings.
#
# 2. RUNTIME SECRETS (ENCRYPTED):
#    - These are sensitive values (e.g., API keys) that are accessed at runtime.
#    - They should NEVER be stored in .env files.
#    - For local development, use a .dev.vars file (not committed to git).
#    - For CI/CD, they should be set as Secrets in the Cloudflare project settings.
#
# ==============================================================================

# ==============================================================================
# üîë AUTHENTICATION & CORE SERVICES
# ==============================================================================

# WorkOS (Authentication)
# Get these from: https://dashboard.workos.com/
# BUILD-TIME VARIABLE
WORKOS_CLIENT_ID=client_01XXXXXXXXXXXXXXXXXX
# RUNTIME SECRET
WORKOS_API_KEY=insert-api-key-here

# Infisical Machine Identity (Secrets Management)
# Get these from: https://app.infisical.com/
# Used for authenticating with Infisical to inject secrets at build time
# BUILD-TIME VARIABLES
INFISICAL_CLIENT_ID=your_infisical_client_id
INFISICAL_SECRET=your_infisical_secret
INFISICAL_PROJECT_ID=your_infisical_project_id

#INFISICAL_ENVIRONMENT="dev, staging or prod" this is not needed as we are passing it on in dev:remote, deploy:staging and deploy:production already.

# ==============================================================================
# ‚òÅÔ∏è CLOUDFLARE CONFIGURATION
# ==============================================================================

# Cloudflare Account & API
# BUILD-TIME VARIABLE
CLOUDFLARE_ACCOUNT_ID=your_account_id_here
# RUNTIME SECRET (used by wrangler CLI, not the worker itself)
CLOUDFLARE_API_TOKEN=your_api_token_here

# Cloudflare Environment Resources (Consolidated)
# BUILD-TIME VARIABLES
# These unified variables will be set to the appropriate environment-specific values
# through your build/deployment system (GitHub Actions, CI/CD, etc.) and you would point to the correct databases at runtime
CLOUDFLARE_D1_DATABASE_ID=your_database_id
CLOUDFLARE_RATE_LIMIT_KV_ID=your_rate_limit_kv_id
CLOUDFLARE_CACHE_KV_ID=your_cache_kv_id
CLOUDFLARE_D1_DATABASE_NAME=your_database_name


# Local D1 Development Overrides (Optional)
# Set USE_LOCAL_D1=true to enable local D1 development with SQLite
# This will override the above Cloudflare variables for local development
# while still allowing Infisical to inject non-conflicting values
USE_LOCAL_D1=false
# DATABASE_URL=sqlite:.wrangler/state/swole-tracker-local.db  # Uncomment for local SQLite

# Custom Domain Routes (Optional)
# BUILD-TIME VARIABLES
# Environment-specific domains to avoid route conflicts
STAGING_CLOUDFLARE_DOMAIN=staging.xxx.com
PRODUCTION_CLOUDFLARE_DOMAIN=xxx.com
# The zone name for your custom domains (the root domain in Cloudflare)
CLOUDFLARE_ZONE_NAME=xxx.com

# Legacy domain variable (deprecated - use environment-specific ones above)
# CLOUDFLARE_DOMAIN=xxxxx.zone_name.com

# ==============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION
# ==============================================================================

# Note: Environment-specific values should be set through your build/deployment system:
# - For production: Set CLOUDFLARE_D1_DATABASE_ID to your production database ID
# - For staging: Set CLOUDFLARE_D1_DATABASE_ID to your staging database ID
# - For development: Set CLOUDFLARE_D1_DATABASE_ID to your dev database ID
# This keeps your .env file clean and environment-agnostic

# Optional: Database URLs (ONLY for migration scripts if needed)
# RUNTIME SECRETS
DATABASE_URL=postgres://optional_for_migrations_only
STAGING_DATABASE_URL=postgres://optional_for_migrations_only  
PRODUCTION_DATABASE_URL=postgres://optional_for_migrations_only
# ==============================================================================
# üèÉ‚Äç‚ôÇÔ∏è WHOOP INTEGRATION (Optional)
# ==============================================================================
# Get these from: https://developer.whoop.com/

# BUILD-TIME VARIABLE
WHOOP_CLIENT_ID=your_whoop_client_id
# RUNTIME SECRETS
WHOOP_CLIENT_SECRET=your_whoop_client_secret
WHOOP_WEBHOOK_SECRET=your_whoop_webhook_secret
# BUILD-TIME VARIABLE
WHOOP_SYNC_RATE_LIMIT_PER_HOUR=10

# ==============================================================================
# ü§ñ AI FEATURES (Optional)
# ==============================================================================

# AI Gateway (Optional)
# For AI-powered health advice and joke features
# RUNTIME SECRETS
VERCEL_AI_GATEWAY_API_KEY=your_ai_gateway_api_key
AI_GATEWAY_API_KEY=your_ai_gateway_api_key
# BUILD-TIME VARIABLES
AI_GATEWAY_MODEL=xai/grok-3-mini
AI_GATEWAY_PROMPT=Tell me a short, funny programming or tech joke. Keep it clean and under 100 words.
AI_GATEWAY_JOKE_MEMORY_NUMBER=3
AI_GATEWAY_MODEL_HEALTH=xai/grok-3-mini

# ==============================================================================
# üîß DEVELOPMENT & RATE LIMITING
# ==============================================================================

# Rate Limiting Configuration (match env.js schema)
# BUILD-TIME VARIABLES
RATE_LIMIT_TEMPLATE_OPERATIONS_PER_HOUR=100
RATE_LIMIT_WORKOUT_OPERATIONS_PER_HOUR=200
RATE_LIMIT_API_CALLS_PER_MINUTE=60
RATE_LIMIT_ENABLED=true

# ==============================================================================
# üîß ENVIRONMENT & BUILD SETTINGS
# ==============================================================================

# Node Environment (affects Next.js behavior and optimizations)
# BUILD-TIME VARIABLE
NODE_ENV=development

# Next.js Telemetry (data collection by Vercel)
# BUILD-TIME VARIABLE
NEXT_TELEMETRY_DISABLED=1

# Environment validation skip (for CI/Docker builds)
# BUILD-TIME VARIABLE
SKIP_ENV_VALIDATION=0

# Environment identifier (set automatically in deployments)
# BUILD-TIME VARIABLE
ENVIRONMENT=development

# ==============================================================================
# üì± MOBILE APP CONFIGURATION (Optional)
# ==============================================================================
# Only needed if using the React Native mobile app

# Mobile API endpoints (automatically set based on environment)
# BUILD-TIME VARIABLES
NEXT_PUBLIC_API_BASE_URL=http://localhost:3000
NEXT_PUBLIC_MOBILE_API_URL=http://localhost:3000/api

