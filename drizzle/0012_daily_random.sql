CREATE INDEX `template_exercise_user_exercise_name_idx` ON `template_exercise` (`user_id`,`exerciseName`);--> statement-breakpoint
CREATE VIEW `view_exercise_name_resolution` AS select "template_exercise"."id", "template_exercise"."exerciseName", COALESCE("master_exercise"."name", "template_exercise"."exerciseName") as "resolvedName", "exercise_link"."masterExerciseId" from "template_exercise" left join "exercise_link" on "exercise_link"."templateExerciseId" = "template_exercise"."id" left join "master_exercise" on "master_exercise"."id" = "exercise_link"."masterExerciseId";--> statement-breakpoint
CREATE VIEW `view_session_exercise_metrics` AS select "session_exercise"."id", "session_exercise"."sessionId", "session_exercise"."user_id", "session_exercise"."templateExerciseId", "session_exercise"."exerciseName", COALESCE(NULLIF("session_exercise"."resolvedExerciseName", ''), "session_exercise"."exerciseName") as "resolvedExerciseName", "workout_session"."workoutDate", "session_exercise"."weight", "session_exercise"."reps", "session_exercise"."sets", "session_exercise"."unit", "session_exercise"."one_rm_estimate", "session_exercise"."volume_load" from "session_exercise" inner join "workout_session" on "workout_session"."id" = "session_exercise"."sessionId";--> statement-breakpoint
CREATE VIEW `view_whoop_metrics` AS select "user_id", "date", "recovery_score", NULL as "sleepPerformance", "hrv_rmssd_milli", "hrv_rmssd_baseline", "resting_heart_rate", "resting_heart_rate_baseline" from "whoop_recovery";