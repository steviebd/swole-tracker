{
  "version": "6",
  "dialect": "sqlite",
  "id": "0021_playbook_plan_selection",
  "prevId": "0015_fantastic_dragon_man",
  "tables": {
    "playbook": {
      "name": "playbook",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "text",
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "notNull": true
        },
        "goalText": {
          "name": "goalText",
          "type": "text"
        },
        "goalPreset": {
          "name": "goalPreset",
          "type": "text"
        },
        "targetType": {
          "name": "targetType",
          "type": "text",
          "notNull": true
        },
        "targetIds": {
          "name": "targetIds",
          "type": "text",
          "notNull": true
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "notNull": true,
          "default": 6
        },
        "status": {
          "name": "status",
          "type": "text",
          "notNull": true,
          "default": "draft"
        },
        "metadata": {
          "name": "metadata",
          "type": "text"
        },
        "hasAiPlan": {
          "name": "hasAiPlan",
          "type": "integer",
          "mode": "boolean",
          "default": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "text",
          "notNull": true,
          "default": "(datetime('now'))"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "text"
        },
        "startedAt": {
          "name": "startedAt",
          "type": "text"
        },
        "completedAt": {
          "name": "completedAt",
          "type": "text"
        }
      },
      "indexes": {
        "playbook_user_id_idx": {
          "name": "playbook_user_id_idx",
          "columns": ["userId"],
          "unique": false
        },
        "playbook_status_idx": {
          "name": "playbook_status_idx",
          "columns": ["status"],
          "unique": false
        },
        "playbook_user_status_idx": {
          "name": "playbook_user_status_idx",
          "columns": ["userId", "status"],
          "unique": false
        },
        "playbook_created_at_idx": {
          "name": "playbook_created_at_idx",
          "columns": ["createdAt"],
          "unique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {}
    },
    "playbook_session": {
      "name": "playbook_session",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "autoincrement": true
        },
        "playbookWeekId": {
          "name": "playbookWeekId",
          "type": "integer",
          "notNull": true,
          "references": {
            "table": "playbook_week",
            "column": "id",
            "onDelete": "cascade"
          }
        },
        "sessionNumber": {
          "name": "sessionNumber",
          "type": "integer",
          "notNull": true
        },
        "sessionDate": {
          "name": "sessionDate",
          "type": "text"
        },
        "prescribedWorkoutJson": {
          "name": "prescribedWorkoutJson",
          "type": "text",
          "notNull": true
        },
        "actualWorkoutId": {
          "name": "actualWorkoutId",
          "type": "integer",
          "references": {
            "table": "workout_session",
            "column": "id",
            "onDelete": "set null"
          }
        },
        "adherenceScore": {
          "name": "adherenceScore",
          "type": "real"
        },
        "rpe": {
          "name": "rpe",
          "type": "integer"
        },
        "rpeNotes": {
          "name": "rpeNotes",
          "type": "text"
        },
        "deviation": {
          "name": "deviation",
          "type": "text"
        },
        "activePlanType": {
          "name": "activePlanType",
          "type": "text",
          "enum": ["ai", "algorithmic"],
          "notNull": true,
          "default": "algorithmic"
        },
        "isCompleted": {
          "name": "isCompleted",
          "type": "integer",
          "mode": "boolean",
          "notNull": true,
          "default": false
        },
        "completedAt": {
          "name": "completedAt",
          "type": "text"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "text",
          "notNull": true,
          "default": "(datetime('now'))"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "text"
        }
      },
      "indexes": {
        "playbook_session_week_id_idx": {
          "name": "playbook_session_week_id_idx",
          "columns": ["playbookWeekId"],
          "unique": false
        },
        "playbook_session_date_idx": {
          "name": "playbook_session_date_idx",
          "columns": ["sessionDate"],
          "unique": false
        },
        "playbook_session_workout_id_idx": {
          "name": "playbook_session_workout_id_idx",
          "columns": ["actualWorkoutId"],
          "unique": false
        },
        "playbook_session_week_number_idx": {
          "name": "playbook_session_week_number_idx",
          "columns": ["playbookWeekId", "sessionNumber"],
          "unique": false
        },
        "playbook_session_unique": {
          "name": "playbook_session_unique",
          "columns": ["playbookWeekId", "sessionNumber"],
          "unique": true
        }
      },
      "foreignKeys": {
        "playbook_session_playbookWeekId_playbook_week_id_fk": {
          "name": "playbook_session_playbookWeekId_playbook_week_id_fk",
          "tableFrom": "playbook_session",
          "tableTo": "playbook_week",
          "columnsFrom": ["playbookWeekId"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "playbook_session_actualWorkoutId_workout_session_id_fk": {
          "name": "playbook_session_actualWorkoutId_workout_session_id_fk",
          "tableFrom": "playbook_session",
          "tableTo": "workout_session",
          "columnsFrom": ["actualWorkoutId"],
          "columnsTo": ["id"],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "playbook_session_unique": {
          "name": "playbook_session_unique",
          "columns": ["playbookWeekId", "sessionNumber"],
          "nullsNotDistinct": false
        }
      }
    }
  },
  "enums": {},
  "schemas": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  }
}
