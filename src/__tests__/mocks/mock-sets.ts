// Centralized mock data sets for consistent test scenarios
import {
  createMockUser,
  createMockUserPreferences,
  createMockUserIntegration,
  createMockWorkoutTemplate,
  createMockWorkoutSession,
  createMockTemplateExercise,
  createMockSessionExercise,
  createMockMasterExercise,
  createMockExerciseLink,
  createMockWellnessData,
  createMockWhoopRecovery,
  createMockWhoopCycle,
  createMockWhoopSleep,
  createMockWhoopProfile,
  createMockHealthAdvice,
  createMockSessionDebrief,
  createMockAISuggestionHistory,
  createMockExerciseDailySummary,
  createMockExerciseWeeklySummary,
  createMockExerciseMonthlySummary,
} from "./test-data";

// Standard user - basic setup with minimal data
export const standardUser = {
  user: createMockUser({
    id: "standard-user-id",
    email: "standard@example.com",
    firstName: "Standard",
    lastName: "User",
  }),
  preferences: createMockUserPreferences({
    user_id: "standard-user-id",
    defaultWeightUnit: "kg",
    predictive_defaults_enabled: true,
    targetWorkoutsPerWeek: 3,
  }),
};

// Pro user - advanced user with integrations and extensive data
export const proUser = {
  user: createMockUser({
    id: "pro-user-id",
    email: "pro@example.com",
    firstName: "Pro",
    lastName: "User",
    profilePictureUrl: "https://example.com/avatar.jpg",
  }),
  preferences: createMockUserPreferences({
    user_id: "pro-user-id",
    defaultWeightUnit: "lbs",
    predictive_defaults_enabled: true,
    right_swipe_action: "complete_set",
    enable_manual_wellness: true,
    progression_type: "adaptive",
    linear_progression_kg: 5.0,
    percentage_progression: 5.0,
    targetWorkoutsPerWeek: 6,
  }),
  integration: createMockUserIntegration({
    user_id: "pro-user-id",
    provider: "whoop",
    externalUserId: "whoop-pro-123",
    isActive: true,
  }),
  whoopProfile: createMockWhoopProfile({
    user_id: "pro-user-id",
    whoop_user_id: "whoop-pro-123",
    email: "pro@whoop.com",
    first_name: "Pro",
    last_name: "User",
  }),
};

// Workout with exercises - complete workout session setup
export const workoutWithExercises = {
  template: createMockWorkoutTemplate({
    id: 100,
    name: "Full Body Blast",
    user_id: "standard-user-id",
  }),
  session: createMockWorkoutSession({
    id: 100,
    user_id: "standard-user-id",
    templateId: 100,
    workoutDate: new Date("2024-01-15T10:00:00.000Z"),
  }),
  templateExercises: [
    createMockTemplateExercise({
      id: 100,
      user_id: "standard-user-id",
      templateId: 100,
      exerciseName: "Bench Press",
      orderIndex: 0,
    }),
    createMockTemplateExercise({
      id: 101,
      user_id: "standard-user-id",
      templateId: 100,
      exerciseName: "Squat",
      orderIndex: 1,
    }),
    createMockTemplateExercise({
      id: 102,
      user_id: "standard-user-id",
      templateId: 100,
      exerciseName: "Deadlift",
      orderIndex: 2,
    }),
  ],
  sessionExercises: [
    createMockSessionExercise({
      id: 100,
      user_id: "standard-user-id",
      sessionId: 100,
      templateExerciseId: 100,
      exerciseName: "Bench Press",
      weight: 185.0,
      reps: 8,
      sets: 3,
      unit: "kg",
      rpe: 7.5,
      rest_seconds: 180,
      one_rm_estimate: 205.0,
      volume_load: 4440.0,
    }),
    createMockSessionExercise({
      id: 101,
      user_id: "standard-user-id",
      sessionId: 100,
      templateExerciseId: 101,
      exerciseName: "Squat",
      weight: 225.0,
      reps: 5,
      sets: 4,
      unit: "kg",
      rpe: 8.0,
      rest_seconds: 240,
      one_rm_estimate: 245.0,
      volume_load: 4500.0,
    }),
    createMockSessionExercise({
      id: 102,
      user_id: "standard-user-id",
      sessionId: 100,
      templateExerciseId: 102,
      exerciseName: "Deadlift",
      weight: 275.0,
      reps: 3,
      sets: 3,
      unit: "kg",
      rpe: 9.0,
      rest_seconds: 300,
      one_rm_estimate: 305.0,
      volume_load: 2475.0,
    }),
  ],
  masterExercises: [
    createMockMasterExercise({
      id: 100,
      user_id: "standard-user-id",
      name: "Bench Press",
      normalizedName: "bench press",
      tags: "chest,barbell,compound",
      muscleGroup: "chest",
    }),
    createMockMasterExercise({
      id: 101,
      user_id: "standard-user-id",
      name: "Squat",
      normalizedName: "squat",
      tags: "legs,barbell,compound",
      muscleGroup: "legs",
    }),
    createMockMasterExercise({
      id: 102,
      user_id: "standard-user-id",
      name: "Deadlift",
      normalizedName: "deadlift",
      tags: "back,barbell,compound",
      muscleGroup: "back",
    }),
  ],
  exerciseLinks: [
    createMockExerciseLink({
      id: 100,
      templateExerciseId: 100,
      masterExerciseId: 100,
      user_id: "standard-user-id",
    }),
    createMockExerciseLink({
      id: 101,
      templateExerciseId: 101,
      masterExerciseId: 101,
      user_id: "standard-user-id",
    }),
    createMockExerciseLink({
      id: 102,
      templateExerciseId: 102,
      masterExerciseId: 102,
      user_id: "standard-user-id",
    }),
  ],
  wellnessData: createMockWellnessData({
    user_id: "standard-user-id",
    sessionId: 100,
    date: new Date("2024-01-15T00:00:00.000Z"),
    energy_level: 8,
    sleep_quality: 7,
    has_whoop_data: false,
    notes: "Feeling strong today",
  }),
  healthAdvice: createMockHealthAdvice({
    user_id: "standard-user-id",
    sessionId: 100,
    request: '{"readiness": 0.85}',
    response: '{"suggestions": ["Increase weight on bench press", "Add accessory work"]}',
    readiness_rho: 0.85,
    overload_multiplier: 1.1,
    session_predicted_chance: 0.92,
    user_accepted_suggestions: 2,
    total_suggestions: 3,
    response_time_ms: 120,
    model_used: "gpt-4",
  }),
  sessionDebrief: createMockSessionDebrief({
    user_id: "standard-user-id",
    sessionId: 100,
    summary: "Excellent full body session with PR attempts",
    prHighlights: "Bench Press: 185lbs x 8, Squat: 225lbs x 5",
    adherenceScore: 0.98,
    focusAreas: "Continue progressive overload",
    streakContext: "3rd consecutive workout",
    overloadDigest: "Optimal overload achieved",
    metadata: '{"duration": 5400, "total_volume": 11415}',
    isActive: true,
  }),
  aiSuggestionHistory: [
    createMockAISuggestionHistory({
      user_id: "standard-user-id",
      sessionId: 100,
      exerciseName: "Bench Press",
      setId: "100_0",
      setIndex: 0,
      suggested_weight_kg: 190.0,
      suggested_reps: 8,
      suggested_rest_seconds: 180,
      suggestion_rationale: "Based on your 5% progression pattern",
      action: "accepted",
      accepted_weight_kg: 190.0,
      accepted_reps: 8,
      progression_type: "percentage",
      readiness_score: 0.85,
      plateau_detected: false,
      interaction_time_ms: 3000,
    }),
  ],
  dailySummaries: [
    createMockExerciseDailySummary({
      user_id: "standard-user-id",
      exercise_name: "Bench Press",
      date: new Date("2024-01-15T00:00:00.000Z"),
      total_volume: 4440.0,
      max_weight: 185.0,
      max_one_rm: 205.0,
      session_count: 1,
    }),
    createMockExerciseDailySummary({
      user_id: "standard-user-id",
      exercise_name: "Squat",
      date: new Date("2024-01-15T00:00:00.000Z"),
      total_volume: 4500.0,
      max_weight: 225.0,
      max_one_rm: 245.0,
      session_count: 1,
    }),
    createMockExerciseDailySummary({
      user_id: "standard-user-id",
      exercise_name: "Deadlift",
      date: new Date("2024-01-15T00:00:00.000Z"),
      total_volume: 2475.0,
      max_weight: 275.0,
      max_one_rm: 305.0,
      session_count: 1,
    }),
  ],
  weeklySummaries: [
    createMockExerciseWeeklySummary({
      user_id: "standard-user-id",
      exercise_name: "Bench Press",
      week_start: new Date("2024-01-15T00:00:00.000Z"),
      avg_volume: 4440.0,
      max_one_rm: 205.0,
      session_count: 1,
      trend_slope: 5.0,
    }),
  ],
  monthlySummaries: [
    createMockExerciseMonthlySummary({
      user_id: "standard-user-id",
      exercise_name: "Bench Press",
      month_start: new Date("2024-01-01T00:00:00.000Z"),
      total_volume: 4440.0,
      max_one_rm: 205.0,
      session_count: 1,
      consistency_score: 0.9,
    }),
  ],
};

// User with WHOOP integration - complete WHOOP data setup
export const userWithWhoopIntegration = {
  user: createMockUser({
    id: "whoop-user-id",
    email: "whoop@example.com",
    firstName: "Whoop",
    lastName: "User",
  }),
  preferences: createMockUserPreferences({
    user_id: "whoop-user-id",
    enable_manual_wellness: false,
  }),
  integration: createMockUserIntegration({
    user_id: "whoop-user-id",
    provider: "whoop",
    externalUserId: "whoop-user-456",
    isActive: true,
  }),
  whoopProfile: createMockWhoopProfile({
    user_id: "whoop-user-id",
    whoop_user_id: "whoop-user-456",
    email: "whoop@example.com",
    first_name: "Whoop",
    last_name: "User",
  }),
  whoopRecovery: createMockWhoopRecovery({
    user_id: "whoop-user-id",
    whoop_recovery_id: "recovery-456",
    cycle_id: "cycle-456",
    date: new Date("2024-01-15T00:00:00.000Z"),
    recovery_score: 88,
    hrv_rmssd_milli: 48.5,
    hrv_rmssd_baseline: 45.0,
    resting_heart_rate: 52,
    resting_heart_rate_baseline: 55,
    respiratory_rate: 13.8,
    respiratory_rate_baseline: 14.2,
  }),
  whoopCycle: createMockWhoopCycle({
    user_id: "whoop-user-id",
    whoop_cycle_id: "cycle-456",
    start: new Date("2024-01-15T00:00:00.000Z"),
    end: new Date("2024-01-16T00:00:00.000Z"),
    day_strain: 18.5,
    average_heart_rate: 72,
    max_heart_rate: 185,
    kilojoule: 2800.0,
    percent_recorded: 98.0,
    distance_meter: 6000,
    altitude_gain_meter: 150,
  }),
  whoopSleep: createMockWhoopSleep({
    user_id: "whoop-user-id",
    whoop_sleep_id: "sleep-456",
    start: new Date("2024-01-14T22:00:00.000Z"),
    end: new Date("2024-01-15T06:00:00.000Z"),
    sleep_performance_percentage: 92,
    total_sleep_time_milli: 28800000,
    sleep_efficiency_percentage: 94.0,
    slow_wave_sleep_time_milli: 8100000,
    rem_sleep_time_milli: 6480000,
    light_sleep_time_milli: 11520000,
    wake_time_milli: 360000,
    arousal_time_milli: 144000,
    disturbance_count: 2,
    sleep_latency_milli: 720000,
    sleep_consistency_percentage: 88.0,
    sleep_need_baseline_milli: 28800000,
    sleep_need_from_sleep_debt_milli: 1800000,
    sleep_need_from_recent_strain_milli: 900000,
  }),
  wellnessData: createMockWellnessData({
    user_id: "whoop-user-id",
    sessionId: null,
    date: new Date("2024-01-15T00:00:00.000Z"),
    energy_level: null,
    sleep_quality: null,
    has_whoop_data: true,
    whoop_data: '{"recovery_score": 88, "sleep_performance": 92}',
  }),
};

// Complete workout history - user with multiple sessions and progression
export const completeWorkoutHistory = {
  user: createMockUser({
    id: "history-user-id",
    email: "history@example.com",
    firstName: "History",
    lastName: "User",
  }),
  preferences: createMockUserPreferences({
    user_id: "history-user-id",
    predictive_defaults_enabled: true,
    progression_type: "adaptive",
  }),
  templates: [
    createMockWorkoutTemplate({
      id: 200,
      name: "Push Day",
      user_id: "history-user-id",
    }),
    createMockWorkoutTemplate({
      id: 201,
      name: "Pull Day",
      user_id: "history-user-id",
    }),
    createMockWorkoutTemplate({
      id: 202,
      name: "Leg Day",
      user_id: "history-user-id",
    }),
  ],
  sessions: [
    createMockWorkoutSession({
      id: 200,
      user_id: "history-user-id",
      templateId: 200,
      workoutDate: new Date("2024-01-08T10:00:00.000Z"),
    }),
    createMockWorkoutSession({
      id: 201,
      user_id: "history-user-id",
      templateId: 201,
      workoutDate: new Date("2024-01-10T10:00:00.000Z"),
    }),
    createMockWorkoutSession({
      id: 202,
      user_id: "history-user-id",
      templateId: 202,
      workoutDate: new Date("2024-01-12T10:00:00.000Z"),
    }),
    createMockWorkoutSession({
      id: 203,
      user_id: "history-user-id",
      templateId: 200,
      workoutDate: new Date("2024-01-15T10:00:00.000Z"),
    }),
  ],
  sessionExercises: [
    // Session 200 - Push Day 1
    createMockSessionExercise({
      id: 200,
      user_id: "history-user-id",
      sessionId: 200,
      exerciseName: "Bench Press",
      weight: 175.0,
      reps: 8,
      sets: 3,
      unit: "kg",
      one_rm_estimate: 195.0,
      volume_load: 4200.0,
    }),
    createMockSessionExercise({
      id: 201,
      user_id: "history-user-id",
      sessionId: 200,
      exerciseName: "Overhead Press",
      weight: 95.0,
      reps: 8,
      sets: 3,
      unit: "kg",
      one_rm_estimate: 105.0,
      volume_load: 2280.0,
    }),
    // Session 201 - Pull Day 1
    createMockSessionExercise({
      id: 202,
      user_id: "history-user-id",
      sessionId: 201,
      exerciseName: "Deadlift",
      weight: 255.0,
      reps: 5,
      sets: 3,
      unit: "kg",
      one_rm_estimate: 280.0,
      volume_load: 3825.0,
    }),
    createMockSessionExercise({
      id: 203,
      user_id: "history-user-id",
      sessionId: 201,
      exerciseName: "Pull-ups",
      weight: 0,
      reps: 10,
      sets: 3,
      unit: "kg",
      one_rm_estimate: 85.0,
      volume_load: 0,
    }),
    // Session 202 - Leg Day 1
    createMockSessionExercise({
      id: 204,
      user_id: "history-user-id",
      sessionId: 202,
      exerciseName: "Squat",
      weight: 205.0,
      reps: 5,
      sets: 4,
      unit: "kg",
      one_rm_estimate: 225.0,
      volume_load: 4100.0,
    }),
    // Session 203 - Push Day 2 (progression)
    createMockSessionExercise({
      id: 205,
      user_id: "history-user-id",
      sessionId: 203,
      exerciseName: "Bench Press",
      weight: 180.0,
      reps: 8,
      sets: 3,
      unit: "kg",
      one_rm_estimate: 200.0,
      volume_load: 4320.0,
    }),
    createMockSessionExercise({
      id: 206,
      user_id: "history-user-id",
      sessionId: 203,
      exerciseName: "Overhead Press",
      weight: 97.5,
      reps: 8,
      sets: 3,
      unit: "kg",
      one_rm_estimate: 107.5,
      volume_load: 2340.0,
    }),
  ],
  dailySummaries: [
    createMockExerciseDailySummary({
      user_id: "history-user-id",
      exercise_name: "Bench Press",
      date: new Date("2024-01-08T00:00:00.000Z"),
      total_volume: 4200.0,
      max_weight: 175.0,
      max_one_rm: 195.0,
      session_count: 1,
    }),
    createMockExerciseDailySummary({
      user_id: "history-user-id",
      exercise_name: "Bench Press",
      date: new Date("2024-01-15T00:00:00.000Z"),
      total_volume: 4320.0,
      max_weight: 180.0,
      max_one_rm: 200.0,
      session_count: 1,
    }),
  ],
  weeklySummaries: [
    createMockExerciseWeeklySummary({
      user_id: "history-user-id",
      exercise_name: "Bench Press",
      week_start: new Date("2024-01-08T00:00:00.000Z"),
      avg_volume: 4200.0,
      max_one_rm: 195.0,
      session_count: 1,
      trend_slope: 2.5,
    }),
    createMockExerciseWeeklySummary({
      user_id: "history-user-id",
      exercise_name: "Bench Press",
      week_start: new Date("2024-01-15T00:00:00.000Z"),
      avg_volume: 4320.0,
      max_one_rm: 200.0,
      session_count: 1,
      trend_slope: 2.5,
    }),
  ],
  monthlySummaries: [
    createMockExerciseMonthlySummary({
      user_id: "history-user-id",
      exercise_name: "Bench Press",
      month_start: new Date("2024-01-01T00:00:00.000Z"),
      total_volume: 8520.0,
      max_one_rm: 200.0,
      session_count: 2,
      consistency_score: 0.85,
    }),
  ],
};

// Collection of all mock data sets
export const mockDataSets = {
  standardUser,
  proUser,
  workoutWithExercises,
  userWithWhoopIntegration,
  completeWorkoutHistory,
};

// Utility function to get deep copy of mock data to prevent test pollution
export function getMockData<T = any>(key: keyof typeof mockDataSets): T {
  return JSON.parse(JSON.stringify(mockDataSets[key])) as T;
}